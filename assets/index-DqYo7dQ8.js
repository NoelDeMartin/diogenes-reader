var iT=Object.defineProperty;var by=t=>{throw TypeError(t)};var oT=(t,e,n)=>e in t?iT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xt=(t,e,n)=>oT(t,typeof e!="symbol"?e+"":e,n),aT=(t,e,n)=>e.has(t)||by("Cannot "+n);var ha=(t,e,n)=>(aT(t,e,"read from private field"),n?n.call(t):e.get(t)),vy=(t,e,n)=>e.has(t)?by("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const lT="modulepreload",cT=function(t){return"/diogenes-reader/"+t},wy={},So=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(c=>{if(c=cT(c),c in wy)return;wy[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":lT,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Th=(t,e)=>e.some(n=>t instanceof n);let _y,xy;function uT(){return _y||(_y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return xy||(xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rh=new WeakMap,Od=new WeakMap,Cu=new WeakMap;function fT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ci(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return Cu.set(e,t),e}function hT(t){if(Rh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rh.set(t,e)}let Ih={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function j_(t){Ih=t(Ih)}function pT(t){return dT().includes(t)?function(...e){return t.apply(Ch(this),e),ci(this.request)}:function(...e){return ci(t.apply(Ch(this),e))}}function mT(t){return typeof t=="function"?pT(t):(t instanceof IDBTransaction&&hT(t),Th(t,uT())?new Proxy(t,Ih):t)}function ci(t){if(t instanceof IDBRequest)return fT(t);if(Od.has(t))return Od.get(t);const e=mT(t);return e!==t&&(Od.set(t,e),Cu.set(e,t)),e}const Ch=t=>Cu.get(t);function kh(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ci(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ci(o.result),l.oldVersion,l.newVersion,ci(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function Ey(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),ci(n).then(()=>{})}const gT=["get","getKey","getAll","getAllKeys","count"],yT=["put","add","delete","clear"],Dd=new Map;function Ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gT.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Dd.set(e,i),i}j_(t=>({...t,get:(e,n,r)=>Ay(e,n)||t.get(e,n,r),has:(e,n)=>!!Ay(e,n)||t.has(e,n)}));const bT=["continue","continuePrimaryKey","advance"],Sy={},Oh=new WeakMap,U_=new WeakMap,vT={get(t,e){if(!bT.includes(e))return t[e];let n=Sy[e];return n||(n=Sy[e]=function(...r){Oh.set(this,U_.get(this)[e](...r))}),n}};async function*wT(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,vT);for(U_.set(n,e),Cu.set(n,Ch(e));e;)yield n,e=await(Oh.get(n)||e.continue()),Oh.delete(n)}function Ty(t,e){return e===Symbol.asyncIterator&&Th(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Th(t,[IDBIndex,IDBObjectStore])}j_(t=>({...t,get(e,n,r){return Ty(e,n)?wT:t.get(e,n,r)},has(e,n){return Ty(e,n)||t.has(e,n)}}));var B_={},_T=Object.defineProperty,xT=(t,e,n)=>e in t?_T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>xT(t,typeof e!="symbol"?e+"":e,n);function ET(t){return typeof t=="function"?t():t}function AT(t,e,...n){ET(t)||We(e,...n)}function We(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}const Oi="items";let ST=class{constructor(e){Mn(this,"db",null),Mn(this,"namespace"),this.namespace=e}async has(e){return await(await this.getConnection()).get(Oi,e)!==void 0}async get(e){return(await this.getConnection()).get(Oi,e)}async require(e){return await this.get(e)??We(`Missing required '${e}' IndexedDBMap value`)}async set(e,n){await(await this.getConnection()).put(Oi,n,e)}async delete(e){await(await this.getConnection()).delete(Oi,e)}async clear(){await(await this.getConnection()).clear(Oi)}close(){this.db&&(this.db.close(),this.db=null)}async getConnection(){return this.db=this.db??await this.connect(),this.db}async connect(){const e=`${this.namespace}-map`;return await kh(e,1,{upgrade(n){n.objectStoreNames.contains(Oi)||n.createObjectStore(Oi)},blocked:()=>We(`Could not open '${e}' IndexedDB`)})}};function TT(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const RT=TT().Error;let cr=class extends RT{constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};function IT(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function Pd(t,e){const[n,r]=IT(t,e);return n>r?1:r>n?-1:0}function rm(t,e){return t===e?!0:!yt(t)||!yt(e)?!1:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():Object.keys(t).length!==Object.keys(e).length?!1:!Object.keys(t).some(n=>!rm(t[n],e[n]))}function CT(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}const H_=Array.isArray.bind(Array);function Fa(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function mn(t,e){return t instanceof e}function kT(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function yt(t){return typeof t=="object"&&t!==null}function OT(t){return typeof t=="string"||t instanceof String}function Dh(t){return typeof t>"u"||t===null}function Nr(t){t={...t};for(const e in t)DT(t,e)&&(t[e]=Nr(t[e]));return t}function Hl(t,e){let n=t;const r=e.split(".");for(const s of r){if(!yt(n))return;n=n[s]}return n}Object.entries.bind(Object);function Vc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V_(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function ii(t,e){const n={},r=Array.isArray(e)?e:[e];for(const s of r)s in t&&(n[s]=t[s]);return n}function DT(t,e){let n;return Vc(t,e)&&yt(n=t[e])&&n.constructor===Object}function $s(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function Fn(t){return $s(t,e=>e==null)}function q_(t,e,n){t.prototype[e]=n}function Ct(t){return String(t)}function PT(t){return t instanceof Error?t:new Error(Ct(t))}function $T(t){t.splice(0,t.length)}function ta(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function NT(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function LT(t,e){return t.length!==e.length?!1:!t.some((n,r)=>e[r]!==n)}function ln(t,e){return e?t.filter(e):t.filter(n=>!!n)}function MT(t,e){for(const n of t)if(e(n))return n;return null}function FT(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function jT(t,e){const n=typeof e=="string"?r=>Ct(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function UT(t){return t.length===0}function BT(t,e){return t.map(n=>n[e])}function HT(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function VT(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function Yn(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function qT(t,e){return t.splice(Number(e),1).length>0}function z_(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function ja(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const c=Hl(t.find(u=>Hl(u,l)!==void 0&&Hl(u,l)!==null),l);r[l]=s(c)}return Hl(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(c,u)=>Pd(i(u,l),i(c,l)):l=>(c,u)=>Pd(i(c,l),i(u,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,c)=>Pd(c,l):a(e);case"object":{const l=e.map(c=>a(c));return(c,u)=>{for(const d of l){const f=d(c,u);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function nr(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function zT(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function ar(t,e){return Array.isArray(e)?ln(t,n=>e.indexOf(n)===-1):WT(t,t.indexOf(e))}function WT(t,e){return sm(t,[e])}function sm(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function gn(t,e=!1){return Array.isArray(t)||kT(t)&&!OT(t)?Array.from(t):e&&t==null?[]:[t]}class W_{constructor(){Mn(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){Yn(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}}let qc=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Mn(qc,"__conjuring"),Mn(qc,"__reservedProperties",new WeakMap);let KT=class K_{constructor(e){Mn(this,"keysToItems"),Mn(this,"itemsToKeys"),Mn(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>Ct(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new K_(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??We(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},rs=class G_{constructor(){Mn(this,"resolveListeners",[]),Mn(this,"rejectListeners",[]),Mn(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new G_;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>Yn(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>Yn(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>Yn(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}},im=class{constructor(e=1){Mn(this,"count"),Mn(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}};const Ry={},J_=class X_{static get instance(){return this._instance=this._instance??new X_}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,Ry);if(n===Ry)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Mn(J_,"_instance");let GT=J_;const pr=GT.instance;function zc(t){return!(!t||["0","false"].includes(t))}const $d={},ui={},Bo={};function Iy(t,e){return ui[t]=ui[t]??rs.from(e()),ui[t]}function xc(t,e){return $d[t]=$d[t]??e(),$d[t]}function JT(t){const e={};return(...n)=>"result"in e?e.result:e.result=t(...n)}function Cy(t,e,n){var r,s;return(r=Bo[t])!=null&&r.has(e)||Y_(t,e,n()),((s=Bo[t])==null?void 0:s.get(e))??We()}function ky(t,e){var n;return((n=Bo[t])==null?void 0:n.get(e))??null}function Oy(t){gn(t??Object.keys(ui)).forEach(e=>delete ui[e])}function Dy(t,e){var n;(n=Bo[t])==null||n.delete(e)}function Py(t,e){var n;ui[t]=ui[t]??new rs,(n=ui[t])==null||n.resolve(e)}function Y_(t,e,n){(Bo[t]??(Bo[t]=new WeakMap)).set(e,n)}function Nd(t){if(!t)return null;try{const e=new Date(t),n=e.getTime();return isNaN(n)||n===0?null:e}catch{return null}}function Q_(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&B_.VITEST?"unit":null}function ku(){var t;if(Q_())return"testing";if(typeof process=="object"&&(t=B_)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function yi(){return ku()==="development"}function tl(t){return ku()!=="testing"?!1:!t||t===Q_()}function XT(){const t=ku();return t==="development"||t==="testing"}function YT(t){return nR(t)}function Ld(t,e){let n=t[0],r=t[1],s=t[2],i=t[3];n=vn(n,r,s,i,e[0],7,-680876936),i=vn(i,n,r,s,e[1],12,-389564586),s=vn(s,i,n,r,e[2],17,606105819),r=vn(r,s,i,n,e[3],22,-1044525330),n=vn(n,r,s,i,e[4],7,-176418897),i=vn(i,n,r,s,e[5],12,1200080426),s=vn(s,i,n,r,e[6],17,-1473231341),r=vn(r,s,i,n,e[7],22,-45705983),n=vn(n,r,s,i,e[8],7,1770035416),i=vn(i,n,r,s,e[9],12,-1958414417),s=vn(s,i,n,r,e[10],17,-42063),r=vn(r,s,i,n,e[11],22,-1990404162),n=vn(n,r,s,i,e[12],7,1804603682),i=vn(i,n,r,s,e[13],12,-40341101),s=vn(s,i,n,r,e[14],17,-1502002290),r=vn(r,s,i,n,e[15],22,1236535329),n=wn(n,r,s,i,e[1],5,-165796510),i=wn(i,n,r,s,e[6],9,-1069501632),s=wn(s,i,n,r,e[11],14,643717713),r=wn(r,s,i,n,e[0],20,-373897302),n=wn(n,r,s,i,e[5],5,-701558691),i=wn(i,n,r,s,e[10],9,38016083),s=wn(s,i,n,r,e[15],14,-660478335),r=wn(r,s,i,n,e[4],20,-405537848),n=wn(n,r,s,i,e[9],5,568446438),i=wn(i,n,r,s,e[14],9,-1019803690),s=wn(s,i,n,r,e[3],14,-187363961),r=wn(r,s,i,n,e[8],20,1163531501),n=wn(n,r,s,i,e[13],5,-1444681467),i=wn(i,n,r,s,e[2],9,-51403784),s=wn(s,i,n,r,e[7],14,1735328473),r=wn(r,s,i,n,e[12],20,-1926607734),n=_n(n,r,s,i,e[5],4,-378558),i=_n(i,n,r,s,e[8],11,-2022574463),s=_n(s,i,n,r,e[11],16,1839030562),r=_n(r,s,i,n,e[14],23,-35309556),n=_n(n,r,s,i,e[1],4,-1530992060),i=_n(i,n,r,s,e[4],11,1272893353),s=_n(s,i,n,r,e[7],16,-155497632),r=_n(r,s,i,n,e[10],23,-1094730640),n=_n(n,r,s,i,e[13],4,681279174),i=_n(i,n,r,s,e[0],11,-358537222),s=_n(s,i,n,r,e[3],16,-722521979),r=_n(r,s,i,n,e[6],23,76029189),n=_n(n,r,s,i,e[9],4,-640364487),i=_n(i,n,r,s,e[12],11,-421815835),s=_n(s,i,n,r,e[15],16,530742520),r=_n(r,s,i,n,e[2],23,-995338651),n=xn(n,r,s,i,e[0],6,-198630844),i=xn(i,n,r,s,e[7],10,1126891415),s=xn(s,i,n,r,e[14],15,-1416354905),r=xn(r,s,i,n,e[5],21,-57434055),n=xn(n,r,s,i,e[12],6,1700485571),i=xn(i,n,r,s,e[3],10,-1894986606),s=xn(s,i,n,r,e[10],15,-1051523),r=xn(r,s,i,n,e[1],21,-2054922799),n=xn(n,r,s,i,e[8],6,1873313359),i=xn(i,n,r,s,e[15],10,-30611744),s=xn(s,i,n,r,e[6],15,-1560198380),r=xn(r,s,i,n,e[13],21,1309151649),n=xn(n,r,s,i,e[4],6,-145523070),i=xn(i,n,r,s,e[11],10,-1120210379),s=xn(s,i,n,r,e[2],15,718787259),r=xn(r,s,i,n,e[9],21,-343485551),t[0]=oi(n,t[0]),t[1]=oi(r,t[1]),t[2]=oi(s,t[2]),t[3]=oi(i,t[3])}function Ou(t,e,n,r,s,i){return e=oi(oi(e,t),oi(r,i)),oi(e<<s|e>>>32-s,n)}function vn(t,e,n,r,s,i,o){return Ou(e&n|~e&r,t,e,s,i,o)}function wn(t,e,n,r,s,i,o){return Ou(e&r|n&~r,t,e,s,i,o)}function _n(t,e,n,r,s,i,o){return Ou(e^n^r,t,e,s,i,o)}function xn(t,e,n,r,s,i,o){return Ou(n^(e|~r),t,e,s,i,o)}function QT(t){const e=t.length,n=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=t.length;r+=64)Ld(n,ZT(t.substring(r-64,r)));t=t.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)s[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(Ld(n,s),r=0;r<16;r++)s[r]=0;return s[14]=e*8,Ld(n,s),n}function ZT(t){let e;const n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}const $y="0123456789abcdef".split("");function eR(t){let e="",n=0;for(;n<4;n++)e+=$y[t>>n*8+4&15]+$y[t>>n*8&15];return e}function tR(t){for(let e=0;e<t.length;e++)t[e]=eR(t[e]);return t.join("")}function oi(t,e){return t+e&4294967295}function nR(t){return tR(QT(t))}function Z_(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function e0(t=9){return(10**(t-1)).toString().replace(/[01]/g,Z_)}function Un(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,Z_)}function wr(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}async function rR(){await new Promise(()=>{})}async function sR(t){for(;location.href!==t;)await wr({ms:1})}function Ua(t){return iR()[t]}function iR(){const t=new URL(location.href),e={};return t.searchParams.forEach((n,r)=>e[r]=n),e}function Eo(t){return new URL(location.href).searchParams.has(t)}async function oR(t){const e=Object.entries(t).reduce((n,[r,s])=>(s?n.searchParams.set(r,s):n.searchParams.delete(r),n),new URL(location.href));history.pushState(null,document.title,e.href),await sR(e.href)}function t0(t,e=0){const n=10**e;return Math.round(t*n)/n}const aR=Object.getPrototypeOf(Object);function lR(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return Mn(n,"__mixins",e),uR(n,e),n}function cR(t,e){if(e===Object)return;let n=e;do{const r=$s(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==aR)}function uR(t,e=[]){for(const n of e)cR(t,n)}function Du(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return lR(n,r)}function Pu(...t){return Du(...t)}function $u(t,e){var n,r;return((t==null?void 0:t.__mixins)??((r=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:r.__mixins)??[]).includes(e)}async function dR(t,e){for(const n of t){const r=await e(n);if(r)return r}return null}function fR(t){return"then"in t}function n0(t,e=null){return typeof t!="function"?t.catch(()=>e):async(...n)=>{try{return await t(...n)}catch{return e??null}}}function hR(t,e=300,n="..."){return t.length<e?t:t.substring(0,e-n.length)+n}function r0(t,e){return t.match(e)}function s0(t,e){return t.matchAll(e)}function pR(t){return t.split("").reverse().join("")}function om(t){return t.split(/_|-|\s|(?=[A-Z])/)}function Mi(t){const[e,...n]=om(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function am(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function mR(t){return om(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function gR(t){return om(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Qt(t){return br(t)??We(`Failed getting parent directory from '${t}'`)}function yR(t){return i0(t)??We(`Failed getting directory name from '${t}'`)}function bR(t){return wl(t)??We(`Failed parsing url from '${t}'`)}function Ho(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=us(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function Ph(...t){const e=Ho(...t);return e.endsWith("/")?e:e+"/"}function us(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function br(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),us(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function i0(t){t.endsWith("/")||(t=br(t)??t+"/");const e=t.slice(0,-1);return us(t)===e?null:o0(e)}function o0(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function wl(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function a0(t,e){const n=wl(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function vr(t){return a0(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function l0(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function c0(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let u0=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const vR={clear:$T,diff:ta,filter:ln,first:MT,flatMap:FT,groupBy:jT,isEmpty:UT,project:BT,randomItem:HT,randomItems:VT,remove:Yn,removeIndex:qT,replace:z_,sorted:ja,unique:nr,where:zT,without:ar,withoutIndexes:sm};let lm=class extends u0{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};l0(lm,vR);c0(lm,Array);const wR={reverse:pR,toCamelCase:Mi,toSlug:am,toStudlyCase:mR,toTitleCase:gR};let d0=class extends u0{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};l0(d0,wR);c0(d0,String);const _R=[];function Gr(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return _R.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function xR(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function Fe(t,e){if(!e)return xR(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}function ER(){}let AR=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??We(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??We(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??We(this.errorMessage);return Object.getPrototypeOf(e)}};function Jn(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new AR(e,t)):t??We(e)}function SR(t){return typeof t=="function"?t():t}function $h(t,e){const n=typeof e=="function"?e(t):!!e;return new Proxy(t,{get(r,s,i){return n?Reflect.get(r,s,i):()=>{}}})}function f0(t=[]){return lm.create(gn(t))}function Xt(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return KT.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}var TR=Object.defineProperty,RR=(t,e,n)=>e in t?TR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wt=(t,e,n)=>RR(t,typeof e!="symbol"?e+"":e,n);let He=class extends Error{constructor(e,n){super(...n?[e,n]:[e]),this.name=new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};class cm extends He{constructor(e){super(`Could not create document with id ${e} because it is already in use.`),Wt(this,"id"),this.id=e}}let ts=class extends He{constructor(e,n){super(n?`Couldn't find document with id '${e}' in '${n}' Collection.`:`Couldn't find document with id '${e}'`),Wt(this,"id"),Wt(this,"collection"),this.id=e,this.collection=n}};function IR(t){return t instanceof CR||"getProxySubject"in t}let CR=class{constructor(e,n={}){Wt(this,"subject"),Wt(this,"overrides"),this.subject=e,this.overrides={create:(...r)=>e.create(...r),readOne:(...r)=>e.readOne(...r),readMany:(...r)=>e.readMany(...r),update:(...r)=>e.update(...r),delete:(...r)=>e.delete(...r),...n}}getProxySubject(){return this.subject}async create(e,n,r){return this.overrides.create(e,n,r)}async readOne(e,n){return this.overrides.readOne(e,n)}async readMany(e,n){return this.overrides.readMany(e,n)}async update(e,n,r){return this.overrides.update(e,n,r)}async delete(e,n){return this.overrides.delete(e,n)}},Nu=class{constructor(){Wt(this,"rootFilters"),Wt(this,"rootUpdates"),Wt(this,"attributeFilters"),Wt(this,"attributeUpdates"),Wt(this,"documentsIn",(e,n,r)=>r.includes(e)),Wt(this,"documentOverwrite",(e,n)=>{for(const r of Object.getOwnPropertyNames(e))delete e[r];Object.assign(e,n)}),Wt(this,"attributeEq",(e,n,r)=>rm(e[n],r)),Wt(this,"attributeContains",(e,n,r)=>{Array.isArray(r)||(r=[r]);const s=e&&e[n];return Array.isArray(s)?!r.find(i=>!s.find(o=>this.filterValue(o,i))):!1}),Wt(this,"attributeOr",(e,n,r)=>!!r.find(s=>!!this.filterValue(e,{[n]:s}))),Wt(this,"attributeIn",(e,n,r)=>r.includes(e[n])),Wt(this,"attributeUpdate",(e,n,r)=>{if(Array.isArray(r)||!yt(r)){e[n]=r;return}if(this.isOperation(r,this.attributeUpdates)){this.runOperation(r,this.attributeUpdates,e,n);return}if(!yt(e[n])){e[n]=r;return}this.updateAttributes(e[n],r)}),Wt(this,"attributeUpdateItems",(e,n,r)=>{Array.isArray(r)||(r=[r]);for(const{$where:s,$update:i,$override:o,$unset:a}of r){s&&s.$in&&(s.$in=s.$in.map(u=>u.toString()));const l=this.requireArrayProperty("$updateItems",e,n),c=this.filterDocuments(l.reduce((u,d,f)=>({...u,[f]:yt(d)?d:{}}),{}),s||{});i&&Object.keys(c).forEach(u=>{this.updateAttributes(c,{[u]:i}),l[parseInt(u)]=c[u]}),o&&Object.keys(c).forEach(u=>{l[parseInt(u)]=o}),a&&(e[n]=sm(l,Object.keys(c).map(parseInt)))}}),Wt(this,"attributePush",(e,n,r)=>{this.requireArrayProperty("$push",e,n).push(r)}),Wt(this,"attributeUnset",(e,n,r)=>{if(r===!0){delete e[n];return}const s=e[n];if(yt(s)){r=Array.isArray(r)?r:[r];for(const i of r)delete s[i]}}),Wt(this,"attributeApply",(e,n,r)=>{for(const s of r)this.runOperation(s,this.attributeUpdates,e,n)}),Wt(this,"attributeOverwrite",(e,n,r)=>{e[n]=r}),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}filterDocuments(e,n={}){return Object.entries(e).reduce((r,[s,i])=>(this.filterDocument(s,i,n)&&(r[s]=i),r),{})}updateAttributes(e,n){if(this.isOperation(n,{$unset:this.attributeUnset})){const r=n.$unset,s=Array.isArray(r)?r:[r];for(const i of s)this.attributeUnset(e,i,!0);return}if(this.isOperation(n,this.rootUpdates)){const[[r,s]]=Object.entries(n);this.rootUpdates[r](e,s);return}for(const[r,s]of Object.entries(n))this.attributeUpdate(e,r,s)}obtainDocumentId(e){return e??Un()}filterDocument(e,n,r={}){r={...r};for(const[s,i]of Object.entries(this.rootFilters))if(s in r){if(!i(e,n,r[s]))return!1;delete r[s]}return this.filterValue(n,r)}filterValue(e,n={}){return yt(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):yt(e)?!Object.entries(n).find(([r,s])=>!(this.isOperation(s,this.attributeFilters)?this.runOperation(s,this.attributeFilters,e,r):this.attributeEq(e,r,s))):!1:this.attributeEq({value:e},"value",n)}isOperation(e,n){if(!yt(e))return!1;const[r,...s]=Object.keys(e);return!!(r&&s.length===0&&r in n)}runOperation(e,n,...r){const[s,i]=Object.entries(e)[0];return n[s](...r,i)}requireArrayProperty(e,n,r){if(!n||!yt(n)||!Array.isArray(n[r]))throw new Error(`${e} operator can only be applied to array attributes`);return n[r]}},Wc;function Vl(t){for(;t&&IR(t);)t=t.getProxySubject();return t}function kR(){return Wc}function um(){return Wc||We(He,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/core-concepts/engines.html")}function h0(t){if(!t){Wc=void 0;return}Wc=t}var OR=Object.defineProperty,DR=(t,e,n)=>e in t?OR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e,n)=>DR(t,typeof e!="symbol"?e+"":e,n);let p0=class extends He{constructor(e,n,r){super(`Model ${e}: Invalid attributes (${JSON.stringify(n)}).`,r),tt(this,"modelName"),tt(this,"attributes"),this.modelName=e,this.attributes=n}},ai=class extends He{constructor(e,n){super(`Model ${e}: ${n}. Learn more at https://soukai.js.org/guide/core-concepts/models.html`),tt(this,"modelName"),this.modelName=e}},PR=class{constructor(e=null){tt(this,"database"),tt(this,"helper"),tt(this,"lock"),tt(this,"_metadata"),tt(this,"_metadataConnection"),tt(this,"_documentsConnection"),this.database=e?"soukai-"+e:"soukai",this.helper=new Nu,this.lock=xc(`idb-${this.database}`,()=>new im)}async getCollections(){const e=await this.getMetadata();return Object.values(e).filter(({dropped:n})=>!n).map(({name:n})=>n.toString())}async dropCollections(e){await this.lock.run(async()=>{await this.withMetadataTransaction("readwrite",n=>(e.forEach(r=>{var s;n.store.put({name:r,dropped:!0,updates:(((s=this._metadata)==null?void 0:s[r].updates)??1)+1})}),n.done)),this.closeConnections(),await this.getDocumentsConnection()})}async purgeDatabase(){this.closeConnections(),await Promise.all([Ey(`${this.database}-meta`,{blocked:()=>this.throwDatabaseBlockedError()}),Ey(this.database,{blocked:()=>this.throwDatabaseBlockedError()})]),delete this._metadata}async closeConnections(){this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadata,delete this._metadataConnection,delete this._documentsConnection}create(e,n,r){return this.lock.run(async()=>{const s=this.helper.obtainDocumentId(r);if(await this.documentExists(e,s))throw new cm(s);return await this.createDocument(e,s,n),s})}async readOne(e,n){if(!await this.collectionExists(e))throw new ts(n,e);const r=await this.getDocument(e,n);if(!r)throw new ts(n,e);return r}async readMany(e,n){const r={};return(await this.getCollections()).indexOf(e)===-1?r:(await this.withDocumentsTransaction(e,"readonly",s=>{const i=async o=>{if(o)return r[o.key]=o.value,o.continue().then(i)};return s.store.openCursor().then(i)}),this.helper.filterDocuments(r,n))}async update(e,n,r){await this.lock.run(async()=>{const s=await this.getDocument(e,n);if(!s)throw new ts(n,e);this.helper.updateAttributes(s,r),await this.updateDocument(e,n,s)})}async delete(e,n){await this.lock.run(async()=>{if(!await this.documentExists(e,n))throw new ts(n,e);await this.deleteDocument(e,n)})}async collectionExists(e){return(await this.getCollections()).indexOf(e)!==-1}async documentExists(e,n){return!!await this.getDocument(e,n)}async getDocument(e,n){try{return(await this.getCollections()).indexOf(e)===-1?null:await this.withDocumentsTransaction(e,"readonly",r=>r.store.get(n))||null}catch{return null}}async createDocument(e,n,r){const s=await this.getCollections();return s.indexOf(e)===-1&&(await this.createCollection(e),s.push(e)),this.withDocumentsTransaction(e,"readwrite",i=>(i.store.add(r,n),i.done))}async updateDocument(e,n,r){if((await this.getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",s=>(s.store.put(r,n),s.done))}async deleteDocument(e,n){if((await this.getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",r=>(r.store.delete(n),r.done))}async withMetadataTransaction(e,n){const r=this._metadataConnection=this._metadataConnection||await kh(`${this.database}-meta`,1,{upgrade(s){s.objectStoreNames.contains("collections")||s.createObjectStore("collections",{keyPath:"name"})},blocked:()=>this.throwDatabaseBlockedError()});return this.retryingOnTransactionInactive(()=>{const s=r.transaction("collections",e);return n(s)})}async withDocumentsTransaction(e,n,r){const s=await this.getDocumentsConnection();return this.retryingOnTransactionInactive(()=>{const i=s.transaction(e,n);return r(i)})}async getDocumentsConnection(){const e=await this.getMetadata(),n=Object.values(e).reduce((r,{updates:s})=>r+(s??1),0);return this._documentsConnection=this._documentsConnection||await kh(this.database,n,{upgrade(r){for(const{name:s,dropped:i}of Object.values(e))r.objectStoreNames.contains(s)&&!i||!r.objectStoreNames.contains(s)&&i||(i?r.deleteObjectStore(s):r.createObjectStore(s))},blocked:()=>this.throwDatabaseBlockedError()})}async getMetadata(){return this._metadata??(this._metadata=await this.initializeMetadata())}async initializeMetadata(){return(await this.withMetadataTransaction("readonly",e=>e.store.getAll())).reduce((e,n)=>(e[n.name]=n,e),{})}retryingOnTransactionInactive(e){try{return e()}catch(n){if(!(n instanceof Error)||!n.name.toLowerCase().includes("inactive")&&!n.message.toLowerCase().includes("inactive"))throw n;return e()}}async createCollection(e){await this.withMetadataTransaction("readwrite",n=>(n.store.add({name:e}),n.done)),delete this._metadata,this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection)}throwDatabaseBlockedError(){throw new He("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}},rr=class Nh{constructor(e){tt(this,"value"),this.value=String(e)}static from(e){return e instanceof Nh?e:new Nh(e)}equals(e){return this.value===e.value}toString(){return this.value}};const $R={},NR={},Md=new WeakMap;let Ec=new WeakMap;function Ny(t){if(t==null)return $R;switch(typeof t){case"string":return xc(`listeners-string-key-${t}`,()=>new String(t));case"number":return xc(`listeners-number-key-${t}`,()=>new Number(t));case"boolean":return xc(`listeners-boolean-key-${t}`,()=>new Boolean(t));case"object":return t;default:return NR}}function LR(t,e,n){Ec.has(t)||Ec.set(t,{});const r=Ec.get(t),s=r[e]??(r[e]=[]);return s.push(n),()=>Yn(s,n)}async function Ly(...t){var e;const n="__attributeGetters"in t[0]?t[0]:t[0].static(),r="__attributeGetters"in t[0]?null:t[0],s=t[1],i=t[2],o=r??n,a=(e=Ec.get(n))==null?void 0:e[s],l=Ny(s),c=Ny(i),u=Md.has(l)?Md.get(l):Fe(new WeakMap,f=>Md.set(l,f)),d=u.has(c)?u.get(c):Fe(new WeakSet,f=>u.set(c,f));!a||d.has(o)||(d.add(o),await Promise.all(a.map(f=>r?f(r,i):f(i))),d.delete(o))}const pa=new WeakMap;function My(t){const e=t.target,[n,r]=pa.get(e)??[t.getTargetEngine(),0],s=()=>{const[o,a]=pa.get(e);if(a>1){pa.set(e,[o,a-1]);return}pa.delete(e),e.setEngine(o)},i=o=>{const a=o();return a instanceof Promise?a.then(()=>Fe(a,()=>s())):Fe(a,()=>s())};return pa.set(e,[n,r+1]),e.setEngine(t.engine),t.operation?i(t.operation):new Proxy(e,{get(o,a,l){const c=Reflect.get(o,a,l);return typeof c!="function"?(s(),c):(...u)=>i(()=>c.call(o,...u))}})}function Fy(t,e){let n=t;for(;n;){if(n!==e){n=Object.getPrototypeOf(n);continue}return!0}return!1}let Kc=class{constructor(e,n,r,s){tt(this,"name"),tt(this,"parent"),tt(this,"relatedClass"),tt(this,"foreignKeyName"),tt(this,"localKeyName"),tt(this,"enabled",!0),tt(this,"deleteStrategy",null),tt(this,"_related"),this.parent=e,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=s||n.primaryKey}get loaded(){return this.related!==void 0}get related(){return this._related}set related(e){const n=this._related;this._related=e,this.onRelatedUpdated(n,e)}static(){return this.constructor}enable(){this.enabled=!0}disable(){this.enabled=!1}resolve(){return this.load()}isEmpty(){return null}async getModels(){return this.loaded||await this.load(),this.getLoadedModels()}getLoadedModels(){return this.related?gn(this.related):[]}unload(){this.related=void 0}onDelete(e){return this.deleteStrategy=e,this}clone(e={}){const n=e.clones??new WeakMap,r=e.constructors??new WeakMap,s=Object.create(Object.getPrototypeOf(this));return s.name=this.name,s.parent=this.parent,s.foreignKeyName=this.foreignKeyName,s.localKeyName=this.localKeyName,s.deleteStrategy=this.deleteStrategy,s.enabled=this.enabled,s.relatedClass=r.get(this.relatedClass)??this.relatedClass,this.related===null?s.related=null:Array.isArray(this.related)?s.related=this.related.map(i=>i.clone({clones:n,constructors:r})):this.related&&(s.related=this.related.clone({clones:n,constructors:r})),s}initializeInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.setForeignAttributes(this.parent),r.addRelated(this.parent))}}clearInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.clearForeignAttributes(this.parent),r.removeRelated(this.parent))}}isInverseOf(e){const n=r=>e instanceof r;return this.static().inverseBelongsToRelationClasses.some(n)?Fy(this.parent.constructor,e.relatedClass)&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName:this.static().inverseHasRelationClasses.some(n)?Fy(e.parent.constructor,this.relatedClass)&&this.foreignKeyName===e.foreignKeyName&&this.localKeyName===e.localKeyName:!1}onRelatedUpdated(e,n){}};tt(Kc,"inverseHasRelationClasses",[]),tt(Kc,"inverseBelongsToRelationClasses",[]);let di=class extends Kc{constructor(e,n,r,s){super(e,n,r||Mi(n.modelName+"_"+n.primaryKey+"s"),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Fe(n,()=>{!this.assertLoaded("attach")||this.isRelated(n)||(this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n))})}async create(e={}){const n=this.attach(e);return await n.save(),n}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.related=(this.related??[]).concat(e))}removeRelated(e){var n;(n=this.related)!=null&&n.includes(e)&&(this.related=ar(this.related,e))}isRelated(e){var n;return!!((n=this.related)!=null&&n.includes(e))}onRelatedUpdated(e,n){}assertLoaded(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new He(`The "${e}" method can't be called before loading the relationship`)}},To=class extends di{isEmpty(){return this.parent.getAttribute(this.foreignKeyName).length===0}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?[]:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.all({$in:e}):await this.relatedClass.all({[this.localKeyName]:{$or:[...e.map(n=>({$eq:n})),...e.map(n=>({$contains:n}))]}}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)||this.parent.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)&&this.parent.setAttribute(this.foreignKeyName,ar(r,n))}},na=class extends Kc{constructor(e,n,r,s){super(e,n,r||Mi(n.modelName+"_"+n.primaryKey),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Fe(n,()=>{if(this.loaded&&this.related&&!this.isRelated(n))throw new He(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n)})}addRelated(e){e!==this.related&&(this.related=e)}removeRelated(e){e===this.related&&(this.related=null)}isRelated(e){return e===this.related}onRelatedUpdated(e,n){}},Ba=class extends na{isEmpty(){return!this.parent.getAttribute(this.foreignKeyName)}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?null:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.find(e):await this.relatedClass.first({[this.localKeyName]:e}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);n&&this.parent.setAttribute(this.foreignKeyName,n)}clearForeignAttributes(e){e.getAttribute(this.localKeyName)===this.parent.getAttribute(this.foreignKeyName)&&this.parent.setAttribute(this.foreignKeyName,null)}},Ro=class extends di{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.all({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,ar(r,n))}},Fi=class extends na{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.first({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,ar(r,n))}};const Ie={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},jy=Object.values(Ie);function Lh(t,e,n,r=!1){let s={};if(typeof n=="string"&&jy.indexOf(n)!==-1)s.type=n;else if(typeof n=="object")s=n;else throw new ai(t,`Invalid field definition ${e}`);if(typeof s.type>"u")s={type:Ie.Object,fields:s};else if(jy.indexOf(s.type)===-1)throw new ai(t,`Invalid field definition ${e}`);switch(r||(s.required=!!s.required),s.type){case Ie.Object:if(typeof s.fields>"u")throw new ai(t,`Field definition of type object requires fields attribute ${e}`);for(const i in s.fields)Vc(s.fields,i)&&(s.fields[i]=Lh(t,i,s.fields[i]));break;case Ie.Array:if(typeof s.items>"u")throw new ai(t,`Field definition of type array requires items attribute. Field: '${e}'`);s.items=Lh(t,"items",s.items,!0);break}return s}function m0(t){return t.type===Ie.Array}function g0(t,e){for(const[n,r]of Object.entries(e)){if(!(n in t))switch(r.type){case Ie.Object:t[n]={};break;case Ie.Array:t[n]=[];break;default:t[n]=void 0;break}if(r.type===Ie.Object){const s=t[n];if(!yt(s))throw new He(`Invalid value for field ${n}`);t[n]=g0(s,r.fields)}}return t}function Mh(t,e){for(const[n,r]of Object.entries(e)){if(r.required&&(!(n in t)||Dh(t[n])))throw new He(`The ${n} attribute is required.`);if(n in t&&!Dh(t[n])&&r.type===Ie.Object){const s=t[n];if(!yt(s))throw new He(`Invalid value for field ${n}`);Mh(s,r.fields)}}}function Ac(t,e){t=Nr(t);for(const n in t){const r=e[n];if(typeof t[n]>"u")delete t[n];else if(n in e&&r.type===Ie.Object){const s=Ac(t[n],r.fields);Fa(s)?delete t[n]:t[n]=s}}return t}const Tt={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},Uy=Object.values(Tt);function MR(){Fi.inverseBelongsToRelationClasses.length>0||(Fi.inverseBelongsToRelationClasses=[Ba,To],Ro.inverseBelongsToRelationClasses=[Ba,To],Ba.inverseHasRelationClasses=[Fi,Ro],To.inverseHasRelationClasses=[Fi,Ro])}const By=new WeakSet,hn=class Sc{static boot(e){MR();const n={};this.bootedModels.set(this,!0),this.modelName=this.bootModelName(e),this.collection=this.bootCollection(),this.timestamps=this.bootTimestamps(this.timestamps,n);const{fields:r,fieldAliases:s}=this.bootFields(this.fields,this.primaryKey,this.timestamps,n);this.fields=r,this.fieldAliases=s;const{classFields:i,relations:o,attributeGetters:a,attributeSetters:l}=this.bootClassDefinitions();this.classFields=i,this.relations=o,this.__attributeGetters=a,this.__attributeSetters=l;const c=this.bootHooks(this.hooks);this.hooks=c}static ensureBooted(){this.bootedModels.has(this)||this.boot()}static async updateSchema(e){await this.performSchemaUpdate(e),await Ly(this,"schema-updated",e)}static create(e={}){return new this(e).save()}static createFromEngineDocument(e,n){return this.instance().createFromEngineDocument(e,n)}static createManyFromEngineDocuments(e){return this.instance().createManyFromEngineDocuments(e)}static async findOrFail(e){return await this.find(e)??We(`Failed getting required model ${e}`)}static async find(e){this.ensureBooted();try{const n=await this.requireEngine().readOne(this.collection,this.instance().serializeKey(e));return await this.createFromEngineDocument(e,n)}catch{return null}}static async all(e){this.ensureBooted();const n=await this.requireEngine().readMany(this.collection,e);return await this.createManyFromEngineDocuments(n)}static async first(e){const[n]=await this.all(e);return n||null}static newInstance(...e){return this.instance().newInstance(...e)}static on(e,n){return LR(this,e,n)}static instance(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}static hasAutomaticTimestamp(e){return this.timestamps.indexOf(e)!==-1}static hasAutomaticTimestamps(){return this.timestamps.length>0}static getEngine(){return this.engines.get(this)??kR()}static getFinalEngine(){const e=this.getEngine();return e&&Vl(e)}static requireEngine(){return this.engines.get(this)??um()}static requireFinalEngine(){return Vl(this.requireEngine())}static setEngine(e){if(!e){this.engines.delete(this);return}this.engines.set(this,e)}static withEngine(e,n){return My({target:this,getTargetEngine:()=>this.engines.get(this),engine:e,operation:n})}static async withCollection(e="",n){const r=this.collection;if(typeof e!="string"&&(n=e,e=""),!n)throw new He("Invalid method given to withCollection (this is an internal error, please report this bug)");this.collection=e||r;try{return await n()}finally{this.collection=r}}static async withoutTimestamps(e){return this.ignoringTimestamps.set(this,!0),Fe(await e(),()=>this.ignoringTimestamps.delete(this))}static pureInstance(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}static bootModelName(e){const n=Object.getOwnPropertyDescriptor(this,"modelName");return(n==null?void 0:n.value)??e??this.name}static bootCollection(){let e=this;for(;e!==Sc&&(!e.hasOwnProperty("collection")||By.has(e));)e=Object.getPrototypeOf(e);return e===Sc&&By.add(this),e.collection??this.pureInstance().getDefaultCollection()}static bootTimestamps(e,n){if(typeof e!="boolean"&&typeof e<"u"&&!Array.isArray(e))throw new ai(this.modelName,"Invalid timestamps definition");if(e===!1)return[];Array.isArray(e)||(e=Uy);const r=e.find(s=>!Uy.includes(s));if(r)throw new ai(this.modelName,`Invalid timestamp field defined (${r})`);for(const s of e)n[s]={type:Ie.Date,required:!1};return e}static bootFields(e,n,r,s){if(typeof e>"u")return s[n]={type:Ie.Key,required:!1},{fields:s,fieldAliases:{}};const i={};for(const[o,a]of Object.entries(e)){if(!Vc(e,o))continue;const l=s[o]=Lh(this.modelName,o,a);if(l.alias&&(i[o]=l.alias,i[l.alias]=o),r.includes(o)&&(l.type!==Ie.Date||l.required))throw new ai(this.modelName,`Field ${o} definition must be type Date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/core-concepts/models.html#automatic-timestamps`)}return n in s||(s[n]={type:Ie.Key,required:!1}),{fields:s,fieldAliases:i}}static bootClassDefinitions(){const e=this.pureInstance(),n=["_engine","_recentlyDeletedPrimaryKey"],r=Object.getOwnPropertyNames(e).concat(n),s=[],i=new Map,o=new Map;let a=Object.getPrototypeOf(e);for(;a!==Sc.prototype;){a.constructor.classFields&&r.push(...a.constructor.classFields);for(const[l,c]of Object.entries(Object.getOwnPropertyDescriptors(a))){const u=l;typeof c.value=="function"&&(u.endsWith("Relationship")?s.push(u.slice(0,-12)):u.match(/get.+Attribute/)?i.set(Mi(u.slice(3,-9)),e[u]):u.match(/set.+Attribute/)&&o.set(Mi(u.slice(3,-9)),e[u]))}a=Object.getPrototypeOf(a)}return{classFields:nr(r),relations:nr(s),attributeGetters:i,attributeSetters:o}}static bootHooks(e){return e??{}}static async performSchemaUpdate(e){const n=e.primaryKey??"id",r={},s=this.bootTimestamps(e.timestamps,r),i=this.bootHooks(e.hooks),{fields:o,fieldAliases:a}=this.bootFields(e.fields,n,s,r);this.primaryKey=n,this.timestamps=s,this.hooks=i,this.fields=o,this.fieldAliases=a}constructor(e={},n=!1){var r;if(!("__pureInstance"in e))return this.static().ensureBooted(),this.initializeProxy(),this.initialize(e,n),(r=this.static("hooks").afterInitialize)==null||r.call(this._proxy),this._proxy}static(e){const n=this.constructor;return e?n[e]:n}newInstance(...e){const n=this.constructor;return new n(...e)}async fresh(){const e=this.getPrimaryKey(),n=e?await this.static().find(e):null;if(!n)throw new He(`Couldn't get fresh instance for ${this.static("modelName")} with id '${e}'`);return n}update(e={}){e=this.castAttributes(e,this.static("fields"));for(const n in e)this.setAttribute(n,e[n]);return this.save()}hasRelation(e){return this.static("relations").indexOf(e)!==-1}getRelation(e){return this._relations[e]||null}requireRelation(e){return this._relations[e]??We(He,`Attempting to use undefined ${e} relation.`)}getEngine(){return this._engine??this.static().getEngine()}getFinalEngine(){const e=this.getEngine();return e&&Vl(e)}requireEngine(){return this._engine??this.static().requireEngine()}requireFinalEngine(){return Vl(this.requireEngine())}async loadRelation(e){const n=this.requireRelation(e),r=await n.relatedClass.withEngine(this.requireEngine(),()=>n.load());return this.emit("relation-loaded",n),r}async loadRelationIfUnloaded(e){const n=this.requireRelation(e);return n.loaded?n.getLoadedModels():this.loadRelation(e)}unloadRelation(e){this.requireRelation(e).unload()}getRelationModel(e){var n;const r=this.requireRelation(e);return r instanceof di?(console.warn(`You're getting a single model from the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),((n=r.related)==null?void 0:n[0])??null):r.related??null}getRelationModels(e){const n=this.requireRelation(e);return n instanceof na?n.related?[n.related]:null:n.related??null}setRelationModel(e,n){const r=this.requireRelation(e);if(r instanceof di){console.warn(`You're setting a single model for the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),r.related=[n];return}r.related=n}setRelationModels(e,n){const r=this.requireRelation(e),s=()=>{if(n===null||r instanceof di)return n;if(n.length>0)throw new He("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return n[0]??null};r.related=s()}isRelationLoaded(e){return this.requireRelation(e).loaded}hasAttribute(e){const n=e.split(".");let r=Ac(this._attributes,this.static("fields"));for(const s of n){if(!yt(r)||!(s in r))return!1;r=r[s]}return r!==void 0}setAttribute(e,n){const r=this.static().fieldAliases[e],s=this.getAttribute(e);this.hasAttributeSetter(e)?this.callAttributeSetter(e,n):this.setAttributeValue(e,n),r&&this.attributeValueChanged(this.getAttribute(r),n)&&this.setAttribute(r,n),this.attributeValueChanged(s,n)&&this.emit("modified",e)}setAttributeValue(e,n){this._attributes[e]=n=this.castAttribute(n,{definition:this.static("fields")[e]}),this.markAttributeDirty(e,this._originalAttributes[e],n)?this._dirtyAttributes[e]=n:delete this._dirtyAttributes[e]}hasAttributeSetter(e){var n;return this.static("__attributeSetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.set)}callAttributeSetter(e,n){var r;const s=this.static("__attributeSetters").get(e)??((r=this.static("fields")[e])==null?void 0:r.set);return s==null?void 0:s.call(this,n)}getOriginalAttribute(e){return this._originalAttributes[e]}getDeletedPrimaryKey(){return this._recentlyDeletedPrimaryKey??null}setOriginalAttribute(e,n){n=this.castAttribute(n,{definition:this.static("fields")[e]}),this._originalAttributes[e]=n,this._attributes[e]=n,delete this._dirtyAttributes[e]}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r)}getMalformedDocumentAttributes(){return this._malformedDocumentAttributes}setMalformedDocumentAttributes(e){this._malformedDocumentAttributes=e}setEngine(e){if(!e){delete this._engine;return}this._engine=e}withEngine(e,n){return My({target:this,getTargetEngine:()=>this._engine,operation:n&&(()=>n(this)),engine:e})}async withoutTimestamps(e){return this.static().ignoringTimestamps.set(this,!0),Fe(await e(),()=>this.static().ignoringTimestamps.delete(this))}getAttribute(e,n=!1){return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,n)}getAttributeValue(e,n=!1){const r=e.split(".");let s=this.getAttributes(n);for(;r.length>0;){const i=s[r.shift()];if(!yt(i))return i;s=i}return s}getAttributes(e=!1){return e?Nr(this._attributes):Ac(this._attributes,this.static("fields"))}hasAttributeGetter(e){var n;return this.static("__attributeGetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.get)}callAttributeGetter(e){var n;const r=this.static("__attributeGetters").get(e)??((n=this.static("fields")[e])==null?void 0:n.get);return r==null?void 0:r.call(this)}unsetAttribute(e){Vc(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],this.markAttributeDirty(e,this._originalAttributes[e],void 0)?this._dirtyAttributes[e]=void 0:delete this._dirtyAttributes[e])}hasIncompleteAttributes(){try{return Mh(this._attributes,this.static("fields")),!1}catch{return!0}}is(e){return this.getPrimaryKey()===e.getPrimaryKey()}isDirty(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}cleanDirty(){this._originalAttributes=Nr(this._attributes),this._dirtyAttributes={},this._exists=!0}reset(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=Nr(this._attributes)}getPrimaryKey(){return this._attributes[this.static("primaryKey")]??null}getSerializedPrimaryKey(){const e=this.getPrimaryKey();return e?this.serializeKey(e):null}async delete(){return this._exists?(await this.performDelete(),await this.emit("deleted"),this):this}async save(){var e,n;Mh(this._attributes,this.static("fields"));const r=this.exists();return r&&!this.isDirty()?this:(await((e=this.static("hooks").beforeSave)==null?void 0:e.call(this)),await this.beforeSave(),await this.performSave(),await((n=this.static("hooks").afterSave)==null?void 0:n.call(this)),await this.afterSave(),await this.emit(r?"updated":"created"),this)}fixMalformedAttributes(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}touch(){this.setAttribute(Tt.UpdatedAt,new Date)}setExists(e){this._exists=e}exists(){return this._exists}wasRecentlyCreated(){return this._wasRecentlyCreated}wasRecentlyDeleted(){return!!this._recentlyDeletedPrimaryKey}clone(e={}){const n=e.clones??new WeakMap;if(n.has(this))return n.get(this);const r=e.constructors,s=Array.isArray(r)?Fe(new WeakMap,a=>{r.forEach(([l,c])=>a.set(l,c))}):r??new WeakMap,i=s.get(this.static())??this.static(),o=new i(this.getAttributes());n.set(this,o);for(const[a,l]of Object.entries(this._relations))o._relations[a]=Fe(l.clone({clones:n,constructors:s}),c=>c.parent=o);return e.clean&&o.cleanDirty(),o}initialize(e,n){this._exists=n,this._wasRecentlyCreated=!1,this.initializeAttributes(e,n),this.initializeRelations()}initializeProxy(){this._proxy=new Proxy(this,{get(e,n,r){if(typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1)return Reflect.get(e,n,r);if(e.hasRelation(n))return e._proxy.isRelationLoaded(n)?e._proxy.requireRelation(n).related:void 0;if(n.startsWith("related")){const s=Mi(n.substr(7));if(e._proxy.hasRelation(s))return e._relations[s]}return e._proxy.getAttribute(n)},set(e,n,r,s){return typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1?Reflect.set(e,n,r,s):e._proxy.hasRelation(n)?(e._proxy.requireRelation(n).related=r,!0):(e._proxy.setAttribute(n,r),!0)},deleteProperty(e,n){return typeof n!="string"||n in e?Reflect.deleteProperty(e,n):e._proxy.hasRelation(n)?(e._proxy.unloadRelation(n),!0):!(n in e._attributes)||e.static("classFields").indexOf(n)!==-1?Reflect.deleteProperty(e,n):(e._proxy.unsetAttribute(n),!0)}})}initializeAttributes(e,n){try{const r=this.static("fields");this._malformedDocumentAttributes={},this._attributes=Nr(e),this._attributes=this.castAttributes(g0(this._attributes,r),r,this._malformedDocumentAttributes);for(const[s,i]of Object.entries(this.static().fieldAliases)){const o=this._attributes[s]??this._attributes[i];this._attributes[s]=o,this._attributes[i]=o}this._originalAttributes=n?Nr(this._attributes):{},this._dirtyAttributes=n?{}:Nr(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}catch(r){throw new p0(this.static("modelName"),e,{cause:r})}}initializeRelations(){this._relations=this.static("relations").reduce((e,n)=>{var r;const s=this._proxy,i=(r=s[Mi(n)+"Relationship"])==null?void 0:r.call(s);return i.name=n,e[n]=i,e},{})}getDefaultCollection(){return this.static("modelName").toLowerCase()+"s"}async createFromEngineDocument(e,n){const r=await this.parseEngineDocumentAttributes(e,n);r[this.static("primaryKey")]=e;for(const[s,i]of Object.entries(this.static("fields")))i.deserialize&&(r[s]=i.deserialize(r[s]));return this.newInstance(r,!0)}async createManyFromEngineDocuments(e){return Promise.all(Object.entries(e).map(([n,r])=>this.createFromEngineDocument(this.parseKey(n),r)))}async beforeSave(){const e=new Date,n=this.static().ignoringTimestamps;if(!n.has(this)&&!n.has(this.static())&&(this.static().hasAutomaticTimestamp(Tt.CreatedAt)&&this.setAttribute(Tt.CreatedAt,this.getAttribute(Tt.CreatedAt)??e),this.static().hasAutomaticTimestamp(Tt.UpdatedAt))){const r=this.isDirty(Tt.UpdatedAt)?this.getAttribute(Tt.UpdatedAt):e;this.setAttribute(Tt.UpdatedAt,r??e)}}async performSave(){const e=this.exists(),n=await this.syncDirty();this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.static("primaryKey")]=this.parseKey(n)}async afterSave(){this.cleanDirty(),await this.loadEmptyRelations()}async performDelete(){const e=this.getPrimaryKey(),n=await this.getCascadeModels();await this.deleteModelsFromEngine(n),n.forEach(r=>r.reset()),this._recentlyDeletedPrimaryKey=e}performMalformedAttributeFixes(){const e=Object.keys(this._malformedDocumentAttributes),n=(r,s)=>s.type===Ie.Array?e.some(i=>i.startsWith(`${r}.`)):r in this._malformedDocumentAttributes;for(const[r,s]of Object.entries(this.static("fields")))n(r,s)&&(this._dirtyAttributes[r]=this._attributes[r])}async emit(...e){return Ly(this,...e)}async syncDirty(){if(!this.exists())return this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0);const e=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey();return await this.requireEngine().update(this.static("collection"),n,e),n}async getCascadeModels(){const e=this.static("relations").map(r=>this.requireRelation(r)).filter(r=>r.enabled&&r.deleteStrategy==="cascade").map(async r=>(await r.getModels()).map(s=>s.getCascadeModels())),n=await Promise.all(e);return(await Promise.all(n.flat())).flat().concat([this]).filter(r=>r.exists())}async deleteModelsFromEngine(e){const n=e.map(r=>[r.static("collection"),r.getSerializedPrimaryKey()]);await Promise.all(n.map(([r,s])=>this.requireEngine().delete(r,s)))}resetEngineData(){this.reset()}hasOne(e,n,r){return new Fi(this,e,n,r)}belongsToOne(e,n,r){return new Ba(this,e,n,r)}hasMany(e,n,r){return new Ro(this,e,n,r)}belongsToMany(e,n,r){return new To(this,e,n,r)}async loadEmptyRelations(){const e=this.wasRecentlyCreated();for(const n of Object.values(this._relations))if(!(!n.enabled||n.loaded)){if(e&&n instanceof Ro){n.related=[];continue}if(e&&n instanceof Fi){n.related=null;continue}n.isEmpty()&&await n.load()}}attributeValueChanged(e,n){return e instanceof rr?Ct(e)!==Ct(n):!rm(e,n)}markAttributeDirty(e,n,r){return this.attributeValueChanged(n,r)}castAttributes(e,n,r,s=""){const i={};for(const o in e)i[o]=this.castAttribute(e[o],{field:s+o,malformedAttributes:r,definition:n[o]});return i}castAttribute(e,{field:n,definition:r,malformedAttributes:s}={}){if(Dh(e))return e;if(r!=null&&r.cast)return r.cast(e);if(typeof r>"u")switch(typeof e){case"object":return Array.isArray(e)?e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,malformedAttributes:s})):e instanceof Date||e instanceof rr?e:Ct(e);case"symbol":case"function":case"undefined":return;default:return e}switch(r.type){case Ie.Date:if(!["string","number"].includes(typeof e)&&!(e instanceof Date))throw new He(`Invalid Date value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return new Date(e);case Ie.Object:if(!yt(e))throw new He(`Invalid Object value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return this.castAttributes(e,r.fields,s,n&&`${n}.`);case Ie.Array:if(!Array.isArray(e))throw new He(`Invalid Array value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,definition:r.items,malformedAttributes:s}));case Ie.Boolean:return!!e;case Ie.Number:{const i=parseFloat(e);if(isNaN(i))throw new He(`Invalid Number value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return i}case Ie.String:return Ct(e);case Ie.Key:{if(e instanceof rr)return Ct(e);if(n&&s){const i=s[n]??[];s[n]=i.concat(["malformed-key"])}return e}default:return e}}toEngineDocument(){const e=this.static("fields"),n=Ac(this._attributes,e);for(const[r,s]of Object.entries(e))s.serialize&&(n[r]=s.serialize(n[r]));return n}getDirtyEngineDocumentUpdates(){const e=Nr(this._dirtyAttributes);for(const n in e)e[n]===void 0&&(e[n]={$unset:!0});return e}async parseEngineDocumentAttributes(e,n){return{...n}}serializeKey(e){return Ct(e)}parseKey(e){return e}};tt(hn,"collection"),tt(hn,"primaryKey","id"),tt(hn,"timestamps"),tt(hn,"fields"),tt(hn,"modelName"),tt(hn,"classFields",[]),tt(hn,"relations",[]),tt(hn,"hooks",{}),tt(hn,"__attributeGetters",new Map),tt(hn,"__attributeSetters",new Map),tt(hn,"instances",new WeakMap),tt(hn,"pureInstances",new WeakMap),tt(hn,"bootedModels",new WeakMap),tt(hn,"engines",new WeakMap),tt(hn,"ignoringTimestamps",new WeakMap),tt(hn,"fieldAliases",{});let ji=hn;function FR(t,e){const n=e?t:ji;return Fe(class extends n{},r=>{Object.assign(r,e??t)})}const dm=new Map;function y0(){return new Map(dm)}function Jt(t){return dm.get(t)??We(He,`Could not find Model with name '${t}', are you sure it's booted?`)}function fm(t){for(const[e,n]of Object.entries(t))n.boot(e),dm.set(e,n)}function jR(t){let e=Object.getPrototypeOf(t);for(;e;){if(e!==ji){e=Object.getPrototypeOf(e);continue}return!0}return!1}function UR(t,e=[".schema",".test"]){const n={};for(const[r,s]of Object.entries(t)){const i=(r.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(typeof i>"u"||e.some(a=>i.endsWith(a)))continue;const o=s.default??s[Object.keys(s)[0]];!o||!jR(o)||(n[i]=o)}return n}function BR(t,e=[".schema"]){const n=UR(t,e);fm(n)}var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VR(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Fd={},jd,Vy;function hm(){return Vy||(Vy=1,jd=class b0{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new b0(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),jd}var Ud={},qy;function qR(){return qy||(qy=1,function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(_){typeof _!="function"&&(_=new Function(""+_));for(var g=new Array(arguments.length-1),p=0;p<g.length;p++)g[p]=arguments[p+1];var b={callback:_,args:g};return r[n]=b,o(n),n++}function l(_){delete r[_]}function c(_){var g=_.callback,p=_.args;switch(p.length){case 0:g();break;case 1:g(p[0]);break;case 2:g(p[0],p[1]);break;case 3:g(p[0],p[1],p[2]);break;default:g.apply(e,p);break}}function u(_){if(s)setTimeout(u,0,_);else{var g=r[_];if(g){s=!0;try{c(g)}finally{l(_),s=!1}}}}function d(){o=function(_){process.nextTick(function(){u(_)})}}function f(){if(t.postMessage&&!t.importScripts){var _=!0,g=t.onmessage;return t.onmessage=function(){_=!1},t.postMessage("","*"),t.onmessage=g,_}}function h(){var _="setImmediate$"+Math.random()+"$",g=function(p){p.source===t&&typeof p.data=="string"&&p.data.indexOf(_)===0&&u(+p.data.slice(_.length))};t.addEventListener?t.addEventListener("message",g,!1):t.attachEvent("onmessage",g),o=function(p){t.postMessage(_+p,"*")}}function m(){var _=new MessageChannel;_.port1.onmessage=function(g){var p=g.data;u(p)},o=function(g){_.port2.postMessage(g)}}function y(){var _=i.documentElement;o=function(g){var p=i.createElement("script");p.onreadystatechange=function(){u(g),p.onreadystatechange=null,_.removeChild(p),p=null},_.appendChild(p)}}function A(){o=function(_){setTimeout(u,0,_)}}var E=Object.getPrototypeOf&&Object.getPrototypeOf(t);E=E&&E.setTimeout?E:t,{}.toString.call(t.process)==="[object process]"?d():f()?h():t.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?y():A(),E.setImmediate=a,E.clearImmediate=l}(typeof self>"u"?typeof Hy>"u"?Ud:Hy:self)),Ud}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Bd,zy;function Lu(){if(zy)return Bd;zy=1,qR();const t=self.crypto||self.msCrypto;return Bd=class{constructor(n){if(!(t&&t.subtle))throw new Error("crypto.subtle not found.");if(n==="sha256")this.algorithm={name:"SHA-256"};else if(n==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${n}".`);this._content=""}update(n){this._content+=n}async digest(){const n=new TextEncoder().encode(this._content),r=new Uint8Array(await t.subtle.digest(this.algorithm,n));let s="";for(let i=0;i<r.length;++i)s+=r[i].toString(16).padStart(2,"0");return s}},Bd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Hd,Wy;function v0(){return Wy||(Wy=1,Hd=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let s=null,i=0;const o=e.length;for(let a=0;a<o;++a){const l=e[a],c=n.get(l);(s===null||l>s)&&(c&&a>0&&l>e[a-1]||!c&&a<o-1&&l>e[a+1])&&(s=l,i=a)}if(s===null)this.done=!0;else{const a=n.get(s)?i-1:i+1;e[i]=e[a],e[a]=s;for(const l of e)l>s&&n.set(l,!n.get(l))}return r}}),Hd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Vd,Ky;function pm(){if(Ky)return Vd;Ky=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",s="BlankNode",i="Literal",o="DefaultGraph",a={};(()=>{const h="(?:<([^:]+:[^>]*)>)",y="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",A=y+"0-9-·̀-ͯ‿-⁀",_="(_:(?:["+y+"0-9])(?:(?:["+A+".])*(?:["+A+"]))?)",g='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',p="(?:\\^\\^"+h+")",x="(?:"+g+"(?:"+p+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",R="[ \\t]+",T="[ \\t]*",S="(?:"+h+"|"+_+")"+R,C=h+R,M="(?:"+h+"|"+_+"|"+x+")"+T,P="(?:\\.|(?:(?:"+h+"|"+_+")"+T+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+T+"$"),a.quad=new RegExp("^"+T+S+C+M+P+T+"$")})(),Vd=class Tc{static parse(m){const y=[],A={},E=m.split(a.eoln);let _=0;for(const g of E){if(_++,a.empty.test(g))continue;const p=g.match(a.quad);if(p===null)throw new Error("N-Quads parse error on line "+_+".");const b={subject:null,predicate:null,object:null,graph:null};if(p[1]!==void 0?b.subject={termType:r,value:p[1]}:b.subject={termType:s,value:p[2]},b.predicate={termType:r,value:p[3]},p[4]!==void 0?b.object={termType:r,value:p[4]}:p[5]!==void 0?b.object={termType:s,value:p[5]}:(b.object={termType:i,value:void 0,datatype:{termType:r}},p[7]!==void 0?b.object.datatype.value=p[7]:p[8]!==void 0?(b.object.datatype.value=e,b.object.language=p[8]):b.object.datatype.value=n,b.object.value=f(p[6])),p[9]!==void 0?b.graph={termType:r,value:p[9]}:p[10]!==void 0?b.graph={termType:s,value:p[10]}:b.graph={termType:o,value:""},!(b.graph.value in A))A[b.graph.value]=[b],y.push(b);else{let x=!0;const R=A[b.graph.value];for(const T of R)if(l(T,b)){x=!1;break}x&&(R.push(b),y.push(b))}}return y}static serialize(m){Array.isArray(m)||(m=Tc.legacyDatasetToQuads(m));const y=[];for(const A of m)y.push(Tc.serializeQuad(A));return y.sort().join("")}static serializeQuadComponents(m,y,A,E){let _="";return m.termType===r?_+=`<${m.value}>`:_+=`${m.value}`,_+=` <${y.value}> `,A.termType===r?_+=`<${A.value}>`:A.termType===s?_+=A.value:(_+=`"${u(A.value)}"`,A.datatype.value===e?A.language&&(_+=`@${A.language}`):A.datatype.value!==n&&(_+=`^^<${A.datatype.value}>`)),E.termType===r?_+=` <${E.value}>`:E.termType===s&&(_+=` ${E.value}`),_+=` .
`,_}static serializeQuad(m){return Tc.serializeQuadComponents(m.subject,m.predicate,m.object,m.graph)}static legacyDatasetToQuads(m){const y=[],A={"blank node":s,IRI:r,literal:i};for(const E in m)m[E].forEach(g=>{const p={};for(const b in g){const x=g[b],R={termType:A[x.type],value:x.value};R.termType===i&&(R.datatype={termType:r},"datatype"in x&&(R.datatype.value=x.datatype),"language"in x?("datatype"in x||(R.datatype.value=e),R.language=x.language):"datatype"in x||(R.datatype.value=n)),p[b]=R}E==="@default"?p.graph={termType:o,value:""}:p.graph={termType:E.startsWith("_:")?s:r,value:E},y.push(p)});return y}};function l(h,m){return!(h.subject.termType===m.subject.termType&&h.object.termType===m.object.termType)||!(h.subject.value===m.subject.value&&h.predicate.value===m.predicate.value&&h.object.value===m.object.value)?!1:h.object.termType!==i?!0:h.object.datatype.termType===m.object.datatype.termType&&h.object.language===m.object.language&&h.object.datatype.value===m.object.datatype.value}const c=/["\\\n\r]/g;function u(h){return h.replace(c,function(m){switch(m){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function f(h){return h.replace(d,function(m,y,A,E){if(y)switch(y){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(A)return String.fromCharCode(parseInt(A,16));if(E)throw new Error("Unsupported U escape")})}return Vd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var qd,Gy;function w0(){if(Gy)return qd;Gy=1;const t=hm(),e=Lu(),n=v0(),r=pm();qd=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const h of o)this._addBlankNodeQuadInfo({quad:h,component:h.subject}),this._addBlankNodeQuadInfo({quad:h,component:h.object}),this._addBlankNodeQuadInfo({quad:h,component:h.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];let c=0;for(const h of l)++c%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:h,hashToBlankNodes:a});const u=[...a.keys()].sort(),d=[];for(const h of u){const m=a.get(h);if(m.length>1){d.push(m);continue}const y=m[0];this.canonicalIssuer.getId(y)}for(const h of d){const m=[];for(const y of h){if(this.canonicalIssuer.hasId(y))continue;const A=new t("_:b");A.getId(y);const E=await this.hashNDegreeQuads(y,A);m.push(E)}m.sort(s);for(const y of m){const A=y.issuer.getOldIds();for(const E of A)this.canonicalIssuer.getId(E)}}const f=[];for(const h of this.quads){const m=r.serializeQuadComponents(this._componentWithCanonicalId(h.subject),h.predicate,this._componentWithCanonicalId(h.object),this._componentWithCanonicalId(h.graph));f.push(m)}return f.sort(),f.join("")}async hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=await u.digest(),l.hash}async hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}async hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=await this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));let A=0;for(;y.hasNext();){const E=y.next();++A%3===0&&await this._yield();let _=a.clone(),g="";const p=[];let b=!1;for(const x of E)if(this.canonicalIssuer.hasId(x)?g+=this.canonicalIssuer.getId(x):(_.hasId(x)||p.push(x),g+=_.getId(x)),h.length!==0&&g>h){b=!0;break}if(!b){for(const x of p){const R=await this.hashNDegreeQuads(x,_);if(g+=_.getId(x),g+=`<${R.hash}>`,_=R.issuer,h.length!==0&&g>h){b=!0;break}}b||(h.length===0||g<h)&&(h=g,m=_)}}c.update(h),a=m}return{hash:await c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;let u=0;for(const d of c)++u%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:a,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=await this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=await this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId(o){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}async _yield(){return new Promise(o=>setImmediate(o))}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return qd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var zd,Jy;function zR(){if(Jy)return zd;Jy=1;const t=Lu(),e=w0();return zd=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}async createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;let a=0;for(const l of o){let c,u;if(l.subject.termType==="BlankNode"&&l.subject.value!==r)u=l.subject.value,c="p";else if(l.object.termType==="BlankNode"&&l.object.value!==r)u=l.object.value,c="r";else continue;++a%100===0&&await this._yield();const d=await this.hashRelatedBlankNode(u,l,s,c),f=i.get(d);f?f.push(u):i.set(d,[u])}return i}},zd}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Wd,Xy;function _0(){if(Xy)return Wd;Xy=1;const t=hm(),e=Lu(),n=v0(),r=pm();Wd=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];for(const f of l)this._hashAndTrackBlankNode({id:f,hashToBlankNodes:a});const c=[...a.keys()].sort(),u=[];for(const f of c){const h=a.get(f);if(h.length>1){u.push(h);continue}const m=h[0];this.canonicalIssuer.getId(m)}for(const f of u){const h=[];for(const m of f){if(this.canonicalIssuer.hasId(m))continue;const y=new t("_:b");y.getId(m);const A=this.hashNDegreeQuads(m,y);h.push(A)}h.sort(s);for(const m of h){const y=m.issuer.getOldIds();for(const A of y)this.canonicalIssuer.getId(A)}}const d=[];for(const f of this.quads){const h=r.serializeQuadComponents(this._componentWithCanonicalId({component:f.subject}),f.predicate,this._componentWithCanonicalId({component:f.object}),this._componentWithCanonicalId({component:f.graph}));d.push(h)}return d.sort(),d.join("")}hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=u.digest(),l.hash}hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));for(;y.hasNext();){const A=y.next();let E=a.clone(),_="";const g=[];let p=!1;for(const b of A)if(this.canonicalIssuer.hasId(b)?_+=this.canonicalIssuer.getId(b):(E.hasId(b)||g.push(b),_+=E.getId(b)),h.length!==0&&_>h){p=!0;break}if(!p){for(const b of g){const x=this.hashNDegreeQuads(b,E);if(_+=E.getId(b),_+=`<${x.hash}>`,E=x.issuer,h.length!==0&&_>h){p=!0;break}}p||(h.length===0||_<h)&&(h=_,m=E)}}c.update(h),a=m}return{hash:c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;for(const u of c)this._addRelatedBlankNodeHash({quad:u,component:u.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.graph,position:"g",id:o,issuer:a,hashToRelated:l});return l}_hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId({component:o}){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Wd}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var Kd,Yy;function WR(){if(Yy)return Kd;Yy=1;const t=Lu(),e=_0();return Kd=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;for(const a of o){let l,c;if(a.subject.termType==="BlankNode"&&a.subject.value!==r)c=a.subject.value,l="p";else if(a.object.termType==="BlankNode"&&a.object.value!==r)c=a.object.value,l="r";else continue;const u=this.hashRelatedBlankNode(c,a,s,l),d=i.get(u);d?d.push(c):i.set(u,[c])}return i}},Kd}const KR={},GR=Object.freeze(Object.defineProperty({__proto__:null,default:KR},Symbol.toStringTag,{value:"Module"})),JR=VR(GR);var Qy;function XR(){return Qy||(Qy=1,function(t){const e=w0(),n=zR(),r=_0(),s=WR();let i;try{i=JR}catch{}function o(a){return Array.isArray(a)?a:t.NQuads.legacyDatasetToQuads(a)}t.NQuads=pm(),t.IdentifierIssuer=hm(),t._rdfCanonizeNative=function(a){return a&&(i=a),i},t.canonize=async function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((u,d)=>i.canonize(c,l,(f,h)=>f?d(f):u(h)))}if(l.algorithm==="URDNA2015")return new e(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new n(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},t._canonizeSync=function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return i.canonizeSync(c,l)}if(l.algorithm==="URDNA2015")return new r(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}}(Fd)),Fd}var Gd,Zy;function mm(){return Zy||(Zy=1,Gd=XR()),Gd}var Jd,eb;function ur(){if(eb)return Jd;eb=1;const t={};return Jd=t,t.isArray=Array.isArray,t.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",t.isDouble=e=>t.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&Object.keys(e).length===0,t.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",t.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",t.isUndefined=e=>typeof e>"u",Jd}var Xd,tb;function Vs(){if(tb)return Xd;tb=1;const t=ur(),e={};return Xd=e,e.isSubject=n=>t.isObject(n)&&!("@value"in n||"@set"in n||"@list"in n)?Object.keys(n).length>1||!("@id"in n):!1,e.isSubjectReference=n=>t.isObject(n)&&Object.keys(n).length===1&&"@id"in n,e.isValue=n=>t.isObject(n)&&"@value"in n,e.isList=n=>t.isObject(n)&&"@list"in n,e.isGraph=n=>t.isObject(n)&&"@graph"in n&&Object.keys(n).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=n=>e.isGraph(n)&&!("@id"in n),e.isBlankNode=n=>{if(t.isObject(n)){if("@id"in n){const r=n["@id"];return!t.isString(r)||r.indexOf("_:")===0}return Object.keys(n).length===0||!("@value"in n||"@set"in n||"@list"in n)}return!1},Xd}var Yd,nb;function Or(){return nb||(nb=1,Yd=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}}),Yd}var Qd,rb;function Sr(){if(rb)return Qd;rb=1;const t=Vs(),e=ur(),n=mm().IdentifierIssuer,r=Or(),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l=/^@[a-zA-Z]+$/,c={headers:{accept:"application/ld+json, application/json"}},u={};Qd=u,u.IdentifierIssuer=n,u.REGEX_BCP47=s,u.REGEX_KEYWORD=l,u.clone=function(f){if(f&&typeof f=="object"){let h;if(e.isArray(f)){h=[];for(let m=0;m<f.length;++m)h[m]=u.clone(f[m])}else if(f instanceof Map){h=new Map;for(const[m,y]of f)h.set(m,u.clone(y))}else if(f instanceof Set){h=new Set;for(const m of f)h.add(u.clone(m))}else if(e.isObject(f)){h={};for(const m in f)h[m]=u.clone(f[m])}else h=f.toString();return h}return f},u.asArray=function(f){return Array.isArray(f)?f:[f]},u.buildHeaders=(f={})=>{if(Object.keys(f).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+c.headers.accept+'" is supported.');return Object.assign({Accept:c.headers.accept},f)},u.parseLinkHeader=f=>{const h={},m=f.match(i);for(let y=0;y<m.length;++y){let A=m[y].match(o);if(!A)continue;const E={target:A[1]},_=A[2];for(;A=a.exec(_);)E[A[1]]=A[2]===void 0?A[3]:A[2];const g=E.rel||"";Array.isArray(h[g])?h[g].push(E):h.hasOwnProperty(g)?h[g]=[h[g],E]:h[g]=E}return h},u.validateTypeValue=(f,h)=>{if(!e.isString(f)&&!(e.isArray(f)&&f.every(m=>e.isString(m)))){if(h&&e.isObject(f))switch(Object.keys(f).length){case 0:return;case 1:if("@default"in f&&u.asArray(f["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:f})}},u.hasProperty=(f,h)=>{if(f.hasOwnProperty(h)){const m=f[h];return!e.isArray(m)||m.length>0}return!1},u.hasValue=(f,h,m)=>{if(u.hasProperty(f,h)){let y=f[h];const A=t.isList(y);if(e.isArray(y)||A){A&&(y=y["@list"]);for(let E=0;E<y.length;++E)if(u.compareValues(m,y[E]))return!0}else if(!e.isArray(m))return u.compareValues(m,y)}return!1},u.addValue=(f,h,m,y)=>{if(y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1),"valueIsArray"in y||(y.valueIsArray=!1),"allowDuplicate"in y||(y.allowDuplicate=!0),"prependValue"in y||(y.prependValue=!1),y.valueIsArray)f[h]=m;else if(e.isArray(m)){m.length===0&&y.propertyIsArray&&!f.hasOwnProperty(h)&&(f[h]=[]),y.prependValue&&(m=m.concat(f[h]),f[h]=[]);for(let A=0;A<m.length;++A)u.addValue(f,h,m[A],y)}else if(f.hasOwnProperty(h)){const A=!y.allowDuplicate&&u.hasValue(f,h,m);!e.isArray(f[h])&&(!A||y.propertyIsArray)&&(f[h]=[f[h]]),A||(y.prependValue?f[h].unshift(m):f[h].push(m))}else f[h]=y.propertyIsArray?[m]:m},u.getValues=(f,h)=>[].concat(f[h]||[]),u.removeProperty=(f,h)=>{delete f[h]},u.removeValue=(f,h,m,y)=>{y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1);const A=u.getValues(f,h).filter(E=>!u.compareValues(E,m));A.length===0?u.removeProperty(f,h):A.length===1&&!y.propertyIsArray?f[h]=A[0]:f[h]=A},u.relabelBlankNodes=(f,h)=>{h=h||{};const m=h.issuer||new n("_:b");return d(m,f)},u.compareValues=(f,h)=>f===h||t.isValue(f)&&t.isValue(h)&&f["@value"]===h["@value"]&&f["@type"]===h["@type"]&&f["@language"]===h["@language"]&&f["@index"]===h["@index"]?!0:e.isObject(f)&&"@id"in f&&e.isObject(h)&&"@id"in h?f["@id"]===h["@id"]:!1,u.compareShortestLeast=(f,h)=>f.length<h.length?-1:h.length<f.length?1:f===h?0:f<h?-1:1;function d(f,h){if(e.isArray(h))for(let m=0;m<h.length;++m)h[m]=d(f,h[m]);else if(t.isList(h))h["@list"]=d(f,h["@list"]);else if(e.isObject(h)){t.isBlankNode(h)&&(h["@id"]=f.getId(h["@id"]));const m=Object.keys(h).sort();for(let y=0;y<m.length;++y){const A=m[y];A!=="@id"&&(h[A]=d(f,h[A]))}}return h}return Qd}var Zd,sb;function gm(){if(sb)return Zd;sb=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return Zd={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},Zd}var ef,ib;function x0(){return ib||(ib=1,ef=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}}),ef}var tf,ob;function Si(){if(ob)return tf;ob=1;const t=ur(),e={};tf=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,s)=>{const i={},o=e.parsers[s||"full"],a=o.regex.exec(r);let l=o.keys.length;for(;l--;)i[o.keys[l]]=a[l]===void 0?null:a[l];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,s)=>{if(r===null||e.isAbsolute(s))return s;(!r||t.isString(r))&&(r=e.parse(r||""));const i=e.parse(s),o={protocol:r.protocol||""};if(i.authority!==null)o.authority=i.authority,o.path=i.path,o.query=i.query;else if(o.authority=r.authority,i.path==="")o.path=r.path,i.query!==null?o.query=i.query:o.query=r.query;else{if(i.path.indexOf("/")===0)o.path=i.path;else{let l=r.path;l=l.substr(0,l.lastIndexOf("/")+1),(l.length>0||r.authority)&&l.substr(-1)!=="/"&&(l+="/"),l+=i.path,o.path=l}o.query=i.query}i.path!==""&&(o.path=e.removeDotSegments(o.path));let a=o.protocol;return o.authority!==null&&(a+="//"+o.authority),a+=o.path,o.query!==null&&(a+="?"+o.query),i.fragment!==null&&(a+="#"+i.fragment),a===""&&(a="./"),a},e.removeBase=(r,s)=>{if(r===null)return s;(!r||t.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):s.indexOf("//")&&(i+="//"),s.indexOf(i)!==0)return s;const o=e.parse(s.substr(i.length)),a=r.normalizedPath.split("/"),l=o.normalizedPath.split("/"),c=o.fragment||o.query?0:1;for(;a.length>0&&l.length>c&&a[0]===l[0];)a.shift(),l.shift();let u="";if(a.length>0){a.pop();for(let d=0;d<a.length;++d)u+="../"}return u+=l.join("/"),o.query!==null&&(u+="?"+o.query),o.fragment!==null&&(u+="#"+o.fragment),u===""&&(u="./"),u},e.removeDotSegments=r=>{if(r.length===0)return"";const s=r.split("/"),i=[];for(;s.length>0;){const o=s.shift(),a=s.length===0;if(o==="."){a&&i.push("");continue}if(o===".."){i.pop(),a&&i.push("");continue}i.push(o)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const n=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>t.isString(r)&&n.test(r),e.isRelative=r=>t.isString(r),tf}var nf,ab;function YR(){if(ab)return nf;ab=1;const{parseLinkHeader:t,buildHeaders:e}=Sr(),{LINK_HEADER_CONTEXT:n}=gm(),r=Or(),s=x0(),{prependBase:i}=Si(),o=/(^|(\r\n))link:/i;nf=({secure:l,headers:c={},xhr:u}={headers:{}})=>{return c=e(c),new s().wrapLoader(f);async function f(h){if(h.indexOf("http:")!==0&&h.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:h});if(l&&h.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:h});let m;try{m=await a(u,h,c)}catch(g){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:h,cause:g})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:h,httpStatusCode:m.status});let y={contextUrl:null,documentUrl:h,document:m.response},A=null;const E=m.getResponseHeader("Content-Type");let _;if(o.test(m.getAllResponseHeaders())&&(_=m.getResponseHeader("Link")),_&&E!=="application/ld+json"){const g=t(_),p=g[n];if(Array.isArray(p))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:h});p&&(y.contextUrl=p.target),A=g.alternate,A&&A.type=="application/ld+json"&&!(E||"").match(/^application\/(\w*\+)?json$/)&&(y=await f(i(h,A.target)))}return y}};function a(l,c,u){l=l||XMLHttpRequest;const d=new l;return new Promise((f,h)=>{d.onload=()=>f(d),d.onerror=m=>h(m),d.open("GET",c,!0);for(const m in u)d.setRequestHeader(m,u[m]);d.send()})}return nf}var rf,lb;function QR(){if(lb)return rf;lb=1;const t=YR(),e={};return rf=e,e.setupDocumentLoaders=function(n){typeof XMLHttpRequest<"u"&&(n.documentLoaders.xhr=t,n.useDocumentLoader("xhr"))},e.setupGlobals=function(n){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:n.JsonLdProcessor})},rf}var sf,cb;function ZR(){return cb||(cb=1,sf=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),sf}var of,ub;function eI(){if(ub)return of;ub=1,of=t,t.Node=s,t.create=t;function t(i){var o=this;if(o instanceof t||(o=new t),o.tail=null,o.head=null,o.length=0,i&&typeof i.forEach=="function")i.forEach(function(c){o.push(c)});else if(arguments.length>0)for(var a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return o}t.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var o=i.next,a=i.prev;return o&&(o.prev=a),a&&(a.next=o),i===this.head&&(this.head=o),i===this.tail&&(this.tail=a),i.list.length--,i.next=null,i.prev=null,i.list=null,o},t.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var o=this.head;i.list=this,i.next=o,o&&(o.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},t.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var o=this.tail;i.list=this,i.prev=o,o&&(o.next=i),this.tail=i,this.head||(this.head=i),this.length++}},t.prototype.push=function(){for(var i=0,o=arguments.length;i<o;i++)n(this,arguments[i]);return this.length},t.prototype.unshift=function(){for(var i=0,o=arguments.length;i<o;i++)r(this,arguments[i]);return this.length},t.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},t.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},t.prototype.forEach=function(i,o){o=o||this;for(var a=this.head,l=0;a!==null;l++)i.call(o,a.value,l,this),a=a.next},t.prototype.forEachReverse=function(i,o){o=o||this;for(var a=this.tail,l=this.length-1;a!==null;l--)i.call(o,a.value,l,this),a=a.prev},t.prototype.get=function(i){for(var o=0,a=this.head;a!==null&&o<i;o++)a=a.next;if(o===i&&a!==null)return a.value},t.prototype.getReverse=function(i){for(var o=0,a=this.tail;a!==null&&o<i;o++)a=a.prev;if(o===i&&a!==null)return a.value},t.prototype.map=function(i,o){o=o||this;for(var a=new t,l=this.head;l!==null;)a.push(i.call(o,l.value,this)),l=l.next;return a},t.prototype.mapReverse=function(i,o){o=o||this;for(var a=new t,l=this.tail;l!==null;)a.push(i.call(o,l.value,this)),l=l.prev;return a},t.prototype.reduce=function(i,o){var a,l=this.head;if(arguments.length>1)a=o;else if(this.head)l=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;l!==null;c++)a=i(a,l.value,c),l=l.next;return a},t.prototype.reduceReverse=function(i,o){var a,l=this.tail;if(arguments.length>1)a=o;else if(this.tail)l=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;l!==null;c--)a=i(a,l.value,c),l=l.prev;return a},t.prototype.toArray=function(){for(var i=new Array(this.length),o=0,a=this.head;a!==null;o++)i[o]=a.value,a=a.next;return i},t.prototype.toArrayReverse=function(){for(var i=new Array(this.length),o=0,a=this.tail;a!==null;o++)i[o]=a.value,a=a.prev;return i},t.prototype.slice=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(;c!==null&&l<o;l++,c=c.next)a.push(c.value);return a},t.prototype.sliceReverse=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=this.length,c=this.tail;c!==null&&l>o;l--)c=c.prev;for(;c!==null&&l>i;l--,c=c.prev)a.push(c.value);return a},t.prototype.splice=function(i,o,...a){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(var u=[],l=0;c&&l<o;l++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var l=0;l<a.length;l++)c=e(this,c,a[l]);return u},t.prototype.reverse=function(){for(var i=this.head,o=this.tail,a=i;a!==null;a=a.prev){var l=a.prev;a.prev=a.next,a.next=l}return this.head=o,this.tail=i,this};function e(i,o,a){var l=o===i.head?new s(a,null,o,i):new s(a,o,o.next,i);return l.next===null&&(i.tail=l),l.prev===null&&(i.head=l),i.length++,l}function n(i,o){i.tail=new s(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,o){i.head=new s(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,o,a,l){if(!(this instanceof s))return new s(i,o,a,l);this.list=l,this.value=i,o?(o.next=this,this.prev=o):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{ZR()(t)}catch{}return of}var af,db;function E0(){if(db)return af;db=1;const t=eI(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),o=Symbol("dispose"),a=Symbol("noDisposeOnSet"),l=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),d=()=>1;class f{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const b=p.length||d;if(this[r]=typeof b!="function"?d:b,this[s]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=p.maxAge||0,this[o]=p.dispose,this[a]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,y(this)}get max(){return this[e]}set allowStale(p){this[s]=!!p}get allowStale(){return this[s]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=p,y(this)}get maxAge(){return this[i]}set lengthCalculator(p){typeof p!="function"&&(p=d),p!==this[r]&&(this[r]=p,this[n]=0,this[l].forEach(b=>{b.length=this[r](b.value,b.key),this[n]+=b.length})),y(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[l].length}rforEach(p,b){b=b||this;for(let x=this[l].tail;x!==null;){const R=x.prev;_(this,p,x,b),x=R}}forEach(p,b){b=b||this;for(let x=this[l].head;x!==null;){const R=x.next;_(this,p,x,b),x=R}}keys(){return this[l].toArray().map(p=>p.key)}values(){return this[l].toArray().map(p=>p.value)}reset(){this[o]&&this[l]&&this[l].length&&this[l].forEach(p=>this[o](p.key,p.value)),this[c]=new Map,this[l]=new t,this[n]=0}dump(){return this[l].map(p=>m(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[l]}set(p,b,x){if(x=x||this[i],x&&typeof x!="number")throw new TypeError("maxAge must be a number");const R=x?Date.now():0,T=this[r](b,p);if(this[c].has(p)){if(T>this[e])return A(this,this[c].get(p)),!1;const M=this[c].get(p).value;return this[o]&&(this[a]||this[o](p,M.value)),M.now=R,M.maxAge=x,M.value=b,this[n]+=T-M.length,M.length=T,this.get(p),y(this),!0}const S=new E(p,b,T,R,x);return S.length>this[e]?(this[o]&&this[o](p,b),!1):(this[n]+=S.length,this[l].unshift(S),this[c].set(p,this[l].head),y(this),!0)}has(p){if(!this[c].has(p))return!1;const b=this[c].get(p).value;return!m(this,b)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[l].tail;return p?(A(this,p),p.value):null}del(p){A(this,this[c].get(p))}load(p){this.reset();const b=Date.now();for(let x=p.length-1;x>=0;x--){const R=p[x],T=R.e||0;if(T===0)this.set(R.k,R.v);else{const S=T-b;S>0&&this.set(R.k,R.v,S)}}}prune(){this[c].forEach((p,b)=>h(this,b,!1))}}const h=(g,p,b)=>{const x=g[c].get(p);if(x){const R=x.value;if(m(g,R)){if(A(g,x),!g[s])return}else b&&(g[u]&&(x.value.now=Date.now()),g[l].unshiftNode(x));return R.value}},m=(g,p)=>{if(!p||!p.maxAge&&!g[i])return!1;const b=Date.now()-p.now;return p.maxAge?b>p.maxAge:g[i]&&b>g[i]},y=g=>{if(g[n]>g[e])for(let p=g[l].tail;g[n]>g[e]&&p!==null;){const b=p.prev;A(g,p),p=b}},A=(g,p)=>{if(p){const b=p.value;g[o]&&g[o](b.key,b.value),g[n]-=b.length,g[c].delete(b.key),g[l].removeNode(p)}};class E{constructor(p,b,x,R,T){this.key=p,this.value=b,this.length=x,this.now=R,this.maxAge=T||0}}const _=(g,p,b,x)=>{let R=b.value;m(g,R)&&(A(g,b),g[s]||(R=void 0)),R&&p.call(x,R.value,R.key,g)};return af=f,af}var lf,fb;function tI(){if(fb)return lf;fb=1;const t=E0(),e=10;return lf=class{constructor({document:r}){this.document=r,this.cache=new t({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,s){this.cache.set(r,s)}},lf}var cf,hb;function nI(){if(hb)return cf;hb=1;const{isArray:t,isObject:e,isString:n}=ur(),{asArray:r}=Sr(),{prependBase:s}=Si(),i=Or(),o=tI(),a=10;cf=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:f,documentLoader:h,base:m,cycles:y=new Set}){f&&e(f)&&f["@context"]&&(f=f["@context"]),f=r(f);const A=[];for(const E of f){if(n(E)){let p=this._get(E);p||(p=await this._resolveRemoteContext({activeCtx:d,url:E,documentLoader:h,base:m,cycles:y})),t(p)?A.push(...p):A.push(p);continue}if(E===null){A.push(new o({document:null}));continue}e(E)||l(f);const _=JSON.stringify(E);let g=this._get(_);g||(g=new o({document:E}),this._cacheResolvedContext({key:_,resolved:g,tag:"static"})),A.push(g)}return A}_get(d){let f=this.perOpCache.get(d);if(!f){const h=this.sharedCache.get(d);h&&(f=h.get("static"),f&&this.perOpCache.set(d,f))}return f}_cacheResolvedContext({key:d,resolved:f,tag:h}){if(this.perOpCache.set(d,f),h!==void 0){let m=this.sharedCache.get(d);m||(m=new Map,this.sharedCache.set(d,m)),m.set(h,f)}return f}async _resolveRemoteContext({activeCtx:d,url:f,documentLoader:h,base:m,cycles:y}){f=s(m,f);const{context:A,remoteDoc:E}=await this._fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:y});m=E.documentUrl||f,c({context:A,base:m});const _=await this.resolve({activeCtx:d,context:A,documentLoader:h,base:m,cycles:y});return this._cacheResolvedContext({key:f,resolved:_,tag:E.tag}),_}async _fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:m}){if(m.size>a)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:a});if(m.has(f))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:f});m.add(f);let y,A;try{A=await h(f),y=A.document||null,n(y)&&(y=JSON.parse(y))}catch(E){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${f}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:f,cause:E})}if(!e(y))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${f}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:f});return"@context"in y?y={"@context":y["@context"]}:y={"@context":{}},A.contextUrl&&(t(y["@context"])||(y["@context"]=[y["@context"]]),y["@context"].push(A.contextUrl)),{context:y,remoteDoc:A}}};function l(u){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u})}function c({context:u,base:d}){if(!u)return;const f=u["@context"];if(n(f)){u["@context"]=s(d,f);return}if(t(f)){for(let h=0;h<f.length;++h){const m=f[h];if(n(m)){f[h]=s(d,m);continue}e(m)&&c({context:{"@context":m},base:d})}return}if(e(f))for(const h in f)c({context:f[h],base:d})}return cf}var uf,pb;function rI(){return pb||(pb=1,uf=mm().NQuads),uf}var df,mb;function _l(){if(mb)return df;mb=1;const t=Or(),{isArray:e}=ur(),{asArray:n}=Sr(),r={};df=r,r.defaultEventHandler=null,r.setupEventHandler=({options:o={}})=>{const a=[].concat(o.safe?r.safeEventHandler:[],o.eventHandler?n(o.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return a.length===0?null:a},r.handleEvent=({event:o,options:a})=>{s({event:o,handlers:a.eventHandler})};function s({event:o,handlers:a}){let l=!0;for(let c=0;l&&c<a.length;++c){l=!1;const u=a[c];if(e(u))l=s({event:o,handlers:u});else if(typeof u=="function")u({event:o,next:()=>{l=!0}});else if(typeof u=="object")o.code in u?u[o.code]({event:o,next:()=>{l=!0}}):l=!0;else throw new t("Invalid event handler.","jsonld.InvalidEventHandler",{event:o})}return l}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:a,next:l}){if(a.level==="warning"&&i.has(a.code))throw new t("Safe mode validation error.","jsonld.ValidationError",{event:a});l()},r.logEventHandler=function({event:a,next:l}){console.log(`EVENT: ${a.message}`,{event:a}),l()},r.logWarningEventHandler=function({event:a,next:l}){a.level==="warning"&&console.warn(`WARNING: ${a.message}`,{event:a}),l()},r.unhandledEventHandler=function({event:a}){throw new t("No handler for event.","jsonld.UnhandledEvent",{event:a})},r.setDefaultEventHandler=function({eventHandler:o}={}){r.defaultEventHandler=o?n(o):null},df}var ff,gb;function zi(){if(gb)return ff;gb=1;const t=Sr(),e=Or(),{isArray:n,isObject:r,isString:s,isUndefined:i}=ur(),{isAbsolute:o,isRelative:a,prependBase:l}=Si(),{handleEvent:c}=_l(),{REGEX_BCP47:u,REGEX_KEYWORD:d,asArray:f,compareShortestLeast:h}=Sr(),m=new Map,y=1e4,A={};ff=A,A.process=async({activeCtx:g,localCtx:p,options:b,propagate:x=!0,overrideProtected:R=!1,cycles:T=new Set})=>{if(r(p)&&"@context"in p&&n(p["@context"])&&(p=p["@context"]),f(p).length===0)return g;const C=[],M=[({event:Y,next:O})=>{C.push(Y),O()}];b.eventHandler&&M.push(b.eventHandler);const P=b;b={...b,eventHandler:M};const j=await b.contextResolver.resolve({activeCtx:g,context:p,documentLoader:b.documentLoader,base:b.base});r(j[0].document)&&typeof j[0].document["@propagate"]=="boolean"&&(x=j[0].document["@propagate"]);let L=g;!x&&!L.previousContext&&(L=L.clone(),L.previousContext=g);for(const Y of j){let{document:O}=Y;if(g=L,O===null){if(!R&&Object.keys(g.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});L=g=A.getInitialContext(b).clone();continue}const q=Y.getProcessed(g);if(q){if(P.eventHandler)for(const re of q.events)c({event:re,options:P});L=g=q.context;continue}if(r(O)&&"@context"in O&&(O=O["@context"]),!r(O))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:O});L=L.clone();const B=new Map;if("@version"in O){if(O["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+O["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:O});if(g.processingMode&&g.processingMode==="json-ld-1.0")throw new e("@version: "+O["@version"]+" not compatible with "+g.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:O});L.processingMode="json-ld-1.1",L["@version"]=O["@version"],B.set("@version",!0)}if(L.processingMode=L.processingMode||g.processingMode,"@base"in O){let re=O["@base"];if(!(re===null||o(re)))if(a(re))re=l(L["@base"],re);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:O});L["@base"]=re,B.set("@base",!0)}if("@vocab"in O){const re=O["@vocab"];if(re===null)delete L["@vocab"];else if(s(re)){if(!o(re)&&A.processingMode(L,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:O});{const z=E(L,re,{vocab:!0,base:!0},void 0,void 0,b);o(z)||b.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:z}},options:b}),L["@vocab"]=z}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:O});B.set("@vocab",!0)}if("@language"in O){const re=O["@language"];if(re===null)delete L["@language"];else if(s(re))re.match(u)||b.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:re}},options:b}),L["@language"]=re.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:O});B.set("@language",!0)}if("@direction"in O){const re=O["@direction"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:O});if(re===null)delete L["@direction"];else{if(re!=="ltr"&&re!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:O});L["@direction"]=re}B.set("@direction",!0)}if("@propagate"in O){const re=O["@propagate"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:O});if(typeof re!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:p});B.set("@propagate",!0)}if("@import"in O){const re=O["@import"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:O});if(!s(re))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:p});const z=await b.contextResolver.resolve({activeCtx:g,context:re,documentLoader:b.documentLoader,base:b.base});if(z.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:p});const ae=z[0].getProcessed(g);if(ae)O=ae;else{const fe=z[0].document;if("@import"in fe)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:p});for(const pe in fe)O.hasOwnProperty(pe)||(O[pe]=fe[pe]);z[0].setProcessed(g,O)}B.set("@import",!0)}B.set("@protected",O["@protected"]||!1);for(const re in O)if(A.createTermDefinition({activeCtx:L,localCtx:O,term:re,defined:B,options:b,overrideProtected:R}),r(O[re])&&"@context"in O[re]){const z=O[re]["@context"];let ae=!0;if(s(z)){const fe=l(b.base,z);T.has(fe)?ae=!1:T.add(fe)}if(ae)try{await A.process({activeCtx:L.clone(),localCtx:O[re]["@context"],overrideProtected:!0,options:b,cycles:T})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:O[re]["@context"],term:re})}}Y.setProcessed(g,{context:L,events:C})}return L},A.createTermDefinition=({activeCtx:g,localCtx:p,term:b,defined:x,options:R,overrideProtected:T=!1})=>{if(x.has(b)){if(x.get(b))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:p,term:b})}x.set(b,!1);let S;if(p.hasOwnProperty(b)&&(S=p[b]),b==="@type"&&r(S)&&(S["@container"]||"@set")==="@set"&&A.processingMode(g,1.1)){const O=["@container","@id","@protected"],q=Object.keys(S);if(q.length===0||q.some(B=>!O.includes(B)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:b})}else{if(A.isKeyword(b))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:b});if(b.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:b}},options:R});return}else if(b==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:p})}const C=g.mappings.get(b);g.mappings.has(b)&&g.mappings.delete(b);let M=!1;if((s(S)||S===null)&&(M=!0,S={"@id":S}),!r(S))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:p});const P={};g.mappings.set(b,P),P.reverse=!1;const j=["@container","@id","@language","@reverse","@type"];A.processingMode(g,1.1)&&j.push("@context","@direction","@index","@nest","@prefix","@protected");for(const O in S)if(!j.includes(O))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+O,"jsonld.SyntaxError",{code:"invalid term definition",context:p});const L=b.indexOf(":");if(P._termHasColon=L>0,"@reverse"in S){if("@id"in S)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});if("@nest"in S)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});const O=S["@reverse"];if(!s(O))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(O.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:O}},options:R}),C?g.mappings.set(b,C):g.mappings.delete(b);return}const q=E(g,O,{vocab:!0,base:!1},p,x,R);if(!o(q))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});P["@id"]=q,P.reverse=!0}else if("@id"in S){let O=S["@id"];if(O&&!s(O))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(O===null)P["@id"]=null;else if(!A.isKeyword(O)&&O.match(d)){R.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:O}},options:R}),C?g.mappings.set(b,C):g.mappings.delete(b);return}else if(O!==b){if(O=E(g,O,{vocab:!0,base:!1},p,x,R),!o(O)&&!A.isKeyword(O))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(b.match(/(?::[^:])|\//)){const q=new Map(x).set(b,!0);if(E(g,b,{vocab:!0,base:!1},p,q,R)!==O)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p})}P["@id"]=O,P._prefix=M&&!P._termHasColon&&O.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in P))if(P._termHasColon){const O=b.substr(0,L);if(p.hasOwnProperty(O)&&A.createTermDefinition({activeCtx:g,localCtx:p,term:O,defined:x,options:R}),g.mappings.has(O)){const q=b.substr(L+1);P["@id"]=g.mappings.get(O)["@id"]+q}else P["@id"]=b}else if(b==="@type")P["@id"]=b;else{if(!("@vocab"in g))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p,term:b});P["@id"]=g["@vocab"]+b}if((S["@protected"]===!0||x.get("@protected")===!0&&S["@protected"]!==!1)&&(g.protected[b]=!0,P.protected=!0),x.set(b,!0),"@type"in S){let O=S["@type"];if(!s(O))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(O==="@json"||O==="@none"){if(A.processingMode(g,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${O}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else if(O!=="@id"&&O!=="@vocab"){if(O=E(g,O,{vocab:!0,base:!1},p,x,R),!o(O))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(O.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}P["@type"]=O}if("@container"in S){const O=s(S["@container"])?[S["@container"]]:S["@container"]||[],q=["@list","@set","@index","@language"];let B=!0;const re=O.includes("@set");if(A.processingMode(g,1.1)){if(q.push("@graph","@id","@type"),O.includes("@list")){if(O.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else if(O.includes("@graph")){if(O.some(z=>z!=="@graph"&&z!=="@id"&&z!=="@index"&&z!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else B&=O.length<=(re?2:1);if(O.includes("@type")&&(P["@type"]=P["@type"]||"@id",!["@id","@vocab"].includes(P["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else B&=!n(S["@container"]),B&=O.length<=1;if(B&=O.every(z=>q.includes(z)),B&=!(re&&O.includes("@list")),!B)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+q.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:p});if(P.reverse&&!O.every(z=>["@index","@set"].includes(z)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});P["@container"]=O}if("@index"in S){if(!("@container"in S)||!P["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${S["@index"]}" on term "${b}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});if(!s(S["@index"])||S["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${S["@index"]}" on term "${b}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});P["@index"]=S["@index"]}if("@context"in S&&(P["@context"]=S["@context"]),"@language"in S&&!("@type"in S)){let O=S["@language"];if(O!==null&&!s(O))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:p});O!==null&&(O=O.toLowerCase()),P["@language"]=O}if("@prefix"in S){if(b.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(A.isKeyword(P["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(typeof S["@prefix"]=="boolean")P._prefix=S["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:p})}if("@direction"in S){const O=S["@direction"];if(O!==null&&O!=="ltr"&&O!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:p});P["@direction"]=O}if("@nest"in S){const O=S["@nest"];if(!s(O)||O!=="@nest"&&O.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:p});P["@nest"]=O}// disallow aliasing @context and @preserve
const Y=P["@id"];if(Y==="@context"||Y==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:p});if(C&&C.protected&&!T&&(g.protected[b]=!0,P.protected=!0,!_(C,P)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:p,term:b})},A.expandIri=(g,p,b,x)=>E(g,p,b,void 0,void 0,x);function E(g,p,b,x,R,T){if(p===null||!s(p)||A.isKeyword(p))return p;if(p.match(d))return null;if(x&&x.hasOwnProperty(p)&&R.get(p)!==!0&&A.createTermDefinition({activeCtx:g,localCtx:x,term:p,defined:R,options:T}),b=b||{},b.vocab){const C=g.mappings.get(p);if(C===null)return null;if(r(C)&&"@id"in C)return C["@id"]}const S=p.indexOf(":");if(S>0){const C=p.substr(0,S),M=p.substr(S+1);if(C==="_"||M.indexOf("//")===0)return p;x&&x.hasOwnProperty(C)&&A.createTermDefinition({activeCtx:g,localCtx:x,term:C,defined:R,options:T});const P=g.mappings.get(C);if(P&&P._prefix)return P["@id"]+M;if(o(p))return p}if(b.vocab&&"@vocab"in g)p=g["@vocab"]+p;else if(b.base){let C,M;"@base"in g?g["@base"]?(M=l(T.base,g["@base"]),C=l(M,p)):(M=g["@base"],C=p):(M=T.base,C=l(T.base,p)),p=C}return p}A.getInitialContext=g=>{const p=JSON.stringify({processingMode:g.processingMode}),b=m.get(p);if(b)return b;const x={processingMode:g.processingMode,mappings:new Map,inverse:null,getInverse:R,clone:C,revertToPreviousContext:M,protected:{}};return m.size===y&&m.clear(),m.set(p,x),x;function R(){const P=this;if(P.inverse)return P.inverse;const j=P.inverse={},L=P.fastCurieMap={},Y={},O=(P["@language"]||"@none").toLowerCase(),q=P["@direction"],B=P.mappings,re=[...B.keys()].sort(h);for(const z of re){const ae=B.get(z);if(ae===null)continue;let fe=ae["@container"]||"@none";if(fe=[].concat(fe).sort().join(""),ae["@id"]===null)continue;const pe=f(ae["@id"]);for(const xe of pe){let K=j[xe];const W=A.isKeyword(xe);if(K)!W&&!ae._termHasColon&&Y[xe].push(z);else if(j[xe]=K={},!W&&!ae._termHasColon){Y[xe]=[z];const $={iri:xe,terms:Y[xe]};xe[0]in L?L[xe[0]].push($):L[xe[0]]=[$]}if(K[fe]||(K[fe]={"@language":{},"@type":{},"@any":{}}),K=K[fe],S(z,K["@any"],"@none"),ae.reverse)S(z,K["@type"],"@reverse");else if(ae["@type"]==="@none")S(z,K["@any"],"@none"),S(z,K["@language"],"@none"),S(z,K["@type"],"@none");else if("@type"in ae)S(z,K["@type"],ae["@type"]);else if("@language"in ae&&"@direction"in ae){const $=ae["@language"],X=ae["@direction"];$&&X?S(z,K["@language"],`${$}_${X}`.toLowerCase()):$?S(z,K["@language"],$.toLowerCase()):X?S(z,K["@language"],`_${X}`):S(z,K["@language"],"@null")}else"@language"in ae?S(z,K["@language"],(ae["@language"]||"@null").toLowerCase()):"@direction"in ae?ae["@direction"]?S(z,K["@language"],`_${ae["@direction"]}`):S(z,K["@language"],"@none"):q?(S(z,K["@language"],`_${q}`),S(z,K["@language"],"@none"),S(z,K["@type"],"@none")):(S(z,K["@language"],O),S(z,K["@language"],"@none"),S(z,K["@type"],"@none"))}}for(const z in L)T(L,z,1);return j}function T(P,j,L){const Y=P[j],O=P[j]={};let q,B;for(const re of Y)q=re.iri,L>=q.length?B="":B=q[L],B in O?O[B].push(re):O[B]=[re];for(const re in O)re!==""&&T(O,re,L+1)}function S(P,j,L){j.hasOwnProperty(L)||(j[L]=P)}function C(){const P={};return P.mappings=t.clone(this.mappings),P.clone=this.clone,P.inverse=null,P.getInverse=this.getInverse,P.protected=t.clone(this.protected),this.previousContext&&(P.previousContext=this.previousContext.clone()),P.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(P["@base"]=this["@base"]),"@language"in this&&(P["@language"]=this["@language"]),"@vocab"in this&&(P["@vocab"]=this["@vocab"]),P}function M(){return this.previousContext?this.previousContext.clone():this}},A.getContextValue=(g,p,b)=>{if(p===null)return b==="@context"?void 0:null;if(g.mappings.has(p)){const x=g.mappings.get(p);if(i(b))return x;if(x.hasOwnProperty(b))return x[b]}if(b==="@language"&&b in g||b==="@direction"&&b in g)return g[b];if(b!=="@context")return null},A.processingMode=(g,p)=>p.toString()>="1.1"?!g.processingMode||g.processingMode>="json-ld-"+p.toString():g.processingMode==="json-ld-1.0",A.isKeyword=g=>{if(!s(g)||g[0]!=="@")return!1;switch(g){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _(g,p){if(!(g&&typeof g=="object")||!(p&&typeof p=="object"))return g===p;const b=Array.isArray(g);if(b!==Array.isArray(p))return!1;if(b){if(g.length!==p.length)return!1;for(let T=0;T<g.length;++T)if(!_(g[T],p[T]))return!1;return!0}const x=Object.keys(g),R=Object.keys(p);if(x.length!==R.length)return!1;for(const T in g){let S=g[T],C=p[T];if(T==="@container"&&Array.isArray(S)&&Array.isArray(C)&&(S=S.slice().sort(),C=C.slice().sort()),!_(S,C))return!1}return!0}return ff}var hf,yb;function sI(){if(yb)return hf;yb=1;const t=Or(),{isArray:e,isObject:n,isEmptyObject:r,isString:s,isUndefined:i}=ur(),{isList:o,isValue:a,isGraph:l,isSubject:c}=Vs(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=zi(),{isAbsolute:y}=Si(),{REGEX_BCP47:A,REGEX_KEYWORD:E,addValue:_,asArray:g,getValues:p,validateTypeValue:b}=Sr(),{handleEvent:x}=_l(),R={};hf=R,R.expand=async({activeCtx:j,activeProperty:L=null,element:Y,options:O={},insideList:q=!1,insideIndex:B=!1,typeScopedContext:re=null})=>{if(Y==null)return null;if(L==="@default"&&(O=Object.assign({},O,{isFrame:!1})),!e(Y)&&!n(Y))return!q&&(L===null||u(j,L,{vocab:!0},O)==="@graph")?(O.eventHandler&&x({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Y}},options:O}),null):C({activeCtx:j,activeProperty:L,value:Y,options:O});if(e(Y)){let $=[];const X=d(j,L,"@container")||[];q=q||X.includes("@list");for(let ie=0;ie<Y.length;++ie){let ee=await R.expand({activeCtx:j,activeProperty:L,element:Y[ie],options:O,insideIndex:B,typeScopedContext:re});q&&e(ee)&&(ee={"@list":ee}),ee!==null&&(e(ee)?$=$.concat(ee):$.push(ee))}return $}const z=u(j,L,{vocab:!0},O),ae=d(j,L,"@context");re=re||(j.previousContext?j:null);let fe=Object.keys(Y).sort(),pe=!B;if(pe&&re&&fe.length<=2&&!fe.includes("@context"))for(const $ of fe){const X=u(re,$,{vocab:!0},O);if(X==="@value"){pe=!1,j=re;break}if(X==="@id"&&fe.length===1){pe=!1;break}}pe&&(j=j.revertToPreviousContext()),i(ae)||(j=await h({activeCtx:j,localCtx:ae,propagate:!0,overrideProtected:!0,options:O})),"@context"in Y&&(j=await h({activeCtx:j,localCtx:Y["@context"],options:O})),re=j;let xe=null;for(const $ of fe)if(u(j,$,{vocab:!0},O)==="@type"){xe=xe||$;const ie=Y[$],ee=Array.isArray(ie)?ie.length>1?ie.slice().sort():ie:[ie];for(const we of ee){const Ae=d(re,we,"@context");i(Ae)||(j=await h({activeCtx:j,localCtx:Ae,options:O,propagate:!1}))}}let K={};await S({activeCtx:j,activeProperty:L,expandedActiveProperty:z,element:Y,expandedParent:K,options:O,insideList:q,typeKey:xe,typeScopedContext:re}),fe=Object.keys(K);let W=fe.length;if("@value"in K){if("@type"in K&&("@language"in K||"@direction"in K))throw new t('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});let $=W-1;if("@type"in K&&($-=1),"@index"in K&&($-=1),"@language"in K&&($-=1),"@direction"in K&&($-=1),$!==0)throw new t('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:K});const X=K["@value"]===null?[]:g(K["@value"]),ie=p(K,"@type");if(!(m(j,1.1)&&ie.includes("@json")&&ie.length===1))if(X.length===0)O.eventHandler&&x({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:K}},options:O}),K=null;else{if(!X.every(ee=>s(ee)||r(ee))&&"@language"in K)throw new t("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:K});if(!ie.every(ee=>y(ee)&&!(s(ee)&&ee.indexOf("_:")===0)||r(ee)))throw new t('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:K})}}else if("@type"in K&&!e(K["@type"]))K["@type"]=[K["@type"]];else if("@set"in K||"@list"in K){if(W>1&&!(W===2&&"@index"in K))throw new t('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:K});"@set"in K&&(K=K["@set"],fe=Object.keys(K),W=fe.length)}else W===1&&"@language"in K&&(O.eventHandler&&x({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:K}},options:O}),K=null);return n(K)&&!O.keepFreeFloatingNodes&&!q&&(L===null||z==="@graph"||(d(j,L,"@container")||[]).includes("@graph"))&&(K=T({value:K,count:W,options:O})),K};function T({value:j,count:L,options:Y}){if(L===0||"@value"in j||"@list"in j||L===1&&"@id"in j){if(Y.eventHandler){let O,q;L===0?(O="empty object",q="Dropping empty object."):"@value"in j?(O="object with only @value",q="Dropping object with only @value."):"@list"in j?(O="object with only @list",q="Dropping object with only @list."):L===1&&"@id"in j&&(O="object with only @id",q="Dropping object with only @id."),x({event:{type:["JsonLdEvent"],code:O,level:"warning",message:q,details:{value:j}},options:Y})}return null}return j}async function S({activeCtx:j,activeProperty:L,expandedActiveProperty:Y,element:O,expandedParent:q,options:B={},insideList:re,typeKey:z,typeScopedContext:ae}){const fe=Object.keys(O).sort(),pe=[];let xe;const K=O[z]&&u(j,e(O[z])?O[z][0]:O[z],{vocab:!0},{...B,typeExpansion:!0})==="@json";for(const W of fe){let $=O[W],X;if(W==="@context")continue;const ie=u(j,W,{vocab:!0},B);if(ie===null||!(y(ie)||f(ie))){B.eventHandler&&x({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:W,expandedProperty:ie}},options:B});continue}if(f(ie)){if(Y==="@reverse")throw new t("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:$});if(ie in q&&ie!=="@included"&&ie!=="@type")throw new t("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ie})}if(ie==="@id"){if(!s($)){if(!B.isFrame)throw new t('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:$});if(n($)){if(!r($))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}else if(e($)){if(!$.every(D=>s(D)))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}else throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}_(q,"@id",g($).map(D=>{if(s(D)){const F=u(j,D,{base:!0},B);return B.eventHandler&&(F===null?x(D===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:D}},options:B}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:D}},options:B}):y(F)||x({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:D,expandedId:F}},options:B})),F}return D}),{propertyIsArray:B.isFrame});continue}if(ie==="@type"){n($)&&($=Object.fromEntries(Object.entries($).map(([D,F])=>[u(ae,D,{vocab:!0}),g(F).map(se=>u(ae,se,{base:!0,vocab:!0},{...B,typeExpansion:!0}))]))),b($,B.isFrame),_(q,"@type",g($).map(D=>{if(s(D)){const F=u(ae,D,{base:!0,vocab:!0},{...B,typeExpansion:!0});return F!=="@json"&&!y(F)&&B.eventHandler&&x({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:D}},options:B}),F}return D}),{propertyIsArray:!!B.isFrame});continue}if(ie==="@included"&&m(j,1.1)){const D=g(await R.expand({activeCtx:j,activeProperty:L,element:$,options:B}));if(!D.every(F=>c(F)))throw new t("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:$});_(q,"@included",D,{propertyIsArray:!0});continue}if(ie==="@graph"&&!(n($)||e($)))throw new t('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:$});if(ie==="@value"){xe=$,K&&m(j,1.1)?q["@value"]=$:_(q,"@value",$,{propertyIsArray:B.isFrame});continue}if(ie==="@language"){if($===null)continue;if(!s($)&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:$});$=g($).map(D=>s(D)?D.toLowerCase():D);for(const D of $)s(D)&&!D.match(A)&&B.eventHandler&&x({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:D}},options:B});_(q,"@language",$,{propertyIsArray:B.isFrame});continue}if(ie==="@direction"){if(!s($)&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:$});$=g($);for(const D of $)if(s(D)&&D!=="ltr"&&D!=="rtl")throw new t('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:$});_(q,"@direction",$,{propertyIsArray:B.isFrame});continue}if(ie==="@index"){if(!s($))throw new t('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:$});_(q,"@index",$);continue}if(ie==="@reverse"){if(!n($))throw new t('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:$});if(X=await R.expand({activeCtx:j,activeProperty:"@reverse",element:$,options:B}),"@reverse"in X)for(const F in X["@reverse"])_(q,F,X["@reverse"][F],{propertyIsArray:!0});let D=q["@reverse"]||null;for(const F in X){if(F==="@reverse")continue;D===null&&(D=q["@reverse"]={}),_(D,F,[],{propertyIsArray:!0});const se=X[F];for(let ge=0;ge<se.length;++ge){const de=se[ge];if(a(de)||o(de))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});_(D,F,de,{propertyIsArray:!0})}}continue}if(ie==="@nest"){pe.push(W);continue}let ee=j;const we=d(j,W,"@context");i(we)||(ee=await h({activeCtx:j,localCtx:we,propagate:!0,overrideProtected:!0,options:B}));const Ae=d(j,W,"@container")||[];if(Ae.includes("@language")&&n($)){const D=d(ee,W,"@direction");X=M(ee,$,D,B)}else if(Ae.includes("@index")&&n($)){const D=Ae.includes("@graph"),F=d(ee,W,"@index")||"@index",se=F!=="@index"&&u(j,F,{vocab:!0},B);X=await P({activeCtx:ee,options:B,activeProperty:W,value:$,asGraph:D,indexKey:F,propertyIndex:se})}else if(Ae.includes("@id")&&n($)){const D=Ae.includes("@graph");X=await P({activeCtx:ee,options:B,activeProperty:W,value:$,asGraph:D,indexKey:"@id"})}else if(Ae.includes("@type")&&n($))X=await P({activeCtx:ee.revertToPreviousContext(),options:B,activeProperty:W,value:$,asGraph:!1,indexKey:"@type"});else{const D=ie==="@list";if(D||ie==="@set"){let F=L;D&&Y==="@graph"&&(F=null),X=await R.expand({activeCtx:ee,activeProperty:F,element:$,options:B,insideList:D})}else d(j,W,"@type")==="@json"?X={"@type":"@json","@value":$}:X=await R.expand({activeCtx:ee,activeProperty:W,element:$,options:B,insideList:!1})}if(!(X===null&&ie!=="@value")){if(ie!=="@list"&&!o(X)&&Ae.includes("@list")&&(X={"@list":g(X)}),Ae.includes("@graph")&&!Ae.some(D=>D==="@id"||D==="@index")){if(X=g(X),B.isFrame||(X=X.filter(D=>{const F=Object.keys(D).length;return T({value:D,count:F,options:B})!==null})),X.length===0)continue;X=X.map(D=>({"@graph":g(D)}))}if(ee.mappings.has(W)&&ee.mappings.get(W).reverse){const D=q["@reverse"]=q["@reverse"]||{};X=g(X);for(let F=0;F<X.length;++F){const se=X[F];if(a(se)||o(se))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});_(D,ie,se,{propertyIsArray:!0})}continue}_(q,ie,X,{propertyIsArray:!0})}}if("@value"in q&&!(q["@type"]==="@json"&&m(j,1.1))){if((n(xe)||e(xe))&&!B.isFrame)throw new t('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:xe})}for(const W of pe){const $=e(O[W])?O[W]:[O[W]];for(const X of $){if(!n(X)||Object.keys(X).some(ie=>u(j,ie,{vocab:!0},B)==="@value"))throw new t("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:X});await S({activeCtx:j,activeProperty:L,expandedActiveProperty:Y,element:X,expandedParent:q,options:B,insideList:re,typeScopedContext:ae,typeKey:z})}}}function C({activeCtx:j,activeProperty:L,value:Y,options:O}){if(Y==null)return null;const q=u(j,L,{vocab:!0},O);if(q==="@id")return u(j,Y,{base:!0},O);if(q==="@type")return u(j,Y,{vocab:!0,base:!0},{...O,typeExpansion:!0});const B=d(j,L,"@type");if((B==="@id"||q==="@graph")&&s(Y)){const z=u(j,Y,{base:!0},O);return z===null&&Y.match(E)&&O.eventHandler&&x({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:L}},options:O}),{"@id":z}}if(B==="@vocab"&&s(Y))return{"@id":u(j,Y,{vocab:!0,base:!0},O)};if(f(q))return Y;const re={};if(B&&!["@id","@vocab","@none"].includes(B))re["@type"]=B;else if(s(Y)){const z=d(j,L,"@language");z!==null&&(re["@language"]=z);const ae=d(j,L,"@direction");ae!==null&&(re["@direction"]=ae)}return["boolean","number","string"].includes(typeof Y)||(Y=Y.toString()),re["@value"]=Y,re}function M(j,L,Y,O){const q=[],B=Object.keys(L).sort();for(const re of B){const z=u(j,re,{vocab:!0},O);let ae=L[re];e(ae)||(ae=[ae]);for(const fe of ae){if(fe===null)continue;if(!s(fe))throw new t("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:L});const pe={"@value":fe};z!=="@none"&&(re.match(A)||O.eventHandler&&x({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:re}},options:O}),pe["@language"]=re.toLowerCase()),Y&&(pe["@direction"]=Y),q.push(pe)}}return q}async function P({activeCtx:j,options:L,activeProperty:Y,value:O,asGraph:q,indexKey:B,propertyIndex:re}){const z=[],ae=Object.keys(O).sort(),fe=B==="@type";for(let pe of ae){if(fe){const W=d(j,pe,"@context");i(W)||(j=await h({activeCtx:j,localCtx:W,propagate:!1,options:L}))}let xe=O[pe];e(xe)||(xe=[xe]),xe=await R.expand({activeCtx:j,activeProperty:Y,element:xe,options:L,insideList:!1,insideIndex:!0});let K;re?pe==="@none"?K="@none":K=C({activeCtx:j,activeProperty:B,value:pe,options:L}):K=u(j,pe,{vocab:!0},L),B==="@id"?pe=u(j,pe,{base:!0},L):fe&&(pe=K);for(let W of xe){if(q&&!l(W)&&(W={"@graph":[W]}),B==="@type")K==="@none"||(W["@type"]?W["@type"]=[pe].concat(W["@type"]):W["@type"]=[pe]);else{if(a(W)&&!["@language","@type","@index"].includes(B))throw new t(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${B}".`,"jsonld.SyntaxError",{code:"invalid value object",value:W});re?K!=="@none"&&_(W,re,K,{propertyIsArray:!0,prependValue:!0}):K!=="@none"&&!(B in W)&&(W[B]=pe)}z.push(W)}}return z}return hf}var pf,bb;function Mu(){if(bb)return pf;bb=1;const{isKeyword:t}=zi(),e=Vs(),n=ur(),r=Sr(),s=Or(),i={};return pf=i,i.createMergedNodeMap=(o,a)=>{a=a||{};const l=a.issuer||new r.IdentifierIssuer("_:b"),c={"@default":{}};return i.createNodeMap(o,c,"@default",l),i.mergeNodeMaps(c)},i.createNodeMap=(o,a,l,c,u,d)=>{if(n.isArray(o)){for(const y of o)i.createNodeMap(y,a,l,c,void 0,d);return}if(!n.isObject(o)){d&&d.push(o);return}if(e.isValue(o)){if("@type"in o){let y=o["@type"];y.indexOf("_:")===0&&(o["@type"]=y=c.getId(y))}d&&d.push(o);return}else if(d&&e.isList(o)){const y=[];i.createNodeMap(o["@list"],a,l,c,u,y),d.push({"@list":y});return}if("@type"in o){const y=o["@type"];for(const A of y)A.indexOf("_:")===0&&c.getId(A)}n.isUndefined(u)&&(u=e.isBlankNode(o)?c.getId(o["@id"]):o["@id"]),d&&d.push({"@id":u});const f=a[l],h=f[u]=f[u]||{};h["@id"]=u;const m=Object.keys(o).sort();for(let y of m){if(y==="@id")continue;if(y==="@reverse"){const E={"@id":u},_=o["@reverse"];for(const g in _){const p=_[g];for(const b of p){let x=b["@id"];e.isBlankNode(b)&&(x=c.getId(x)),i.createNodeMap(b,a,l,c,x),r.addValue(f[x],g,E,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(y==="@graph"){u in a||(a[u]={}),i.createNodeMap(o[y],a,u,c);continue}if(y==="@included"){i.createNodeMap(o[y],a,l,c);continue}if(y!=="@type"&&t(y)){if(y==="@index"&&y in h&&(o[y]!==h[y]||o[y]["@id"]!==h[y]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[y]=o[y];continue}const A=o[y];if(y.indexOf("_:")===0&&(y=c.getId(y)),A.length===0){r.addValue(h,y,[],{propertyIsArray:!0});continue}for(let E of A)if(y==="@type"&&(E=E.indexOf("_:")===0?c.getId(E):E),e.isSubject(E)||e.isSubjectReference(E)){if("@id"in E&&!E["@id"])continue;const _=e.isBlankNode(E)?c.getId(E["@id"]):E["@id"];r.addValue(h,y,{"@id":_},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(E,a,l,c,_)}else if(e.isValue(E))r.addValue(h,y,E,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(E)){const _=[];i.createNodeMap(E["@list"],a,l,c,u,_),E={"@list":_},r.addValue(h,y,E,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(E,a,l,c,u),r.addValue(h,y,E,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=o=>{const a={};for(const l of Object.keys(o).sort())for(const c of Object.keys(o[l]).sort()){const u=o[l][c];c in a||(a[c]={"@id":c});const d=a[c];for(const f of Object.keys(u).sort())if(t(f)&&f!=="@type")d[f]=r.clone(u[f]);else for(const h of u[f])r.addValue(d,f,r.clone(h),{propertyIsArray:!0,allowDuplicate:!1})}return a},i.mergeNodeMaps=o=>{const a=o["@default"],l=Object.keys(o).sort();for(const c of l){if(c==="@default")continue;const u=o[c];let d=a[c];d?"@graph"in d||(d["@graph"]=[]):a[c]=d={"@id":c,"@graph":[]};const f=d["@graph"];for(const h of Object.keys(u).sort()){const m=u[h];e.isSubjectReference(m)||f.push(m)}}return a},pf}var mf,vb;function iI(){if(vb)return mf;vb=1;const{isSubjectReference:t}=Vs(),{createMergedNodeMap:e}=Mu(),n={};return mf=n,n.flatten=r=>{const s=e(r),i=[],o=Object.keys(s).sort();for(let a=0;a<o.length;++a){const l=s[o[a]];t(l)||i.push(l)}return i},mf}var gf,wb;function oI(){if(wb)return gf;wb=1;const t=Or(),e=Vs(),n=ur(),{REGEX_BCP47:r,addValue:s}=Sr(),{handleEvent:i}=_l(),{RDF_LIST:o,RDF_FIRST:a,RDF_REST:l,RDF_NIL:c,RDF_TYPE:u,RDF_JSON_LITERAL:d,XSD_BOOLEAN:f,XSD_DOUBLE:h,XSD_INTEGER:m,XSD_STRING:y}=gm(),A={};gf=A,A.fromRDF=async(_,g)=>{const{useRdfType:p=!1,useNativeTypes:b=!1,rdfDirection:x=null}=g,R={},T={"@default":R},S={};if(x){if(x==="compound-literal")throw new t("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:x});if(x!=="i18n-datatype")throw new t("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:x})}for(const P of _){const j=P.graph.termType==="DefaultGraph"?"@default":P.graph.value;j in T||(T[j]={}),j!=="@default"&&!(j in R)&&(R[j]={"@id":j});const L=T[j],Y=P.subject.value,O=P.predicate.value,q=P.object;Y in L||(L[Y]={"@id":Y});const B=L[Y],re=q.termType.endsWith("Node");if(re&&!(q.value in L)&&(L[q.value]={"@id":q.value}),O===u&&!p&&re){s(B,"@type",q.value,{propertyIsArray:!0});continue}const z=E(q,b,x,g);if(s(B,O,z,{propertyIsArray:!0}),re)if(q.value===c){const ae=L[q.value];"usages"in ae||(ae.usages=[]),ae.usages.push({node:B,property:O,value:z})}else q.value in S?S[q.value]=!1:S[q.value]={node:B,property:O,value:z}}for(const P in T){const j=T[P];if(!(c in j))continue;const L=j[c];if(L.usages){for(let Y of L.usages){let O=Y.node,q=Y.property,B=Y.value;const re=[],z=[];let ae=Object.keys(O).length;for(;q===l&&n.isObject(S[O["@id"]])&&n.isArray(O[a])&&O[a].length===1&&n.isArray(O[l])&&O[l].length===1&&(ae===3||ae===4&&n.isArray(O["@type"])&&O["@type"].length===1&&O["@type"][0]===o)&&(re.push(O[a][0]),z.push(O["@id"]),Y=S[O["@id"]],O=Y.node,q=Y.property,B=Y.value,ae=Object.keys(O).length,!!e.isBlankNode(O)););delete B["@id"],B["@list"]=re.reverse();for(const fe of z)delete j[fe]}delete L.usages}}const C=[],M=Object.keys(R).sort();for(const P of M){const j=R[P];if(P in T){const L=j["@graph"]=[],Y=T[P],O=Object.keys(Y).sort();for(const q of O){const B=Y[q];e.isSubjectReference(B)||L.push(B)}}e.isSubjectReference(j)||C.push(j)}return C};function E(_,g,p,b){if(_.termType.endsWith("Node"))return{"@id":_.value};const x={"@value":_.value};if(_.language)_.language.match(r)||b.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:_.language}},options:b}),x["@language"]=_.language;else{let R=_.datatype.value;if(R||(R=y),R===d){R="@json";try{x["@value"]=JSON.parse(x["@value"])}catch(T){throw new t("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:x["@value"],cause:T})}}if(g){if(R===f)x["@value"]==="true"?x["@value"]=!0:x["@value"]==="false"&&(x["@value"]=!1);else if(n.isNumeric(x["@value"]))if(R===m){const T=parseInt(x["@value"],10);T.toFixed(0)===x["@value"]&&(x["@value"]=T)}else R===h&&(x["@value"]=parseFloat(x["@value"]));[f,m,h,y].includes(R)||(x["@type"]=R)}else if(p==="i18n-datatype"&&R.startsWith("https://www.w3.org/ns/i18n#")){const[,T,S]=R.split(/[#_]/);T.length>0&&(x["@language"]=T,T.match(r)||b.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:T}},options:b})),x["@direction"]=S}else R!==y&&(x["@type"]=R)}return x}return gf}var yf,_b;function aI(){return _b||(_b=1,yf=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,s)=>{const i=s===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+i+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,s)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const i=n.length===0?"":",";return n+i+t(r)+":"+t(e[r])},"")+"}"}),yf}var bf,xb;function lI(){if(xb)return bf;xb=1;const{createNodeMap:t}=Mu(),{isKeyword:e}=zi(),n=Vs(),r=aI(),s=Or(),i=ur(),o=Sr(),{handleEvent:a}=_l(),{RDF_FIRST:l,RDF_REST:c,RDF_NIL:u,RDF_TYPE:d,RDF_JSON_LITERAL:f,RDF_LANGSTRING:h,XSD_BOOLEAN:m,XSD_DOUBLE:y,XSD_INTEGER:A,XSD_STRING:E}=gm(),{isAbsolute:_}=Si(),g={};bf=g,g.toRDF=(R,T)=>{const S=new o.IdentifierIssuer("_:b"),C={"@default":{}};t(R,C,"@default",S);const M=[],P=Object.keys(C).sort();for(const j of P){let L;if(j==="@default")L={termType:"DefaultGraph",value:""};else if(_(j))j.startsWith("_:")?L={termType:"BlankNode"}:L={termType:"NamedNode"},L.value=j;else{T.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:j}},options:T});continue}p(M,C[j],L,S,T)}return M};function p(R,T,S,C,M){const P=Object.keys(T).sort();for(const j of P){const L=T[j],Y=Object.keys(L).sort();for(let O of Y){const q=L[O];if(O==="@type")O=d;else if(e(O))continue;for(const B of q){const re={termType:j.startsWith("_:")?"BlankNode":"NamedNode",value:j};if(!_(j)){M.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:j}},options:M});continue}const z={termType:O.startsWith("_:")?"BlankNode":"NamedNode",value:O};if(!_(O)){M.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:O}},options:M});continue}if(z.termType==="BlankNode"&&!M.produceGeneralizedRdf){M.eventHandler&&a({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:C.getOldIds().find(fe=>C.getId(fe)===O)}},options:M});continue}const ae=x(B,C,R,S,M.rdfDirection,M);ae&&R.push({subject:re,predicate:z,object:ae,graph:S})}}}}function b(R,T,S,C,M,P){const j={termType:"NamedNode",value:l},L={termType:"NamedNode",value:c},Y={termType:"NamedNode",value:u},O=R.pop(),q=O?{termType:"BlankNode",value:T.getId()}:Y;let B=q;for(const re of R){const z=x(re,T,S,C,M,P),ae={termType:"BlankNode",value:T.getId()};S.push({subject:B,predicate:j,object:z,graph:C}),S.push({subject:B,predicate:L,object:ae,graph:C}),B=ae}if(O){const re=x(O,T,S,C,M,P);S.push({subject:B,predicate:j,object:re,graph:C}),S.push({subject:B,predicate:L,object:Y,graph:C})}return q}function x(R,T,S,C,M,P){const j={};if(n.isValue(R)){j.termType="Literal",j.value=void 0,j.datatype={termType:"NamedNode"};let L=R["@value"];const Y=R["@type"]||null;if(Y==="@json")j.value=r(L),j.datatype.value=f;else if(i.isBoolean(L))j.value=L.toString(),j.datatype.value=Y||m;else if(i.isDouble(L)||Y===y)i.isDouble(L)||(L=parseFloat(L)),j.value=L.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),j.datatype.value=Y||y;else if(i.isNumber(L))j.value=L.toFixed(0),j.datatype.value=Y||A;else if("@direction"in R&&M==="i18n-datatype"){const O=(R["@language"]||"").toLowerCase(),q=R["@direction"],B=`https://www.w3.org/ns/i18n#${O}_${q}`;j.datatype.value=B,j.value=L}else{if("@direction"in R&&M==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:M});if("@direction"in R&&M)throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:M});"@language"in R?("@direction"in R&&!M&&P.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:j.value}},options:P}),j.value=L,j.datatype.value=Y||h,j.language=R["@language"]):("@direction"in R&&!M&&P.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:j.value}},options:P}),j.value=L,j.datatype.value=Y||E)}}else if(n.isList(R)){const L=b(R["@list"],T,S,C,M,P);j.termType=L.termType,j.value=L.value}else{const L=i.isObject(R)?R["@id"]:R;j.termType=L.startsWith("_:")?"BlankNode":"NamedNode",j.value=L}return j.termType==="NamedNode"&&!_(j.value)?(P.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:j.value}},options:P}),null):j}return bf}var vf,Eb;function cI(){if(Eb)return vf;Eb=1;const{isKeyword:t}=zi(),e=Vs(),n=ur(),r=Sr(),s=Si(),i=Or(),{createNodeMap:o,mergeNodeMapGraphs:a}=Mu(),l={};vf=l,l.frameMergedOrDefault=(p,b,x)=>{const R={options:x,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},T=new r.IdentifierIssuer("_:b");o(p,R.graphMap,"@default",T),x.merged&&(R.graphMap["@merged"]=a(R.graphMap),R.graph="@merged"),R.subjects=R.graphMap[R.graph];const S=[];l.frame(R,Object.keys(R.subjects).sort(),b,S),x.pruneBlankNodeIdentifiers&&(x.bnodesToClear=Object.keys(R.bnodeMap).filter(C=>R.bnodeMap[C].length===1));// remove @preserve from results
return x.link={},A(S,x)},l.frame=(p,b,x,R,T=null)=>{f(x),x=x[0];const S=p.options,C={embed:d(x,S,"embed"),explicit:d(x,S,"explicit"),requireAll:d(x,S,"requireAll")};p.link.hasOwnProperty(p.graph)||(p.link[p.graph]={});const M=p.link[p.graph],P=h(p,b,x,C),j=Object.keys(P).sort();for(const L of j){const Y=P[L];if(T===null?p.uniqueEmbeds={[p.graph]:{}}:p.uniqueEmbeds[p.graph]=p.uniqueEmbeds[p.graph]||{},C.embed==="@link"&&L in M){E(R,T,M[L]);continue}const O={"@id":L};if(L.indexOf("_:")===0&&r.addValue(p.bnodeMap,L,O,{propertyIsArray:!0}),M[L]=O,(C.embed==="@first"||C.embed==="@last")&&p.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:x});if(!(!p.embedded&&p.uniqueEmbeds[p.graph].hasOwnProperty(L))){if(p.embedded&&(C.embed==="@never"||u(Y,p.graph,p.subjectStack))){E(R,T,O);continue}if(p.embedded&&(C.embed=="@first"||C.embed=="@once")&&p.uniqueEmbeds[p.graph].hasOwnProperty(L)){E(R,T,O);continue}if(C.embed==="@last"&&L in p.uniqueEmbeds[p.graph]&&y(p,L),p.uniqueEmbeds[p.graph][L]={parent:R,property:T},p.subjectStack.push({subject:Y,graph:p.graph}),L in p.graphMap){let q=!1,B=null;"@graph"in x?(B=x["@graph"][0],q=!(L==="@merged"||L==="@default"),n.isObject(B)||(B={})):(q=p.graph!=="@merged",B={}),q&&l.frame({...p,graph:L,embedded:!1},Object.keys(p.graphMap[L]).sort(),[B],O,"@graph")}"@included"in x&&l.frame({...p,embedded:!1},b,x["@included"],O,"@included");for(const q of Object.keys(Y).sort()){if(t(q)){if(O[q]=r.clone(Y[q]),q==="@type")for(const B of Y["@type"])B.indexOf("_:")===0&&r.addValue(p.bnodeMap,B,O,{propertyIsArray:!0});continue}if(!(C.explicit&&!(q in x)))for(const B of Y[q]){const re=q in x?x[q]:c(C);if(e.isList(B)){const z=x[q]&&x[q][0]&&x[q][0]["@list"]?x[q][0]["@list"]:c(C),ae={"@list":[]};E(O,q,ae);const fe=B["@list"];for(const pe of fe)e.isSubjectReference(pe)?l.frame({...p,embedded:!0},[pe["@id"]],z,ae,"@list"):E(ae,"@list",r.clone(pe))}else e.isSubjectReference(B)?l.frame({...p,embedded:!0},[B["@id"]],re,O,q):g(re[0],B)&&E(O,q,r.clone(B))}}for(const q of Object.keys(x).sort()){if(q==="@type"){if(!n.isObject(x[q][0])||!("@default"in x[q][0]))continue}else if(t(q))continue;const B=x[q][0]||{};if(!d(B,S,"omitDefault")&&!(q in O)){let z="@null";"@default"in B&&(z=r.clone(B["@default"])),n.isArray(z)||(z=[z]),O[q]=[{"@preserve":z}]}}for(const q of Object.keys(x["@reverse"]||{}).sort()){const B=x["@reverse"][q];for(const re of Object.keys(p.subjects))r.getValues(p.subjects[re],q).some(ae=>ae["@id"]===L)&&(O["@reverse"]=O["@reverse"]||{},r.addValue(O["@reverse"],q,[],{propertyIsArray:!0}),l.frame({...p,embedded:!0},[re],B,O["@reverse"][q],T))}E(R,T,O),p.subjectStack.pop()}}},l.cleanupNull=(p,b)=>{if(n.isArray(p))return p.map(R=>l.cleanupNull(R,b)).filter(R=>R);if(p==="@null")return null;if(n.isObject(p)){if("@id"in p){const x=p["@id"];if(b.link.hasOwnProperty(x)){const R=b.link[x].indexOf(p);if(R!==-1)return b.link[x][R];b.link[x].push(p)}else b.link[x]=[p]}for(const x in p)p[x]=l.cleanupNull(p[x],b)}return p};function c(p){const b={};for(const x in p)p[x]!==void 0&&(b["@"+x]=[p[x]]);return[b]}function u(p,b,x){for(let R=x.length-1;R>=0;--R){const T=x[R];if(T.graph===b&&T.subject["@id"]===p["@id"])return!0}return!1}function d(p,b,x){const R="@"+x;let T=R in p?p[R][0]:b[x];if(x==="embed"){if(T===!0)T="@once";else if(T===!1)T="@never";else if(T!=="@always"&&T!=="@never"&&T!=="@link"&&T!=="@first"&&T!=="@last"&&T!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:p})}return T}function f(p){if(!n.isArray(p)||p.length!==1||!n.isObject(p[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:p});if("@id"in p[0]){for(const b of r.asArray(p[0]["@id"]))if(!(n.isObject(b)||s.isAbsolute(b))||n.isString(b)&&b.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}if("@type"in p[0]){for(const b of r.asArray(p[0]["@type"]))if(!(n.isObject(b)||s.isAbsolute(b)||b==="@json")||n.isString(b)&&b.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}}function h(p,b,x,R){const T={};for(const S of b){const C=p.graphMap[p.graph][S];m(p,C,x,R)&&(T[S]=C)}return T}function m(p,b,x,R){let T=!0,S=!1;for(const C in x){let M=!1;const P=r.getValues(b,C),j=r.getValues(x,C).length===0;if(C==="@id"){if(n.isEmptyObject(x["@id"][0]||{})?M=!0:x["@id"].length>=0&&(M=x["@id"].includes(P[0])),!R.requireAll)return M}else if(C==="@type"){if(T=!1,j){if(P.length>0)return!1;M=!0}else if(x["@type"].length===1&&n.isEmptyObject(x["@type"][0]))M=P.length>0;else for(const L of x["@type"])n.isObject(L)&&"@default"in L?M=!0:M=M||P.some(Y=>Y===L);if(!R.requireAll)return M}else{if(t(C))continue;{const L=r.getValues(x,C)[0];let Y=!1;if(L&&(f([L]),Y="@default"in L),T=!1,P.length===0&&Y)continue;if(P.length>0&&j)return!1;if(L===void 0){if(P.length>0)return!1;M=!0}else if(e.isList(L)){const O=L["@list"][0];if(e.isList(P[0])){const q=P[0]["@list"];e.isValue(O)?M=q.some(B=>g(O,B)):(e.isSubject(O)||e.isSubjectReference(O))&&(M=q.some(B=>_(p,O,B,R)))}}else e.isValue(L)?M=P.some(O=>g(L,O)):e.isSubjectReference(L)?M=P.some(O=>_(p,L,O,R)):n.isObject(L)?M=P.length>0:M=!1}}if(!M&&R.requireAll)return!1;S=S||M}return T||S}function y(p,b){const x=p.uniqueEmbeds[p.graph],R=x[b],T=R.parent,S=R.property,C={"@id":b};if(n.isArray(T)){for(let P=0;P<T.length;++P)if(r.compareValues(T[P],C)){T[P]=C;break}}else{const P=n.isArray(T[S]);r.removeValue(T,S,C,{propertyIsArray:P}),r.addValue(T,S,C,{propertyIsArray:P})}const M=P=>{const j=Object.keys(x);for(const L of j)L in x&&n.isObject(x[L].parent)&&x[L].parent["@id"]===P&&(delete x[L],M(L))};M(b)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function A(p,b){if(n.isArray(p))return p.map(x=>A(x,b));if(n.isObject(p)){// remove @preserve
if("@preserve"in p)return p["@preserve"][0];if(e.isValue(p))return p;if(e.isList(p))return p["@list"]=A(p["@list"],b),p;if("@id"in p){const x=p["@id"];if(b.link.hasOwnProperty(x)){const R=b.link[x].indexOf(p);if(R!==-1)return b.link[x][R];b.link[x].push(p)}else b.link[x]=[p]}for(const x in p){if(x==="@id"&&b.bnodesToClear.includes(p[x])){delete p["@id"];continue}p[x]=A(p[x],b)}}return p}function E(p,b,x){n.isObject(p)?r.addValue(p,b,x,{propertyIsArray:!0}):p.push(x)}function _(p,b,x,R){if(!("@id"in x))return!1;const T=p.subjects[x["@id"]];return T&&m(p,T,b,R)}function g(p,b){const x=b["@value"],R=b["@type"],T=b["@language"],S=p["@value"]?n.isArray(p["@value"])?p["@value"]:[p["@value"]]:[],C=p["@type"]?n.isArray(p["@type"])?p["@type"]:[p["@type"]]:[],M=p["@language"]?n.isArray(p["@language"])?p["@language"]:[p["@language"]]:[];return S.length===0&&C.length===0&&M.length===0?!0:!(!(S.includes(x)||n.isEmptyObject(S[0]))||!(!R&&C.length===0||C.includes(R)||R&&n.isEmptyObject(C[0]))||!(!T&&M.length===0||M.includes(T)||T&&n.isEmptyObject(M[0])))}return vf}var wf,Ab;function uI(){if(Ab)return wf;Ab=1;const t=Or(),{isArray:e,isObject:n,isString:r,isUndefined:s}=ur(),{isList:i,isValue:o,isGraph:a,isSimpleGraph:l,isSubjectReference:c}=Vs(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=zi(),{removeBase:y,prependBase:A}=Si(),{REGEX_KEYWORD:E,addValue:_,asArray:g,compareShortestLeast:p}=Sr(),b={};wf=b,b.compact=async({activeCtx:T,activeProperty:S=null,element:C,options:M={}})=>{if(e(C)){let j=[];for(let L=0;L<C.length;++L){const Y=await b.compact({activeCtx:T,activeProperty:S,element:C[L],options:M});Y!==null&&j.push(Y)}return M.compactArrays&&j.length===1&&(d(T,S,"@container")||[]).length===0&&(j=j[0]),j}const P=d(T,S,"@context");if(s(P)||(T=await h({activeCtx:T,localCtx:P,propagate:!0,overrideProtected:!0,options:M})),n(C)){if(M.link&&"@id"in C&&M.link.hasOwnProperty(C["@id"])){const z=M.link[C["@id"]];for(let ae=0;ae<z.length;++ae)if(z[ae].expanded===C)return z[ae].compacted}if(o(C)||c(C)){const z=b.compactValue({activeCtx:T,activeProperty:S,value:C,options:M});return M.link&&c(C)&&(M.link.hasOwnProperty(C["@id"])||(M.link[C["@id"]]=[]),M.link[C["@id"]].push({expanded:C,compacted:z})),z}if(i(C)&&(d(T,S,"@container")||[]).includes("@list"))return b.compact({activeCtx:T,activeProperty:S,element:C["@list"],options:M});const j=S==="@reverse",L={},Y=T;!o(C)&&!c(C)&&(T=T.revertToPreviousContext());const O=d(Y,S,"@context");s(O)||(T=await h({activeCtx:T,localCtx:O,propagate:!0,overrideProtected:!0,options:M})),M.link&&"@id"in C&&(M.link.hasOwnProperty(C["@id"])||(M.link[C["@id"]]=[]),M.link[C["@id"]].push({expanded:C,compacted:L}));let q=C["@type"]||[];q.length>1&&(q=Array.from(q).sort());const B=T;for(const z of q){const ae=b.compactIri({activeCtx:B,iri:z,relativeTo:{vocab:!0}}),fe=d(Y,ae,"@context");s(fe)||(T=await h({activeCtx:T,localCtx:fe,options:M,propagate:!1}))}const re=Object.keys(C).sort();for(const z of re){const ae=C[z];if(z==="@id"){let fe=g(ae).map(xe=>b.compactIri({activeCtx:T,iri:xe,relativeTo:{vocab:!1},base:M.base}));fe.length===1&&(fe=fe[0]);const pe=b.compactIri({activeCtx:T,iri:"@id",relativeTo:{vocab:!0}});L[pe]=fe;continue}if(z==="@type"){let fe=g(ae).map($=>b.compactIri({activeCtx:Y,iri:$,relativeTo:{vocab:!0}}));fe.length===1&&(fe=fe[0]);const pe=b.compactIri({activeCtx:T,iri:"@type",relativeTo:{vocab:!0}}),W=(d(T,pe,"@container")||[]).includes("@set")&&m(T,1.1)||e(fe)&&ae.length===0;_(L,pe,fe,{propertyIsArray:W});continue}if(z==="@reverse"){const fe=await b.compact({activeCtx:T,activeProperty:"@reverse",element:ae,options:M});for(const pe in fe)if(T.mappings.has(pe)&&T.mappings.get(pe).reverse){const xe=fe[pe],W=(d(T,pe,"@container")||[]).includes("@set")||!M.compactArrays;_(L,pe,xe,{propertyIsArray:W}),delete fe[pe]}if(Object.keys(fe).length>0){const pe=b.compactIri({activeCtx:T,iri:z,relativeTo:{vocab:!0}});_(L,pe,fe)}continue}if(z==="@preserve"){const fe=await b.compact({activeCtx:T,activeProperty:S,element:ae,options:M});e(fe)&&fe.length===0||_(L,z,fe);continue}if(z==="@index"){if((d(T,S,"@container")||[]).includes("@index"))continue;const pe=b.compactIri({activeCtx:T,iri:z,relativeTo:{vocab:!0}});_(L,pe,ae);continue}if(z!=="@graph"&&z!=="@list"&&z!=="@included"&&f(z)){const fe=b.compactIri({activeCtx:T,iri:z,relativeTo:{vocab:!0}});_(L,fe,ae);continue}if(!e(ae))throw new t("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(ae.length===0){const fe=b.compactIri({activeCtx:T,iri:z,value:ae,relativeTo:{vocab:!0},reverse:j}),pe=T.mappings.has(fe)?T.mappings.get(fe)["@nest"]:null;let xe=L;pe&&(R(T,pe,M),n(L[pe])||(L[pe]={}),xe=L[pe]),_(xe,fe,ae,{propertyIsArray:!0})}for(const fe of ae){const pe=b.compactIri({activeCtx:T,iri:z,value:fe,relativeTo:{vocab:!0},reverse:j}),xe=T.mappings.has(pe)?T.mappings.get(pe)["@nest"]:null;let K=L;xe&&(R(T,xe,M),n(L[xe])||(L[xe]={}),K=L[xe]);const W=d(T,pe,"@container")||[],$=a(fe),X=i(fe);let ie;X?ie=fe["@list"]:$&&(ie=fe["@graph"]);let ee=await b.compact({activeCtx:T,activeProperty:pe,element:X||$?ie:fe,options:M});if(X)if(e(ee)||(ee=[ee]),!W.includes("@list"))ee={[b.compactIri({activeCtx:T,iri:"@list",relativeTo:{vocab:!0}})]:ee},"@index"in fe&&(ee[b.compactIri({activeCtx:T,iri:"@index",relativeTo:{vocab:!0}})]=fe["@index"]);else{_(K,pe,ee,{valueIsArray:!0,allowDuplicate:!0});continue}if($)if(W.includes("@graph")&&(W.includes("@id")||W.includes("@index")&&l(fe))){let we;K.hasOwnProperty(pe)?we=K[pe]:K[pe]=we={};const Ae=(W.includes("@id")?fe["@id"]:fe["@index"])||b.compactIri({activeCtx:T,iri:"@none",relativeTo:{vocab:!0}});_(we,Ae,ee,{propertyIsArray:!M.compactArrays||W.includes("@set")})}else W.includes("@graph")&&l(fe)?(e(ee)&&ee.length>1&&(ee={"@included":ee}),_(K,pe,ee,{propertyIsArray:!M.compactArrays||W.includes("@set")})):(e(ee)&&ee.length===1&&M.compactArrays&&(ee=ee[0]),ee={[b.compactIri({activeCtx:T,iri:"@graph",relativeTo:{vocab:!0}})]:ee},"@id"in fe&&(ee[b.compactIri({activeCtx:T,iri:"@id",relativeTo:{vocab:!0}})]=fe["@id"]),"@index"in fe&&(ee[b.compactIri({activeCtx:T,iri:"@index",relativeTo:{vocab:!0}})]=fe["@index"]),_(K,pe,ee,{propertyIsArray:!M.compactArrays||W.includes("@set")}));else if(W.includes("@language")||W.includes("@index")||W.includes("@id")||W.includes("@type")){let we;K.hasOwnProperty(pe)?we=K[pe]:K[pe]=we={};let Ae;if(W.includes("@language"))o(ee)&&(ee=ee["@value"]),Ae=fe["@language"];else if(W.includes("@index")){const D=d(T,pe,"@index")||"@index",F=b.compactIri({activeCtx:T,iri:D,relativeTo:{vocab:!0}});if(D==="@index")Ae=fe["@index"],delete ee[F];else{let se;if([Ae,...se]=g(ee[D]||[]),!r(Ae))Ae=null;else switch(se.length){case 0:delete ee[D];break;case 1:ee[D]=se[0];break;default:ee[D]=se;break}}}else if(W.includes("@id")){const D=b.compactIri({activeCtx:T,iri:"@id",relativeTo:{vocab:!0}});Ae=ee[D],delete ee[D]}else if(W.includes("@type")){const D=b.compactIri({activeCtx:T,iri:"@type",relativeTo:{vocab:!0}});let F;switch([Ae,...F]=g(ee[D]||[]),F.length){case 0:delete ee[D];break;case 1:ee[D]=F[0];break;default:ee[D]=F;break}Object.keys(ee).length===1&&"@id"in fe&&(ee=await b.compact({activeCtx:T,activeProperty:pe,element:{"@id":fe["@id"]},options:M}))}Ae||(Ae=b.compactIri({activeCtx:T,iri:"@none",relativeTo:{vocab:!0}})),_(we,Ae,ee,{propertyIsArray:W.includes("@set")})}else{const we=!M.compactArrays||W.includes("@set")||W.includes("@list")||e(ee)&&ee.length===0||z==="@list"||z==="@graph";_(K,pe,ee,{propertyIsArray:we})}}}return L}return C},b.compactIri=({activeCtx:T,iri:S,value:C=null,relativeTo:M={vocab:!1},reverse:P=!1,base:j=null})=>{if(S===null)return S;T.isPropertyTermScoped&&T.previousContext&&(T=T.previousContext);const L=T.getInverse();if(f(S)&&S in L&&"@none"in L[S]&&"@type"in L[S]["@none"]&&"@none"in L[S]["@none"]["@type"])return L[S]["@none"]["@type"]["@none"];if(M.vocab&&S in L){const re=T["@language"]||"@none",z=[];n(C)&&"@index"in C&&!("@graph"in C)&&z.push("@index","@index@set"),n(C)&&"@preserve"in C&&(C=C["@preserve"][0]),a(C)?("@index"in C&&z.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in C&&z.push("@graph@id","@graph@id@set"),z.push("@graph","@graph@set","@set"),"@index"in C||z.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in C||z.push("@graph@id","@graph@id@set")):n(C)&&!o(C)&&z.push("@id","@id@set","@type","@set@type");let ae="@language",fe="@null";if(P)ae="@type",fe="@reverse",z.push("@set");else if(i(C)){"@index"in C||z.push("@list");const xe=C["@list"];if(xe.length===0)ae="@any",fe="@none";else{let K=xe.length===0?re:null,W=null;for(let $=0;$<xe.length;++$){const X=xe[$];let ie="@none",ee="@none";if(o(X))if("@direction"in X){const we=(X["@language"]||"").toLowerCase(),Ae=X["@direction"];ie=`${we}_${Ae}`}else"@language"in X?ie=X["@language"].toLowerCase():"@type"in X?ee=X["@type"]:ie="@null";else ee="@id";if(K===null?K=ie:ie!==K&&o(X)&&(K="@none"),W===null?W=ee:ee!==W&&(W="@none"),K==="@none"&&W==="@none")break}K=K||"@none",W=W||"@none",W!=="@none"?(ae="@type",fe=W):fe=K}}else{if(o(C))if("@language"in C&&!("@index"in C)){z.push("@language","@language@set"),fe=C["@language"];const xe=C["@direction"];xe&&(fe=`${fe}_${xe}`)}else"@direction"in C&&!("@index"in C)?fe=`_${C["@direction"]}`:"@type"in C&&(ae="@type",fe=C["@type"]);else ae="@type",fe="@id";z.push("@set")}z.push("@none"),n(C)&&!("@index"in C)&&z.push("@index","@index@set"),o(C)&&Object.keys(C).length===1&&z.push("@language","@language@set");const pe=x(T,S,C,z,ae,fe);if(pe!==null)return pe}if(M.vocab&&"@vocab"in T){const re=T["@vocab"];if(S.indexOf(re)===0&&S!==re){const z=S.substr(re.length);if(!T.mappings.has(z))return z}}let Y=null;const O=[];let q=T.fastCurieMap;const B=S.length-1;for(let re=0;re<B&&S[re]in q;++re)q=q[S[re]],""in q&&O.push(q[""][0]);for(let re=O.length-1;re>=0;--re){const z=O[re],ae=z.terms;for(const fe of ae){const pe=fe+":"+S.substr(z.iri.length);T.mappings.get(fe)._prefix&&(!T.mappings.has(pe)||C===null&&T.mappings.get(pe)["@id"]===S)&&(Y===null||p(pe,Y)<0)&&(Y=pe)}}if(Y!==null)return Y;for(const[re,z]of T.mappings)if(z&&z._prefix&&S.startsWith(re+":"))throw new t(`Absolute IRI "${S}" confused with prefix "${re}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:T});if(!M.vocab)if("@base"in T)if(T["@base"]){const re=y(A(j,T["@base"]),S);return E.test(re)?`./${re}`:re}else return S;else return y(j,S);return S},b.compactValue=({activeCtx:T,activeProperty:S,value:C,options:M})=>{if(o(C)){const Y=d(T,S,"@type"),O=d(T,S,"@language"),q=d(T,S,"@direction"),B=d(T,S,"@container")||[],re="@index"in C&&!B.includes("@index");if(!re&&Y!=="@none"&&(C["@type"]===Y||"@language"in C&&C["@language"]===O&&"@direction"in C&&C["@direction"]===q||"@language"in C&&C["@language"]===O||"@direction"in C&&C["@direction"]===q))return C["@value"];const z=Object.keys(C).length,ae=z===1||z===2&&"@index"in C&&!re,fe="@language"in T,pe=r(C["@value"]),xe=T.mappings.has(S)&&T.mappings.get(S)["@language"]===null;if(ae&&Y!=="@none"&&(!fe||!pe||xe))return C["@value"];const K={};return re&&(K[b.compactIri({activeCtx:T,iri:"@index",relativeTo:{vocab:!0}})]=C["@index"]),"@type"in C?K[b.compactIri({activeCtx:T,iri:"@type",relativeTo:{vocab:!0}})]=b.compactIri({activeCtx:T,iri:C["@type"],relativeTo:{vocab:!0}}):"@language"in C&&(K[b.compactIri({activeCtx:T,iri:"@language",relativeTo:{vocab:!0}})]=C["@language"]),"@direction"in C&&(K[b.compactIri({activeCtx:T,iri:"@direction",relativeTo:{vocab:!0}})]=C["@direction"]),K[b.compactIri({activeCtx:T,iri:"@value",relativeTo:{vocab:!0}})]=C["@value"],K}const P=u(T,S,{vocab:!0},M),j=d(T,S,"@type"),L=b.compactIri({activeCtx:T,iri:C["@id"],relativeTo:{vocab:j==="@vocab"},base:M.base});return j==="@id"||j==="@vocab"||P==="@graph"?L:{[b.compactIri({activeCtx:T,iri:"@id",relativeTo:{vocab:!0}})]:L}};function x(T,S,C,M,P,j){j===null&&(j="@null");const L=[];if((j==="@id"||j==="@reverse")&&n(C)&&"@id"in C){j==="@reverse"&&L.push("@reverse");const O=b.compactIri({activeCtx:T,iri:C["@id"],relativeTo:{vocab:!0}});T.mappings.has(O)&&T.mappings.get(O)&&T.mappings.get(O)["@id"]===C["@id"]?L.push.apply(L,["@vocab","@id"]):L.push.apply(L,["@id","@vocab"])}else{L.push(j);const O=L.find(q=>q.includes("_"));O&&L.push(O.replace(/^[^_]+_/,"_"))}L.push("@none");const Y=T.inverse[S];for(const O of M){if(!(O in Y))continue;const q=Y[O][P];for(const B of L)if(B in q)return q[B]}return null}function R(T,S,C){if(u(T,S,{vocab:!0},C)!=="@nest")throw new t("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return wf}var _f,Sb;function dI(){return Sb||(Sb=1,_f=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e}),_f}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var xf,Tb;function fI(){if(Tb)return xf;Tb=1;const t=mm(),e=QR(),n=Sr(),r=nI(),s=n.IdentifierIssuer,i=Or(),o=E0(),a=rI(),{expand:l}=sI(),{flatten:c}=iI(),{fromRDF:u}=oI(),{toRDF:d}=lI(),{frameMergedOrDefault:f,cleanupNull:h}=cI(),{isArray:m,isObject:y,isString:A}=ur(),{isSubjectReference:E}=Vs(),{expandIri:_,getInitialContext:g,process:p,processingMode:b}=zi(),{compact:x,compactIri:R}=uI(),{createNodeMap:T,createMergedNodeMap:S,mergeNodeMaps:C}=Mu(),{logEventHandler:M,logWarningEventHandler:P,safeEventHandler:j,setDefaultEventHandler:L,setupEventHandler:Y,strictEventHandler:O,unhandledEventHandler:q}=_l(),B=function(z){const ae={},pe=new o({max:100});z.compact=async function(K,W,$){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(W===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(K===null)return null;$=xe($,{base:A(K)?K:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new r({sharedCache:pe})}),$.link&&($.skipExpansion=!0),$.compactToRelative||delete $.base;let X;$.skipExpansion?X=K:X=await z.expand(K,$);const ie=await z.processContext(g($),W,$);let ee=await x({activeCtx:ie,element:X,options:$});$.compactArrays&&!$.graph&&m(ee)?ee.length===1?ee=ee[0]:ee.length===0&&(ee={}):$.graph&&y(ee)&&(ee=[ee]),y(W)&&"@context"in W&&(W=W["@context"]),W=n.clone(W),m(W)||(W=[W]);const we=W;W=[];for(let D=0;D<we.length;++D)(!y(we[D])||Object.keys(we[D]).length>0)&&W.push(we[D]);const Ae=W.length>0;if(W.length===1&&(W=W[0]),m(ee)){const D=R({activeCtx:ie,iri:"@graph",relativeTo:{vocab:!0}}),F=ee;ee={},Ae&&(ee["@context"]=W),ee[D]=F}else if(y(ee)&&Ae){const D=ee;ee={"@context":W};for(const F in D)ee[F]=D[F]}return ee},z.expand=async function(K,W){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");W=xe(W,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:pe})});const $={},X=[];if("expandContext"in W){const Ae=n.clone(W.expandContext);y(Ae)&&"@context"in Ae?$.expandContext=Ae:$.expandContext={"@context":Ae},X.push($.expandContext)}let ie;if(!A(K))$.input=n.clone(K);else{const Ae=await z.get(K,W);ie=Ae.documentUrl,$.input=Ae.document,Ae.contextUrl&&($.remoteContext={"@context":Ae.contextUrl},X.push($.remoteContext))}"base"in W||(W.base=ie||"");let ee=g(W);for(const Ae of X)ee=await p({activeCtx:ee,localCtx:Ae,options:W});let we=await l({activeCtx:ee,element:$.input,options:W});return y(we)&&"@graph"in we&&Object.keys(we).length===1?we=we["@graph"]:we===null&&(we=[]),m(we)||(we=[we]),we},z.flatten=async function(K,W,$){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof W=="function"?W=null:W=W||null,$=xe($,{base:A(K)?K:"",contextResolver:new r({sharedCache:pe})});const X=await z.expand(K,$),ie=c(X);return W===null?ie:($.graph=!0,$.skipExpansion=!0,await z.compact(ie,W,$))},z.frame=async function(K,W,$){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if($=xe($,{base:A(K)?K:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:pe})}),A(W)){const ge=await z.get(W,$);if(W=ge.document,ge.contextUrl){let de=W["@context"];de?m(de)?de.push(ge.contextUrl):de=[de,ge.contextUrl]:de=ge.contextUrl,W["@context"]=de}}const X=W?W["@context"]||{}:{},ie=await z.processContext(g($),X,$);$.hasOwnProperty("omitGraph")||($.omitGraph=b(ie,1.1)),$.hasOwnProperty("pruneBlankNodeIdentifiers")||($.pruneBlankNodeIdentifiers=b(ie,1.1));const ee=await z.expand(K,$),we={...$};we.isFrame=!0,we.keepFreeFloatingNodes=!0;const Ae=await z.expand(W,we),D=Object.keys(W).map(ge=>_(ie,ge,{vocab:!0}));we.merged=!D.includes("@graph"),we.is11=b(ie,1.1);const F=f(ee,Ae,we);we.graph=!$.omitGraph,we.skipExpansion=!0,we.link={},we.framing=!0;let se=await z.compact(F,X,we);return we.link={},se=h(se,we),se},z.link=async function(K,W,$){const X={};return W&&(X["@context"]=W),X["@embed"]="@link",z.frame(K,X,$)},z.normalize=z.canonize=async function(K,W){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(W=xe(W,{base:A(K)?K:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:pe})}),"inputFormat"in W){if(W.inputFormat!=="application/n-quads"&&W.inputFormat!=="application/nquads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const ie=a.parse(K);return t.canonize(ie,W)}const $={...W};delete $.format,$.produceGeneralizedRdf=!1;const X=await z.toRDF(K,$);return t.canonize(X,W)},z.fromRDF=async function(K,W){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");W=xe(W,{format:A(K)?"application/n-quads":void 0});const{format:$}=W;let{rdfParser:X}=W;if($){if(X=X||ae[$],!X)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:$})}else X=()=>K;const ie=await X(K);return u(ie,W)},z.toRDF=async function(K,W){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");W=xe(W,{base:A(K)?K:"",skipExpansion:!1,contextResolver:new r({sharedCache:pe})});let $;W.skipExpansion?$=K:$=await z.expand(K,W);const X=d($,W);if(W.format){if(W.format==="application/n-quads"||W.format==="application/nquads")return a.serialize(X);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:W.format})}return X},z.createNodeMap=async function(K,W){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");W=xe(W,{base:A(K)?K:"",contextResolver:new r({sharedCache:pe})});const $=await z.expand(K,W);return S($,W)},z.merge=async function(K,W,$){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(K))throw new TypeError('Could not merge, "docs" must be an array.');typeof W=="function"?W=null:W=W||null,$=xe($,{contextResolver:new r({sharedCache:pe})});const X=await Promise.all(K.map(ge=>{const de={...$};return z.expand(ge,de)}));let ie=!0;"mergeNodes"in $&&(ie=$.mergeNodes);const ee=$.issuer||new s("_:b"),we={"@default":{}};for(let ge=0;ge<X.length;++ge){const de=n.relabelBlankNodes(X[ge],{issuer:new s("_:b"+ge+"-")}),N=ie||ge===0?we:{"@default":{}};if(T(de,N,"@default",ee),N!==we)for(const H in N){const Q=N[H];if(!(H in we)){we[H]=Q;continue}const he=we[H];for(const ye in Q)ye in he||(he[ye]=Q[ye])}}const Ae=C(we),D=[],F=Object.keys(Ae).sort();for(let ge=0;ge<F.length;++ge){const de=Ae[F[ge]];E(de)||D.push(de)}return W===null?D:($.graph=!0,$.skipExpansion=!0,await z.compact(D,W,$))},Object.defineProperty(z,"documentLoader",{get:()=>z._documentLoader,set:K=>z._documentLoader=K}),z.documentLoader=async K=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:K})},z.get=async function(K,W){let $;typeof W.documentLoader=="function"?$=W.documentLoader:$=z.documentLoader;const X=await $(K);try{if(!X.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");A(X.document)&&(X.document=JSON.parse(X.document))}catch(ie){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ie,remoteDoc:X})}return X},z.processContext=async function(K,W,$){return $=xe($,{base:"",contextResolver:new r({sharedCache:pe})}),W===null?g($):(W=n.clone(W),y(W)&&"@context"in W||(W={"@context":W}),p({activeCtx:K,localCtx:W,options:$}))},z.getContextValue=zi().getContextValue,z.documentLoaders={},z.useDocumentLoader=function(K){if(!(K in z.documentLoaders))throw new i('Unknown document loader type: "'+K+'"',"jsonld.UnknownDocumentLoader",{type:K});z.documentLoader=z.documentLoaders[K].apply(z,Array.prototype.slice.call(arguments,1))},z.registerRDFParser=function(K,W){ae[K]=W},z.unregisterRDFParser=function(K){delete ae[K]},z.registerRDFParser("application/n-quads",a.parse),z.registerRDFParser("application/nquads",a.parse),z.url=Si(),z.logEventHandler=M,z.logWarningEventHandler=P,z.safeEventHandler=j,z.setDefaultEventHandler=L,z.strictEventHandler=O,z.unhandledEventHandler=q,z.util=n,Object.assign(z,n),z.promises=z,z.RequestQueue=x0(),z.JsonLdProcessor=dI()(z),e.setupGlobals(z),e.setupDocumentLoaders(z);function xe(K,{documentLoader:W=z.documentLoader,...$}){if(K&&"compactionMap"in K)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(K&&"expansionMap"in K)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:W},$,K,{eventHandler:Y({options:K})})}return z},re=function(){return B(function(){return re()})};return B(re),xf=re,xf}var hI=fI();const ym=HR(hI);var Ef={exports:{}},Af={exports:{}},Rb;function pI(){return Rb||(Rb=1,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return e.rotl(n,8)&16711935|e.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=e.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((t.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|t.indexOf(n.charAt(s))>>>6-i*2);return r}};Af.exports=e}()),Af.exports}var Sf,Ib;function Cb(){if(Ib)return Sf;Ib=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};return Sf=t,Sf}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Tf,kb;function mI(){if(kb)return Tf;kb=1,Tf=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return Tf}var Ob;function gI(){return Ob||(Ob=1,function(){var t=pI(),e=Cb().utf8,n=mI(),r=Cb().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=t.bytesToWords(i),l=i.length*8,c=1732584193,u=-271733879,d=-1732584194,f=271733878,h=0;h<a.length;h++)a[h]=(a[h]<<8|a[h]>>>24)&16711935|(a[h]<<24|a[h]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var m=s._ff,y=s._gg,A=s._hh,E=s._ii,h=0;h<a.length;h+=16){var _=c,g=u,p=d,b=f;c=m(c,u,d,f,a[h+0],7,-680876936),f=m(f,c,u,d,a[h+1],12,-389564586),d=m(d,f,c,u,a[h+2],17,606105819),u=m(u,d,f,c,a[h+3],22,-1044525330),c=m(c,u,d,f,a[h+4],7,-176418897),f=m(f,c,u,d,a[h+5],12,1200080426),d=m(d,f,c,u,a[h+6],17,-1473231341),u=m(u,d,f,c,a[h+7],22,-45705983),c=m(c,u,d,f,a[h+8],7,1770035416),f=m(f,c,u,d,a[h+9],12,-1958414417),d=m(d,f,c,u,a[h+10],17,-42063),u=m(u,d,f,c,a[h+11],22,-1990404162),c=m(c,u,d,f,a[h+12],7,1804603682),f=m(f,c,u,d,a[h+13],12,-40341101),d=m(d,f,c,u,a[h+14],17,-1502002290),u=m(u,d,f,c,a[h+15],22,1236535329),c=y(c,u,d,f,a[h+1],5,-165796510),f=y(f,c,u,d,a[h+6],9,-1069501632),d=y(d,f,c,u,a[h+11],14,643717713),u=y(u,d,f,c,a[h+0],20,-373897302),c=y(c,u,d,f,a[h+5],5,-701558691),f=y(f,c,u,d,a[h+10],9,38016083),d=y(d,f,c,u,a[h+15],14,-660478335),u=y(u,d,f,c,a[h+4],20,-405537848),c=y(c,u,d,f,a[h+9],5,568446438),f=y(f,c,u,d,a[h+14],9,-1019803690),d=y(d,f,c,u,a[h+3],14,-187363961),u=y(u,d,f,c,a[h+8],20,1163531501),c=y(c,u,d,f,a[h+13],5,-1444681467),f=y(f,c,u,d,a[h+2],9,-51403784),d=y(d,f,c,u,a[h+7],14,1735328473),u=y(u,d,f,c,a[h+12],20,-1926607734),c=A(c,u,d,f,a[h+5],4,-378558),f=A(f,c,u,d,a[h+8],11,-2022574463),d=A(d,f,c,u,a[h+11],16,1839030562),u=A(u,d,f,c,a[h+14],23,-35309556),c=A(c,u,d,f,a[h+1],4,-1530992060),f=A(f,c,u,d,a[h+4],11,1272893353),d=A(d,f,c,u,a[h+7],16,-155497632),u=A(u,d,f,c,a[h+10],23,-1094730640),c=A(c,u,d,f,a[h+13],4,681279174),f=A(f,c,u,d,a[h+0],11,-358537222),d=A(d,f,c,u,a[h+3],16,-722521979),u=A(u,d,f,c,a[h+6],23,76029189),c=A(c,u,d,f,a[h+9],4,-640364487),f=A(f,c,u,d,a[h+12],11,-421815835),d=A(d,f,c,u,a[h+15],16,530742520),u=A(u,d,f,c,a[h+2],23,-995338651),c=E(c,u,d,f,a[h+0],6,-198630844),f=E(f,c,u,d,a[h+7],10,1126891415),d=E(d,f,c,u,a[h+14],15,-1416354905),u=E(u,d,f,c,a[h+5],21,-57434055),c=E(c,u,d,f,a[h+12],6,1700485571),f=E(f,c,u,d,a[h+3],10,-1894986606),d=E(d,f,c,u,a[h+10],15,-1051523),u=E(u,d,f,c,a[h+1],21,-2054922799),c=E(c,u,d,f,a[h+8],6,1873313359),f=E(f,c,u,d,a[h+15],10,-30611744),d=E(d,f,c,u,a[h+6],15,-1560198380),u=E(u,d,f,c,a[h+13],21,1309151649),c=E(c,u,d,f,a[h+4],6,-145523070),f=E(f,c,u,d,a[h+11],10,-1120210379),d=E(d,f,c,u,a[h+2],15,718787259),u=E(u,d,f,c,a[h+9],21,-343485551),c=c+_>>>0,u=u+g>>>0,d=d+p>>>0,f=f+b>>>0}return t.endian([c,u,d,f])};s._ff=function(i,o,a,l,c,u,d){var f=i+(o&a|~o&l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._gg=function(i,o,a,l,c,u,d){var f=i+(o&l|a&~l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._hh=function(i,o,a,l,c,u,d){var f=i+(o^a^l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._ii=function(i,o,a,l,c,u,d){var f=i+(a^(o|~l))+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._blocksize=16,s._digestsize=16,Ef.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var a=t.wordsToBytes(s(i,o));return o&&o.asBytes?a:o&&o.asString?r.bytesToString(a):t.bytesToHex(a)}}()),Ef.exports}gI();var Rf={},ma={},Db;function yI(){if(Db)return ma;Db=1,ma.byteLength=a,ma.toByteArray=c,ma.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=m);var A=y===m?0:4-y%4;return[y,A]}function a(h){var m=o(h),y=m[0],A=m[1];return(y+A)*3/4-A}function l(h,m,y){return(m+y)*3/4-y}function c(h){var m,y=o(h),A=y[0],E=y[1],_=new n(l(h,A,E)),g=0,p=E>0?A-4:A,b;for(b=0;b<p;b+=4)m=e[h.charCodeAt(b)]<<18|e[h.charCodeAt(b+1)]<<12|e[h.charCodeAt(b+2)]<<6|e[h.charCodeAt(b+3)],_[g++]=m>>16&255,_[g++]=m>>8&255,_[g++]=m&255;return E===2&&(m=e[h.charCodeAt(b)]<<2|e[h.charCodeAt(b+1)]>>4,_[g++]=m&255),E===1&&(m=e[h.charCodeAt(b)]<<10|e[h.charCodeAt(b+1)]<<4|e[h.charCodeAt(b+2)]>>2,_[g++]=m>>8&255,_[g++]=m&255),_}function u(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function d(h,m,y){for(var A,E=[],_=m;_<y;_+=3)A=(h[_]<<16&16711680)+(h[_+1]<<8&65280)+(h[_+2]&255),E.push(u(A));return E.join("")}function f(h){for(var m,y=h.length,A=y%3,E=[],_=16383,g=0,p=y-A;g<p;g+=_)E.push(d(h,g,g+_>p?p:g+_));return A===1?(m=h[y-1],E.push(t[m>>2]+t[m<<4&63]+"==")):A===2&&(m=(h[y-2]<<8)+h[y-1],E.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),E.join("")}return ma}var ql={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Pb;function bI(){return Pb||(Pb=1,ql.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=f,u-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(h?-1:1)*o*Math.pow(2,i-r)},ql.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,u=(1<<c)-1,d=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=m,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+h]=o&255,h+=m,o/=256,c-=8);t[n+h-m]|=y*128}),ql}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $b;function vI(){return $b||($b=1,function(t){const e=yI(),n=bI(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const k=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(k,v),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(k){if(k>s)throw new RangeError('The value "'+k+'" is invalid for option "size"');const v=new Uint8Array(k);return Object.setPrototypeOf(v,a.prototype),v}function a(k,v,w){if(typeof k=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return l(k,v,w)}a.poolSize=8192;function l(k,v,w){if(typeof k=="string")return f(k,v);if(ArrayBuffer.isView(k))return m(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(ye(k,ArrayBuffer)||k&&ye(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(k,SharedArrayBuffer)||k&&ye(k.buffer,SharedArrayBuffer)))return y(k,v,w);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=k.valueOf&&k.valueOf();if(U!=null&&U!==k)return a.from(U,v,w);const J=A(k);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),v,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,v,w){return l(k,v,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function u(k,v,w){return c(k),k<=0?o(k):v!==void 0?typeof w=="string"?o(k).fill(v,w):o(k).fill(v):o(k)}a.alloc=function(k,v,w){return u(k,v,w)};function d(k){return c(k),o(k<0?0:E(k)|0)}a.allocUnsafe=function(k){return d(k)},a.allocUnsafeSlow=function(k){return d(k)};function f(k,v){if((typeof v!="string"||v==="")&&(v="utf8"),!a.isEncoding(v))throw new TypeError("Unknown encoding: "+v);const w=g(k,v)|0;let U=o(w);const J=U.write(k,v);return J!==w&&(U=U.slice(0,J)),U}function h(k){const v=k.length<0?0:E(k.length)|0,w=o(v);for(let U=0;U<v;U+=1)w[U]=k[U]&255;return w}function m(k){if(ye(k,Uint8Array)){const v=new Uint8Array(k);return y(v.buffer,v.byteOffset,v.byteLength)}return h(k)}function y(k,v,w){if(v<0||k.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<v+(w||0))throw new RangeError('"length" is outside of buffer bounds');let U;return v===void 0&&w===void 0?U=new Uint8Array(k):w===void 0?U=new Uint8Array(k,v):U=new Uint8Array(k,v,w),Object.setPrototypeOf(U,a.prototype),U}function A(k){if(a.isBuffer(k)){const v=E(k.length)|0,w=o(v);return w.length===0||k.copy(w,0,0,v),w}if(k.length!==void 0)return typeof k.length!="number"||_e(k.length)?o(0):h(k);if(k.type==="Buffer"&&Array.isArray(k.data))return h(k.data)}function E(k){if(k>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return k|0}function _(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==a.prototype},a.compare=function(v,w){if(ye(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),ye(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(v)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===w)return 0;let U=v.length,J=w.length;for(let ue=0,be=Math.min(U,J);ue<be;++ue)if(v[ue]!==w[ue]){U=v[ue],J=w[ue];break}return U<J?-1:J<U?1:0},a.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(v,w){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return a.alloc(0);let U;if(w===void 0)for(w=0,U=0;U<v.length;++U)w+=v[U].length;const J=a.allocUnsafe(w);let ue=0;for(U=0;U<v.length;++U){let be=v[U];if(ye(be,Uint8Array))ue+be.length>J.length?(a.isBuffer(be)||(be=a.from(be)),be.copy(J,ue)):Uint8Array.prototype.set.call(J,be,ue);else if(a.isBuffer(be))be.copy(J,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=be.length}return J};function g(k,v){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||ye(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const w=k.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&w===0)return 0;let J=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return de(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return Q(k).length;default:if(J)return U?-1:de(k).length;v=(""+v).toLowerCase(),J=!0}}a.byteLength=g;function p(k,v,w){let U=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,v>>>=0,w<=v))return"";for(k||(k="utf8");;)switch(k){case"hex":return re(this,v,w);case"utf8":case"utf-8":return L(this,v,w);case"ascii":return q(this,v,w);case"latin1":case"binary":return B(this,v,w);case"base64":return j(this,v,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,v,w);default:if(U)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),U=!0}}a.prototype._isBuffer=!0;function b(k,v,w){const U=k[v];k[v]=k[w],k[w]=U}a.prototype.swap16=function(){const v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<v;w+=2)b(this,w,w+1);return this},a.prototype.swap32=function(){const v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<v;w+=4)b(this,w,w+3),b(this,w+1,w+2);return this},a.prototype.swap64=function(){const v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<v;w+=8)b(this,w,w+7),b(this,w+1,w+6),b(this,w+2,w+5),b(this,w+3,w+4);return this},a.prototype.toString=function(){const v=this.length;return v===0?"":arguments.length===0?L(this,0,v):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(v){if(!a.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:a.compare(this,v)===0},a.prototype.inspect=function(){let v="";const w=t.INSPECT_MAX_BYTES;return v=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(v+=" ... "),"<Buffer "+v+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(v,w,U,J,ue){if(ye(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(w===void 0&&(w=0),U===void 0&&(U=v?v.length:0),J===void 0&&(J=0),ue===void 0&&(ue=this.length),w<0||U>v.length||J<0||ue>this.length)throw new RangeError("out of range index");if(J>=ue&&w>=U)return 0;if(J>=ue)return-1;if(w>=U)return 1;if(w>>>=0,U>>>=0,J>>>=0,ue>>>=0,this===v)return 0;let be=ue-J,Ue=U-w;const at=Math.min(be,Ue),Ke=this.slice(J,ue),Ye=v.slice(w,U);for(let lt=0;lt<at;++lt)if(Ke[lt]!==Ye[lt]){be=Ke[lt],Ue=Ye[lt];break}return be<Ue?-1:Ue<be?1:0};function x(k,v,w,U,J){if(k.length===0)return-1;if(typeof w=="string"?(U=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,_e(w)&&(w=J?0:k.length-1),w<0&&(w=k.length+w),w>=k.length){if(J)return-1;w=k.length-1}else if(w<0)if(J)w=0;else return-1;if(typeof v=="string"&&(v=a.from(v,U)),a.isBuffer(v))return v.length===0?-1:R(k,v,w,U,J);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(k,v,w):Uint8Array.prototype.lastIndexOf.call(k,v,w):R(k,[v],w,U,J);throw new TypeError("val must be string, number or Buffer")}function R(k,v,w,U,J){let ue=1,be=k.length,Ue=v.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(k.length<2||v.length<2)return-1;ue=2,be/=2,Ue/=2,w/=2}function at(Ye,lt){return ue===1?Ye[lt]:Ye.readUInt16BE(lt*ue)}let Ke;if(J){let Ye=-1;for(Ke=w;Ke<be;Ke++)if(at(k,Ke)===at(v,Ye===-1?0:Ke-Ye)){if(Ye===-1&&(Ye=Ke),Ke-Ye+1===Ue)return Ye*ue}else Ye!==-1&&(Ke-=Ke-Ye),Ye=-1}else for(w+Ue>be&&(w=be-Ue),Ke=w;Ke>=0;Ke--){let Ye=!0;for(let lt=0;lt<Ue;lt++)if(at(k,Ke+lt)!==at(v,lt)){Ye=!1;break}if(Ye)return Ke}return-1}a.prototype.includes=function(v,w,U){return this.indexOf(v,w,U)!==-1},a.prototype.indexOf=function(v,w,U){return x(this,v,w,U,!0)},a.prototype.lastIndexOf=function(v,w,U){return x(this,v,w,U,!1)};function T(k,v,w,U){w=Number(w)||0;const J=k.length-w;U?(U=Number(U),U>J&&(U=J)):U=J;const ue=v.length;U>ue/2&&(U=ue/2);let be;for(be=0;be<U;++be){const Ue=parseInt(v.substr(be*2,2),16);if(_e(Ue))return be;k[w+be]=Ue}return be}function S(k,v,w,U){return he(de(v,k.length-w),k,w,U)}function C(k,v,w,U){return he(N(v),k,w,U)}function M(k,v,w,U){return he(Q(v),k,w,U)}function P(k,v,w,U){return he(H(v,k.length-w),k,w,U)}a.prototype.write=function(v,w,U,J){if(w===void 0)J="utf8",U=this.length,w=0;else if(U===void 0&&typeof w=="string")J=w,U=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(U)?(U=U>>>0,J===void 0&&(J="utf8")):(J=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-w;if((U===void 0||U>ue)&&(U=ue),v.length>0&&(U<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let be=!1;for(;;)switch(J){case"hex":return T(this,v,w,U);case"utf8":case"utf-8":return S(this,v,w,U);case"ascii":case"latin1":case"binary":return C(this,v,w,U);case"base64":return M(this,v,w,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,v,w,U);default:if(be)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(k,v,w){return v===0&&w===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(v,w))}function L(k,v,w){w=Math.min(k.length,w);const U=[];let J=v;for(;J<w;){const ue=k[J];let be=null,Ue=ue>239?4:ue>223?3:ue>191?2:1;if(J+Ue<=w){let at,Ke,Ye,lt;switch(Ue){case 1:ue<128&&(be=ue);break;case 2:at=k[J+1],(at&192)===128&&(lt=(ue&31)<<6|at&63,lt>127&&(be=lt));break;case 3:at=k[J+1],Ke=k[J+2],(at&192)===128&&(Ke&192)===128&&(lt=(ue&15)<<12|(at&63)<<6|Ke&63,lt>2047&&(lt<55296||lt>57343)&&(be=lt));break;case 4:at=k[J+1],Ke=k[J+2],Ye=k[J+3],(at&192)===128&&(Ke&192)===128&&(Ye&192)===128&&(lt=(ue&15)<<18|(at&63)<<12|(Ke&63)<<6|Ye&63,lt>65535&&lt<1114112&&(be=lt))}}be===null?(be=65533,Ue=1):be>65535&&(be-=65536,U.push(be>>>10&1023|55296),be=56320|be&1023),U.push(be),J+=Ue}return O(U)}const Y=4096;function O(k){const v=k.length;if(v<=Y)return String.fromCharCode.apply(String,k);let w="",U=0;for(;U<v;)w+=String.fromCharCode.apply(String,k.slice(U,U+=Y));return w}function q(k,v,w){let U="";w=Math.min(k.length,w);for(let J=v;J<w;++J)U+=String.fromCharCode(k[J]&127);return U}function B(k,v,w){let U="";w=Math.min(k.length,w);for(let J=v;J<w;++J)U+=String.fromCharCode(k[J]);return U}function re(k,v,w){const U=k.length;(!v||v<0)&&(v=0),(!w||w<0||w>U)&&(w=U);let J="";for(let ue=v;ue<w;++ue)J+=G[k[ue]];return J}function z(k,v,w){const U=k.slice(v,w);let J="";for(let ue=0;ue<U.length-1;ue+=2)J+=String.fromCharCode(U[ue]+U[ue+1]*256);return J}a.prototype.slice=function(v,w){const U=this.length;v=~~v,w=w===void 0?U:~~w,v<0?(v+=U,v<0&&(v=0)):v>U&&(v=U),w<0?(w+=U,w<0&&(w=0)):w>U&&(w=U),w<v&&(w=v);const J=this.subarray(v,w);return Object.setPrototypeOf(J,a.prototype),J};function ae(k,v,w){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+v>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(v,w,U){v=v>>>0,w=w>>>0,U||ae(v,w,this.length);let J=this[v],ue=1,be=0;for(;++be<w&&(ue*=256);)J+=this[v+be]*ue;return J},a.prototype.readUintBE=a.prototype.readUIntBE=function(v,w,U){v=v>>>0,w=w>>>0,U||ae(v,w,this.length);let J=this[v+--w],ue=1;for(;w>0&&(ue*=256);)J+=this[v+--w]*ue;return J},a.prototype.readUint8=a.prototype.readUInt8=function(v,w){return v=v>>>0,w||ae(v,1,this.length),this[v]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(v,w){return v=v>>>0,w||ae(v,2,this.length),this[v]|this[v+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(v,w){return v=v>>>0,w||ae(v,2,this.length),this[v]<<8|this[v+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},a.prototype.readBigUInt64LE=le(function(v){v=v>>>0,D(v,"offset");const w=this[v],U=this[v+7];(w===void 0||U===void 0)&&F(v,this.length-8);const J=w+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,ue=this[++v]+this[++v]*2**8+this[++v]*2**16+U*2**24;return BigInt(J)+(BigInt(ue)<<BigInt(32))}),a.prototype.readBigUInt64BE=le(function(v){v=v>>>0,D(v,"offset");const w=this[v],U=this[v+7];(w===void 0||U===void 0)&&F(v,this.length-8);const J=w*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],ue=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+U;return(BigInt(J)<<BigInt(32))+BigInt(ue)}),a.prototype.readIntLE=function(v,w,U){v=v>>>0,w=w>>>0,U||ae(v,w,this.length);let J=this[v],ue=1,be=0;for(;++be<w&&(ue*=256);)J+=this[v+be]*ue;return ue*=128,J>=ue&&(J-=Math.pow(2,8*w)),J},a.prototype.readIntBE=function(v,w,U){v=v>>>0,w=w>>>0,U||ae(v,w,this.length);let J=w,ue=1,be=this[v+--J];for(;J>0&&(ue*=256);)be+=this[v+--J]*ue;return ue*=128,be>=ue&&(be-=Math.pow(2,8*w)),be},a.prototype.readInt8=function(v,w){return v=v>>>0,w||ae(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},a.prototype.readInt16LE=function(v,w){v=v>>>0,w||ae(v,2,this.length);const U=this[v]|this[v+1]<<8;return U&32768?U|4294901760:U},a.prototype.readInt16BE=function(v,w){v=v>>>0,w||ae(v,2,this.length);const U=this[v+1]|this[v]<<8;return U&32768?U|4294901760:U},a.prototype.readInt32LE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},a.prototype.readInt32BE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},a.prototype.readBigInt64LE=le(function(v){v=v>>>0,D(v,"offset");const w=this[v],U=this[v+7];(w===void 0||U===void 0)&&F(v,this.length-8);const J=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(U<<24);return(BigInt(J)<<BigInt(32))+BigInt(w+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),a.prototype.readBigInt64BE=le(function(v){v=v>>>0,D(v,"offset");const w=this[v],U=this[v+7];(w===void 0||U===void 0)&&F(v,this.length-8);const J=(w<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(J)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+U)}),a.prototype.readFloatLE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),n.read(this,v,!0,23,4)},a.prototype.readFloatBE=function(v,w){return v=v>>>0,w||ae(v,4,this.length),n.read(this,v,!1,23,4)},a.prototype.readDoubleLE=function(v,w){return v=v>>>0,w||ae(v,8,this.length),n.read(this,v,!0,52,8)},a.prototype.readDoubleBE=function(v,w){return v=v>>>0,w||ae(v,8,this.length),n.read(this,v,!1,52,8)};function fe(k,v,w,U,J,ue){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>J||v<ue)throw new RangeError('"value" argument is out of bounds');if(w+U>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(v,w,U,J){if(v=+v,w=w>>>0,U=U>>>0,!J){const Ue=Math.pow(2,8*U)-1;fe(this,v,w,U,Ue,0)}let ue=1,be=0;for(this[w]=v&255;++be<U&&(ue*=256);)this[w+be]=v/ue&255;return w+U},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(v,w,U,J){if(v=+v,w=w>>>0,U=U>>>0,!J){const Ue=Math.pow(2,8*U)-1;fe(this,v,w,U,Ue,0)}let ue=U-1,be=1;for(this[w+ue]=v&255;--ue>=0&&(be*=256);)this[w+ue]=v/be&255;return w+U},a.prototype.writeUint8=a.prototype.writeUInt8=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,1,255,0),this[w]=v&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,2,65535,0),this[w]=v&255,this[w+1]=v>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,2,65535,0),this[w]=v>>>8,this[w+1]=v&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,4,4294967295,0),this[w+3]=v>>>24,this[w+2]=v>>>16,this[w+1]=v>>>8,this[w]=v&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,4,4294967295,0),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4};function pe(k,v,w,U,J){Ae(v,U,J,k,w,7);let ue=Number(v&BigInt(4294967295));k[w++]=ue,ue=ue>>8,k[w++]=ue,ue=ue>>8,k[w++]=ue,ue=ue>>8,k[w++]=ue;let be=Number(v>>BigInt(32)&BigInt(4294967295));return k[w++]=be,be=be>>8,k[w++]=be,be=be>>8,k[w++]=be,be=be>>8,k[w++]=be,w}function xe(k,v,w,U,J){Ae(v,U,J,k,w,7);let ue=Number(v&BigInt(4294967295));k[w+7]=ue,ue=ue>>8,k[w+6]=ue,ue=ue>>8,k[w+5]=ue,ue=ue>>8,k[w+4]=ue;let be=Number(v>>BigInt(32)&BigInt(4294967295));return k[w+3]=be,be=be>>8,k[w+2]=be,be=be>>8,k[w+1]=be,be=be>>8,k[w]=be,w+8}a.prototype.writeBigUInt64LE=le(function(v,w=0){return pe(this,v,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=le(function(v,w=0){return xe(this,v,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(v,w,U,J){if(v=+v,w=w>>>0,!J){const at=Math.pow(2,8*U-1);fe(this,v,w,U,at-1,-at)}let ue=0,be=1,Ue=0;for(this[w]=v&255;++ue<U&&(be*=256);)v<0&&Ue===0&&this[w+ue-1]!==0&&(Ue=1),this[w+ue]=(v/be>>0)-Ue&255;return w+U},a.prototype.writeIntBE=function(v,w,U,J){if(v=+v,w=w>>>0,!J){const at=Math.pow(2,8*U-1);fe(this,v,w,U,at-1,-at)}let ue=U-1,be=1,Ue=0;for(this[w+ue]=v&255;--ue>=0&&(be*=256);)v<0&&Ue===0&&this[w+ue+1]!==0&&(Ue=1),this[w+ue]=(v/be>>0)-Ue&255;return w+U},a.prototype.writeInt8=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,1,127,-128),v<0&&(v=255+v+1),this[w]=v&255,w+1},a.prototype.writeInt16LE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,2,32767,-32768),this[w]=v&255,this[w+1]=v>>>8,w+2},a.prototype.writeInt16BE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,2,32767,-32768),this[w]=v>>>8,this[w+1]=v&255,w+2},a.prototype.writeInt32LE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,4,2147483647,-2147483648),this[w]=v&255,this[w+1]=v>>>8,this[w+2]=v>>>16,this[w+3]=v>>>24,w+4},a.prototype.writeInt32BE=function(v,w,U){return v=+v,w=w>>>0,U||fe(this,v,w,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[w]=v>>>24,this[w+1]=v>>>16,this[w+2]=v>>>8,this[w+3]=v&255,w+4},a.prototype.writeBigInt64LE=le(function(v,w=0){return pe(this,v,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=le(function(v,w=0){return xe(this,v,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(k,v,w,U,J,ue){if(w+U>k.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function W(k,v,w,U,J){return v=+v,w=w>>>0,J||K(k,v,w,4),n.write(k,v,w,U,23,4),w+4}a.prototype.writeFloatLE=function(v,w,U){return W(this,v,w,!0,U)},a.prototype.writeFloatBE=function(v,w,U){return W(this,v,w,!1,U)};function $(k,v,w,U,J){return v=+v,w=w>>>0,J||K(k,v,w,8),n.write(k,v,w,U,52,8),w+8}a.prototype.writeDoubleLE=function(v,w,U){return $(this,v,w,!0,U)},a.prototype.writeDoubleBE=function(v,w,U){return $(this,v,w,!1,U)},a.prototype.copy=function(v,w,U,J){if(!a.isBuffer(v))throw new TypeError("argument should be a Buffer");if(U||(U=0),!J&&J!==0&&(J=this.length),w>=v.length&&(w=v.length),w||(w=0),J>0&&J<U&&(J=U),J===U||v.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),v.length-w<J-U&&(J=v.length-w+U);const ue=J-U;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,U,J):Uint8Array.prototype.set.call(v,this.subarray(U,J),w),ue},a.prototype.fill=function(v,w,U,J){if(typeof v=="string"){if(typeof w=="string"?(J=w,w=0,U=this.length):typeof U=="string"&&(J=U,U=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!a.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(v.length===1){const be=v.charCodeAt(0);(J==="utf8"&&be<128||J==="latin1")&&(v=be)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(w<0||this.length<w||this.length<U)throw new RangeError("Out of range index");if(U<=w)return this;w=w>>>0,U=U===void 0?this.length:U>>>0,v||(v=0);let ue;if(typeof v=="number")for(ue=w;ue<U;++ue)this[ue]=v;else{const be=a.isBuffer(v)?v:a.from(v,J),Ue=be.length;if(Ue===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(ue=0;ue<U-w;++ue)this[ue+w]=be[ue%Ue]}return this};const X={};function ie(k,v,w){X[k]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(k,v){return`The "${k}" argument must be of type number. Received type ${typeof v}`},TypeError),ie("ERR_OUT_OF_RANGE",function(k,v,w){let U=`The value of "${k}" is out of range.`,J=w;return Number.isInteger(w)&&Math.abs(w)>2**32?J=ee(String(w)):typeof w=="bigint"&&(J=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(J=ee(J)),J+="n"),U+=` It must be ${v}. Received ${J}`,U},RangeError);function ee(k){let v="",w=k.length;const U=k[0]==="-"?1:0;for(;w>=U+4;w-=3)v=`_${k.slice(w-3,w)}${v}`;return`${k.slice(0,w)}${v}`}function we(k,v,w){D(v,"offset"),(k[v]===void 0||k[v+w]===void 0)&&F(v,k.length-(w+1))}function Ae(k,v,w,U,J,ue){if(k>w||k<v){const be=typeof v=="bigint"?"n":"";let Ue;throw v===0||v===BigInt(0)?Ue=`>= 0${be} and < 2${be} ** ${(ue+1)*8}${be}`:Ue=`>= -(2${be} ** ${(ue+1)*8-1}${be}) and < 2 ** ${(ue+1)*8-1}${be}`,new X.ERR_OUT_OF_RANGE("value",Ue,k)}we(U,J,ue)}function D(k,v){if(typeof k!="number")throw new X.ERR_INVALID_ARG_TYPE(v,"number",k)}function F(k,v,w){throw Math.floor(k)!==k?(D(k,w),new X.ERR_OUT_OF_RANGE("offset","an integer",k)):v<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${v}`,k)}const se=/[^+/0-9A-Za-z-_]/g;function ge(k){if(k=k.split("=")[0],k=k.trim().replace(se,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function de(k,v){v=v||1/0;let w;const U=k.length;let J=null;const ue=[];for(let be=0;be<U;++be){if(w=k.charCodeAt(be),w>55295&&w<57344){if(!J){if(w>56319){(v-=3)>-1&&ue.push(239,191,189);continue}else if(be+1===U){(v-=3)>-1&&ue.push(239,191,189);continue}J=w;continue}if(w<56320){(v-=3)>-1&&ue.push(239,191,189),J=w;continue}w=(J-55296<<10|w-56320)+65536}else J&&(v-=3)>-1&&ue.push(239,191,189);if(J=null,w<128){if((v-=1)<0)break;ue.push(w)}else if(w<2048){if((v-=2)<0)break;ue.push(w>>6|192,w&63|128)}else if(w<65536){if((v-=3)<0)break;ue.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((v-=4)<0)break;ue.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return ue}function N(k){const v=[];for(let w=0;w<k.length;++w)v.push(k.charCodeAt(w)&255);return v}function H(k,v){let w,U,J;const ue=[];for(let be=0;be<k.length&&!((v-=2)<0);++be)w=k.charCodeAt(be),U=w>>8,J=w%256,ue.push(J),ue.push(U);return ue}function Q(k){return e.toByteArray(ge(k))}function he(k,v,w,U){let J;for(J=0;J<U&&!(J+w>=v.length||J>=k.length);++J)v[J+w]=k[J];return J}function ye(k,v){return k instanceof v||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===v.name}function _e(k){return k!==k}const G=function(){const k="0123456789abcdef",v=new Array(256);for(let w=0;w<16;++w){const U=w*16;for(let J=0;J<16;++J)v[U+J]=k[w]+k[J]}return v}();function le(k){return typeof BigInt>"u"?Ce:k}function Ce(){throw new Error("BigInt not supported")}}(Rf)),Rf}var wI=vI();const ga="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ya="http://www.w3.org/2001/XMLSchema#",zl="http://www.w3.org/2000/10/swap/",hr={xsd:{decimal:`${ya}decimal`,boolean:`${ya}boolean`,double:`${ya}double`,integer:`${ya}integer`,string:`${ya}string`},rdf:{type:`${ga}type`,nil:`${ga}nil`,first:`${ga}first`,rest:`${ga}rest`,langString:`${ga}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${zl}reify#forSome`,forAll:`${zl}reify#forAll`},log:{implies:`${zl}log#implies`,isImpliedBy:`${zl}log#isImpliedBy`}},{xsd:Wl}=hr,_I=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Nb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},xI=/[\x00-\x20<>\\"\{\}\|\^\`]/,EI={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},AI=/$0^/;class SI{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in EI)&&this[n]instanceof RegExp&&(this[n]=AI)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const c=this._line,u=r[0];let d="",f="",h="",m=null,y=0,A=!1;switch(u){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){A=!0;break}}else{this._n3Mode&&(y=1,d="^");break}case"<":if(m=this._unescapedIri.exec(r))d="IRI",f=m[1];else if(m=this._iri.exec(r)){if(f=this._unescape(m[1]),f===null||xI.test(f))return o(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",y=2):this._n3Mode&&r.length>1&&r[1]==="="&&(y=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":r.length>1&&r[1]===">"&&(d=">>",y=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(d="blank",h="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(d="var",f=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(d="langcode",f=m[1]):(m=this._keyword.exec(r))&&(d=m[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(d="literal",f=m[0],h=typeof m[1]=="string"?Wl.double:typeof m[2]=="string"?Wl.decimal:Wl.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?d=m[0].toUpperCase():A=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(d="literal",f=m[0],h=Wl.boolean):A=!0;break;case"a":(m=this._shortPredicates.exec(r))?(d="abbreviation",f="a"):A=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,d=u);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(d="{|",y=2):(d=u,y=1));break;case"|":r.length>=2&&r[1]==="}"&&(d="|}",y=2);break;default:A=!0}if(A&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(d="prefix",f=m[1]||""):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(d="prefixed",h=m[1]||"",f=this._unescape(m[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const E=y||m[0].length,_=i(d,f,h,c,E);this.previousToken=_,this._previousMarker=d,r=r.substr(E,r.length)}function i(a,l,c,u,d){const f=r?s-r.length:s,h=f+d,m={type:a,value:l,prefix:c,line:u,start:f,end:h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(_I,(s,i,o,a)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in Nb?Nb[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;e[s-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")queueMicrotask(()=>this._tokenizeToEnd(n,!0));else{const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=wI.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:TI,xsd:go}=hr;let xl,RI=0;const A0={namedNode:R0,blankNode:I0,variable:k0,literal:C0,defaultGraph:OI,quad:Fh,triple:Fh,fromTerm:Na,fromQuad:O0};class ds{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof ds?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class S0 extends ds{get termType(){return"NamedNode"}}class Ha extends ds{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new S0(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?go.string:TI.langString}equals(e){return e instanceof Ha?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class II extends ds{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class CI extends ds{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class kI extends ds{constructor(){return super(""),xl||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}xl=new kI;class T0 extends ds{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||xl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function R0(t){return new S0(t)}function I0(t){return new II(t||`n3-${RI++}`)}function C0(t,e){if(typeof e=="string")return new Ha(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=go.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?go.integer:go.double:(n=go.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===go.string?new Ha(`"${t}"`):new Ha(`"${t}"^^${n}`)}function k0(t){return new CI(t)}function OI(){return xl}function Fh(t,e,n,r){return new T0(t,e,n,r)}function Na(t){if(t instanceof ds)return t;switch(t.termType){case"NamedNode":return R0(t.value);case"BlankNode":return I0(t.value);case"Variable":return k0(t.value);case"DefaultGraph":return xl;case"Literal":return C0(t.value,t.language||t.datatype);case"Quad":return O0(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function O0(t){if(t instanceof T0)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Fh(Na(t.subject),Na(t.predicate),Na(t.object),Na(t.graph))}let Lb=0;class D0{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&P0(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=n===""||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new SI({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Lb=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(s===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?a.predicate===null?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,a=this._object;this._subject=this._factory.quad(s,o,a,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(s!==null){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=Kl}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&e[++s]==="/"&&e[++s]==="/")for(;(i=s+1)<n&&e[i]!=="/";)s=i;break;case"?":case"#":s=n;break;case"/":if(e[s+1]===".")switch(a=e[++s+1],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[++s+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Lb++}_`,this._prefixCallback=i||Kl,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let c;if(this._callback=(u,d)=>{u?c=u:d&&l.push(d)},this._lexer.tokenize(e).every(u=>this._readCallback=this._readCallback(u)),c)throw c;return l}let a=(l,c)=>{l!==null?(this._callback(l),this._callback=Kl):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,a=(l,c)=>{l!==null?(this._callback(l),this._callback=Kl):this._readCallback&&(c.type==="comment"?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=s,this._lexer.tokenize(e,a)}}function Kl(){}function P0(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(hr.rdf.first),t.RDF_REST=e.namedNode(hr.rdf.rest),t.RDF_NIL=e.namedNode(hr.rdf.nil),t.N3_FORALL=e.namedNode(hr.r.forAll),t.N3_FORSOME=e.namedNode(hr.r.forSome),t.ABBREVIATIONS={a:e.namedNode(hr.rdf.type),"=":e.namedNode(hr.owl.sameAs),">":e.namedNode(hr.log.implies),"<":e.namedNode(hr.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}P0(D0.prototype,A0);function DI(t){return!!t&&t.termType==="DefaultGraph"}function Rc(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const PI=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,$I=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Mb="./",NI="../",If="?",Fb="#";class bm{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!PI.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!bm.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],n=["^",Rc(e)],r=[],s=[],i=/[^/?#]*([/?#])/y;let o,a=0,l=0,c=i.lastIndex=e.length;for(;!a&&!l&&(o=i.exec(this.base));)o[1]===Fb?l=i.lastIndex-1:(n.push(Rc(o[0]),"(?:"),r.push(")?"),o[1]!==If?s.push(c=i.lastIndex):(a=c=i.lastIndex,l=this.base.indexOf(Fb,a),this._pathReplacements[a]=If));for(let u=0;u<s.length;u++)this._pathReplacements[s[u]]=NI.repeat(s.length-u-1);return this._pathReplacements[s[s.length-1]]=Mb,this._baseLength=l>0?l:this.base.length,n.push(Rc(this.base.substring(c,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...n,...r].join(""))}toRelative(e){const n=this._getBaseMatcher().exec(e);if(!n)return e;const r=n[0].length;if(r===this._baseLength&&r===e.length)return"";const s=this._pathReplacements[r];if(s){const i=e.substring(r);return s!==If&&!$I.test(i)?e:s===Mb&&/^[^?#]/.test(i)?i:s+i}return e.substring(r-1)}}const ba=A0.defaultGraph(),{rdf:LI,xsd:ao}=hr,jb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Ub=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,MI={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class va extends ds{equals(e){return e===this}}class FI{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(s,i,o){r+=s,o&&o()},end:s=>{s&&s(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=ba,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseIri=new bm(n.baseIRI)))}get _inDefaultGraph(){return ba.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,s,i){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(ba.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,n,r,s,i){delete this._prefixMatch,this._write(this.quadToString(e,n,r,s),i)}quadToString(e,n,r,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(e){let n="";for(const r of e)n+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return n}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseIri&&(n=this._baseIri.toRelative(n)),jb.test(n)&&(n=n.replace(Ub,Bb));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(jb.test(n)&&(n=n.replace(Ub,Bb)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===ao.string)return`"${n}"`}else switch(e.datatype.value){case ao.string:return`"${n}"`;case ao.boolean:if(n==="true"||n==="false")return n;break;case ao.integer:if(/^[+-]?\d+$/.test(n))return n;break;case ao.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case ao.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===LI.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${DI(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,s,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof s=="function"?this._writeQuad(e,n,r,ba,s):this._writeQuad(e,n,r,s||ba,i)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const s={};s[e]=n,this.addPrefixes(s,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let s in e){let i=e[s];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=s+=":",this._write(`@prefix ${s} <${i}>.
`)}if(r){let s="",i="";for(const o in this._prefixIRIs)s+=s?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];s=Rc(s),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,s,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),i=r.length){case 0:return new va("[]");case 1:if(s=r[0],!(s.object instanceof va))return new va(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let o="[";for(let a=0;a<i;a++)s=r[a],s.predicate.equals(e)?o+=`, ${this._encodeObject(s.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,e=s.predicate);return new va(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let s=0;s<n;s++)r[s]=this._encodeObject(e[s]);return new va(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,s)=>{n=null,e(r,s)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function Bb(t){let e=MI[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var jI=Object.defineProperty,UI=(t,e,n)=>e in t?jI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_r=(t,e,n)=>UI(t,typeof e!="symbol"?e+"":e,n);function BI(t,e,n){return t?`Malformed ${e} document found at ${t} - ${n}`:`Malformed ${e} document - ${n}`}var $0=(t=>(t.Turtle="Turtle",t))($0||{});let N0=class extends cr{constructor(e,n,r){super(BI(e,n,r)),_r(this,"documentUrl"),_r(this,"documentFormat"),_r(this,"malformationDetails"),this.documentUrl=e,this.documentFormat=n,this.malformationDetails=r}},L0=class extends cr{constructor(e,n){super(`Request failed trying to fetch ${e}`,n),_r(this,"url"),this.url=e}},jh=class extends cr{constructor(e){super(`Document with '${e}' url not found`),_r(this,"url"),this.url=e}};function HI(t,e){return`Unauthorized${e===403?" (Forbidden)":""}: ${t}`}let Uh=class extends cr{constructor(e,n){super(HI(e,n)),_r(this,"url"),_r(this,"responseStatus"),this.url=e,this.responseStatus=n}get forbidden(){return typeof this.responseStatus<"u"?this.responseStatus===403:void 0}};const VI={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function fi(t,e={}){var n;if(t.startsWith("http"))return t;const[r,s]=t.split(":");if(r&&s){const i=VI[r]??((n=e.extraContext)==null?void 0:n[r])??null;if(!i)throw new Error(`Can't expand IRI with unknown prefix: '${t}'`);return i+s}if(!e.defaultPrefix)throw new Error(`Can't expand IRI without a default prefix: '${t}'`);return e.defaultPrefix+r}let qI=class{constructor(e,n){_r(this,"url"),_r(this,"quads"),this.url=e,this.quads=n}value(e){var n;return(n=this.quads.find(r=>r.predicate.value===fi(e)))==null?void 0:n.object.value}values(e){return this.quads.filter(n=>n.predicate.value===fi(e)).map(n=>n.object.value)}},M0=class{constructor(e=[]){_r(this,"quads"),this.quads=e}isEmpty(){return this.statements.length===0}getQuads(){return this.quads.slice(0)}addQuads(e){this.quads.push(...e)}statements(e,n,r){return this.quads.filter(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))}statement(e,n,r){return this.quads.find(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))??null}contains(e,n,r){return this.statement(e,n,r)!==null}getThing(e){const n=this.statements(e);return new qI(e,n)}expandIRI(e){return fi(e)}termMatches(e,n){return typeof n=="string"?this.expandIRI(n)===e.value:e.termType===e.termType&&e.value===n.value}};var li=(t=>(t.Read="read",t.Write="write",t.Append="append",t.Control="control",t))(li||{});let Gc=class extends M0{constructor(e,n,r){super(n),_r(this,"url"),_r(this,"headers"),this.url=e,this.headers=r}isACPResource(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}isPersonalProfile(){return!!this.statement(this.url,fi("rdf:type"),fi("foaf:PersonalProfileDocument"))}isStorage(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}isUserWritable(){return this.getUserPermissions().includes("write")}getUserPermissions(){return this.getPermissionsFromWAC("user")}getPublicPermissions(){return this.getPermissionsFromWAC("public")}getLastModified(){var e;return Nd(this.headers.get("last-modified"))??Nd((e=this.statement(this.url,"purl:modified"))==null?void 0:e.object.value)??this.getLatestDocumentDate()??null}expandIRI(e){return fi(e,{defaultPrefix:this.url})}getLatestDocumentDate(){const e=[...this.statements(void 0,"purl:modified"),...this.statements(void 0,"purl:created")].map(n=>Nd(n.object.value)).filter(n=>n!==null);return e.length>0?e.reduce((n,r)=>n>r?n:r):null}getPermissionsFromWAC(e){var n;const r=this.headers.get("WAC-Allow")??"",s=((n=r0(r,new RegExp(`${e}="([^"]+)"`)))==null?void 0:n[1])??"";return ln([s.includes("read")&&"read",s.includes("write")&&"write",s.includes("append")&&"append",s.includes("control")&&"control"])}};async function zI(t){const e=await ym.compact(t,{});return"@graph"in e?e:"@id"in e?{"@graph":[e]}:{"@graph":[]}}function WI(t){return"@graph"in t}const Jc="anonymous://",Hb=Jc.length;async function KI(t,e){const n={headers:{Accept:"text/turtle"}};e!=null&&e.cache&&(n.cache=e.cache);try{const r=await((e==null?void 0:e.fetch)??window.fetch)(t,n);if(r.status===404)throw new jh(t);if([401,403].includes(r.status))throw new Uh(t,r.status);return{body:await r.text(),headers:r.headers}}catch(r){throw r instanceof Uh||r instanceof jh?r:new L0(t,{cause:r})}}function F0(t){var e;if((e=t["@id"])!=null&&e.startsWith("#")){t["@id"]=Jc+t["@id"];for(const[n,r]of Object.entries(t))typeof r!="object"||r===null||!("@id"in r)||F0(t[n])}}function GI(t){for(const e of t)e.subject.value.startsWith(Jc)&&(e.subject.value=e.subject.value.slice(Hb)),e.object.value.startsWith(Jc)&&(e.object.value=e.object.value.slice(Hb))}async function JI(t,e,n){n=n??window.fetch.bind(window);const r=await wm(e);return await n(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:e}),new Gc(t,r,new Headers({}))}async function Vo(t,e){const{body:n,headers:r}=await KI(t,e),s=await wm(n,{baseIRI:t});return new Gc(t,s,r)}async function XI(t,e){try{return await Vo(t,e)}catch(n){if(!(n instanceof jh))throw n;return null}}async function vm(t,e){if(WI(t))return(await Promise.all(t["@graph"].map(r=>vm(r,e)))).flat();F0(t);const n=await ym.toRDF(t,{base:e});return GI(n),n}function j0(t,e={}){const n=Fn({baseIRI:e.baseIRI}),r=new D0(n),s={quads:[],containsRelativeIRIs:!1};return new Promise((i,o)=>{const a=r._resolveRelativeIRI;r._resolveRelativeIRI=(...l)=>(s.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI(...l)),r.parse(t,(l,c)=>{if(l){o(new N0(e.baseIRI??null,$0.Turtle,l.message));return}if(!c){i(s);return}s.quads.push(c)})})}async function Fu(t){return{"@graph":await ym.fromRDF(t)}}function YI(t){return new FI().quadsToString(t)}async function QI(t,e){try{return!(await Vo(t,e)).isEmpty()}catch{return!1}}async function wm(t,e={}){const{quads:n}=await j0(t,e);return n}async function ZI(t,e,n){n=n??window.fetch.bind(window),await n(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e})}var eC=Object.defineProperty,tC=(t,e,n)=>e in t?eC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bh=(t,e,n)=>tC(t,typeof e!="symbol"?e+"":e,n);function nC(t,e){return e=e??t,typeof t=="string"?`${t} (returned ${e.status} status code)`:`Request to ${e.url} returned ${e.status} status code`}let rC=class extends cr{constructor(e,n){super(nC(e,n)),Bh(this,"response"),this.response=n??e}},sC=class extends cr{constructor(e,n,r){super(`The resource at ${e} is using an unsupported authorization protocol (${n})`,r),Bh(this,"url"),Bh(this,"protocol"),this.url=e,this.protocol=n}};async function iC(t,e){var n;const r=new M0(t.getQuads()),s={[t.url]:t},i=a=>{a.statements(void 0,"foaf:isPrimaryTopicOf").map(l=>l.object.value).forEach(l=>s[l]=s[l]??null),a.statements(void 0,"foaf:primaryTopic").map(l=>l.subject.value).forEach(l=>s[l]=s[l]??null)},o=async()=>{for(const[a,l]of Object.entries(s))if(l===null)try{const c=await Vo(a,e);s[a]=c,r.addQuads(c.getQuads()),i(c)}catch(c){if(c instanceof Uh){s[a]=!1;continue}throw c}};i(t);do await o();while(Object.values(s).some(a=>a===null));return{store:r,cloaked:Object.values(s).some(a=>a===!1),writableProfileUrl:t.isUserWritable()?t.url:((n=Object.values(s).find(a=>!!a&&a.isUserWritable()))==null?void 0:n.url)??null}}async function Vb(t,e={}){var n,r,s,i,o,a;const l={fetch:e.fetch,cache:"no-store"},c=vr(t),u=await Vo(c,l);if(!u.isPersonalProfile()&&!u.contains(t,"solid:oidcIssuer"))throw new Error(`${t} is not a valid webId.`);const{store:d,writableProfileUrl:f,cloaked:h}=await iC(u,e),m=d.statements(t,"pim:storage").map(_=>_.object.value),y=d.statement(t,"solid:publicTypeIndex"),A=d.statement(t,"solid:privateTypeIndex");let E=br(c);for(;E&&m.length===0;){const _=await n0(Vo(E,l));if(_!=null&&_.isStorage()){m.push(E);break}E=br(E)}if(m.length===0)throw new Error(`Could not find any storage for ${t}.`);return await((n=e.onLoaded)==null?void 0:n.call(e,d)),{webId:t,cloaked:h,writableProfileUrl:f,storageUrls:nr(m),...Fn({name:((r=d.statement(t,"vcard:fn"))==null?void 0:r.object.value)??((s=d.statement(t,"foaf:name"))==null?void 0:s.object.value),avatarUrl:((i=d.statement(t,"vcard:hasPhoto"))==null?void 0:i.object.value)??((o=d.statement(t,"foaf:img"))==null?void 0:o.object.value),oidcIssuerUrl:(a=d.statement(t,"solid:oidcIssuer"))==null?void 0:a.object.value,publicTypeIndexUrl:y==null?void 0:y.object.value,privateTypeIndexUrl:A==null?void 0:A.object.value})}}async function oC(t,e={}){if(e.required)return Vb(t,e);const n=n0(r=>Vb(r,e));return await n(t)??await n(t.replace(/\/$/,"").concat("/profile/card#me"))??await n(us(t).concat("/profile/card#me"))}function aC(t){return!t.path||!t.path.startsWith("/")?null:t.path.match(/^\/[^/]*$/)?"/":`/${f0(t.path.split("/")).filter().slice(0,-1).join("/")}/`.replace("//","/")}function lC(t){const e=aC(t);return t.protocol&&t.domain?`${t.protocol}://${t.domain}${e??"/"}`:e}function Hh(t){if(!(!("@type"in t)||"@value"in t)){t["@id"]=t["@id"]??Un();for(const e of Object.values(t))yt(e)&&Hh(e),H_(e)&&e.forEach(n=>yt(n)&&Hh(n))}}function cC(t){return Fe(Nr(t),e=>Hh(e))}function uC(t){const e=wl(t);return e?Fn({containerUrl:lC(e),documentName:e.path?e.path.split("/").pop():null,resourceHash:e.fragment}):{}}async function dC(t,e,n){n=n??window.fetch.bind(n);const r=t.storageUrls[0],s=`${r}settings/${e}TypeIndex`;return await QI(s,{fetch:n})?`${r}settings/${e}TypeIndex-${Un()}`:s}async function U0(t,e,n){if(t.writableProfileUrl===null)throw new Error("Can't create type index without a writable profile document");n=n??window.fetch.bind(n);const r=await dC(t,e,n),s=e==="public"?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":`
            <> a
                <http://www.w3.org/ns/solid/terms#TypeIndex>,
                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .
        `,i=`
        INSERT DATA {
            <${t.webId}> <http://www.w3.org/ns/solid/terms#${e}TypeIndex> <${r}> .
        }
    `;return await JI(r,s,n),await ZI(t.writableProfileUrl,i,n),r}async function B0(t,e,n,r){const s=await Vo(t,{fetch:r});return(Array.isArray(e)?e:[e]).map(i=>s.statements(void 0,"rdf:type","solid:TypeRegistration").filter(o=>s.contains(o.subject.value,"solid:forClass",i)).map(o=>s.statements(o.subject.value,n)).flat().map(o=>o.object.value).filter(o=>!!o)).flat()}async function fC(t,e){return U0(t,"public",e)}async function hC(t,e){return U0(t,"private",e)}async function pC(t,e,n){return B0(t,e,"solid:instanceContainer",n)}async function mC(t,e,n){return B0(t,e,"solid:instance",n)}async function H0(t,e){var n;e=e??window.fetch.bind(window);const r=((n=((await e(t,{method:"HEAD"})).headers.get("Link")??"").match(/<([^>]+)>;\s*rel="acl"/))==null?void 0:n[1])??null;if(!r)throw new Error(`Could not find ACL Resource for '${t}'`);return Ho(Qt(t),r)}async function V0(t,e,n){n=n??await H0(t,e);const r=await XI(n??"",{fetch:e});if(!r)return V0(Qt(t),e);if(r.isACPResource())throw new sC(t,"ACP");return r}async function gC(t,e){const n=await H0(t,e),r=await V0(t,e,n);return Fn({url:n,effectiveUrl:r.url,document:r})}var yC=Object.defineProperty,bC=(t,e,n)=>e in t?yC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ke=(t,e,n)=>bC(t,typeof e!="symbol"?e+"":e,n);const Sn={ChangeUrl:"change",RemoveProperty:"remove",ShieldProperty:"shield",UpdateProperty:"update"};class vC{constructor(e,n){ke(this,"type",Sn.ChangeUrl),this.resourceUrl=e,this.newResourceUrl=n}}const wC={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function vt(t,e={},n=""){if(/^https?:\/\//.test(t))return t;const r=t.indexOf(":");if(r===-1)return n+t;e={...wC,...e};const s=t.slice(0,r);return s in e?e[s]+t.slice(s.length+1):t}const _C=vt("crdt:property"),qb=vt("crdt:resource"),Io=vt("ldp:Container"),_m=vt("ldp:contains"),q0=vt("rdf:type"),xC=vt("purl:modified");var si=(t=>(t[t.Type=0]="Type",t[t.Reference=1]="Reference",t[t.Literal=2]="Literal",t))(si||{});let z0=class{constructor(e){ke(this,"name"),this.name=e}};const lo={dateTime:vt("xsd:dateTime"),integer:vt("xsd:integer"),boolean:vt("xsd:boolean"),decimal:vt("xsd:decimal"),float:vt("xsd:float"),double:vt("xsd:double")};let Pn=class Ic{constructor(e,n,r){ke(this,"resourceUrl"),ke(this,"name"),ke(this,"value"),this.resourceUrl=e,this.name=n,this.value=r}static fromStatement(e){const n=e.subject.termType==="NamedNode"?e.subject.value:null;if(e.predicate.value===q0)return this.type(n,e.object.value);if(e.object.termType==="NamedNode")return this.reference(n,e.predicate.value,decodeURI(e.object.value));if(e.object.termType==="BlankNode")return this.reference(n,e.predicate.value,null);if(e.object.termType==="Variable")return this.reference(n,e.predicate.value,new z0(e.object.value));const r=e.object;return this.literal(n,e.predicate.value,this.castLiteralValue(e.object.value,r.datatype.value),r.value)}static literal(e,n,r,s){return new EC(e,n,r,s)}static reference(e,n,r){return new AC(e,n,r)}static type(e,n){return new SC(e,n)}static toTurtle(e,n=null){return e.map(r=>r.toTurtle(n)+" .").join(`
`)}static castLiteralValue(e,n){switch(n){case lo.dateTime:return new Date(e);case lo.integer:case lo.decimal:return parseInt(e);case lo.boolean:return e==="true"||e==="1";case lo.float:case lo.double:return parseFloat(e)}return e}toTurtle(e=null){const n=this.getTurtleSubject(e),r=this.getTurtlePredicate(),s=this.getTurtleObject(e);return`${n} ${r} ${s}`}clone(e){switch(e=e??this.resourceUrl,this.type){case 2:{const n=this;return Ic.literal(e,n.name,n.value,n.originalValue)}case 0:return Ic.type(e,this.value);case 1:return Ic.reference(e,this.name,this.value)}}valueEquals(e){const n=this.value instanceof Date?this.value.getTime():this.value,r=e.value instanceof Date?e.value.getTime():e.value;return n===r}getTurtleReference(e,n){const r=(e==null?void 0:e.indexOf("#"))??-1;return!e||e===n?"<>":n===null||!e.startsWith(n)||r===-1?`<${encodeURI(e)}>`:`<#${e.slice(r+1)}>`}getTurtleSubject(e){return this.getTurtleReference(this.resourceUrl,e)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}};class EC extends Pn{constructor(e,n,r,s){super(e,n,r),ke(this,"type",2),this.originalValue=s}getTurtleObject(){if(this.originalValue&&this.value instanceof Date)return`"${this.originalValue}"^^<${vt("xsd:dateTime")}>`;if(this.value instanceof Date){const e=(...i)=>i.map(o=>o.toString().padStart(2,"0")),n=e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-"),r=e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":"),s=this.value.getUTCMilliseconds().toString().padStart(3,"0");return`"${n}T${r}.${s}Z"^^<${vt("xsd:dateTime")}>`}return JSON.stringify(this.value)}}let AC=class extends Pn{constructor(e,n,r){super(e,n,r),ke(this,"type",1)}getTurtleObject(e){return this.value instanceof z0?this.value.name:this.getTurtleReference(this.value,e)}};class SC extends Pn{constructor(e,n){super(e,q0,n),ke(this,"type",0)}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}let TC=class{constructor(e){ke(this,"url"),ke(this,"types"),ke(this,"properties"),ke(this,"propertiesIndex"),ke(this,"statements"),this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(vt("foaf:name"))}get label(){return this.getPropertyValue(vt("rdfs:label"))}isType(e){return this.types.indexOf(vt(e))!==-1}getPropertyValue(e,n=null){const[r]=this.propertiesIndex[vt(e)]||[];return r?r.value:n}getPropertyValues(e){return(this.propertiesIndex[vt(e)]||[]).map(n=>n.value)}addStatement(e){if(e.subject.value!==this.url)return;const n=Pn.fromStatement(e);n.type===si.Type&&this.types.push(n.value),this.statements.push(e),this.properties.push(n),this.propertiesIndex[n.name]=(this.propertiesIndex[n.name]||[]).concat([n])}};class xm extends He{constructor(e,n){super(n?`Couldn't find resource with id '${e}' in '${n}' document.`:`Couldn't find resource with id '${e}' in document.`)}}const W0=class Cc{constructor(e,n=[],r={}){ke(this,"url"),ke(this,"metadata"),ke(this,"statements"),ke(this,"resourcesIndex"),ke(this,"properties"),ke(this,"resources"),this.url=e,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((s,i)=>{const o=i.subject.value;return(s[o]=s[o]??new TC(o)).addStatement(i),s},{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((s,i)=>s.concat(i.properties),[])}static async fromTurtle(e,n={}){const r=await j0(e,{baseIRI:n.baseIRI});return new Cc(n.baseIRI||"",r.quads,{containsRelativeIRIs:r.containsRelativeIRIs,describedBy:RC(n),headers:n.headers})}static async resourceFromJsonLDGraph(e,n,r){const s=()=>r??e["@graph"].find(i=>i["@id"]===n)??We(xm,n);return(this.documentsCache.get(e)??await this.fromJsonLD(s())).requireResource(n)}static async fromJsonLD(e,n){return this.documentsCache.get(e)??await this.getFromJsonLD(e,n)}static reduceJsonLDGraph(e,n){return Fe({"@graph":e["@graph"].filter(r=>r["@id"]!==n)},r=>{const s=this.documentsCache.get(e);s&&this.cacheJsonLD(r,s.clone({removeResourceUrls:[n]}))})}static cacheJsonLD(e,n){this.documentsCache.set(e,n)}static async getFromJsonLD(e,n){const r=await vm(e,n);return Fe(new Cc(e["@id"]?vr(e["@id"]):null,r),s=>{this.documentsCache.set(e,s)})}isEmpty(){return this.statements.length===0}hasProperty(e,n){const r=this.resourcesIndex[e];return!!r&&n in r.propertiesIndex}async toJsonLD(){return Fu(this.statements)}resource(e){return this.resourcesIndex[e]??null}requireResource(e){const n=this.resource(e);if(!n)throw new He(`Resource '${e}' not found`);return n}clone(e={}){return Fe(new Cc(e.changeUrl??this.url,[],this.metadata),n=>{const r=e.removeResourceUrls;if(!r){n.statements=this.statements.slice(0),n.properties=this.properties.slice(0),n.resources=this.resources.slice(0),n.resourcesIndex={...this.resourcesIndex};return}n.statements=this.statements.filter(s=>!r.includes(s.subject.value)),n.properties=this.properties.filter(s=>!s.resourceUrl||!r.includes(s.resourceUrl)),n.resources=this.resources.filter(s=>!r.includes(s.url)),n.resourcesIndex=V_(n.resources,"url")})}};ke(W0,"documentsCache",new WeakMap);let Xn=W0;function RC(t={}){var e,n;if(!((e=t.headers)!=null&&e.has("Link")))return;const r=(n=t.headers.get("Link"))==null?void 0:n.match(/<([^>]+)>;\s*rel="describedBy"/i);if(r)return Ho(t.baseIRI||"",r[1])}let Co=class{constructor(e,n,r){ke(this,"type",Sn.RemoveProperty),this.resourceUrl=e,this.property=n,this.value=r}},IC=class{constructor(e,n){ke(this,"type",Sn.ShieldProperty),this.resourceUrl=e,this.property=n}};class ko{constructor(e){if(ke(this,"type",Sn.UpdateProperty),ke(this,"propertyOrProperties"),this.propertyOrProperties=e,!Array.isArray(e))return;const[n,...r]=e;if(!n)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:s,name:i,type:o}=n;if(r.some(a=>a.resourceUrl!==s||a.name!==i||a.type!==o))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}}function CC(t){return t.reduce((e,n)=>(e[n.type].push(n),e),{[Sn.ChangeUrl]:[],[Sn.RemoveProperty]:[],[Sn.ShieldProperty]:[],[Sn.UpdateProperty]:[]})}function zb(t){const e=t.filter(n=>n.type===Sn.ShieldProperty).reduce((n,r)=>{var s,i;const o=r;return n[s=o.resourceUrl]??(n[s]=[]),(i=n[o.resourceUrl])==null||i.push(o.property),n},{});return t.reduce((n,r)=>{var s;switch(r.type){case Sn.UpdateProperty:n[0].push(r.propertyOrProperties);break;case Sn.RemoveProperty:if(!e[r.resourceUrl]){n[1].push(ln([r.resourceUrl,r.property,r.value]));break}if(!r.property){n[1].push(ln([r.resourceUrl,e[r.resourceUrl]]));break}if((s=e[r.resourceUrl])!=null&&s.includes(r.property))break;n[1].push(ln([r.resourceUrl,r.property,r.value]));break}return n},[[],[]])}const kC=[_m,vt("posix:mtime"),vt("posix:size"),vt("purl:modified")],OC=[Io,vt("ldp:BasicContainer")],Wb=new Map;class DC{constructor(e){ke(this,"fetch"),ke(this,"config");const n=e??(globalThis==null?void 0:globalThis.fetch);this.fetch=async(r,s)=>{try{return await n(r,s)}catch(i){const o=typeof r=="object"?r.url:r;throw new L0(o,{cause:i})}},this.config={concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e,n=null,r=[],s={}){return n&&r.some(i=>i.resourceUrl===n&&i.type===si.Type&&i.value===Io)?this.createContainerDocument(e,n,r):this.createNonContainerDocument(e,n,r,s)}async getDocument(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status!==200)return null;const r=await n.text();return await Xn.fromTurtle(r,{headers:n.headers,baseIRI:e})}async getDocuments(e){const n=await(await this.fetch(e,{headers:{Accept:"text/turtle"}})).text(),r=await Xn.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async updateDocument(e,n,r={}){var s;if(n.length===0)return;e=Wb.get(e)??e;const i=await this.getDocument(e);if(i===null)throw new ts(e);return this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),n.length===0?void 0:(s=i.resource(e))!=null&&s.isType(Io)?await this.updateContainerDocument(i,n):await this.updateNonContainerDocument(i,n,r)}async overwriteDocument(e,n){const r=await this.getDocument(e);if(r===null)throw new ts(e);const s=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`
                DELETE DATA { ${Pn.toTurtle(r.properties,e)} } ;
                INSERT DATA { ${Pn.toTurtle(n,e)} }
            `});return this.assertSuccessfulResponse(s,`Error overwriting document at ${r.url}`),{headers:s.headers}}async deleteDocument(e,n){var r;const s=n??await this.getDocument(e);if(s===null)return;if((r=s.resource(e))!=null&&r.isType(Io)){const o=await this.getDocumentsFromContainer(e,s);await Promise.all(o.map(a=>this.deleteDocument(a.url,a)))}const i=await this.fetch(e,{method:"DELETE"});return this.assertSuccessfulResponse(i,`Error deleting document at ${e}`),{headers:i.headers}}async documentExists(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status===200)return(await n.text()).length>0;if(n.status===404)return!1;throw new He(`Couldn't determine if document at ${e} exists, got ${n.status} response`)}async createContainerDocument(e,n,r){let s=await this.createContainerFolder(e,n);if(r.length!==0){const i=this.withoutReservedContainerProperties(n,r).map(o=>new ko(o));s=await this.updateDocument(n,i)??s}return{url:n,metadata:s}}async createContainerFolder(e,n){if(!n.startsWith(e))throw new He("Explicit document url should start with the parent url");if(!n.endsWith("/"))throw new He(`Container urls must end with a trailing slash, given ${n}`);const r=await this.fetch(n,{method:"PUT",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});return this.isInternalErrorResponse(r)?this.createContainerDocumentUsingPOST(n):(this.assertSuccessfulResponse(r,`Error creating container folder at ${n}`),{headers:r.headers})}async createContainerDocumentUsingPOST(e,n=!0){const r=Qt(e),s=await this.fetch(r,{method:"POST",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:yR(e),"If-None-Match":"*"}});return s.status===404&&n?(await this.createContainerDocumentUsingPOST(r),this.createContainerDocumentUsingPOST(e,!1)):(this.assertSuccessfulResponse(s,`Error creating container at ${e}`),{headers:s.headers})}async createNonContainerDocument(e,n,r,s={}){var i;if(!n||((i=s.method)==null?void 0:i.toLowerCase())==="post"){const a=s.format??"text/turtle",l=await this.renderProperties(n,r,a),c={"Content-Type":a};n&&(c.Slug=o0(n));const u=await this.fetch(e,{method:s.method??"POST",headers:c,body:l});return this.assertSuccessfulResponse(u,`Error creating document under ${e}`),{url:Ho(e,u.headers.get("Location")||""),metadata:{headers:u.headers}}}if(!n.startsWith(e))throw new He("A minted document url should start with the parent url");const o=await this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${Pn.toTurtle(r,n)} }`});return this.assertSuccessfulResponse(o,`Error creating document at ${n}`),{url:n,metadata:{headers:o.headers}}}async getDocumentsFromContainer(e,n){var r;const s=[],i=((r=n.resource(e))==null?void 0:r.getPropertyValues("ldp:contains"))??[];for(;i.length>0;){const o=i.splice(0,this.config.concurrentFetchBatchSize||i.length),a=await Promise.all(o.map(l=>this.getDocument(l)));s.push(...a)}return s.filter(o=>!!o)}async updateContainerDocument(e,n){const r=e.metadata.describedBy||`${e.url}.meta`;return e.url&&Wb.set(e.url,r),await this.updateNonContainerDocument(e.clone({changeUrl:r}),n)}async updateNonContainerDocument(e,n,r={}){const s=r.format??"application/sparql-update";switch(s){case"application/sparql-update":return this.updateNonContainerDocumentWithSparql(e,n);case"application/ld+json":return this.updateNonContainerDocumentWithJsonLD(e,n)}throw new Error(`Unsupported update format: '${s}'`)}async updateNonContainerDocumentWithSparql(e,n){const[r,s]=zb(n),i=r.flat().map(l=>l.toTurtle(e.url)+" ."),o=e.properties.filter(l=>s.some(([c,u,d])=>c===l.resourceUrl&&(!u||typeof u=="string"&&u===l.name||Array.isArray(u)&&!u.includes(l.name))&&(!d||d===l.value))).map(l=>l.toTurtle(e.url)+" .");if(i.length===0&&o.length===0)return;const a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:ln([o.length>0&&`DELETE DATA { ${o.join(`
`)} }`,i.length>0&&`INSERT DATA { ${i.join(`
`)} }`]).join(" ; ")});return this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`),{headers:a.headers}}async updateNonContainerDocumentWithJsonLD(e,n){if(!e.url)throw new Error("Missing document url for JsonLD update");const[r,s]=zb(n),i=e.properties.filter(a=>!s.some(([l,c,u])=>l===a.resourceUrl&&(!c||typeof c=="string"&&c===a.name||Array.isArray(c)&&!c.includes(a.name))&&(!u||u===a.value))).concat(r.flat()),o=await this.fetch(e.url,{headers:{"Content-Type":"application/ld+json"},method:"PUT",body:await this.renderProperties(e.url,i,"application/ld+json")});return this.assertSuccessfulResponse(o,`Error updating document at ${e.url}`),{headers:o.headers}}withoutReservedContainerProperties(e,n){const r=i=>kC.includes(i.name),s=i=>i.type===si.Type&&OC.includes(i.value);return n.filter(i=>i.resourceUrl!==e||!r(i)&&!s(i))}processChangeUrlOperations(e,n){const r=CC(n);for(const s of r[Sn.ChangeUrl]){const i=e.resource(s.resourceUrl);if(!i)continue;const o=r[Sn.UpdateProperty].filter(l=>l.propertyResourceUrl===s.resourceUrl),a=r[Sn.RemoveProperty].filter(l=>l.resourceUrl===s.resourceUrl);o.forEach(l=>{l.propertyOrProperties=Array.isArray(l.propertyOrProperties)?l.propertyOrProperties.map(c=>c.clone(s.newResourceUrl)):l.propertyOrProperties.clone(s.newResourceUrl)}),a.forEach(l=>l.resourceUrl=s.newResourceUrl),n.push(new Co(s.resourceUrl)),n.push(...i.properties.filter(l=>!o.some(c=>c.propertyName===l.name)&&!a.some(c=>!c.property||c.property===l.name)).map(l=>new ko(l.clone(s.newResourceUrl)))),Yn(n,s)}}processUpdatePropertyOperations(e,n){var r;const s=[],i=[],o=[];for(let l=0;l<n.length;l++){const c=n[l];if(c.type!==Sn.UpdateProperty||c.propertyResourceUrl===null)continue;if(!Array.isArray(c.propertyOrProperties)){const y=c.propertyOrProperties,A=y.resourceUrl,[E,..._]=((r=e.resource(A??""))==null?void 0:r.propertiesIndex[y.name])??[];A&&E&&_.length===0&&y.type===E.type&&y.valueEquals(E)&&(i.push(c),n.push(new IC(A,y.name)));continue}const u=e.statements.filter(y=>y.subject.value===c.propertyResourceUrl&&y.predicate.value===c.propertyName).map(y=>y.object),d=c.propertyOrProperties[0].type===si.Literal,f=y=>"type"in y?y.type===si.Reference:y.termType==="NamedNode",{added:h,removed:m}=ta(u,c.propertyOrProperties,(y,A)=>y.value===A.value&&f(y)===f(A));h.forEach(y=>n.push(new ko(d?Pn.literal(c.propertyResourceUrl,c.propertyName,y.value):Pn.reference(c.propertyResourceUrl,c.propertyName,y.value)))),m.forEach(y=>n.push(new Co(c.propertyResourceUrl,c.propertyName,y.value))),s.push(c),o.push(`${c.propertyResourceUrl}-${c.propertyName}`)}s.forEach(l=>Yn(n,l)),i.forEach(l=>Yn(n,l));const a=n.filter(l=>l.type===Sn.UpdateProperty&&l.propertyType!==si.Type&&e.hasProperty(l.propertyResourceUrl,l.propertyName));for(const l of a)o.includes(`${l.propertyResourceUrl}-${l.propertyName}`)||n.push(new Co(l.propertyResourceUrl,l.propertyName))}async renderProperties(e,n,r){switch(r){case"text/turtle":return Pn.toTurtle(n,e);case"application/ld+json":{const s=await wm(Pn.toTurtle(n,e)),i=await Fu(s);if(i["@graph"].length!==1)throw new Error("Cannot render JSONLD with multiple or no subjects");const o=i["@graph"][0];return Fa(o["@id"])&&delete o["@id"],JSON.stringify(o)}}throw new Error(`Unsupported render format: '${r}'`)}assertSuccessfulResponse(e,n){if(Math.floor(e.status/100)!==2)throw new rC(n,e)}isInternalErrorResponse(e){return Math.floor(e.status/100)===5}}const PC={activityPods:!1};function $C(t){return PC[t]}function tn(){return $C("activityPods")}function NC(t){const e=new Date(t);return isNaN(e.getTime())?null:e}let Em=class{constructor(e,n={}){ke(this,"__isSolidEngine",!0),ke(this,"config"),ke(this,"helper"),ke(this,"client"),ke(this,"cache",new Map),ke(this,"_listeners",new W_),this.helper=new Nu,this.config={concurrentFetchBatchSize:10,cachesDocuments:!1,...n},this.client=new DC(e),this.client.setConfig({concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}get listeners(){return this._listeners}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,n,r){if(this.validateJsonLDGraph(n),r&&await this.client.documentExists(r))throw new cm(r);const s=await this.getJsonLDGraphProperties(n),{url:i,metadata:o}=await this.client.createDocument(e,r,s,tn()?{method:"post",format:"application/ld+json"}:{});return await this._listeners.emit("onDocumentCreated",i,o),i}async readOne(e,n){var r,s,i,o;if((r=this.config.persistentCache)!=null&&r.has(e,n))return await this.config.persistentCache.get(e,n)??We(ts,n);const a=await this.getDocument(n);if(a===null)throw new ts(n);const l=await this.convertToEngineDocument(a);if(await this._listeners.emit("onRDFDocumentLoaded",a.url,a.metadata),await this._listeners.emit("onDocumentRead",a.url,a.metadata),this.config.persistentCache&&(s=a.resource(n))!=null&&s.isType(Io))for(const c of((i=a.resource(n))==null?void 0:i.getPropertyValues(_m))??[]){const u=String(c),d=NC((o=a.resource(u))==null?void 0:o.getPropertyValue(xC));d&&await this.config.persistentCache.activate(n,u,d.getTime())}return l}async readMany(e,n={}){const r=await this.getDocumentsForFilters(e,n),s={};return await Promise.all(r.map(async i=>{s[i.url]=await this.convertToEngineDocument(i),await this._listeners.emit("onRDFDocumentLoaded",i.url,i.metadata),await this._listeners.emit("onDocumentRead",i.url,i.metadata)})),this.helper.filterDocuments(s,n)}async update(e,n,r){if("$overwrite"in r){const o=await this.getJsonLDGraphProperties(r.$overwrite),a=await this.client.overwriteDocument(n,o);await this._listeners.emit("onDocumentUpdated",n,a);return}const s=await this.extractJsonLDGraphUpdate(r),i=await this.client.updateDocument(n,s,tn()?{format:"application/ld+json"}:{});this.cache.delete(n),i&&await this._listeners.emit("onDocumentUpdated",n,i)}async delete(e,n){const r=await this.client.deleteDocument(n);this.cache.delete(n),r&&await this._listeners.emit("onDocumentDeleted",n,r)}addListener(e){return this.listeners.add(e)}removeListener(e){this.listeners.remove(e)}clearCache(){this.cache=new Map}async getDocument(e){var n;if(this.config.cachesDocuments&&this.cache.has(e))return((n=this.cache.get(e))==null?void 0:n.clone())??null;const r=await this.client.getDocument(e);return this.config.cachesDocuments&&this.cache.set(e,r),r}async getDocumentsForFilters(e,n){return n.$in?await this.getDocumentsFromUrls(n.$in.map(Ct)):await this.client.getDocuments(e)}async getDocumentsFromUrls(e){const n=e.reduce((s,i)=>{const o=br(i)??us(i);return{...s,[o]:(s[o]||[]).concat([i])}},{}),r=Object.values(n).map(async s=>{const i=s.map(o=>this.getDocument(o));return(await Promise.all(i)).filter(o=>o!=null)});return(await Promise.all(r)).flat()}async convertToEngineDocument(e){const n=await Fu(e.statements);return await zI(n)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new He("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new He("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const n=new Map,r=[],s="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const i of s){if(i.$updateItems){const o=[];for(const a of gn(i.$updateItems)){const l=await this.extractJsonLDGraphItemsUpdate(a,n);o.push(...l)}r.push(...o.flat())}if(i.$push){const o=await this.extractJsonLDGraphItemPush(i.$push);r.push(...o)}}return r}async extractJsonLDGraphItemsUpdate({$where:e,$update:n,$override:r,$unset:s},i){if(!e||!("@id"in e))throw new He("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(s){const c=e["@id"];return(typeof c=="string"?[c]:c.$in).map(u=>new Co(u))}if(r){const c=e["@id"],u=typeof c=="string"?[c]:c.$in;return(await Promise.all(u.map(async d=>{const f=i.get(d)??d,h=[new Co(f)],m=await this.getJsonLDGraphProperties(r);for(const y of m)h.push(new ko(y));return h}))).flat()}if(typeof e["@id"]!="string")throw new He("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const o=i.get(e["@id"])??e["@id"],a=n,l=[];for(const[c,u]of Object.entries(a)){if(u===null)throw new He("SolidEngine doesn't support setting properties to null, delete");if(typeof u=="object"&&"$unset"in u){l.push(new Co(o,c));continue}if(c==="@id"&&o!==u){l.push(new vC(o,u)),i.set(u,o);continue}l.push(new ko(this.getUpdatePropertyOperationProperty(o,c,u)))}return l}getUpdatePropertyOperationProperty(e,n,r,s=!0){return n==="@type"?Pn.type(e,r):Array.isArray(r)?s?r.map(i=>this.getUpdatePropertyOperationProperty(e,n,i,!1)):We("Cannot have nested array values"):yt(r)&&"@id"in r?Pn.reference(e,n,r["@id"]):yt(r)&&"@type"in r&&r["@type"]==="http://www.w3.org/2001/XMLSchema#dateTime"?Pn.literal(e,n,new Date(r["@value"])):Pn.literal(e,n,r)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map(n=>new ko(n))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];const n=e["@graph"].$contains["@type"].$or.reduce((r,s)=>("$contains"in s&&r.push(...s.$contains),"$eq"in s&&r.push(s.$eq),r),[]);return nr(n.filter(r=>r.startsWith("http")))}async getJsonLDGraphProperties(e){return(await Xn.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){const n=e["@graph"];return yt(n)?!(n.$apply??[n]).some(r=>{const s=Object.keys(r);return s.length!==1||!["$updateItems","$push"].includes(s[0]??"")}):!1}isJsonLDGraphTypesFilter(e){const n=e["@graph"];return yt(n)&&yt(n.$contains)&&yt(n.$contains["@type"])&&Array.isArray(n.$contains["@type"].$or)}},Cf=class extends He{constructor(e){super(`Some required attributes were missing from '${e}' document.`)}};const Xc=new WeakMap,kf=new WeakMap;function Kb(t){var e;return((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)!==Object}function LC(t,e){if(Xc.has(t))throw new He(`${t.modelName} schema update already in progress!`);Xc.set(t,e)}function MC(t){return Xc.get(t)??null}function FC(t){Xc.delete(t)}function jC(t,e,n){const r=t;if(Kb(r))return r.ensureBooted(),r;if(!kf.has(r)){const s=Kb(t)?t:e,i=K0(r,s);i.ensureBooted(),kf.set(r,i)}return kf.get(r)??We("Couldn't boot schema")}function K0(t,e,n){const r=FR(n?t:e,n??t);return r.__isSchema=!0,r}class UC{async deleteModels(e){const n=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(n).map(([r,s])=>this.deleteContainerDocumentsModels(r,s)))}decantDocumentModelsByContainer(e){const n=this.decantModelsByDocument(e);return Object.entries(n).reduce((r,[s,i])=>{const o=br(s)??us(s);return(r[o]=r[o]??[]).push({documentUrl:s,models:i}),r},{})}decantModelsByDocument(e){return e.reduce((n,r)=>{const s=r.requireDocumentUrl();return(n[s]=n[s]??[]).push(r),n},{})}async deleteContainerDocumentsModels(e,n){const r=await this.requireEngine().readMany(e,{$in:n.map(({documentUrl:s})=>s)});await Promise.all(n.map(({documentUrl:s,models:i})=>this.deleteDocumentModels(r,e,s,i)))}async deleteDocumentModels(e,n,r,s){const i=e[r];if(!i)return;const o=this.requireEngine(),a=s.filter(l=>l.exists()).map(l=>l.url);if(!i["@graph"].some(l=>!a.some(c=>c===l["@id"]))){const l=s.filter(c=>c.isRelationLoaded("tombstone")).map(c=>c.tombstone);l.length===0?await o.delete(n,r):await o.update(n,r,{$overwrite:{"@graph":l.map(c=>c.serializeToJsonLD({includeRelations:!1}))}}),s.forEach(c=>c.setDocumentExists(!1));return}await o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}}let kc=class extends di{constructor(e,n){super(e,n)}setForeignAttributes(){}clearForeignAttributes(){}async load(){return this.related??(this.related=[]),this.related}create(e){return Fe(this.attach(e??{}),()=>this.parent.save())}async __loadDocumentModels(e,n){const r=await Xn.fromJsonLD(n),s=Xn.reduceJsonLDGraph(n,this.parent.url);this.related=ln(await Promise.all(this.relatedClass.findMatchingResourceIds(r.statements).map(i=>{const o=s["@graph"].find(a=>a["@id"]===i);return o&&this.relatedClass.createFromEngineDocument(e,s,o["@id"])})))}};class BC{get isPublic(){var e;return((e=this._publicPermissions)==null?void 0:e.includes(li.Read))??null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(li.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=Jt("SolidACLAuthorization"),n=this.requireDocumentUrl(),r=await e.requireFetch()(n,{method:"HEAD"}),s=new Gc(n,[],r.headers);this._publicPermissions=s.getPublicPermissions()}async updatePublicPermissions(e){const n=Jt("SolidACLAuthorization");await this.withEngine(n.requireEngine(),()=>this.updateAuthorizations(e)),this._publicPermissions=e}trackPublicPermissions(){if(!this.static().usingSolidEngine())return{documentPermissions:{},stopTracking(){}};const e={},n=this.static().requireFinalEngine().listeners.add({onDocumentRead(r,s){if(!s.headers)return;const i=new Gc(r,[],s.headers);e[r]=i.getPublicPermissions()}});return{documentPermissions:e,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const n=await this.loadRelationIfUnloaded("authorizations"),r=Jt("SolidACLAuthorization"),s=e.map(a=>r.modeFromSolidDocumentPermission(a)),i=n.filter(a=>a.agentClasses.includes(fi("foaf:Agent"))),o=i.map(a=>a.modes).flat();if(!(s.length===o.length&&!s.some(a=>o.includes(a)))){if(!this.relatedAuthorizations.isDocumentACL()){await this.createDocumentACLResource(s);return}if(s.length===0){for(const a of i)await a.delete();this.relatedAuthorizations.related=ar(n,i);return}if(i.length===0){await this.createPublicAuthorization(s);return}for(const a of i)await a.update({modes:s})}}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const n=Jt("SolidACLAuthorization"),r=this.authorizations.filter(s=>s.modes.includes(n.rdfTerm("acl:Control"))).map(s=>Fe(new n(s.getAttributes()),i=>{var o;i.accessTo=[this.requireDocumentUrl()],i.accessToClasses=[],i.default=[],i.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,((o=wl(s.url))==null?void 0:o.fragment)??Un())}));for(const s of r)await s.save();this.relatedAuthorizations.related=r,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var n;this.relatedAuthorizations.enable();const r=Jt("SolidACLAuthorization"),s=await r.createInDocument({agentClasses:[r.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");(n=this.relatedAuthorizations.related)==null||n.push(s)}}let Gb;function hi(t){return Am()[t]}function Am(){return Gb??(Gb={Operation:Jt("Operation"),PropertyOperation:Jt("PropertyOperation"),AddPropertyOperation:Jt("AddPropertyOperation"),RemovePropertyOperation:Jt("RemovePropertyOperation"),SetPropertyOperation:Jt("SetPropertyOperation"),UnsetPropertyOperation:Jt("UnsetPropertyOperation"),DeleteOperation:Jt("DeleteOperation")})}class HC{async migrateSchema(e,n={}){if(this.isDirty())throw new He("Can't migrate dirty model, call save() before proceeding.");const r=jC(e,this.static()),{model:s,updates:i}=await this.getSchemaUpdates(r,n);return await this.updateEngineDocumentSchema(i),s}async getSchemaUpdates(e,n){const{removed:r,added:s}=ta(Object.keys(this.static().fields),Object.keys(e.fields)),i=await this.newInstanceForSchema(e,s,r),o=i.url!==this.url?i.url:null,a=(await this.getOperationSchemaUpdates(i,r,o,n)).concat(this.getMetadataSchemaUpdates(o)).concat(this.getUrlSchemaUpdates(o)).concat([this.getResourceSchemaUpdate(i,o)]);return{model:i,updates:a}}async newInstanceForSchema(e,n,r){var s,i;const o=hi("PropertyOperation"),a=e.newInstance(Fe(this.getAttributes(),l=>{l.url=`${this.requireDocumentUrl()}#${e.defaultResourceHash}`;for(const c of r)delete l[c]}),!0);return a.setRelationModels("operations",this.operations.filter(l=>{if(!mn(l,o))return!0;const c=this.static().getRdfPropertyField(l.property);return!c||!r.includes(c)})),n.forEach(l=>{a.hasAttribute(l)&&(a._dirtyAttributes[l]=a.getAttributeValue(l))}),await((i=(s=a.static().hooks)==null?void 0:s.beforeSave)==null?void 0:i.call(a)),a.operations.length>0&&await a.addDirtyHistoryOperations(),a}async getOperationSchemaUpdates(e,n,r,s){var i;const o=[],a=[],l=hi("PropertyOperation"),c=this.usingSolidEngine()?qb:"resource",u=this.usingSolidEngine()?_C:"property";await e.loadRelationIfUnloaded("operations");for(const d of e.operations){if(o.push(d.url),!d.exists()){d.date=this.getUpdatedAtAttribute(),d.resourceUrl=e.url;const y=(i=s.mintOperationUrl)==null?void 0:i.call(s,d);y?d.url=y:d.mintUrl(),a.push({$push:d.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})});continue}if(!mn(d,l)){r&&a.push({$updateItems:{$where:{"@id":d.url},$update:{[c]:{"@id":r}}}});continue}const f=this.static().getRdfPropertyField(d.property),h=f&&e.static().getFieldRdfProperty(f),m=Fn({[c]:r?{"@id":r}:null,[u]:h&&h!==d.property?{"@id":h}:null});Object.keys(m).length!==0&&a.push({$updateItems:{$where:{"@id":d.url},$update:m}})}for(const d of this.operations)o.includes(d.url)||a.push({$updateItems:{$where:{"@id":d.url},$unset:!0}});return a}getMetadataSchemaUpdates(e){if(!e||!this.metadata)return[];const n=this.usingSolidEngine()?qb:"resource";return[{$updateItems:{$where:{"@id":this.metadata.url},$update:{[n]:{"@id":e}}}}]}getUrlSchemaUpdates(e){return e?[{$updateItems:{$where:{"@id":this.url},$update:{"@id":e}}}]:[]}getResourceSchemaUpdate(e,n){return{$updateItems:{$where:{"@id":n??this.url},$override:e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})}}}async updateEngineDocumentSchema(e){const n=this.requireDocumentUrl();await this.requireEngine().update(Qt(n),n,e.length===1?{"@graph":e[0]}:{"@graph":{$apply:e}})}}function Yc(t,e,n,r){const s=i=>Fn({type:i,rdfProperty:e,rdfPropertyAliases:n,required:r});switch(typeof t){case"string":return s(Ie.String);case"number":case"bigint":return s(Ie.Number);case"boolean":return s(Ie.Boolean);case"object":return t===null?s(Ie.Any):t instanceof rr?s(Ie.Key):t instanceof Date?s(Ie.Date):Array.isArray(t)?Fn({required:r,rdfProperty:e,type:Ie.Array,items:t.length>0?Yc(t[0]):s(Ie.Any)}):Fn({required:r,rdfProperty:e,type:Ie.Object,fields:Object.entries(t).reduce((i,[o,a])=>(i[o]=Yc(a),i),{})});default:return s(Ie.Any)}}function VC(t){return m0(t)}let Sm=class{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,n){const r=new Nu,s=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(s)?s:s?[s]:[],o=this.relatedClass.prepareEngineFilters(),a=Xn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>i.indexOf(d["@id"])!==-1).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(r.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=i.filter(d=>!c.some(f=>f.url===d)&&vr(d)!==e);this.protectedSolidBelongsTo.loadDocumentModels(c,u)}},qC=class{getJsonLDProperty(e,n){if(n=vt(n),n in e)return this.getJsonLDPropertyValue(e[n]);if(!("@context"in e))return null;const r=e["@context"],s=Object.entries(r).find(([a,l])=>n.startsWith(l));if(!s)return null;const i=s[0]==="@vocab"?"":`${s[0]}:`,o=e[i+n.slice(s[1].length)];return this.getJsonLDPropertyValue(o)}getJsonLDPropertyValue(e){return e===void 0?null:Array.isArray(e)&&e.length===1?e[0]:e}};const G0=new qC;let Tm=class{get protectedSolidHas(){return this}async __loadDocumentModels(e,n){var r;const s=new Nu,i=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??We(He,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),o=this.relatedClass.prepareEngineFilters(),a=Xn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>{const f=G0.getJsonLDProperty(d,i);return typeof f=="object"&&f!==null&&"@id"in f&&f["@id"]===this.parent.url}).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(s.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=Object.keys(l).filter(d=>!c.some(f=>f.url===d)&&vr(d)!==e);this.protectedSolidHas.loadDocumentModels(c,u)}};function zC(t){return"__beforeParentCreate"in t}function WC(t){return"__afterParentSave"in t}function Ni(t){return"useSameDocument"in t}function KC(t){return $u(t,Sm)}function Rm(t){return $u(t,Tm)}function Jb(t){return"__synchronizeRelated"in t}class Of{}let GC=class J0{constructor(e){ke(this,"terms"),ke(this,"reverseProperties"),this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e,n){const[r,...s]=Object.entries(e),i={name:"@vocab",compactingPrefix:"",value:r==null?void 0:r[1],used:!0},o=s.reduce((a,[l,c])=>(c!==i.value&&a.push({name:l,value:c,compactingPrefix:`${l}:`,used:n.some(u=>u.startsWith(c))}),a),[i]);return new J0(o)}addReverseProperty(e,n){this.reverseProperties.set(e,n)}addTerms(e,n){for(const[r,s]of Object.entries(e)){const i=this.terms.find(l=>l.value===s);if(i){i.used||(i.used=n.some(l=>l.startsWith(s)));continue}let o=r,a=1;for(;this.terms.some(l=>l.name===o);)o=`${r}${++a}`;this.terms.push({name:r,value:s,compactingPrefix:`${r}`,used:n.some(l=>l.startsWith(s))})}}getTermForExpandedIRI(e){return this.terms.find(n=>e.startsWith(n.value))??null}render(){const e=this.terms.reduce((n,r)=>(r.used&&(n[r.name]=r.value),n),{});return this.reverseProperties.forEach((n,r)=>{e[r]={"@reverse":n}}),e}},Oc=class X0{constructor(e,n){ke(this,"context"),ke(this,"iriFormat"),this.context=e,this.iriFormat=n}static forModel(e,n=!0){const r=e.fields,s=ln(Object.values(r).map(o=>o.rdfProperty)),i=GC.fromRdfClasses(e.rdfContexts,s);return new X0(i,n?"compacted":"expanded")}serialize(e,n={}){const r=n.attributes??e.getAttributes(),s=new Set(n.ignoreModels??[]),i={"@context":{},"@type":null};s.add(e);for(const[o,a]of Object.entries(r))this.setJsonLDField(i,e,o,a,n);if(!(e.static("primaryKey")in r)&&n.includeAnonymousHashes){const o=e.static("defaultResourceHash");o&&!tn()&&(i["@id"]=`#${o}`)}return(n.includeRelations??!0)&&this.setJsonLDRelations(i,e,s),n.includeTypes??!0?this.setJsonLDTypes(i,e):delete i["@type"],n.includeContext??!0?this.setJsonLDContext(i):delete i["@context"],i}processExpandedIRI(e){return this.iriFormat==="expanded"?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const n=this.context.getTermForExpandedIRI(e);return n?Fe(n.compactingPrefix+e.slice(n.value.length),()=>n.used=!0):e}setJsonLDField(e,n,r,s,i){if(r===n.static("primaryKey")){e["@id"]=Ct(s);return}const o=n.static().getFieldRdfProperty(r);o&&this.setJsonLDProperty(e,n,this.processExpandedIRI(o),r,s,i)}setJsonLDRelations(e,n,r){for(const s of n.static("relations")){const i=n.requireRelation(s),o=i.getLoadedModels()[0];if(!i.enabled||!i.loaded||!Ni(i)||i.isEmpty()||o&&r.has(o))continue;const a=i.relatedClass.fields,l=ln(Object.values(a).map(c=>c.rdfProperty));this.context.addTerms(i.relatedClass.rdfContexts,l),this.setJsonLDRelation(e,i,r)}}setJsonLDRelation(e,n,r){const s=n.relatedClass.instance(),i=n.related,o=Rm(n),a=o?s.static().getFieldRdfProperty(n.foreignKeyName):n.parent.static().getFieldRdfProperty(n.foreignKeyName),l=this.processExpandedIRI(a),c={ignoreModels:r,includeRelations:!0,includeContext:!1},u=o?d=>Fe(this.serialize(d,c),f=>{delete f[l]}):d=>this.serialize(d,c);i&&(o&&this.context.addReverseProperty(n.name,l),e[o?n.name:l]=Array.isArray(i)?i.map(d=>u(d)):u(i))}setJsonLDTypes(e,n){const r=n.static("rdfsClasses").map(s=>this.processExpandedIRI(s));e["@type"]=r.length===1?r[0]:r}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,n,r,s,i,o){const a=n.static().getFieldDefinition(s,i);if(i=this.castJsonLDValue(i,a),a.serialize&&(i=a.serialize(i)),i instanceof Of){o.keepEmptyValues&&(e[r]=null);return}e[r]=i}castJsonLDValue(e,n){switch(n.type){case Ie.Any:{if(e==null)return new Of;const r=Yc(e,n.rdfProperty,n.rdfPropertyAliases,n.required);if(r.type===Ie.Any)throw new He("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r)}case Ie.Key:return{"@id":Ct(e)};case Ie.Date:return typeof e=="object"&&e!==null&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case Ie.Array:{const r=e,s=n.items;switch(r.length){case 0:return new Of;case 1:return this.castJsonLDValue(r[0],s);default:return r.map(i=>this.castJsonLDValue(i,s))}}default:return JSON.parse(JSON.stringify(e))}}};function cn(t){const e=t&&ky("related-models",t),n=t&&ky("document-models",t);e==null||e.forEach(r=>Dy("related-models",r)),n==null||n.forEach(r=>Dy("document-models",r))}let Y0=class{constructor(){ke(this,"useSameDocument",!1),ke(this,"documentModelsLoaded",!1)}usingSameDocument(e=!0){return this.useSameDocument=e,this}};class ju extends Y0{constructor(){super(...arguments),ke(this,"__removedDocumentModels",[])}get protectedSolidMulti(){return this}get super(){return new Proxy(this,{get:(e,n)=>(...r)=>di.prototype[n].call(this,...r)})}get __newModels(){return this.__newModelsValue??(this.__newModelsValue=[])}set __newModels(e){var n;cn(this.parent),(n=this.__newModelsValue)==null||n.forEach(r=>cn(r)),e==null||e.forEach(r=>cn(r)),this.__newModelsValue=e}isEmpty(){var e,n,r;return!this.documentModelsLoaded&&this.parent.exists()?null:(((e=this.__modelsInSameDocument)==null?void 0:e.length)||0)+(((n=this.__modelsInOtherDocumentIds)==null?void 0:n.length)||0)+this.__newModels.length+(((r=this.related)==null?void 0:r.length)||0)===0}async create(e={}){this.protectedSolidMulti.assertLoaded("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),!this.useSameDocument||tn()?(await e.save(),this.setForeignAttributes(e)):this.parent.exists()&&await this.parent.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var n,r,s,i;const o=typeof e=="string"?e:e.getAttribute(this.localKeyName),a=(n=this.related)==null?void 0:n.find(l=>l.getAttribute(this.localKeyName)===o);a&&(this.related=(r=this.related)==null?void 0:r.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__newModels=this.__newModels.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInSameDocument=(s=this.__modelsInSameDocument)==null?void 0:s.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInOtherDocumentIds=(i=this.__modelsInOtherDocumentIds)==null?void 0:i.filter(l=>l!==o),a.getDocumentUrl()===this.parent.getDocumentUrl()&&!this.parent.tracksHistory()&&this.__removedDocumentModels.push(a),Rm(this)&&a.setAttribute(this.foreignKeyName,null),KC(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter(l=>l!==o)))}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.super.addRelated(e),e.exists()||(this.__newModels=this.__newModels.concat([e])))}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}__afterParentSave(){this.__removedDocumentModels=[]}cloneSolidData(e){const n=e.related??[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const r of this.__newModels)e.__newModels.push(n.find(s=>s.is(r))??Fe(r.clone(),s=>n.push(s)));for(const r of this.__removedDocumentModels)e.__removedDocumentModels.push(n.find(s=>s.is(r))??Fe(r.clone(),s=>n.push(s)));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map(r=>n.find(s=>s.is(r))??r.clone())),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,n){this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=n,this.__modelsInOtherDocumentIds.length===0&&(this.related=nr(this.related??[]).concat(this.__modelsInSameDocument)),this.documentModelsLoaded=!0}}q_(ju,"onRelatedUpdated",function(t,e){if(this!==this.parent.requireRelation(this.name))return;const{added:n,removed:r}=ta(t??[],e??[]);cn(this.parent),t==null||t.forEach(s=>cn(s)),e==null||e.forEach(s=>cn(s)),r.forEach(s=>this.clearInverseRelations(s)),n.forEach(s=>this.initializeInverseRelations(s))});const JC=Pu(Ro,[ju,Tm]);let Q0=class extends JC{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=this.__modelsInSameDocument.concat(e)}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach(n=>{var r;n.unsetAttribute(this.foreignKeyName),(r=this.related)==null||r.push(n),this.__newModels.push(n)})}clone(e={}){return Fe(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const r=Xt(this.related??[],"url"),s=Xt(e.related??[],"url"),i=s.getItems().filter(a=>!r.hasKey(a.url)),o=[];for(const a of r.items()){const l=s.get(a.url);if(!l){o.push(a);continue}await a.static().synchronize(a,l,n)}this.related=Array.from(r.items()).concat(i.map(a=>a.clone({clones:Fe(new WeakMap,l=>l.set(e.parent,this.parent))}))),e.related=Array.from(s.items()).concat(o.map(a=>a.clone({clones:Fe(new WeakMap,l=>l.set(e.parent,this.parent))})))}loadRelatedModels(e){return this.relatedClass.all({$in:e})}};const Z0=class Vh extends Q0{constructor(e){super(e,hi("Operation"),"resourceUrl")}attach(e={},n){const r=hi("Operation"),s=e instanceof r?e:hi(n??"SetPropertyOperation").newInstance(e);if(s.constructor===r)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(s)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,n){var r;const s=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??We(He,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),i=Xn.reduceJsonLDGraph(n,this.parent.url),o=n["@graph"].filter(c=>{const u=G0.getJsonLDProperty(c,s);return typeof u=="object"&&u!==null&&"@id"in u&&u["@id"]===this.parent.url}),a=ln(await Promise.all(o.map(async c=>{var u;return(u=this.getOperationClass(c))==null?void 0:u.createFromEngineDocument(e,i,c["@id"])}))),l=o.map(c=>c["@id"]).filter(c=>!a.some(u=>u.url===c)&&vr(c)!==e);this.protectedSolidHas.loadDocumentModels(a,l)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){const n=this.getOperationMatchers(),r=gn(e["@type"]??[]),s=n.find(i=>i.match(r));return s==null?void 0:s.operation}getOperationMatchers(){return Vh.operationMatchers??(Vh.operationMatchers=Object.values(Am()).map(e=>{const n=Oc.forModel(e),r=e.rdfsClasses,s=r.map(o=>n.processExpandedIRI(o)),i=r.concat(s);return{operation:e,match:o=>i.some(a=>o.includes(a))}}))}};ke(Z0,"operationMatchers");let XC=Z0,YC=class{serializeToJsonLD(e={}){return e.includeRelations??(e.includeRelations=!0),Oc.forModel(this.static()).serialize(this,e)}async parseEngineDocumentAttributesFromJsonLD(e,n){const r=e,s=r["@graph"].find(l=>l["@id"]===n)??We(xm,n,e.url),i=await Xn.resourceFromJsonLDGraph(r,n,s),o=this.static("fields"),a={};a[this.static("primaryKey")]=n;for(const[l,c]of Object.entries(o)){if(!c.rdfProperty)continue;const u=(i.propertiesIndex[c.rdfProperty]??c.rdfPropertyAliases.reduce((h,m)=>h.concat(i.propertiesIndex[m]??[]),[])).map(h=>h.type===si.Reference?new rr(h.value):h.value),[d,...f]=u;typeof d>"u"||(a[l]=f.length>0?[d].concat(f):d)}return a}convertEngineFiltersToJsonLD(e,n){const r={},s=Oc.forModel(this.static()),i=this.static("rdfsClasses"),o=i.map(c=>s.processExpandedIRI(c)),a=[];i.length>0&&(a.push({$contains:o}),a.push({$contains:i})),i.length===1&&(a.push({$eq:o[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach(c=>{c.length>0&&a.push({$contains:c}),c.length===1&&a.push({$eq:c[0]})}),e.$in&&(r.$in=e.$in,delete e.$in);const l=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!1});return a.length>0&&(l["@type"]={$or:a}),Object.keys(l).length>0&&(r["@graph"]={$contains:l}),r}convertEngineUpdatesToJsonLD(e,n){const r=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!0});for(const[s,i]of Object.entries(r))i===null&&(r[s]={$unset:!0});return r}convertAttributeValuesToJsonLD(e,n){return Oc.forModel(this.static(),n.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:n.keepEmptyValues,attributes:e})}};class QC extends di{constructor(e){const n=Jt("SolidACLAuthorization");super(e,n)}requireACLUrl(){return this.aclUrl??We("Could not get ACL Url")}isDocumentACL(){return!this.aclUrl||!this.effectiveACLUrl?null:this.aclUrl===this.effectiveACLUrl}setForeignAttributes(){}clearForeignAttributes(){}async load(){const e=Jt("SolidACLAuthorization"),n=await gC(this.parent.requireDocumentUrl(),e.requireFetch()),r=await Fu(n.document.statements()),s=await Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map(({subject:i})=>e.createFromEngineDocument(n.effectiveUrl,r,i.value)));return this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=s,s}}const ZC=Pu(To,[ju,Sm]);class e1 extends ZC{async load(){var e;if((!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)&&(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const n={};for(const s of this.__modelsInOtherDocumentIds??[]){const i=br(s)??us(s);i in n||(n[i]=new Set),(e=n[i])==null||e.add(vr(s))}const r=(await Promise.all(Object.entries(n).map(([s,i])=>this.relatedClass.from(s).all({$in:Array.from(i)})))).reduce((s,i)=>(s.push(...i),s),[]);return this.related=this.__modelsInSameDocument.concat(this.__newModels).concat(r)}associate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=rr.from(e);this.parent.setAttribute(this.foreignKeyName,n.concat(r))}disassociate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=rr.from(e);this.parent.setAttribute(this.foreignKeyName,n.filter(s=>!r.equals(rr.from(s))))}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const n=this.parent.getAttribute(this.foreignKeyName);e.forEach(r=>{var s;Yn(n,r.getAttribute(this.localKeyName)),(s=this.related)==null||s.push(r),this.__newModels.push(r)}),this.parent.setAttribute(this.foreignKeyName,n)}clone(e={}){return Fe(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);if(!Array.isArray(e))throw new Error(`Foreign key (${this.foreignKeyName}) for '${this.name}' relation in '${this.parent.static("modelName")}' model is missing.`);this.loadDocumentModels([],e)}async __synchronizeRelated(e,n){const{SetPropertyOperation:r,AddPropertyOperation:s,RemovePropertyOperation:i}=Am(),o=this.parent.static().getFieldRdfProperty(this.foreignKeyName),a=this.localKeyName,l=Xt(this.related??[],a),c=Xt(e.related??[],a),u=Fe(new WeakMap,f=>f.set(e.parent,this.parent));this.parent.operations.filter(f=>!f.exists()&&(f instanceof r||f instanceof s||f instanceof i)&&f.property===o).map(f=>gn(f.value)).flat().map(f=>c.get(f instanceof rr?f.toString():f)).filter(f=>!!f).forEach(f=>{var h;if(l.hasKey(f.getAttribute(a)))return;const m=f.clone({clones:u});(h=this.related)==null||h.push(m),l.add(m)});const d=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map(async f=>{const h=l.get(f),m=c.get(f);return!h||!m||await h.static().synchronize(h,m,n),h}));this.related=ln(d).concat(this.__newModels)}}class Uu extends Y0{get super(){return new Proxy(this,{get:(e,n)=>(...r)=>na.prototype[n].call(this,...r)})}get __newModel(){return this.__newModelValue}set __newModel(e){cn(this.parent),cn(this.__newModelValue),cn(e),this.__newModelValue=e}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(e={}){this.assertNotLoadedOrEmpty("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.assertNotLoadedOrEmpty("save"),this.attach(e),!this.useSameDocument||tn()?await e.save():this.parent.exists()&&await this.parent.save(),e}addRelated(e){this.related!==e&&(this.super.addRelated(e),e.exists()||(this.__newModel=e))}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){let n=e.related??null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=n??Fe(this.__newModel.clone(),r=>n=r)),this.__modelInSameDocument&&(e.__modelInSameDocument=n??this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,n){var r;if(e.length+n.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0){if(this.__modelInSameDocument=e[0],this.documentModelsLoaded=!0,this.related=this.__modelInSameDocument,!((r=this.__modelInSameDocument)!=null&&r.exists())){this.__newModel=this.__modelInSameDocument;return}this.__newModel=void 0;return}if(n.length>0){this.__modelInOtherDocumentId=n[0],this.documentModelsLoaded=!0;return}this.documentModelsLoaded=!0}async synchronizeRelated(e,n){if(!this.related&&e.related){this.related=e.related.clone({clones:Fe(new WeakMap,s=>s.set(e.parent,this.parent))});return}if(!e.related||!this.related)return;const r=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,n),this.__newModel||this.related.url===r){this.related=this.__newModel??this.related;return}e.related.url===r&&(this.related=e.related.clone({clones:Fe(new WeakMap,s=>s.set(e.parent,this.parent))}))}assertNotLoadedOrEmpty(e){if(!(!this.loaded||!this.related))throw new He(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}}q_(Uu,"onRelatedUpdated",function(t,e){this===this.parent.requireRelation(this.name)&&(cn(this.parent),cn(t),cn(e),t&&this.clearInverseRelations(t),e&&this.initializeInverseRelations(e))});const ek=Pu(Ba,[Uu,Sm]);let tk=class extends ek{async load(){if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const e=this.__modelInOtherDocumentId??this.parent.getAttribute(this.foreignKeyName);if(!e)return this.related=null;const n=await this.relatedClass.find(e);return this.related=n}reset(e=[]){const n=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,n&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Fe(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e,n){if(!this.related||!e.related||this.related.url!==e.related.url)return;const r=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,n),this.__newModel||this.related.url===r){this.related=this.__newModel??this.related;return}e.related.url===r&&(this.related=e.related.clone({clones:Fe(new WeakMap,s=>s.set(e.parent,this.parent))}))}};const nk=Pu(Fi,[Uu,Tm]);let rk=class extends nk{async load(){if(this.isEmpty())return this.related=null;if(!(this.__modelInSameDocument||this.__modelInOtherDocumentId))return this.related=null;const e=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)();return this.related=e}async remove(){if(!this.related)return;const e=this.related;this.related=null,await e.delete()}reset(e=[]){const n=e[0];this.related=void 0,this.__newModel=void 0,delete this.__modelInSameDocument,n&&(n.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Fe(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){if(this.related&&e.related&&this.related.url===e.related.url){await this.related.static().synchronize(this.related,e.related,n);return}if(!(!e.related||this.related&&this.related.url!==e.related.url)&&!this.related){this.related=e.related.clone({clones:Fe(new WeakMap,r=>r.set(e.parent,this.parent))});return}}},t1=class extends na{constructor(e,n){super(e,n,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||e.resourceUrls.includes(n))return;const r=e.resourceUrls.concat([n]);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||!e.resourceUrls.includes(n))return;const r=ar(e.resourceUrls,n);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}async load(){const e=this.relatedClass.collection,n=Qt(this.parent.url);return this.related=await this.relatedClass.from(br(n)??us(n)).find(n),this.relatedClass.collection=e,this.related}onRelatedUpdated(e,n){this===this.parent.requireRelation(this.name)&&(cn(this.parent),cn(e),cn(n),e&&this.clearInverseRelations(e),n&&this.initializeInverseRelations(n))}},sk=class extends na{constructor(e){super(e,Jt("Tombstone"))}create(){const e=Jt("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}clearForeignAttributes(){}};const Df=new WeakMap;function dr(t,e){return t[e]}async function ik(t,e,n){if(t.getPrimaryKey()!==e.getPrimaryKey())throw new He("Can't synchronize different models");if(!(n.has(t)||n.has(e))){n.add(t),n.add(e),await t.loadRelationIfUnloaded("operations"),await e.loadRelationIfUnloaded("operations"),(t.operations.length>0||e.operations.length>0)&&(t.addHistoryOperations(e.operations),e.addHistoryOperations(t.operations));for(const r of ar(t.static().relations,t.static().reservedRelations)){const s=t.requireRelation(r),i=e.requireRelation(r);!s.enabled||!i.enabled||(await $h(s,Jb).__synchronizeRelated(i,n),await $h(i,Jb).__synchronizeRelated(s,n))}}}let ok=class{tracksHistory(){return Df.has(this)?!1:this._history??this.static("history")}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const n=()=>(Df.delete(this),!0);Df.set(this);const r=e();return fR(r)?r.then(s=>n()&&s):n()&&r}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){return this._tombstone??this.static("tombstone")}getHistoryHash(){const e=this.getRelatedModels().map(n=>n.operations??[]).flat();return e.length===0?null:YT(ja(e,"url").reduce((n,r)=>n+r.url,""))}rebuildAttributesFromHistory(){var e,n;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new He("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(this.operations.length===0)return;const r=hi("PropertyOperation"),s=ja(this.operations,"date"),i=new Set(Object.keys(dr(this,"_attributes"))),o=Object.entries(this.static("fields")).filter(([a,l])=>l.type===Ie.Array);i.delete(this.static("primaryKey")),i.delete(Tt.CreatedAt),i.delete(Tt.UpdatedAt),o.forEach(([a,l])=>{this.ignoreRdfPropertyHistory(l.rdfProperty)||this.setAttribute(a,[])}),s.forEach(a=>{if(a instanceof r){const l=this.static().getRdfPropertyField(a.property);l&&i.delete(l)}a.apply(this)}),i.forEach(a=>{const l=this.static().getFieldRdfProperty(a);l&&this.ignoreRdfPropertyHistory(l)||this.unsetAttribute(a)}),this.setAttribute("createdAt",(e=s[0])==null?void 0:e.date),this.setAttribute("updatedAt",(n=s[s.length-1])==null?void 0:n.date)}addHistoryOperations(e){const n=hi("PropertyOperation"),r=new Set(this.operations.map(a=>a.url)),s=[],i=new Set,o=Object.keys(this.static("fields")).reduce((a,l)=>{const c=this.static().getFieldRdfProperty(l);return c&&(a[c]=l),a},{});for(const a of e){if(r.has(a.url)||a instanceof n&&this.ignoreRdfPropertyHistory(a.property))continue;const l=a.clone();l.reset(),l.url=a.url,s.push(l),a instanceof n&&a.property in o&&i.add(a.property)}if(s.some(a=>!a.isInception(this))){this.setRelationModels("operations",ja(this.operations.concat(s),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const l=o[a];dr(this,"_trackedDirtyAttributes")[l]=dr(this,"_dirtyAttributes")[l]}}}async addDirtyHistoryOperations(){const e=dr(this,"_trackedDirtyAttributes");if(await this.loadRelationIfUnloaded("operations"),"url"in dr(this,"_dirtyAttributes"))throw new He(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${dr(this,"_originalAttributes").url}'.`);if(this.operations.length===0){const n=Fn($s(dr(this,"_originalAttributes"),[this.static("primaryKey")]));for(const[r,s]of Object.entries(n)){if(s===null||Array.isArray(s)&&s.length===0||r in e&&e[r]===s)continue;const i=this.static().getFieldRdfProperty(r);i&&this.ignoreRdfPropertyHistory(i)||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(r),date:this.metadata.createdAt,value:this.getOperationValue(r,s)})}}for(const[n,r]of Object.entries(dr(this,"_dirtyAttributes"))){if(n in e&&e[n]===r)continue;const s=this.static().getFieldRdfProperty(n);if(!(s&&this.ignoreRdfPropertyHistory(s))){if(Array.isArray(r)){this.addArrayHistoryOperations(n,r,dr(this,"_originalAttributes")[n]);continue}if(r==null){this.relatedOperations.attachUnsetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt});continue}this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt,value:this.getOperationValue(n,r)})}}this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}removeDuplicatedHistoryOperations(){const e=hi("PropertyOperation"),n=[],r=[],s=this.operations.filter(o=>o.isInception(this)),i=o=>!r.includes(o.url);for(const o of s)if(o instanceof e){if(!n.includes(o.property)){n.push(o.property);continue}r.push(o.url),o.exists()&&dr(this,"_removedResourceUrls").push(o.url)}this.setRelationModels("operations",this.operations.filter(i))}getOperationValue(e,n){const r=this.static().getFieldDefinition(e,n);return m0(r)?ln(gn(n,!0).map(s=>this.getOperationValue(`${e}.*`,s))):(n&&r.type===Ie.Key&&(n=new rr(n)),r.serialize&&(n=r.serialize(n)),n)}addArrayHistoryOperations(e,n,r){const s=gn(this.getOperationValue(e,r),!0),i=gn(this.getOperationValue(e,n),!0),{added:o,removed:a}=ta(s,i,(l,c)=>l instanceof rr&&c instanceof rr?l.equals(c):l===c);o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:ln(o)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:ln(a)})}reconcileModelTimestamps(e){var n;const[r,...s]=this.operations??[];if(r){this.setAttribute(Tt.UpdatedAt,s.reduce((a,l)=>a>l.date?a:l.date,r.date));return}if(e)return;const i=dr(this,"_originalAttributes")[Tt.UpdatedAt]??((n=this.metadata)==null?void 0:n.getOriginalAttribute(Tt.UpdatedAt));if(!i)return;const o=Object.keys(dr(this,"_dirtyAttributes"));o[1]||o[0]&&o[0]!==Tt.UpdatedAt||this.setAttribute(Tt.UpdatedAt,i)}};function Gl(t){return $u(t,ju)}function Pf(t){return $u(t,Uu)}const ak=Du(ji,[UC,BC,HC,YC,ok]);let Lt=class extends ak{constructor(){super(...arguments),ke(this,"_sourceSubject",{}),ke(this,"_lock",new im)}static getFieldDefinition(e,n){if(e.endsWith(".*")){const r=this.getFieldDefinition(e.slice(0,-2),Array.isArray(n)&&n.length>0?n[0]:void 0);if(!VC(r))throw new He("Can't get item field definition for non-array field");return{type:r.items.type,rdfProperty:r.rdfProperty,rdfPropertyAliases:r.rdfPropertyAliases,required:!1}}return this.fields[e]??Yc(n,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){const n=this.fields[e];return n&&!n.rdfProperty?null:(n==null?void 0:n.rdfProperty)??this.getDefaultRdfContext()+e}static getRdfPropertyField(e){return(this.rdfPropertyFields??(this.rdfPropertyFields=CT(Xt(Object.keys(this.fields),n=>this.getFieldRdfProperty(n)))))[e]??null}static async updateSchema(e){await super.updateSchema(e),delete this.rdfPropertyFields}static requireFetch(){if(!this.usingSolidEngine())throw new He(`Could not get fetch from ${this.modelName} model`);return this.requireFinalEngine().getFetch()}static requireFieldRdfProperty(e){return this.getFieldRdfProperty(e)??We(`Couldn't get required property for rdf field '${e}'`)}static usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}static useSoftDeletes(e){this.softDeletesEnabled=e}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){var n,r,s,i;this.modelName=this.bootModelName(e),this.rdfContexts=this.bootRdfContexts(((n=Object.getOwnPropertyDescriptor(this,"rdfContext"))==null?void 0:n.value)??null,((r=Object.getOwnPropertyDescriptor(this,"rdfContexts"))==null?void 0:r.value)??{},this.rdfsClass),this.rdfsClasses=this.bootRdfsClasses(((s=Object.getOwnPropertyDescriptor(this,"rdfsClass"))==null?void 0:s.value)??null,((i=Object.getOwnPropertyDescriptor(this,"rdfsClasses"))==null?void 0:i.value)??null,this.rdfContexts),this.rdfsClassesAliases=this.bootRdfsClassesAliases(this.rdfsClassesAliases,this.rdfContexts),super.boot(e)}static aliasRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){const i=this.rdfsClasses.reduce((o,a)=>(a.startsWith(r)&&o.push(a.replace(r,s)),o),[]);i.length>0&&this.rdfsClassesAliases.push(i);for(const o of Object.values(this.fields))(n=o.rdfProperty)!=null&&n.startsWith(r)&&o.rdfPropertyAliases.push(o.rdfProperty.replace(r,s))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map(i=>i.replace(r,s));for(const i of Object.values(this.fields))(n=i.rdfProperty)!=null&&n.startsWith(r)&&(i.rdfProperty=i.rdfProperty.replace(r,s))}}static createFromEngineDocument(e,n,r){return this.instance().createFromEngineDocument(e,n,r)}static async find(e){const n=nr([this.rdfsClasses,...this.rdfsClassesAliases].flat()),r=this.instance().serializeKey(e),s=vr(r),i=br(s)??us(s);this.ensureBooted();try{const{documentPermissions:o,stopTracking:a}=this.instance().trackPublicPermissions(),l=await this.requireEngine().readOne(i,s),c=await Xn.resourceFromJsonLDGraph(l,r);if(!n.some(d=>c.isType(d)))return null;const u=await this.instance().createFromEngineDocument(s,l,r);return a(),u._publicPermissions=o[s],u}catch(o){if(XT()&&!mn(o,ts)&&!mn(o,xm)&&!mn(o,Cf))throw o;return null}}static async all(e={}){e=this.prepareEngineFilters(e);const{documentPermissions:n,stopTracking:r}=this.instance().trackPublicPermissions(),s=await this.withCollection(()=>super.all(e));return r(),s.forEach(i=>i._publicPermissions=n[i.requireDocumentUrl()]),s}static prepareEngineFilters(e={}){const n=!this.usingSolidEngine();return this.instance().convertEngineFiltersToJsonLD(e,n)}static rdfTerm(e,n){return n??(n=this.rdfContexts),fi(e,Fn({extraContext:n,defaultPrefix:Object.values(n).shift()}))}static async newFromJsonLD(e,n,r){const s=cC(e),i=await Xn.fromJsonLD(s,n??this.collection),o=await i.toJsonLD(),a=r??this.findMatchingResourceIds(i.statements,n)[0]??We(He,"Couldn't find matching resource in JSON-LD"),l=i.resource(a),c=n||vr(a),u=await this.instance().parseEngineDocumentAttributes(c,o,a);return this.hasAutomaticTimestamp(Tt.CreatedAt)&&(u.createdAt=l==null?void 0:l.getPropertyValue(vt("purl:created"))),this.hasAutomaticTimestamp(Tt.UpdatedAt)&&(u.updatedAt=l==null?void 0:l.getPropertyValue(vt("purl:modified"))),Fe(this.newInstance(Fn(u)),async d=>{await d.loadDocumentModels(c,o),d.reset(),d._sourceSubject=e["@id"]?uC(e["@id"]):{};for(const f of this.relations){const h=d.requireRelation(f),m=h.getLoadedModels();h.enabled&&($h(h,Ni).reset(m),m.forEach(y=>y.reset()))}})}static async createFromJsonLD(e,n,r){return Fe(await this.newFromJsonLD(e,n,r),s=>s.save(n))}static async createInDocument(e,n,r){return Fe(new this(e),s=>s.saveInDocument(n,r))}static async synchronize(e,n,r){if(this!==e.static())return e.static().synchronize(e,n,r??new WeakSet);await ik(e,n,r??new WeakSet)}static findMatchingResourceIds(e,n){const r=e.reduce((s,i)=>{var o;return i.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&(s[i.subject.value]=s[i.subject.value]??[],(o=s[i.subject.value])==null||o.push(i.object.value)),s},{});return Object.entries(r).filter(([s,i])=>i.some(o=>this.rdfsClasses.includes(o))).map(([s])=>n?Ho(n,s):s)}static bootRdfContexts(e,n,r,s={}){var i,o;const a=s.modelClass??this,l={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},c=()=>{var d;return(d=Object.entries({...n,...l}).find(([f,h])=>(r==null?void 0:r.startsWith(`${f}:`))||(r==null?void 0:r.startsWith(Ct(h)))))==null?void 0:d[1]};n.default??(n.default=e??c()??Object.values(n).find(d=>!!d));let u=Object.getPrototypeOf(a);return s.skipParentSchema&&u.__isSchema&&(u=Object.getPrototypeOf(u)),u?this.bootRdfContexts(((i=Object.getOwnPropertyDescriptor(u,"rdfContext"))==null?void 0:i.value)??null,{...n,...((o=Object.getOwnPropertyDescriptor(u,"rdfContexts"))==null?void 0:o.value)??{}},u.rdfsClass,{modelClass:u}):{...n,...l,default:n.default??"http://www.w3.org/ns/solid/terms#"}}static bootRdfsClasses(e,n,r,s){var i,o,a;const l=s??this;if(n&&n.length>0)return nr((n==null?void 0:n.map(u=>this.rdfTerm(u,r)))??[]);if(e)return[this.rdfTerm(e,r)];const c=Object.getPrototypeOf(l);return c?this.bootRdfsClasses(((i=Object.getOwnPropertyDescriptor(c,"rdfsClass"))==null?void 0:i.value)??null,((o=Object.getOwnPropertyDescriptor(c,"rdfsClasses"))==null?void 0:o.value)??null,{...r,...((a=Object.getOwnPropertyDescriptor(c,"rdfContexts"))==null?void 0:a.value)??{}},c):[this.rdfTerm(this.getDefaultRdfContext(r)+this.modelName,r)]}static bootRdfsClassesAliases(e,n){return e.map(r=>nr(r.map(s=>vt(s,this.rdfContexts,this.getDefaultRdfContext(n)))??[]))}static bootCollection(){const e=super.bootCollection();if(!e.match(/^\w+:\/\/.*\/$/))throw new ai(this.modelName,`SolidModel collections must be valid container urls (ending with a trailing slash), '${e}' isn't.`);return e}static bootFields(e,n,r,s){var i,o,a;const l=MC(this)??this.rdfContexts,c=this.getDefaultRdfContext(l),{fieldAliases:u}=super.bootFields(e,n,r,s);r.includes(Tt.CreatedAt)&&delete s[Tt.CreatedAt],r.includes(Tt.UpdatedAt)&&delete s[Tt.UpdatedAt];for(const[d,f]of Object.entries(s))f.rdfProperty=vt(f.rdfProperty??`${c}${d}`,l,c),f.rdfPropertyAliases=((i=f.rdfPropertyAliases)==null?void 0:i.map(h=>vt(h,l,c)))??[];return(o=s[n])==null||delete o.rdfProperty,(a=s[n])==null||delete a.rdfPropertyAliases,{fields:s,fieldAliases:u}}static getDefaultRdfContext(e){return e??(e=this.rdfContexts),e.default??""}static async performSchemaUpdate(e){try{e.primaryKey??(e.primaryKey="url");const n=this.bootRdfContexts(e.rdfContext??null,{...e.rdfContexts},e.rdfsClass,{skipParentSchema:!0}),r=this.bootRdfsClasses(e.rdfsClass??null,e.rdfsClasses??null,n),s=this.bootRdfsClassesAliases(e.rdfsClassesAliases??[],n);LC(this,n),await super.performSchemaUpdate(e),this.rdfContexts=n,this.rdfsClasses=r,this.rdfsClassesAliases=s,this.rdfsClass=e.rdfsClass,this.rdfContext=e.rdfContext,this.defaultResourceHash=e.defaultResourceHash??"it",this.slugField=e.slugField,this.history=e.history??!1,this.tombstone=e.tombstone??!0}finally{FC(this)}}initialize(e,n){this._documentExists=n,this._sourceDocumentUrl=this._sourceDocumentUrl??null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,n)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=this._proxy.relatedMetadata.relatedClass.newInstance(Fn({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}update(e){return this._lock.run(()=>super.update(e))}save(e){return this.static().withCollection(e||this.guessCollection(),()=>super.save())}async saveInDocument(e,n){return this.exists()?AT(this.getDocumentUrl()===e,He,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,n),await this.save(),this}delete(){return this.static().softDeletesEnabled?this.softDelete():this.forceDelete()}forceDelete(){return this.static().withCollection(this.guessCollection(),()=>super.delete())}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new He("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(Tt.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const n=Jt("SolidDocument");await new n({url:this.getDocumentUrl()}).register(e,this.static())}mintUrl(e,n,r){this.setAttribute(this.static("primaryKey"),this.newUrl(e,r)),e&&(this._documentExists=n??!0)}toJsonLD(e={}){e={ids:!0,timestamps:!0,history:!0,...e};const n=this.clone();return e.ids||n.getRelatedModels().forEach(r=>r.setAttribute("url",null)),e.timestamps||n.getRelatedModels().forEach(r=>{r.relatedMetadata.related=null,delete r.relatedMetadata.__modelInSameDocument,delete r.relatedMetadata.__modelInOtherDocumentId,delete r.relatedMetadata.__newModel}),e.history||n.getRelatedModels().forEach(r=>{r.relatedOperations.related=[],r.relatedOperations.__newModels=[],delete r.relatedOperations.__modelsInSameDocument,delete r.relatedOperations.__modelsInOtherDocumentIds}),n.serializeToJsonLD()}async toTurtle(e={}){const n=await vm(this.toJsonLD(e));return YI(n)}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this._documentExists=e,Object.values(this._relations).filter(Ni).filter(n=>n.enabled&&n.useSameDocument&&!tn()).map(n=>n.getLoadedModels()).flat().forEach(n=>n.setDocumentExists(e))}isDirty(e,n){var r,s;if(e)return this.static("timestamps").includes(e)?((r=this.metadata)==null?void 0:r.isDirty(e))||super.isDirty(e):super.isDirty(e);if(super.isDirty())return!0;if(n)return!!((s=this.metadata)!=null&&s.isDirty("deletedAt"));const i=this.getDocumentModels().filter(a=>a.isDirty(void 0,!0)),o=this.getRemovedDocumentModels();return i.length+o.length>0}isSoftDeleted(){var e;return!!((e=this.metadata)!=null&&e.deletedAt)}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(Gl).filter(n=>n.enabled&&n.useSameDocument&&!tn()).forEach(n=>{n.__modelsInSameDocument=n.__modelsInSameDocument||[],n.__modelsInSameDocument.push(...n.__newModels),n.__newModels=[]}),Object.values(this._relations).filter(Pf).filter(n=>n.useSameDocument&&n.enabled&&!!n.__newModel&&!tn()).forEach(n=>{n.__modelInSameDocument=n.__newModel,n.__newModel=void 0}),e||this.getDocumentModels().forEach(n=>n.cleanDirty(!0))}fixMalformedAttributes(){super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(Tt.CreatedAt)&&(this.metadata.createdAt=this.getAttribute("createdAt")??new Date),this.static().hasAutomaticTimestamp(Tt.UpdatedAt)&&(this.metadata.updatedAt=this.getAttribute("updatedAt")??this.getAttribute("createdAt")??new Date))}ignoreRdfPropertyHistory(e,n){return!1}getDocumentUrl(){return this.url?vr(this.url):null}requireDocumentUrl(){return this.getDocumentUrl()??We(He,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){return this.getContainerUrl()??We(He,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?br(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?br(e):null}setAttribute(e,n){const r=this.getPrimaryKey();super.setAttribute(e,n);const s=this.getPrimaryKey();r!==s&&this.onPrimaryKeyUpdated(s,r)}unsetAttribute(e){var n,r;return((r=(n=this.static("fields"))==null?void 0:n[e])==null?void 0:r.type)===Ie.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){(this.metadata??this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){(this.metadata??this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("createdAt"))??super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("updatedAt"))??super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("deletedAt"))??super.getAttributeValue("deletedAt")}getDocumentModels(){return tn()?[]:Cy("document-models",this,()=>{const e=new Set;return this.populateDocumentModels(e),Fe(Array.from(e),n=>{n.forEach(r=>Y_("document-models",r,n))})})}getRemovedDocumentModels(){const e=new Set;for(const n of Object.values(this._relations))!n.enabled||!n.loaded||!Ni(n)||!Gl(n)||n.__removedDocumentModels.forEach(r=>e.add(r));return Array.from(e)}getDirtyDocumentModels(){return this.getDocumentModels().filter(e=>e.isDirty(void 0,!0))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,n){return super.setRelationModel(e,n)}setRelationModels(e,n){return super.setRelationModels(e,n)}getRelatedModels(){return Cy("related-models",this,()=>{const e=new Set;return this.populateRelatedModels(e),Array.from(e)})}usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}metadataRelationship(){const e=Jt("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!tn()).onDelete("cascade")}operationsRelationship(){return new XC(this).usingSameDocument(!tn()).onDelete("cascade")}tombstoneRelationship(){return new sk(this)}authorizationsRelationship(){return new QC(this)}onMoved(e,n){n&&this.setSourceDocumentUrl(n)}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}async createFromEngineDocument(e,n,r){const s=async()=>{const l=await this.parseEngineDocumentAttributes(e,n,r);l[this.static("primaryKey")]=new rr(r||e);for(const[c,u]of Object.entries(this.static("fields")))u.deserialize&&(l[c]=u.deserialize(l[c]));return this.newInstance(l,!0)},i=Ct(e),o=await Xn.resourceFromJsonLDGraph(n,r||i),a=await s();if(await a.loadDocumentModels(i,n),a.hasIncompleteAttributes())throw new Cf(i);return Fe(a,l=>{l._sourceDocumentUrl=a0(i,{fragment:!1}),l._usesRdfAliases=this.static("rdfsClassesAliases").some(c=>!c.some(u=>!o.isType(u)))})}async createManyFromEngineDocuments(e){const n=nr([this.static("rdfsClasses"),...this.static("rdfsClassesAliases")].flat()),r=await Promise.all(Object.entries(e).map(async([s,i])=>{const o=await Xn.fromJsonLD(i);return Promise.all(o.resources.filter(a=>!!a.url&&n.some(l=>a.isType(l))).map(async a=>{try{return await this.createFromEngineDocument(s,i,a.url)}catch(l){if(l instanceof Cf)return null;throw l}}))}));return ln(r.flat())}async loadDocumentModels(e,n){const r=this.requireEngine();await Promise.all(Object.values(this._relations).filter(s=>s.enabled&&(Ni(s)||s instanceof kc)).map(async s=>s.relatedClass.withEngine(r,()=>s.__loadDocumentModels(e,n))))}async beforeSave(e){var n;const r=this.isDirty(Tt.UpdatedAt)||!!((n=this.metadata)!=null&&n.isDirty(Tt.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&!tn()&&this.mintUrl(),!e&&(await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()||s.beforeCreate())),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()&&s.beforeUpdate())),this.reconcileModelTimestamps(r))}async beforeDocumentSave(){let e=[];const n=new Set,r=()=>(e=this.getDocumentModels().filter(s=>!n.has(s)),e.length>0);for(;r();)this.static("mintsUrls")&&!tn()&&this.mintDocumentModelsKeys(e),await Promise.all(e.map(async s=>{s!==this&&s.isDirty(void 0,!0)&&await s.beforeSave(!0),n.add(s)}))}async beforeCreate(){for(const e of Object.values(this._relations))!e.enabled||!zC(e)||e.__beforeParentCreate();this.metadata&&!this.metadata.resourceUrl&&this.static("defaultResourceHash")&&!tn()&&(this.metadata.resourceUrl=this.url??`#${this.static("defaultResourceHash")}`,this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists))}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map(async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))})))}async performSave(){const e=this.getDirtyDocumentModels().map(n=>[n,n.exists()]);try{await super.performSave()}catch(n){if(!(n instanceof cm))throw n;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach(([n,r])=>{n._wasRecentlyCreated=n._wasRecentlyCreated||!r})}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){if(await super.afterSave(),!e){this.metadata&&this.metadata.resourceUrl!==this.url&&(this.metadata.resourceUrl=this.url,tn()||this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists)),await Promise.all(this.getDirtyDocumentModels().map(n=>n.afterSave(!0)));for(const n of Object.values(this._relations))!n.enabled||!WC(n)||n.__afterParentSave()}}onPrimaryKeyUpdated(e,n){var r,s;const i=this.getDocumentUrl()||void 0,o=this.documentExists(),a=Object.values(this._relations).filter(l=>l.enabled&&Rm(l));for(const l of a)l.getLoadedModels().forEach(c=>{const u=c.getAttribute(l.foreignKeyName);c.setAttribute(l.foreignKeyName,Array.isArray(u)?Fe(u.slice(0),d=>z_(d,n,e)):e)});tn()||((r=this.metadata)==null||r.mintUrl(i,o),(s=this.operations)==null||s.map(l=>l.mintUrl(i,o)))}async syncDirty(){const e=this.getDocumentUrl(),n=()=>this.requireEngine().create(e?Qt(e):this.static("collection"),this.toEngineDocument(),e||void 0),r=()=>this.requireEngine().update(Qt(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),s=()=>this.requireEngine().update(Qt(e),e,this.getDirtyEngineDocumentUpdates());return await(async()=>{if(!this._documentExists){const i=this.static("defaultResourceHash"),o=await n();return this.getSerializedPrimaryKey()??(i&&!tn()?`${o}#${i}`:o)}return this._exists?(await s(),this.getSerializedPrimaryKey()):(await r(),this.getSerializedPrimaryKey())})()??We(He,"Missing primary key")}async deleteModelsFromEngine(e){await this.deleteModels(e)}hasOne(e,n,r){return new rk(this,e,n,r)}hasMany(e,n,r){return new Q0(this,e,n,r)}belongsToOne(e,n,r){return new tk(this,e,n,r)}belongsToMany(e,n,r){return new e1(this,e,n,r)}isContainedBy(e){return new t1(this,e)}documentContainsMany(e){return new kc(this,e)}toEngineDocument(){return{"@graph":this.getDirtyDocumentModels().map(e=>e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0}))}}getDirtyEngineDocumentUpdates(e){const n=[],r=this.requireEngine(),s=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const o of s){if(o===this)continue;if(!o.exists()){n.push({$push:o.serializeToJsonLD({includeRelations:!1})});continue}const a=o.withEngine(r,l=>l.getDirtyEngineDocumentUpdates(!0))["@graph"];"$apply"in a?n.push(...a.$apply):n.push(a)}for(const o of i)o.getDocumentModels().forEach(a=>n.push({$updateItems:{$where:{"@id":a.url},$unset:!0}}))}if(super.isDirty()&&this.url){const o=super.getDirtyEngineDocumentUpdates(),a=!this.usingSolidEngine();n.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(o,a)}})}return this._removedResourceUrls.forEach(o=>n.push({$updateItems:{$where:{"@id":o},$unset:!0}})),n.length===1?{"@graph":n[0]}:{"@graph":{$apply:n}}}async parseEngineDocumentAttributes(e,n,r){return this.parseEngineDocumentAttributesFromJsonLD(n,r||e)}castAttribute(e,n={}){const r=()=>{var s;const i=typeof e>"u"||e===null;switch((s=n.definition)==null?void 0:s.type){case Ie.Array:{const o=i?[]:gn(e),a=nr(o);return o.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a}case Ie.Any:if(!Array.isArray(e))return e;if(e.length===0)return;if(e.length===1)return e[0];break}return i?void 0:e};return super.castAttribute(r(),n)}newUrl(e,n){return e=e??this.newUrlDocumentUrl(),n=n??this.newUrlResourceHash(),n?`${e}#${n}`:e}newUrlDocumentUrl(){var e;const n=((e=this._sourceSubject)==null?void 0:e.documentName)??this.newUrlDocumentUrlSlug()??Un();return Ho(this.static("collection"),n)}newUrlDocumentUrlSlug(){const e=this.static("slugField"),n=e&&this.getAttribute(e);return(n&&am(n))??null}newUrlResourceHash(){var e;return((e=this._sourceSubject)==null?void 0:e.resourceHash)??this.static("defaultResourceHash")}newUniqueUrl(e){var n;e=e??this.newUrl();const r=(n=wl(e))==null?void 0:n.fragment;return`${vr(e)}-${e0()}${r?`#${r}`:""}`}guessCollection(){if(this.url)return br(this.url)??void 0}mintDocumentModelsKeys(e){const n=this.requireDocumentUrl(),r=this._documentExists;for(const s of e)s.url||s.mintUrl(n,r,Un());for(const s of e)for(const i of Object.values(s._relations))i.enabled&&i.getLoadedModels().forEach(o=>i.setForeignAttributes(o))}populateRelatedModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))n.enabled&&(Pf(n)&&n.__newModel&&n.__newModel.populateRelatedModels(e),Gl(n)&&n.__newModels.map(r=>r.populateRelatedModels(e)),n.getLoadedModels().forEach(r=>r.populateRelatedModels(e)))}}populateDocumentModels(e){if(e.has(this))return;const n=this.getDocumentUrl(),r=(s,i)=>n&&i.getDocumentUrl()===n||Ni(s)&&s.useSameDocument;e.add(this);for(const s of Object.values(this._relations)){const i=s instanceof kc;if(!(!s.enabled||!s.loaded||!i&&!Ni(s))){if(Pf(s)&&s.__newModel&&r(s,s.__newModel)&&s.__newModel.populateDocumentModels(e),Gl(s))for(const o of s.__newModels)r(s,o)&&o.populateDocumentModels(e);s.getLoadedModels().filter(o=>i||r(s,o)).forEach(o=>o.populateDocumentModels(e))}}}};ke(Lt,"primaryKey","url"),ke(Lt,"fields"),ke(Lt,"classFields",["_history","_publicPermissions","_tombstone"]),ke(Lt,"rdfContext"),ke(Lt,"rdfContexts",{}),ke(Lt,"rdfsClass"),ke(Lt,"rdfsClasses",[]),ke(Lt,"rdfsClassesAliases",[]),ke(Lt,"reservedRelations",["metadata","operations","tombstone","authorizations"]),ke(Lt,"defaultResourceHash","it"),ke(Lt,"slugField"),ke(Lt,"mintsUrls",!0),ke(Lt,"history",!1),ke(Lt,"tombstone",!0),ke(Lt,"rdfPropertyFields"),ke(Lt,"historyDisabled",new WeakMap),ke(Lt,"softDeletesEnabled",!1);function Qn(t,e){return K0(t,Lt,e)}const n1={resourceUrl:{type:Ie.Key,required:!0,rdfProperty:"resource"},date:{type:Ie.Date,required:!0}},lk=Qn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:n1});let Bu=class extends lk{apply(e){}isInception(e){var n,r;return((r=(n=e.metadata)==null?void 0:n.createdAt)==null?void 0:r.getTime())===this.date.getTime()}newUrl(e,n){if(!this.resourceUrl)return super.newUrl(e,n);const r=n??Un();return this.resourceUrl.includes("#")?`${this.resourceUrl}-operation-${r}`:`${this.resourceUrl}#operation-${r}`}};const Hu={...n1,property:{type:Ie.Key,required:!0}},ck=Qn(Bu,{rdfsClass:"PropertyOperation",fields:Hu});let Ns=class extends ck{apply(e){const n=e.static().getRdfPropertyField(this.property);n&&this.applyPropertyUpdate(e,n)}applyPropertyUpdate(e,n){}};const uk=Qn(Ns,{rdfsClass:"AddPropertyOperation",fields:{...Hu,value:{type:Ie.Any,required:!0}}});let dk=class extends uk{applyPropertyUpdate(e,n){const r=e.getAttributeValue(n);if(!Array.isArray(r))throw new He("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(n,r.concat(gn(this.value)))}};const fk=Qn(Bu,{rdfsClass:"DeleteOperation"});let hk=class extends fk{apply(e){e.metadata.setAttribute("deletedAt",this.date)}};const pk=Qn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:Ie.Key,required:!0,rdfProperty:"resource"},createdAt:Ie.Date,updatedAt:Ie.Date,deletedAt:Ie.Date}});let Im=class extends pk{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,n){return this.resourceUrl?this.resourceUrl.includes("#")?`${this.resourceUrl}-metadata`:`${this.resourceUrl}#metadata`:super.newUrl(e,n)}};const mk=Qn(Ns,{rdfsClass:"RemovePropertyOperation",fields:{...Hu,value:{type:Ie.Any,required:!0}}}),r1=class qh extends mk{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=e.getAttributeValue(n),i=r.deserialize?r.deserialize(s):s;if(!Array.isArray(i))throw new He("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(n,ar(i,this.castModelAttribute(e,n,gn(this.value))))}castModelAttribute(e,n,r){const s=e.constructor;return(qh.attributeCasters.get(s)??this.createAttributeCaster(s))(n,r)}createAttributeCaster(e){const n=(class extends e{castAttribute(r,s={}){return super.castAttribute(r,s)}}).pureInstance();return Fe((r,s)=>n.castAttribute(s,{definition:n.static().getFieldDefinition(r)}),r=>qh.attributeCasters.set(e,r))}};ke(r1,"attributeCasters",new WeakMap);let gk=r1;const yk=Qn(Ns,{rdfsClass:"SetPropertyOperation",fields:{...Hu,value:{type:Ie.Any,required:!0}}});let bk=class extends yk{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=r.deserialize?r.deserialize(this.value):this.value;e.setAttributeValue(n,s)}},pi=class extends Im{};ke(pi,"rdfsClass","Tombstone");const vk=Qn(Ns,{rdfsClass:"UnsetPropertyOperation"});let wk=class extends vk{applyPropertyUpdate(e,n){e.unsetAttribute(n)}};const _k={AddPropertyOperation:dk,DeleteOperation:hk,Metadata:Im,Operation:Bu,PropertyOperation:Ns,RemovePropertyOperation:gk,SetPropertyOperation:bk,Tombstone:pi,UnsetPropertyOperation:wk},xk=Qn({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:Ie.Array,items:Ie.Key},agentClasses:{rdfProperty:"agentClass",type:Ie.Array,items:Ie.Key},agentGroups:{rdfProperty:"agentGroup",type:Ie.Array,items:Ie.Key},accessTo:{type:Ie.Array,items:Ie.Key},accessToClasses:{rdfProperty:"accessToClass",type:Ie.Array,items:Ie.Key},default:{type:Ie.Array,items:Ie.Key},modes:{rdfProperty:"mode",type:Ie.Array,items:Ie.Key}}}),Ek={[li.Read]:"http://www.w3.org/ns/auth/acl#Read",[li.Write]:"http://www.w3.org/ns/auth/acl#Write",[li.Append]:"http://www.w3.org/ns/auth/acl#Append",[li.Control]:"http://www.w3.org/ns/auth/acl#Control"};let Cm=class extends xk{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return Ek[e]}};const Ak=Qn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:Ie.Date,rdfProperty:"purl:modified"}}}),Sk=Qn({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:Ie.Array,items:Ie.Key},instance:Ie.Key,instanceContainer:Ie.Key}});let nl=class extends Sk{},Ui=class extends Ak{static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof Em?r.getFetch():void 0;return(await mC(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}async register(e,n){const r=new nl({forClass:n.rdfsClasses[0],instance:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Un()),await r.withEngine(this.requireEngine(),()=>r.save(Qt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),await e.relatedRegistrations.create(r)})}};const Tk=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];let Rk=class extends e1{constructor(e){super(e,Ui,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new Ui({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!Ui.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=Xn.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>{if(r.indexOf(a["@id"])===-1)return!1;const l=gn(a["@type"]??[]);return Tk.some(c=>l.includes(c))}).map(a=>a["@id"]),o=await Promise.all(i.map(a=>Ui.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}},s1=class extends To{constructor(e,n){super(e,n,"resourceUrls","url")}setForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||this.parent.resourceUrls.includes(n))return;const r=this.parent.resourceUrls.concat([n]);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||!this.parent.resourceUrls.includes(n))return;const r=ar(this.parent.resourceUrls,n);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(e={}){this.assertParentExists();const n=this.relatedClass.newInstance(e);return!n.url&&n.static("mintsUrls")&&!tn()&&this.relatedClass.withCollection(this.parent.url,()=>n.mintUrl()),Fe(this.attach(n),r=>this.save(r))}async save(e){return this.assertParentExists(),Fe(e,async()=>{await e.save(this.parent.url),this.setForeignAttributes(e),await this.parent.save()})}async delete(e){var n;const r=e instanceof this.relatedClass?e:(n=this.related)==null?void 0:n.find(s=>s.url===e);r&&(await r.delete(),this.related&&(this.related=ar(this.related,r)))}assertParentExists(){if(!this.parent.exists())throw new He("Cannot save a model because the container doesn't exist")}onRelatedUpdated(e,n){if(this!==this.parent.requireRelation(this.name))return;const{added:r,removed:s}=ta(e??[],n??[]);cn(this.parent),e==null||e.forEach(i=>cn(i)),n==null||n.forEach(i=>cn(i)),s.forEach(i=>this.clearInverseRelations(i)),r.forEach(i=>this.initializeInverseRelations(i))}};const Ik={name:{type:Ie.String,rdfProperty:"rdfs:label"},description:{type:Ie.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:Ie.Array,rdfProperty:"ldp:contains",items:Ie.Key},createdAt:{type:Ie.Date,rdfProperty:"purl:created"},updatedAt:{type:Ie.Date,rdfProperty:"purl:modified"}},Ck=Qn({rdfsClass:"ldp:Container",timestamps:!1,fields:Ik});let xr=class extends Ck{static boot(e){super.boot(e),this.slugField=this.slugField??"name"}static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof Em?r.getFetch():void 0;return(await pC(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}documentsRelationship(){return new Rk(this)}markAttributeDirty(e,n,r){return e==="resourceUrls"&&this.usingSolidEngine()?!1:super.markAttributeDirty(e,n,r)}async register(e,n){const r=new nl({forClass:gn(n).map(s=>s.rdfsClasses).flat(),instanceContainer:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Un()),await r.withEngine(this.requireEngine(),()=>r.save(Qt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),!e.registrations.some(s=>r.instanceContainer===s.instanceContainer&&!r.forClass.some(i=>!s.forClass.includes(i)))&&await e.relatedRegistrations.create(r)})}static(e){return super.static(e)}ignoreRdfPropertyHistory(e,n){return n??(n=this.usingSolidEngine()),n&&e===_m}contains(e){return new s1(this,e)}newUrl(){return Ph(this.newUrlDocumentUrl())}newUniqueUrl(e){e=e??this.newUrl();const n=i0(e);return Ph(Qt(e),`${n}-${e0()}`)}};ke(xr,"defaultResourceHash",null);const kk=Qn({rdfContext:"http://www.w3.org/ns/solid/terms#",rdfsClass:"TypeIndex",timestamps:!1,fields:{registrationUrls:{type:Ie.Array,items:Ie.Key,rdfProperty:"hasTypeRegistration"}}});let yo=class zh extends kk{static async createPublic(e){const n=await fC(e,zh.requireFetch()),r=await this.findOrFail(n);return await r.updatePublicPermissions([li.Read]),r}static async createPrivate(e){const n=await hC(e,zh.requireFetch());return await this.findOrFail(n)}registrationsRelationship(){return tn()?this.belongsToMany(nl,"registrationUrls"):new kc(this,nl)}async findContainer(e,n){await this.loadRelationIfUnloaded("registrations");const r=this.registrations.filter(s=>s.instanceContainer&&LT(s.forClass,e.rdfsClasses));return dR(r,async s=>s!=null&&s.instanceContainer?(n??xr).find(s.instanceContainer):null)}};function i1(t){return"rdfContexts"in t}function Ts(t){return t instanceof xr}function qo(t){return t.rdfsClasses.includes(Io)}const o1={..._k,SolidACLAuthorization:Cm,SolidContainer:xr,SolidDocument:Ui,SolidTypeIndex:yo,SolidTypeRegistration:nl};new Set(Object.values(o1));function Ok(){fm(o1)}let Dk=class{constructor(e,n){ke(this,"engine"),ke(this,"metadata"),ke(this,"active",{}),this.engine=n,this.metadata=new ST(`${e}-documents-cache`)}has(e,n){return!!this.active[this.getDocumentKey(e,n)]}get(e,n){return this.engine.readOne(e,n)}async remember(e,n,r){await this.metadata.set(this.getDocumentKey(e,n),{modifiedAt:typeof r=="number"?r:r.getTime()})}async forget(e,n){await this.metadata.delete(this.getDocumentKey(e,n))}async activate(e,n,r){const s=await this.metadata.get(this.getDocumentKey(e,n));this.active[this.getDocumentKey(e,n)]=!!(s!=null&&s.modifiedAt)&&s.modifiedAt>=r}async clear(){await this.metadata.clear(),this.metadata.close()}getDocumentKey(e,n){return`${e}-${n}`}};const a1=Qn({rdfContext:"https://schema.org",fields:{title:{type:Ie.String,required:!0,rdfProperty:"schema:name"},description:Ie.String,body:{type:Ie.String,rdfProperty:"schema:articleBody"},externalUrl:{type:Ie.Key,rdfProperty:"schema:sameAs"}}}),Pk=Object.freeze(Object.defineProperty({__proto__:null,default:a1},Symbol.toStringTag,{value:"Module"}));var $k=Object.defineProperty,Nk=(t,e,n)=>e in t?$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wh=(t,e,n)=>Nk(t,typeof e!="symbol"?e+"":e,n);function Lk(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function $f(t,e){const[n,r]=Lk(t,e);return n>r?1:r>n?-1:0}Array.isArray.bind(Array);function Mk(t){return typeof t=="object"&&t!==null}function Jl(t,e){let n=t;const r=e.split(".");for(const s of r){if(!Mk(n))return;n=n[s]}return n}Object.entries.bind(Object);function Fk(t){return String(t)}function jk(t){t.splice(0,t.length)}function Uk(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function l1(t,e){return e?t.filter(e):t.filter(n=>!!n)}function Bk(t,e){for(const n of t)if(e(n))return n;return null}function Hk(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function Vk(t,e){const n=typeof e=="string"?r=>Fk(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function qk(t){return t.length===0}function zk(t,e){return t.map(n=>n[e])}function Wk(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function Kk(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function Gk(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function Jk(t,e){return t.splice(Number(e),1).length>0}function Xk(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function Yk(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const c=Jl(t.find(u=>Jl(u,l)!==void 0&&Jl(u,l)!==null),l);r[l]=s(c)}return Jl(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(c,u)=>$f(i(u,l),i(c,l)):l=>(c,u)=>$f(i(c,l),i(u,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,c)=>$f(c,l):a(e);case"object":{const l=e.map(c=>a(c));return(c,u)=>{for(const d of l){const f=d(c,u);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Qk(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function Zk(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function eO(t,e){return Array.isArray(e)?l1(t,n=>e.indexOf(n)===-1):tO(t,t.indexOf(e))}function tO(t,e){return c1(t,[e])}function c1(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}let Xb=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Wh(Xb,"__conjuring"),Wh(Xb,"__reservedProperties",new WeakMap);const Yb={},u1=class d1{static get instance(){return this._instance=this._instance??new d1}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,Yb);if(n===Yb)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Wh(u1,"_instance");let nO=u1;nO.instance;function rO(t){return t.split("").reverse().join("")}function km(t){return t.split(/_|-|\s|(?=[A-Z])/)}function sO(t){const[e,...n]=km(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function iO(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function oO(t){return km(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function aO(t){return km(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function lO(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function f1(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function h1(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let p1=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const cO={clear:jk,diff:Uk,filter:l1,first:Bk,flatMap:Hk,groupBy:Vk,isEmpty:qk,project:zk,randomItem:Wk,randomItems:Kk,remove:Gk,removeIndex:Jk,replace:Xk,sorted:Yk,unique:Qk,where:Zk,without:eO,withoutIndexes:c1};let m1=class extends p1{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};f1(m1,cO);h1(m1,Array);const uO={reverse:rO,toCamelCase:sO,toSlug:iO,toStudlyCase:oO,toTitleCase:aO};let g1=class extends p1{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};f1(g1,uO);h1(g1,String);class rl extends a1{get slug(){return this.url?lO(this.url):null}}xt(rl,"cloud",!0);const dO=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const rt={},Oo=[],Er=()=>{},fO=()=>!1,El=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Om=t=>t.startsWith("onUpdate:"),Rt=Object.assign,Dm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hO=Object.prototype.hasOwnProperty,ct=(t,e)=>hO.call(t,e),$e=Array.isArray,Do=t=>ra(t)==="[object Map]",Yi=t=>ra(t)==="[object Set]",Qb=t=>ra(t)==="[object Date]",pO=t=>ra(t)==="[object RegExp]",Ve=t=>typeof t=="function",Ot=t=>typeof t=="string",Hr=t=>typeof t=="symbol",At=t=>t!==null&&typeof t=="object",Pm=t=>(At(t)||Ve(t))&&Ve(t.then)&&Ve(t.catch),y1=Object.prototype.toString,ra=t=>y1.call(t),mO=t=>ra(t).slice(8,-1),qu=t=>ra(t)==="[object Object]",$m=t=>Ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Po=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zu=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},gO=/-(\w)/g,on=zu(t=>t.replace(gO,(e,n)=>n?n.toUpperCase():"")),yO=/\B([A-Z])/g,Gn=zu(t=>t.replace(yO,"-$1").toLowerCase()),Al=zu(t=>t.charAt(0).toUpperCase()+t.slice(1)),$o=zu(t=>t?`on${Al(t)}`:""),$n=(t,e)=>!Object.is(t,e),No=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Kh=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Qc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Zc=t=>{const e=Ot(t)?Number(t):NaN;return isNaN(e)?t:e};let Zb;const Wu=()=>Zb||(Zb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),bO="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",vO=Vu(bO);function fs(t){if($e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ot(r)?EO(r):fs(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ot(t)||At(t))return t}const wO=/;(?![^(]*\))/g,_O=/:([^]+)/,xO=/\/\*[^]*?\*\//g;function EO(t){const e={};return t.replace(xO,"").split(wO).forEach(n=>{if(n){const r=n.split(_O);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ge(t){let e="";if(Ot(t))e=t;else if($e(t))for(let n=0;n<t.length;n++){const r=Ge(t[n]);r&&(e+=r+" ")}else if(At(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Rn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ot(e)&&(t.class=Ge(e)),n&&(t.style=fs(n)),t}const AO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",SO=Vu(AO);function b1(t){return!!t||t===""}function TO(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=bi(t[r],e[r]);return n}function bi(t,e){if(t===e)return!0;let n=Qb(t),r=Qb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hr(t),r=Hr(e),n||r)return t===e;if(n=$e(t),r=$e(e),n||r)return n&&r?TO(t,e):!1;if(n=At(t),r=At(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!bi(t[o],e[o]))return!1}}return String(t)===String(e)}function Ku(t,e){return t.findIndex(n=>bi(n,e))}const v1=t=>!!(t&&t.__v_isRef===!0),Ne=t=>Ot(t)?t:t==null?"":$e(t)||At(t)&&(t.toString===y1||!Ve(t.toString))?v1(t)?Ne(t.value):JSON.stringify(t,w1,2):String(t),w1=(t,e)=>v1(e)?w1(t,e.value):Do(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Nf(r,i)+" =>"]=s,n),{})}:Yi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Nf(n))}:Hr(e)?Nf(e):At(e)&&!$e(e)&&!qu(e)?String(e):e,Nf=(t,e="")=>{var n;return Hr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let En;class Nm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=En,!e&&En&&(this.index=(En.scopes||(En.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=En;try{return En=this,e()}finally{En=n}}}on(){++this._on===1&&(this.prevScope=En,En=this)}off(){this._on>0&&--this._on===0&&(En=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function sa(t){return new Nm(t)}function ia(){return En}function Sl(t,e=!1){En&&En.cleanups.push(t)}let It;const Lf=new WeakSet;class sl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,En&&En.active&&En.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Lf.has(this)&&(Lf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||x1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ev(this),E1(this);const e=It,n=jr;It=this,jr=!0;try{return this.fn()}finally{A1(this),It=e,jr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Fm(e);this.deps=this.depsTail=void 0,ev(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Lf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gh(this)&&this.run()}get dirty(){return Gh(this)}}let _1=0,Va,qa;function x1(t,e=!1){if(t.flags|=8,e){t.next=qa,qa=t;return}t.next=Va,Va=t}function Lm(){_1++}function Mm(){if(--_1>0)return;if(qa){let e=qa;for(qa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Va;){let e=Va;for(Va=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function E1(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function A1(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Fm(r),RO(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Gh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(S1(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function S1(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===il)||(t.globalVersion=il,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Gh(t))))return;t.flags|=2;const e=t.dep,n=It,r=jr;It=t,jr=!0;try{E1(t);const s=t.fn(t._value);(e.version===0||$n(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{It=n,jr=r,A1(t),t.flags&=-3}}function Fm(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Fm(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function RO(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function IO(t,e){t.effect instanceof sl&&(t=t.effect.fn);const n=new sl(t);e&&Rt(n,e);try{n.run()}catch(s){throw n.stop(),s}const r=n.run.bind(n);return r.effect=n,r}function CO(t){t.effect.stop()}let jr=!0;const T1=[];function Ls(){T1.push(jr),jr=!1}function Ms(){const t=T1.pop();jr=t===void 0?!0:t}function ev(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=It;It=void 0;try{e()}finally{It=n}}}let il=0;class kO{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Gu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!It||!jr||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new kO(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,R1(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(e){this.version++,il++,this.notify(e)}notify(e){Lm();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Mm()}}}function R1(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)R1(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const eu=new WeakMap,Bi=Symbol(""),Jh=Symbol(""),ol=Symbol("");function An(t,e,n){if(jr&&It){let r=eu.get(t);r||eu.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Gu),s.map=r,s.key=n),s.track()}}function Rs(t,e,n,r,s,i){const o=eu.get(t);if(!o){il++;return}const a=l=>{l&&l.trigger()};if(Lm(),e==="clear")o.forEach(a);else{const l=$e(t),c=l&&$m(n);if(l&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===ol||!Hr(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ol)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Bi)),Do(t)&&a(o.get(Jh)));break;case"delete":l||(a(o.get(Bi)),Do(t)&&a(o.get(Jh)));break;case"set":Do(t)&&a(o.get(Bi));break}}Mm()}function OO(t,e){const n=eu.get(t);return n&&n.get(e)}function co(t){const e=Xe(t);return e===t?e:(An(e,"iterate",ol),sr(t)?e:e.map(pn))}function Ju(t){return An(t=Xe(t),"iterate",ol),t}const DO={__proto__:null,[Symbol.iterator](){return Mf(this,Symbol.iterator,pn)},concat(...t){return co(this).concat(...t.map(e=>$e(e)?co(e):e))},entries(){return Mf(this,"entries",t=>(t[1]=pn(t[1]),t))},every(t,e){return ws(this,"every",t,e,void 0,arguments)},filter(t,e){return ws(this,"filter",t,e,n=>n.map(pn),arguments)},find(t,e){return ws(this,"find",t,e,pn,arguments)},findIndex(t,e){return ws(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ws(this,"findLast",t,e,pn,arguments)},findLastIndex(t,e){return ws(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ws(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ff(this,"includes",t)},indexOf(...t){return Ff(this,"indexOf",t)},join(t){return co(this).join(t)},lastIndexOf(...t){return Ff(this,"lastIndexOf",t)},map(t,e){return ws(this,"map",t,e,void 0,arguments)},pop(){return wa(this,"pop")},push(...t){return wa(this,"push",t)},reduce(t,...e){return tv(this,"reduce",t,e)},reduceRight(t,...e){return tv(this,"reduceRight",t,e)},shift(){return wa(this,"shift")},some(t,e){return ws(this,"some",t,e,void 0,arguments)},splice(...t){return wa(this,"splice",t)},toReversed(){return co(this).toReversed()},toSorted(t){return co(this).toSorted(t)},toSpliced(...t){return co(this).toSpliced(...t)},unshift(...t){return wa(this,"unshift",t)},values(){return Mf(this,"values",pn)}};function Mf(t,e,n){const r=Ju(t),s=r[e]();return r!==t&&!sr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const PO=Array.prototype;function ws(t,e,n,r,s,i){const o=Ju(t),a=o!==t&&!sr(t),l=o[e];if(l!==PO[e]){const d=l.apply(t,i);return a?pn(d):d}let c=n;o!==t&&(a?c=function(d,f){return n.call(this,pn(d),f,t)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function tv(t,e,n,r){const s=Ju(t);let i=n;return s!==t&&(sr(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,pn(a),l,t)}),s[e](i,...r)}function Ff(t,e,n){const r=Xe(t);An(r,"iterate",ol);const s=r[e](...n);return(s===-1||s===!1)&&Qu(n[0])?(n[0]=Xe(n[0]),r[e](...n)):s}function wa(t,e,n=[]){Ls(),Lm();const r=Xe(t)[e].apply(t,n);return Mm(),Ms(),r}const $O=Vu("__proto__,__v_isRef,__isVue"),I1=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hr));function NO(t){Hr(t)||(t=String(t));const e=Xe(this);return An(e,"has",t),e.hasOwnProperty(t)}class C1{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?N1:$1:i?P1:D1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=$e(e);if(!s){let l;if(o&&(l=DO[n]))return l;if(n==="hasOwnProperty")return NO}const a=Reflect.get(e,n,Pt(e)?e:r);return(Hr(n)?I1.has(n):$O(n))||(s||An(e,"get",n),i)?a:Pt(a)?o&&$m(n)?a:a.value:At(a)?s?hs(a):Tr(a):a}}class k1 extends C1{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Fs(i);if(!sr(r)&&!Fs(r)&&(i=Xe(i),r=Xe(r)),!$e(e)&&Pt(i)&&!Pt(r))return l?!1:(i.value=r,!0)}const o=$e(e)&&$m(n)?Number(n)<e.length:ct(e,n),a=Reflect.set(e,n,r,Pt(e)?e:s);return e===Xe(s)&&(o?$n(r,i)&&Rs(e,"set",n,r):Rs(e,"add",n,r)),a}deleteProperty(e,n){const r=ct(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Rs(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Hr(n)||!I1.has(n))&&An(e,"has",n),r}ownKeys(e){return An(e,"iterate",$e(e)?"length":Bi),Reflect.ownKeys(e)}}class O1 extends C1{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const LO=new k1,MO=new O1,FO=new k1(!0),jO=new O1(!0),Xh=t=>t,Xl=t=>Reflect.getPrototypeOf(t);function UO(t,e,n){return function(...r){const s=this.__v_raw,i=Xe(s),o=Do(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Xh:e?tu:pn;return!e&&An(i,"iterate",l?Jh:Bi),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Yl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function BO(t,e){const n={get(s){const i=this.__v_raw,o=Xe(i),a=Xe(s);t||($n(s,a)&&An(o,"get",s),An(o,"get",a));const{has:l}=Xl(o),c=e?Xh:t?tu:pn;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&An(Xe(s),"iterate",Bi),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Xe(i),a=Xe(s);return t||($n(s,a)&&An(o,"has",s),An(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Xe(a),c=e?Xh:t?tu:pn;return!t&&An(l,"iterate",Bi),a.forEach((u,d)=>s.call(i,c(u),c(d),o))}};return Rt(n,t?{add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear")}:{add(s){!e&&!sr(s)&&!Fs(s)&&(s=Xe(s));const i=Xe(this);return Xl(i).has.call(i,s)||(i.add(s),Rs(i,"add",s,s)),this},set(s,i){!e&&!sr(i)&&!Fs(i)&&(i=Xe(i));const o=Xe(this),{has:a,get:l}=Xl(o);let c=a.call(o,s);c||(s=Xe(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?$n(i,u)&&Rs(o,"set",s,i):Rs(o,"add",s,i),this},delete(s){const i=Xe(this),{has:o,get:a}=Xl(i);let l=o.call(i,s);l||(s=Xe(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Rs(i,"delete",s,void 0),c},clear(){const s=Xe(this),i=s.size!==0,o=s.clear();return i&&Rs(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=UO(s,t,e)}),n}function Xu(t,e){const n=BO(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ct(n,s)&&s in r?n:r,s,i)}const HO={get:Xu(!1,!1)},VO={get:Xu(!1,!0)},qO={get:Xu(!0,!1)},zO={get:Xu(!0,!0)},D1=new WeakMap,P1=new WeakMap,$1=new WeakMap,N1=new WeakMap;function WO(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KO(t){return t.__v_skip||!Object.isExtensible(t)?0:WO(mO(t))}function Tr(t){return Fs(t)?t:Yu(t,!1,LO,HO,D1)}function jm(t){return Yu(t,!1,FO,VO,P1)}function hs(t){return Yu(t,!0,MO,qO,$1)}function Li(t){return Yu(t,!0,jO,zO,N1)}function Yu(t,e,n,r,s){if(!At(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=KO(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function ss(t){return Fs(t)?ss(t.__v_raw):!!(t&&t.__v_isReactive)}function Fs(t){return!!(t&&t.__v_isReadonly)}function sr(t){return!!(t&&t.__v_isShallow)}function Qu(t){return t?!!t.__v_raw:!1}function Xe(t){const e=t&&t.__v_raw;return e?Xe(e):t}function ot(t){return!ct(t,"__v_skip")&&Object.isExtensible(t)&&Kh(t,"__v_skip",!0),t}const pn=t=>At(t)?Tr(t):t,tu=t=>At(t)?hs(t):t;function Pt(t){return t?t.__v_isRef===!0:!1}function ve(t){return L1(t,!1)}function lr(t){return L1(t,!0)}function L1(t,e){return Pt(t)?t:new GO(t,e)}class GO{constructor(e,n){this.dep=new Gu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Xe(e),this._value=n?e:pn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||sr(e)||Fs(e);e=r?e:Xe(e),$n(e,n)&&(this._rawValue=e,this._value=r?e:pn(e),this.dep.trigger())}}function Dc(t){t.dep&&t.dep.trigger()}function I(t){return Pt(t)?t.value:t}function un(t){return Ve(t)?t():I(t)}const JO={get:(t,e,n)=>e==="__v_raw"?t:I(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Pt(s)&&!Pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Um(t){return ss(t)?t:new Proxy(t,JO)}class XO{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Gu,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Tl(t){return new XO(t)}function Zn(t){const e=$e(t)?new Array(t.length):{};for(const n in t)e[n]=M1(t,n);return e}class YO{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return OO(Xe(this._object),this._key)}}class QO{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function nu(t,e,n){return Pt(t)?t:Ve(t)?new QO(t):At(t)&&arguments.length>1?M1(t,e,n):ve(t)}function M1(t,e,n){const r=t[e];return Pt(r)?r:new YO(t,e,n)}class ZO{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Gu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=il-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return x1(this,!0),!0}get value(){const e=this.dep.track();return S1(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function eD(t,e,n=!1){let r,s;return Ve(t)?r=t:(r=t.get,s=t.set),new ZO(r,s,n)}const tD={GET:"get",HAS:"has",ITERATE:"iterate"},nD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Ql={},ru=new WeakMap;let Zs;function rD(){return Zs}function F1(t,e=!1,n=Zs){if(n){let r=ru.get(n);r||ru.set(n,r=[]),r.push(t)}}function sD(t,e,n=rt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=p=>s?p:sr(p)||s===!1||s===0?Is(p,1):Is(p);let u,d,f,h,m=!1,y=!1;if(Pt(t)?(d=()=>t.value,m=sr(t)):ss(t)?(d=()=>c(t),m=!0):$e(t)?(y=!0,m=t.some(p=>ss(p)||sr(p)),d=()=>t.map(p=>{if(Pt(p))return p.value;if(ss(p))return c(p);if(Ve(p))return l?l(p,2):p()})):Ve(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Ls();try{f()}finally{Ms()}}const p=Zs;Zs=u;try{return l?l(t,3,[h]):t(h)}finally{Zs=p}}:d=Er,e&&s){const p=d,b=s===!0?1/0:s;d=()=>Is(p(),b)}const A=ia(),E=()=>{u.stop(),A&&A.active&&Dm(A.effects,u)};if(i&&e){const p=e;e=(...b)=>{p(...b),E()}}let _=y?new Array(t.length).fill(Ql):Ql;const g=p=>{if(!(!(u.flags&1)||!u.dirty&&!p))if(e){const b=u.run();if(s||m||(y?b.some((x,R)=>$n(x,_[R])):$n(b,_))){f&&f();const x=Zs;Zs=u;try{const R=[b,_===Ql?void 0:y&&_[0]===Ql?[]:_,h];_=b,l?l(e,3,R):e(...R)}finally{Zs=x}}}else u.run()};return a&&a(g),u=new sl(d),u.scheduler=o?()=>o(g,!1):g,h=p=>F1(p,!1,u),f=u.onStop=()=>{const p=ru.get(u);if(p){if(l)l(p,4);else for(const b of p)b();ru.delete(u)}},e?r?g(!0):_=u.run():o?o(g.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function Is(t,e=1/0,n){if(e<=0||!At(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Pt(t))Is(t.value,e,n);else if($e(t))for(let r=0;r<t.length;r++)Is(t[r],e,n);else if(Yi(t)||Do(t))t.forEach(r=>{Is(r,e,n)});else if(qu(t)){for(const r in t)Is(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Is(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const j1=[];function iD(t){j1.push(t)}function oD(){j1.pop()}function aD(t,e){}const lD={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},cD={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function oa(t,e,n,r){try{return r?t(...r):t()}catch(s){Qi(s,e,n)}}function Rr(t,e,n,r){if(Ve(t)){const s=oa(t,e,n,r);return s&&Pm(s)&&s.catch(i=>{Qi(i,e,n)}),s}if($e(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Rr(t[i],e,n,r));return s}}function Qi(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||rt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){Ls(),oa(i,null,10,[t,l,c]),Ms();return}}uD(t,n,s,r,o)}function uD(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Nn=[];let Zr=-1;const Lo=[];let ei=null,bo=0;const U1=Promise.resolve();let su=null;function kt(t){const e=su||U1;return t?e.then(this?t.bind(this):t):e}function dD(t){let e=Zr+1,n=Nn.length;for(;e<n;){const r=e+n>>>1,s=Nn[r],i=ll(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Bm(t){if(!(t.flags&1)){const e=ll(t),n=Nn[Nn.length-1];!n||!(t.flags&2)&&e>=ll(n)?Nn.push(t):Nn.splice(dD(e),0,t),t.flags|=1,B1()}}function B1(){su||(su=U1.then(H1))}function al(t){$e(t)?Lo.push(...t):ei&&t.id===-1?ei.splice(bo+1,0,t):t.flags&1||(Lo.push(t),t.flags|=1),B1()}function nv(t,e,n=Zr+1){for(;n<Nn.length;n++){const r=Nn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Nn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function iu(t){if(Lo.length){const e=[...new Set(Lo)].sort((n,r)=>ll(n)-ll(r));if(Lo.length=0,ei){ei.push(...e);return}for(ei=e,bo=0;bo<ei.length;bo++){const n=ei[bo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ei=null,bo=0}}const ll=t=>t.id==null?t.flags&2?-1:1/0:t.id;function H1(t){try{for(Zr=0;Zr<Nn.length;Zr++){const e=Nn[Zr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),oa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Zr<Nn.length;Zr++){const e=Nn[Zr];e&&(e.flags&=-2)}Zr=-1,Nn.length=0,iu(),su=null,(Nn.length||Lo.length)&&H1()}}let vo,Zl=[];function V1(t,e){var n,r;vo=t,vo?(vo.enabled=!0,Zl.forEach(({event:s,args:i})=>vo.emit(s,...i)),Zl=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{V1(i,e)}),setTimeout(()=>{vo||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Zl=[])},3e3)):Zl=[]}let sn=null,Zu=null;function cl(t){const e=sn;return sn=t,Zu=t&&t.type.__scopeId||null,e}function fD(t){Zu=t}function hD(){Zu=null}const pD=t=>te;function te(t,e=sn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&sp(-1);const i=cl(e);let o;try{o=t(...s)}finally{cl(i),r._d&&sp(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Rl(t,e){if(sn===null)return t;const n=Ol(sn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=rt]=e[s];i&&(Ve(i)&&(i={mounted:i,updated:i}),i.deep&&Is(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function es(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ls(),Rr(l,n,8,[t.el,a,t,e]),Ms())}}const q1=Symbol("_vte"),z1=t=>t.__isTeleport,za=t=>t&&(t.disabled||t.disabled===""),rv=t=>t&&(t.defer||t.defer===""),sv=t=>typeof SVGElement<"u"&&t instanceof SVGElement,iv=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Yh=(t,e)=>{const n=t&&t.to;return Ot(n)?e?e(n):null:n},W1={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:y,createComment:A}}=c,E=za(e.props);let{shapeFlag:_,children:g,dynamicChildren:p}=e;if(t==null){const b=e.el=y(""),x=e.anchor=y("");h(b,n,r),h(x,n,r);const R=(S,C)=>{_&16&&(s&&s.isCE&&(s.ce._teleportTarget=S),u(g,S,C,s,i,o,a,l))},T=()=>{const S=e.target=Yh(e.props,m),C=K1(S,e,y,h);S&&(o!=="svg"&&sv(S)?o="svg":o!=="mathml"&&iv(S)&&(o="mathml"),E||(R(S,C),Pc(e,!1)))};E&&(R(n,x),Pc(e,!0)),rv(e.props)?(e.el.__isMounted=!1,nn(()=>{T(),delete e.el.__isMounted},i)):T()}else{if(rv(e.props)&&t.el.__isMounted===!1){nn(()=>{W1.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const b=e.anchor=t.anchor,x=e.target=t.target,R=e.targetAnchor=t.targetAnchor,T=za(t.props),S=T?n:x,C=T?b:R;if(o==="svg"||sv(x)?o="svg":(o==="mathml"||iv(x))&&(o="mathml"),p?(f(t.dynamicChildren,p,S,s,i,o,a),ng(t,e,!0)):l||d(t,e,S,C,s,i,o,a,!1),E)T?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):ec(e,n,b,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const M=e.target=Yh(e.props,m);M&&ec(e,M,null,c,0)}else T&&ec(e,x,R,c,1);Pc(e,E)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),o&16){const h=i||!za(f);for(let m=0;m<a.length;m++){const y=a[m];r(y,e,n,h,!!y.dynamicChildren)}}},move:ec,hydrate:mD};function ec(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||za(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,n,2);d&&r(a,e,n)}function mD(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const f=e.target=Yh(e.props,l);if(f){const h=za(e.props),m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let y=m;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}y=o(y)}e.targetAnchor||K1(f,e,u,c),d(m&&o(m),e,f,n,r,s,i)}Pc(e,h)}return e.anchor&&o(e.anchor)}const ed=W1;function Pc(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function K1(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[q1]=i,t&&(r(s,t),r(i,t)),i}const ti=Symbol("_leaveCb"),tc=Symbol("_enterCb");function Hm(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qt(()=>{t.isMounted=!0}),Cl(()=>{t.isUnmounting=!0}),t}const fr=[Function,Array],Vm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fr,onEnter:fr,onAfterEnter:fr,onEnterCancelled:fr,onBeforeLeave:fr,onLeave:fr,onAfterLeave:fr,onLeaveCancelled:fr,onBeforeAppear:fr,onAppear:fr,onAfterAppear:fr,onAppearCancelled:fr},G1=t=>{const e=t.subTree;return e.component?G1(e.component):e},gD={name:"BaseTransition",props:Vm,setup(t,{slots:e}){const n=zt(),r=Hm();return()=>{const s=e.default&&td(e.default(),!0);if(!s||!s.length)return;const i=J1(s),o=Xe(t),{mode:a}=o;if(r.isLeaving)return jf(i);const l=ov(i);if(!l)return jf(i);let c=zo(l,o,r,n,d=>c=d);l.type!==Bt&&js(l,c);let u=n.subTree&&ov(n.subTree);if(u&&u.type!==Bt&&!Lr(l,u)&&G1(n).type!==Bt){let d=zo(u,o,r,n);if(js(u,d),a==="out-in"&&l.type!==Bt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},jf(i);a==="in-out"&&l.type!==Bt?d.delayLeave=(f,h,m)=>{const y=Y1(r,u);y[String(u.key)]=u,f[ti]=()=>{h(),f[ti]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function J1(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Bt){e=n;break}}return e}const X1=gD;function Y1(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function zo(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:A,onAppear:E,onAfterAppear:_,onAppearCancelled:g}=e,p=String(t.key),b=Y1(n,t),x=(S,C)=>{S&&Rr(S,r,9,C)},R=(S,C)=>{const M=C[1];x(S,C),$e(S)?S.every(P=>P.length<=1)&&M():S.length<=1&&M()},T={mode:o,persisted:a,beforeEnter(S){let C=l;if(!n.isMounted)if(i)C=A||l;else return;S[ti]&&S[ti](!0);const M=b[p];M&&Lr(t,M)&&M.el[ti]&&M.el[ti](),x(C,[S])},enter(S){let C=c,M=u,P=d;if(!n.isMounted)if(i)C=E||c,M=_||u,P=g||d;else return;let j=!1;const L=S[tc]=Y=>{j||(j=!0,Y?x(P,[S]):x(M,[S]),T.delayedLeave&&T.delayedLeave(),S[tc]=void 0)};C?R(C,[S,L]):L()},leave(S,C){const M=String(t.key);if(S[tc]&&S[tc](!0),n.isUnmounting)return C();x(f,[S]);let P=!1;const j=S[ti]=L=>{P||(P=!0,C(),L?x(y,[S]):x(m,[S]),S[ti]=void 0,b[M]===t&&delete b[M])};b[M]=t,h?R(h,[S,j]):j()},clone(S){const C=zo(S,e,n,r,s);return s&&s(C),C}};return T}function jf(t){if(Il(t))return t=Vr(t),t.children=null,t}function ov(t){if(!Il(t))return z1(t.type)&&t.children?J1(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ve(n.default))return n.default()}}function js(t,e){t.shapeFlag&6&&t.component?(t.transition=e,js(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function td(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&s++,r=r.concat(td(o.children,e,a))):(e||o.type!==Bt)&&r.push(a!=null?Vr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function me(t,e){return Ve(t)?Rt({name:t.name},e,{setup:t}):t}function $c(){const t=zt();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function qm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zi(t){const e=zt(),n=lr(null);if(e){const s=e.refs===rt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}function Mo(t,e,n,r,s=!1){if($e(t)){t.forEach((m,y)=>Mo(m,e&&($e(e)?e[y]:e),n,r,s));return}if(mi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Mo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ol(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===rt?a.refs={}:a.refs,d=a.setupState,f=Xe(d),h=d===rt?()=>!1:m=>ct(f,m);if(c!=null&&c!==l&&(Ot(c)?(u[c]=null,h(c)&&(d[c]=null)):Pt(c)&&(c.value=null)),Ve(l))oa(l,a,12,[o,u]);else{const m=Ot(l),y=Pt(l);if(m||y){const A=()=>{if(t.f){const E=m?h(l)?d[l]:u[l]:l.value;s?$e(E)&&Dm(E,i):$e(E)?E.includes(i)||E.push(i):m?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=o,h(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};o?(A.id=-1,nn(A,n)):A()}}}let av=!1;const uo=()=>{av||(console.error("Hydration completed but contains mismatches."),av=!0)},yD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",bD=t=>t.namespaceURI.includes("MathML"),nc=t=>{if(t.nodeType===1){if(yD(t))return"svg";if(bD(t))return"mathml"}},Ao=t=>t.nodeType===8;function vD(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:c}}=t,u=(g,p)=>{if(!p.hasChildNodes()){n(null,g,p),iu(),p._vnode=g;return}d(p.firstChild,g,null,null,null),iu(),p._vnode=g},d=(g,p,b,x,R,T=!1)=>{T=T||!!p.dynamicChildren;const S=Ao(g)&&g.data==="[",C=()=>y(g,p,b,x,R,S),{type:M,ref:P,shapeFlag:j,patchFlag:L}=p;let Y=g.nodeType;p.el=g,L===-2&&(T=!1,p.dynamicChildren=null);let O=null;switch(M){case is:Y!==3?p.children===""?(l(p.el=s(""),o(g),g),O=g):O=C():(g.data!==p.children&&(uo(),g.data=p.children),O=i(g));break;case Bt:_(g)?(O=i(g),E(p.el=g.content.firstChild,g,b)):Y!==8||S?O=C():O=i(g);break;case gi:if(S&&(g=i(g),Y=g.nodeType),Y===1||Y===3){O=g;const q=!p.children.length;for(let B=0;B<p.staticCount;B++)q&&(p.children+=O.nodeType===1?O.outerHTML:O.data),B===p.staticCount-1&&(p.anchor=O),O=i(O);return S?i(O):O}else C();break;case Ze:S?O=m(g,p,b,x,R,T):O=C();break;default:if(j&1)(Y!==1||p.type.toLowerCase()!==g.tagName.toLowerCase())&&!_(g)?O=C():O=f(g,p,b,x,R,T);else if(j&6){p.slotScopeIds=R;const q=o(g);if(S?O=A(g):Ao(g)&&g.data==="teleport start"?O=A(g,g.data,"teleport end"):O=i(g),e(p,q,null,b,x,nc(q),T),mi(p)&&!p.type.__asyncResolved){let B;S?(B=oe(Ze),B.anchor=O?O.previousSibling:q.lastChild):B=g.nodeType===3?nt(""):oe("div"),B.el=g,p.component.subTree=B}}else j&64?Y!==8?O=C():O=p.type.hydrate(g,p,b,x,R,T,t,h):j&128&&(O=p.type.hydrate(g,p,b,x,nc(o(g)),R,T,t,d))}return P!=null&&Mo(P,null,x,p),O},f=(g,p,b,x,R,T)=>{T=T||!!p.dynamicChildren;const{type:S,props:C,patchFlag:M,shapeFlag:P,dirs:j,transition:L}=p,Y=S==="input"||S==="option";if(Y||M!==-1){j&&es(p,null,b,"created");let O=!1;if(_(g)){O=xx(null,L)&&b&&b.vnode.props&&b.vnode.props.appear;const B=g.content.firstChild;if(O){const re=B.getAttribute("class");re&&(B.$cls=re),L.beforeEnter(B)}E(B,g,b),p.el=g=B}if(P&16&&!(C&&(C.innerHTML||C.textContent))){let B=h(g.firstChild,p,g,b,x,R,T);for(;B;){rc(g,1)||uo();const re=B;B=B.nextSibling,a(re)}}else if(P&8){let B=p.children;B[0]===`
`&&(g.tagName==="PRE"||g.tagName==="TEXTAREA")&&(B=B.slice(1)),g.textContent!==B&&(rc(g,0)||uo(),g.textContent=p.children)}if(C){if(Y||!T||M&48){const B=g.tagName.includes("-");for(const re in C)(Y&&(re.endsWith("value")||re==="indeterminate")||El(re)&&!Po(re)||re[0]==="."||B)&&r(g,re,null,C[re],void 0,b)}else if(C.onClick)r(g,"onClick",null,C.onClick,void 0,b);else if(M&4&&ss(C.style))for(const B in C.style)C.style[B]}let q;(q=C&&C.onVnodeBeforeMount)&&Wn(q,b,p),j&&es(p,null,b,"beforeMount"),((q=C&&C.onVnodeMounted)||j||O)&&Ox(()=>{q&&Wn(q,b,p),O&&L.enter(g),j&&es(p,null,b,"mounted")},x)}return g.nextSibling},h=(g,p,b,x,R,T,S)=>{S=S||!!p.dynamicChildren;const C=p.children,M=C.length;for(let P=0;P<M;P++){const j=S?C[P]:C[P]=Kn(C[P]),L=j.type===is;g?(L&&!S&&P+1<M&&Kn(C[P+1]).type===is&&(l(s(g.data.slice(j.children.length)),b,i(g)),g.data=j.children),g=d(g,j,x,R,T,S)):L&&!j.children?l(j.el=s(""),b):(rc(b,1)||uo(),n(null,j,b,null,x,R,nc(b),T))}return g},m=(g,p,b,x,R,T)=>{const{slotScopeIds:S}=p;S&&(R=R?R.concat(S):S);const C=o(g),M=h(i(g),p,C,b,x,R,T);return M&&Ao(M)&&M.data==="]"?i(p.anchor=M):(uo(),l(p.anchor=c("]"),C,M),M)},y=(g,p,b,x,R,T)=>{if(rc(g.parentElement,1)||uo(),p.el=null,T){const M=A(g);for(;;){const P=i(g);if(P&&P!==M)a(P);else break}}const S=i(g),C=o(g);return a(g),n(null,p,C,S,b,x,nc(C),R),b&&(b.vnode.el=p.el,od(b,p.el)),S},A=(g,p="[",b="]")=>{let x=0;for(;g;)if(g=i(g),g&&Ao(g)&&(g.data===p&&x++,g.data===b)){if(x===0)return i(g);x--}return g},E=(g,p,b)=>{const x=p.parentNode;x&&x.replaceChild(g,p);let R=b;for(;R;)R.vnode.el===p&&(R.vnode.el=R.subTree.el=g),R=R.parent},_=g=>g.nodeType===1&&g.tagName==="TEMPLATE";return[u,d]}const lv="data-allow-mismatch",wD={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function rc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(lv);)t=t.parentElement;const n=t&&t.getAttribute(lv);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(wD[e])}}const _D=Wu().requestIdleCallback||(t=>setTimeout(t,1)),xD=Wu().cancelIdleCallback||(t=>clearTimeout(t)),ED=(t=1e4)=>e=>{const n=_D(e,{timeout:t});return()=>xD(n)};function AD(t){const{top:e,left:n,bottom:r,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:o}=window;return(e>0&&e<i||r>0&&r<i)&&(n>0&&n<o||s>0&&s<o)}const SD=t=>(e,n)=>{const r=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){r.disconnect(),e();break}},t);return n(s=>{if(s instanceof Element){if(AD(s))return e(),r.disconnect(),!1;r.observe(s)}}),()=>r.disconnect()},TD=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},RD=(t=[])=>(e,n)=>{Ot(t)&&(t=[t]);let r=!1;const s=o=>{r||(r=!0,i(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},i=()=>{n(o=>{for(const a of t)o.removeEventListener(a,s)})};return n(o=>{for(const a of t)o.addEventListener(a,s,{once:!0})}),i};function ID(t,e){if(Ao(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Ao(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const mi=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function CD(t){Ve(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let m;return c||(m=c=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((A,E)=>{l(y,()=>A(f()),()=>E(y),d+1)});throw y}).then(y=>m!==c&&c?c:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return me({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(m,y,A){const E=i?()=>{const g=i(()=>{A()},p=>ID(m,p));g&&(y.bum||(y.bum=[])).push(g),(y.u||(y.u=[])).push(()=>!0)}:A;u?E():h().then(()=>!y.isUnmounted&&E())},get __asyncResolved(){return u},setup(){const m=rn;if(qm(m),u)return()=>Uf(u,m);const y=g=>{c=null,Qi(g,m,13,!r)};if(a&&m.suspense||Wo)return h().then(g=>()=>Uf(g,m)).catch(g=>(y(g),()=>r?oe(r,{error:g}):null));const A=ve(!1),E=ve(),_=ve(!!s);return s&&setTimeout(()=>{_.value=!1},s),o!=null&&setTimeout(()=>{if(!A.value&&!E.value){const g=new Error(`Async component timed out after ${o}ms.`);y(g),E.value=g}},o),h().then(()=>{A.value=!0,m.parent&&Il(m.parent.vnode)&&m.parent.update()}).catch(g=>{y(g),E.value=g}),()=>{if(A.value&&u)return Uf(u,m);if(E.value&&r)return oe(r,{error:E.value});if(n&&!_.value)return oe(n)}}})}function Uf(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=oe(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const Il=t=>t.type.__isKeepAlive,kD={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=zt(),r=n.ctx;if(!r.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=r,f=d("div");r.activate=(_,g,p,b,x)=>{const R=_.component;c(_,g,p,0,a),l(R.vnode,_,g,p,R,a,b,_.slotScopeIds,x),nn(()=>{R.isDeactivated=!1,R.a&&No(R.a);const T=_.props&&_.props.onVnodeMounted;T&&Wn(T,R.parent,_)},a)},r.deactivate=_=>{const g=_.component;au(g.m),au(g.a),c(_,f,null,1,a),nn(()=>{g.da&&No(g.da);const p=_.props&&_.props.onVnodeUnmounted;p&&Wn(p,g.parent,_),g.isDeactivated=!0},a)};function h(_){Bf(_),u(_,n,a,!0)}function m(_){s.forEach((g,p)=>{const b=cp(g.type);b&&!_(b)&&y(p)})}function y(_){const g=s.get(_);g&&(!o||!Lr(g,o))?h(g):o&&Bf(o),s.delete(_),i.delete(_)}st(()=>[t.include,t.exclude],([_,g])=>{_&&m(p=>La(_,p)),g&&m(p=>!La(g,p))},{flush:"post",deep:!0});let A=null;const E=()=>{A!=null&&(lu(n.subTree.type)?nn(()=>{s.set(A,sc(n.subTree))},n.subTree.suspense):s.set(A,sc(n.subTree)))};return qt(E),rd(E),Cl(()=>{s.forEach(_=>{const{subTree:g,suspense:p}=n,b=sc(g);if(_.type===b.type&&_.key===b.key){Bf(b);const x=b.component.da;x&&nn(x,p);return}h(_)})}),()=>{if(A=null,!e.default)return o=null;const _=e.default(),g=_[0];if(_.length>1)return o=null,_;if(!Us(g)||!(g.shapeFlag&4)&&!(g.shapeFlag&128))return o=null,g;let p=sc(g);if(p.type===Bt)return o=null,p;const b=p.type,x=cp(mi(p)?p.type.__asyncResolved||{}:b),{include:R,exclude:T,max:S}=t;if(R&&(!x||!La(R,x))||T&&x&&La(T,x))return p.shapeFlag&=-257,o=p,g;const C=p.key==null?b:p.key,M=s.get(C);return p.el&&(p=Vr(p),g.shapeFlag&128&&(g.ssContent=p)),A=C,M?(p.el=M.el,p.component=M.component,p.transition&&js(p,p.transition),p.shapeFlag|=512,i.delete(C),i.add(C)):(i.add(C),S&&i.size>parseInt(S,10)&&y(i.values().next().value)),p.shapeFlag|=256,o=p,lu(g.type)?g:p}}},OD=kD;function La(t,e){return $e(t)?t.some(n=>La(n,e)):Ot(t)?t.split(",").includes(e):pO(t)?(t.lastIndex=0,t.test(e)):!1}function Q1(t,e){ex(t,"a",e)}function Z1(t,e){ex(t,"da",e)}function ex(t,e,n=rn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(nd(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Il(s.parent.vnode)&&DD(r,e,n,s),s=s.parent}}function DD(t,e,n,r){const s=nd(e,t,r,!0);Vn(()=>{Dm(r[e],s)},n)}function Bf(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function sc(t){return t.shapeFlag&128?t.ssContent:t}function nd(t,e,n=rn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ls();const a=Ki(n),l=Rr(e,n,t,o);return a(),Ms(),l});return r?s.unshift(i):s.push(i),i}}const qs=t=>(e,n=rn)=>{(!Wo||t==="sp")&&nd(t,(...r)=>e(...r),n)},tx=qs("bm"),qt=qs("m"),zm=qs("bu"),rd=qs("u"),Cl=qs("bum"),Vn=qs("um"),nx=qs("sp"),rx=qs("rtg"),sx=qs("rtc");function ix(t,e=rn){nd("ec",t,e)}const Wm="components",PD="directives";function Km(t,e){return Jm(Wm,t,!0,e)||t}const ox=Symbol.for("v-ndc");function ps(t){return Ot(t)?Jm(Wm,t,!1)||t:t||ox}function Gm(t){return Jm(PD,t)}function Jm(t,e,n=!0,r=!1){const s=sn||rn;if(s){const i=s.type;if(t===Wm){const a=cp(i,!1);if(a&&(a===e||a===on(e)||a===Al(on(e))))return i}const o=cv(s[t]||i[t],e)||cv(s.appContext[t],e);return!o&&r?i:o}}function cv(t,e){return t&&(t[e]||t[on(e)]||t[Al(on(e))])}function er(t,e,n,r){let s;const i=n&&n[r],o=$e(t);if(o||Ot(t)){const a=o&&ss(t);let l=!1,c=!1;a&&(l=!sr(t),c=Fs(t),t=Ju(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?tu(pn(t[u])):pn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i&&i[a])}else if(At(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}function $D(t,e){for(let n=0;n<e.length;n++){const r=e[n];if($e(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Se(t,e,n={},r,s){if(sn.ce||sn.parent&&mi(sn.parent)&&sn.parent.ce)return e!=="default"&&(n.name=e),V(),ce(Ze,null,[oe("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),V();const o=i&&Xm(i(n)),a=n.key||o&&o.key,l=ce(Ze,{key:(a&&!Hr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Xm(t){return t.some(e=>Us(e)?!(e.type===Bt||e.type===Ze&&!Xm(e.children)):!0)?t:null}function ND(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:$o(r)]=t[r];return n}const Qh=t=>t?Lx(t)?Ol(t):Qh(t.parent):null,Wa=Rt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qh(t.parent),$root:t=>Qh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Zm(t),$forceUpdate:t=>t.f||(t.f=()=>{Bm(t.update)}),$nextTick:t=>t.n||(t.n=kt.bind(t.proxy)),$watch:t=>oP.bind(t)}),Hf=(t,e)=>t!==rt&&!t.__isScriptSetup&&ct(t,e),Zh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Hf(r,e))return o[e]=1,r[e];if(s!==rt&&ct(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ct(c,e))return o[e]=3,i[e];if(n!==rt&&ct(n,e))return o[e]=4,n[e];ep&&(o[e]=0)}}const u=Wa[e];let d,f;if(u)return e==="$attrs"&&An(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==rt&&ct(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,ct(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Hf(s,e)?(s[e]=n,!0):r!==rt&&ct(r,e)?(r[e]=n,!0):ct(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==rt&&ct(t,o)||Hf(e,o)||(a=i[0])&&ct(a,o)||ct(r,o)||ct(Wa,o)||ct(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ct(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},LD=Rt({},Zh,{get(t,e){if(e!==Symbol.unscopables)return Zh.get(t,e,t)},has(t,e){return e[0]!=="_"&&!vO(e)}});function MD(){return null}function FD(){return null}function jD(t){}function UD(t){}function BD(){return null}function HD(){}function VD(t,e){return null}function sd(){return ax().slots}function Ym(){return ax().attrs}function ax(){const t=zt();return t.setupContext||(t.setupContext=jx(t))}function ul(t){return $e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Qm(t,e){const n=ul(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?$e(s)||Ve(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function qD(t,e){return!t||!e?t||e:$e(t)&&$e(e)?t.concat(e):Rt({},ul(t),ul(e))}function Ti(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function zD(t){const e=zt();let n=t();return op(),Pm(n)&&(n=n.catch(r=>{throw Ki(e),r})),[n,()=>Ki(e)]}let ep=!0;function WD(t){const e=Zm(t),n=t.proxy,r=t.ctx;ep=!1,e.beforeCreate&&uv(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:A,beforeDestroy:E,beforeUnmount:_,destroyed:g,unmounted:p,render:b,renderTracked:x,renderTriggered:R,errorCaptured:T,serverPrefetch:S,expose:C,inheritAttrs:M,components:P,directives:j,filters:L}=e;if(c&&KD(c,r,null),o)for(const q in o){const B=o[q];Ve(B)&&(r[q]=B.bind(n))}if(s){const q=s.call(n,n);At(q)&&(t.data=Tr(q))}if(ep=!0,i)for(const q in i){const B=i[q],re=Ve(B)?B.bind(n,n):Ve(B.get)?B.get.bind(n,n):Er,z=!Ve(B)&&Ve(B.set)?B.set.bind(n):Er,ae=ne({get:re,set:z});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>ae.value,set:fe=>ae.value=fe})}if(a)for(const q in a)lx(a[q],r,n,q);if(l){const q=Ve(l)?l.call(n):l;Reflect.ownKeys(q).forEach(B=>{ir(B,q[B])})}u&&uv(u,t,"c");function O(q,B){$e(B)?B.forEach(re=>q(re.bind(n))):B&&q(B.bind(n))}if(O(tx,d),O(qt,f),O(zm,h),O(rd,m),O(Q1,y),O(Z1,A),O(ix,T),O(sx,x),O(rx,R),O(Cl,_),O(Vn,p),O(nx,S),$e(C))if(C.length){const q=t.exposed||(t.exposed={});C.forEach(B=>{Object.defineProperty(q,B,{get:()=>n[B],set:re=>n[B]=re})})}else t.exposed||(t.exposed={});b&&t.render===Er&&(t.render=b),M!=null&&(t.inheritAttrs=M),P&&(t.components=P),j&&(t.directives=j),S&&qm(t)}function KD(t,e,n=Er){$e(t)&&(t=tp(t));for(const r in t){const s=t[r];let i;At(s)?"default"in s?i=Vt(s.from||r,s.default,!0):i=Vt(s.from||r):i=Vt(s),Pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function uv(t,e,n){Rr($e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function lx(t,e,n,r){let s=r.includes(".")?Rx(n,r):()=>n[r];if(Ot(t)){const i=e[t];Ve(i)&&st(s,i)}else if(Ve(t))st(s,t.bind(n));else if(At(t))if($e(t))t.forEach(i=>lx(i,e,n,r));else{const i=Ve(t.handler)?t.handler.bind(n):e[t.handler];Ve(i)&&st(s,i,t)}}function Zm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>ou(l,c,o,!0)),ou(l,e,o)),At(e)&&i.set(e,l),l}function ou(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ou(t,i,n,!0),s&&s.forEach(o=>ou(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=GD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const GD={data:dv,props:fv,emits:fv,methods:Ma,computed:Ma,beforeCreate:On,created:On,beforeMount:On,mounted:On,beforeUpdate:On,updated:On,beforeDestroy:On,beforeUnmount:On,destroyed:On,unmounted:On,activated:On,deactivated:On,errorCaptured:On,serverPrefetch:On,components:Ma,directives:Ma,watch:XD,provide:dv,inject:JD};function dv(t,e){return e?t?function(){return Rt(Ve(t)?t.call(this,this):t,Ve(e)?e.call(this,this):e)}:e:t}function JD(t,e){return Ma(tp(t),tp(e))}function tp(t){if($e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function On(t,e){return t?[...new Set([].concat(t,e))]:e}function Ma(t,e){return t?Rt(Object.create(null),t,e):e}function fv(t,e){return t?$e(t)&&$e(e)?[...new Set([...t,...e])]:Rt(Object.create(null),ul(t),ul(e??{})):e}function XD(t,e){if(!t)return e;if(!e)return t;const n=Rt(Object.create(null),t);for(const r in e)n[r]=On(t[r],e[r]);return n}function cx(){return{app:null,config:{isNativeTag:fO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let YD=0;function QD(t,e){return function(r,s=null){Ve(r)||(r=Rt({},r)),s!=null&&!At(s)&&(s=null);const i=cx(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:YD++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Bx,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Ve(u.install)?(o.add(u),u.install(c,...d)):Ve(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||oe(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,u):t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,Ol(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Rr(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Hi;Hi=c;try{return u()}finally{Hi=d}}};return c}}let Hi=null;function ir(t,e){if(rn){let n=rn.provides;const r=rn.parent&&rn.parent.provides;r===n&&(n=rn.provides=Object.create(r)),n[t]=e}}function Vt(t,e,n=!1){const r=rn||sn;if(r||Hi){let s=Hi?Hi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ve(e)?e.call(r&&r.proxy):e}}function ux(){return!!(rn||sn||Hi)}const dx={},fx=()=>Object.create(dx),hx=t=>Object.getPrototypeOf(t)===dx;function ZD(t,e,n,r=!1){const s={},i=fx();t.propsDefaults=Object.create(null),px(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:jm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function eP(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Xe(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(id(t.emitsOptions,f))continue;const h=e[f];if(l)if(ct(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const m=on(f);s[m]=np(l,a,m,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{px(t,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!ct(e,d)&&((u=Gn(d))===d||!ct(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=np(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!ct(e,d))&&(delete i[d],c=!0)}c&&Rs(t.attrs,"set","")}function px(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Po(l))continue;const c=e[l];let u;s&&ct(s,u=on(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:id(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Xe(n),c=a||rt;for(let u=0;u<i.length;u++){const d=i[u];n[d]=np(s,l,d,c[d],t,!ct(c,d))}}return o}function np(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ct(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ve(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Ki(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Gn(n))&&(r=!0))}return r}const tP=new WeakMap;function mx(t,e,n=!1){const r=n?tP:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ve(t)){const u=d=>{l=!0;const[f,h]=mx(d,e,!0);Rt(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return At(t)&&r.set(t,Oo),Oo;if($e(i))for(let u=0;u<i.length;u++){const d=on(i[u]);hv(d)&&(o[d]=rt)}else if(i)for(const u in i){const d=on(u);if(hv(d)){const f=i[u],h=o[d]=$e(f)||Ve(f)?{type:f}:Rt({},f),m=h.type;let y=!1,A=!0;if($e(m))for(let E=0;E<m.length;++E){const _=m[E],g=Ve(_)&&_.name;if(g==="Boolean"){y=!0;break}else g==="String"&&(A=!1)}else y=Ve(m)&&m.name==="Boolean";h[0]=y,h[1]=A,(y||ct(h,"default"))&&a.push(d)}}const c=[o,a];return At(t)&&r.set(t,c),c}function hv(t){return t[0]!=="$"&&!Po(t)}const eg=t=>t[0]==="_"||t==="$stable",tg=t=>$e(t)?t.map(Kn):[Kn(t)],nP=(t,e,n)=>{if(e._n)return e;const r=te((...s)=>tg(e(...s)),n);return r._c=!1,r},gx=(t,e,n)=>{const r=t._ctx;for(const s in t){if(eg(s))continue;const i=t[s];if(Ve(i))e[s]=nP(s,i,r);else if(i!=null){const o=tg(i);e[s]=()=>o}}},yx=(t,e)=>{const n=tg(e);t.slots.default=()=>n},bx=(t,e,n)=>{for(const r in e)(n||!eg(r))&&(t[r]=e[r])},rP=(t,e,n)=>{const r=t.slots=fx();if(t.vnode.shapeFlag&32){const s=e.__;s&&Kh(r,"__",s,!0);const i=e._;i?(bx(r,e,n),n&&Kh(r,"_",i,!0)):gx(e,r)}else e&&yx(t,e)},sP=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=rt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:bx(s,e,n):(i=!e.$stable,gx(e,s)),o=e}else e&&(yx(t,e),o={default:1});if(i)for(const a in s)!eg(a)&&o[a]==null&&delete s[a]},nn=Ox;function vx(t){return _x(t)}function wx(t){return _x(t,vD)}function _x(t,e){const n=Wu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Er,insertStaticContent:m}=t,y=(D,F,se,ge=null,de=null,N=null,H=void 0,Q=null,he=!!F.dynamicChildren)=>{if(D===F)return;D&&!Lr(D,F)&&(ge=$(D),fe(D,de,N,!0),D=null),F.patchFlag===-2&&(he=!1,F.dynamicChildren=null);const{type:ye,ref:_e,shapeFlag:G}=F;switch(ye){case is:A(D,F,se,ge);break;case Bt:E(D,F,se,ge);break;case gi:D==null&&_(F,se,ge,H);break;case Ze:P(D,F,se,ge,de,N,H,Q,he);break;default:G&1?b(D,F,se,ge,de,N,H,Q,he):G&6?j(D,F,se,ge,de,N,H,Q,he):(G&64||G&128)&&ye.process(D,F,se,ge,de,N,H,Q,he,ee)}_e!=null&&de?Mo(_e,D&&D.ref,N,F||D,!F):_e==null&&D&&D.ref!=null&&Mo(D.ref,null,N,D,!0)},A=(D,F,se,ge)=>{if(D==null)r(F.el=a(F.children),se,ge);else{const de=F.el=D.el;F.children!==D.children&&c(de,F.children)}},E=(D,F,se,ge)=>{D==null?r(F.el=l(F.children||""),se,ge):F.el=D.el},_=(D,F,se,ge)=>{[D.el,D.anchor]=m(D.children,F,se,ge,D.el,D.anchor)},g=({el:D,anchor:F},se,ge)=>{let de;for(;D&&D!==F;)de=f(D),r(D,se,ge),D=de;r(F,se,ge)},p=({el:D,anchor:F})=>{let se;for(;D&&D!==F;)se=f(D),s(D),D=se;s(F)},b=(D,F,se,ge,de,N,H,Q,he)=>{F.type==="svg"?H="svg":F.type==="math"&&(H="mathml"),D==null?x(F,se,ge,de,N,H,Q,he):S(D,F,de,N,H,Q,he)},x=(D,F,se,ge,de,N,H,Q)=>{let he,ye;const{props:_e,shapeFlag:G,transition:le,dirs:Ce}=D;if(he=D.el=o(D.type,N,_e&&_e.is,_e),G&8?u(he,D.children):G&16&&T(D.children,he,null,ge,de,Vf(D,N),H,Q),Ce&&es(D,null,ge,"created"),R(he,D,D.scopeId,H,ge),_e){for(const v in _e)v!=="value"&&!Po(v)&&i(he,v,null,_e[v],N,ge);"value"in _e&&i(he,"value",null,_e.value,N),(ye=_e.onVnodeBeforeMount)&&Wn(ye,ge,D)}Ce&&es(D,null,ge,"beforeMount");const k=xx(de,le);k&&le.beforeEnter(he),r(he,F,se),((ye=_e&&_e.onVnodeMounted)||k||Ce)&&nn(()=>{ye&&Wn(ye,ge,D),k&&le.enter(he),Ce&&es(D,null,ge,"mounted")},de)},R=(D,F,se,ge,de)=>{if(se&&h(D,se),ge)for(let N=0;N<ge.length;N++)h(D,ge[N]);if(de){let N=de.subTree;if(F===N||lu(N.type)&&(N.ssContent===F||N.ssFallback===F)){const H=de.vnode;R(D,H,H.scopeId,H.slotScopeIds,de.parent)}}},T=(D,F,se,ge,de,N,H,Q,he=0)=>{for(let ye=he;ye<D.length;ye++){const _e=D[ye]=Q?ni(D[ye]):Kn(D[ye]);y(null,_e,F,se,ge,de,N,H,Q)}},S=(D,F,se,ge,de,N,H)=>{const Q=F.el=D.el;let{patchFlag:he,dynamicChildren:ye,dirs:_e}=F;he|=D.patchFlag&16;const G=D.props||rt,le=F.props||rt;let Ce;if(se&&Di(se,!1),(Ce=le.onVnodeBeforeUpdate)&&Wn(Ce,se,F,D),_e&&es(F,D,se,"beforeUpdate"),se&&Di(se,!0),(G.innerHTML&&le.innerHTML==null||G.textContent&&le.textContent==null)&&u(Q,""),ye?C(D.dynamicChildren,ye,Q,se,ge,Vf(F,de),N):H||B(D,F,Q,null,se,ge,Vf(F,de),N,!1),he>0){if(he&16)M(Q,G,le,se,de);else if(he&2&&G.class!==le.class&&i(Q,"class",null,le.class,de),he&4&&i(Q,"style",G.style,le.style,de),he&8){const k=F.dynamicProps;for(let v=0;v<k.length;v++){const w=k[v],U=G[w],J=le[w];(J!==U||w==="value")&&i(Q,w,U,J,de,se)}}he&1&&D.children!==F.children&&u(Q,F.children)}else!H&&ye==null&&M(Q,G,le,se,de);((Ce=le.onVnodeUpdated)||_e)&&nn(()=>{Ce&&Wn(Ce,se,F,D),_e&&es(F,D,se,"updated")},ge)},C=(D,F,se,ge,de,N,H)=>{for(let Q=0;Q<F.length;Q++){const he=D[Q],ye=F[Q],_e=he.el&&(he.type===Ze||!Lr(he,ye)||he.shapeFlag&198)?d(he.el):se;y(he,ye,_e,null,ge,de,N,H,!0)}},M=(D,F,se,ge,de)=>{if(F!==se){if(F!==rt)for(const N in F)!Po(N)&&!(N in se)&&i(D,N,F[N],null,de,ge);for(const N in se){if(Po(N))continue;const H=se[N],Q=F[N];H!==Q&&N!=="value"&&i(D,N,Q,H,de,ge)}"value"in se&&i(D,"value",F.value,se.value,de)}},P=(D,F,se,ge,de,N,H,Q,he)=>{const ye=F.el=D?D.el:a(""),_e=F.anchor=D?D.anchor:a("");let{patchFlag:G,dynamicChildren:le,slotScopeIds:Ce}=F;Ce&&(Q=Q?Q.concat(Ce):Ce),D==null?(r(ye,se,ge),r(_e,se,ge),T(F.children||[],se,_e,de,N,H,Q,he)):G>0&&G&64&&le&&D.dynamicChildren?(C(D.dynamicChildren,le,se,de,N,H,Q),(F.key!=null||de&&F===de.subTree)&&ng(D,F,!0)):B(D,F,se,_e,de,N,H,Q,he)},j=(D,F,se,ge,de,N,H,Q,he)=>{F.slotScopeIds=Q,D==null?F.shapeFlag&512?de.ctx.activate(F,se,ge,H,he):L(F,se,ge,de,N,H,he):Y(D,F,he)},L=(D,F,se,ge,de,N,H)=>{const Q=D.component=Nx(D,ge,de);if(Il(D)&&(Q.ctx.renderer=ee),Mx(Q,!1,H),Q.asyncDep){if(de&&de.registerDep(Q,O,H),!D.el){const he=Q.subTree=oe(Bt);E(null,he,F,se)}}else O(Q,D,F,se,de,N,H)},Y=(D,F,se)=>{const ge=F.component=D.component;if(fP(D,F,se))if(ge.asyncDep&&!ge.asyncResolved){q(ge,F,se);return}else ge.next=F,ge.update();else F.el=D.el,ge.vnode=F},O=(D,F,se,ge,de,N,H)=>{const Q=()=>{if(D.isMounted){let{next:G,bu:le,u:Ce,parent:k,vnode:v}=D;{const be=Ex(D);if(be){G&&(G.el=v.el,q(D,G,H)),be.asyncDep.then(()=>{D.isUnmounted||Q()});return}}let w=G,U;Di(D,!1),G?(G.el=v.el,q(D,G,H)):G=v,le&&No(le),(U=G.props&&G.props.onVnodeBeforeUpdate)&&Wn(U,k,G,v),Di(D,!0);const J=Nc(D),ue=D.subTree;D.subTree=J,y(ue,J,d(ue.el),$(ue),D,de,N),G.el=J.el,w===null&&od(D,J.el),Ce&&nn(Ce,de),(U=G.props&&G.props.onVnodeUpdated)&&nn(()=>Wn(U,k,G,v),de)}else{let G;const{el:le,props:Ce}=F,{bm:k,m:v,parent:w,root:U,type:J}=D,ue=mi(F);if(Di(D,!1),k&&No(k),!ue&&(G=Ce&&Ce.onVnodeBeforeMount)&&Wn(G,w,F),Di(D,!0),le&&Ae){const be=()=>{D.subTree=Nc(D),Ae(le,D.subTree,D,de,null)};ue&&J.__asyncHydrate?J.__asyncHydrate(le,D,be):be()}else{U.ce&&U.ce._def.shadowRoot!==!1&&U.ce._injectChildStyle(J);const be=D.subTree=Nc(D);y(null,be,se,ge,D,de,N),F.el=be.el}if(v&&nn(v,de),!ue&&(G=Ce&&Ce.onVnodeMounted)){const be=F;nn(()=>Wn(G,w,be),de)}(F.shapeFlag&256||w&&mi(w.vnode)&&w.vnode.shapeFlag&256)&&D.a&&nn(D.a,de),D.isMounted=!0,F=se=ge=null}};D.scope.on();const he=D.effect=new sl(Q);D.scope.off();const ye=D.update=he.run.bind(he),_e=D.job=he.runIfDirty.bind(he);_e.i=D,_e.id=D.uid,he.scheduler=()=>Bm(_e),Di(D,!0),ye()},q=(D,F,se)=>{F.component=D;const ge=D.vnode.props;D.vnode=F,D.next=null,eP(D,F.props,ge,se),sP(D,F.children,se),Ls(),nv(D),Ms()},B=(D,F,se,ge,de,N,H,Q,he=!1)=>{const ye=D&&D.children,_e=D?D.shapeFlag:0,G=F.children,{patchFlag:le,shapeFlag:Ce}=F;if(le>0){if(le&128){z(ye,G,se,ge,de,N,H,Q,he);return}else if(le&256){re(ye,G,se,ge,de,N,H,Q,he);return}}Ce&8?(_e&16&&W(ye,de,N),G!==ye&&u(se,G)):_e&16?Ce&16?z(ye,G,se,ge,de,N,H,Q,he):W(ye,de,N,!0):(_e&8&&u(se,""),Ce&16&&T(G,se,ge,de,N,H,Q,he))},re=(D,F,se,ge,de,N,H,Q,he)=>{D=D||Oo,F=F||Oo;const ye=D.length,_e=F.length,G=Math.min(ye,_e);let le;for(le=0;le<G;le++){const Ce=F[le]=he?ni(F[le]):Kn(F[le]);y(D[le],Ce,se,null,de,N,H,Q,he)}ye>_e?W(D,de,N,!0,!1,G):T(F,se,ge,de,N,H,Q,he,G)},z=(D,F,se,ge,de,N,H,Q,he)=>{let ye=0;const _e=F.length;let G=D.length-1,le=_e-1;for(;ye<=G&&ye<=le;){const Ce=D[ye],k=F[ye]=he?ni(F[ye]):Kn(F[ye]);if(Lr(Ce,k))y(Ce,k,se,null,de,N,H,Q,he);else break;ye++}for(;ye<=G&&ye<=le;){const Ce=D[G],k=F[le]=he?ni(F[le]):Kn(F[le]);if(Lr(Ce,k))y(Ce,k,se,null,de,N,H,Q,he);else break;G--,le--}if(ye>G){if(ye<=le){const Ce=le+1,k=Ce<_e?F[Ce].el:ge;for(;ye<=le;)y(null,F[ye]=he?ni(F[ye]):Kn(F[ye]),se,k,de,N,H,Q,he),ye++}}else if(ye>le)for(;ye<=G;)fe(D[ye],de,N,!0),ye++;else{const Ce=ye,k=ye,v=new Map;for(ye=k;ye<=le;ye++){const Ke=F[ye]=he?ni(F[ye]):Kn(F[ye]);Ke.key!=null&&v.set(Ke.key,ye)}let w,U=0;const J=le-k+1;let ue=!1,be=0;const Ue=new Array(J);for(ye=0;ye<J;ye++)Ue[ye]=0;for(ye=Ce;ye<=G;ye++){const Ke=D[ye];if(U>=J){fe(Ke,de,N,!0);continue}let Ye;if(Ke.key!=null)Ye=v.get(Ke.key);else for(w=k;w<=le;w++)if(Ue[w-k]===0&&Lr(Ke,F[w])){Ye=w;break}Ye===void 0?fe(Ke,de,N,!0):(Ue[Ye-k]=ye+1,Ye>=be?be=Ye:ue=!0,y(Ke,F[Ye],se,null,de,N,H,Q,he),U++)}const at=ue?iP(Ue):Oo;for(w=at.length-1,ye=J-1;ye>=0;ye--){const Ke=k+ye,Ye=F[Ke],lt=Ke+1<_e?F[Ke+1].el:ge;Ue[ye]===0?y(null,Ye,se,lt,de,N,H,Q,he):ue&&(w<0||ye!==at[w]?ae(Ye,se,lt,2):w--)}}},ae=(D,F,se,ge,de=null)=>{const{el:N,type:H,transition:Q,children:he,shapeFlag:ye}=D;if(ye&6){ae(D.component.subTree,F,se,ge);return}if(ye&128){D.suspense.move(F,se,ge);return}if(ye&64){H.move(D,F,se,ee);return}if(H===Ze){r(N,F,se);for(let G=0;G<he.length;G++)ae(he[G],F,se,ge);r(D.anchor,F,se);return}if(H===gi){g(D,F,se);return}if(ge!==2&&ye&1&&Q)if(ge===0)Q.beforeEnter(N),r(N,F,se),nn(()=>Q.enter(N),de);else{const{leave:G,delayLeave:le,afterLeave:Ce}=Q,k=()=>{D.ctx.isUnmounted?s(N):r(N,F,se)},v=()=>{G(N,()=>{k(),Ce&&Ce()})};le?le(N,k,v):v()}else r(N,F,se)},fe=(D,F,se,ge=!1,de=!1)=>{const{type:N,props:H,ref:Q,children:he,dynamicChildren:ye,shapeFlag:_e,patchFlag:G,dirs:le,cacheIndex:Ce}=D;if(G===-2&&(de=!1),Q!=null&&(Ls(),Mo(Q,null,se,D,!0),Ms()),Ce!=null&&(F.renderCache[Ce]=void 0),_e&256){F.ctx.deactivate(D);return}const k=_e&1&&le,v=!mi(D);let w;if(v&&(w=H&&H.onVnodeBeforeUnmount)&&Wn(w,F,D),_e&6)K(D.component,se,ge);else{if(_e&128){D.suspense.unmount(se,ge);return}k&&es(D,null,F,"beforeUnmount"),_e&64?D.type.remove(D,F,se,ee,ge):ye&&!ye.hasOnce&&(N!==Ze||G>0&&G&64)?W(ye,F,se,!1,!0):(N===Ze&&G&384||!de&&_e&16)&&W(he,F,se),ge&&pe(D)}(v&&(w=H&&H.onVnodeUnmounted)||k)&&nn(()=>{w&&Wn(w,F,D),k&&es(D,null,F,"unmounted")},se)},pe=D=>{const{type:F,el:se,anchor:ge,transition:de}=D;if(F===Ze){xe(se,ge);return}if(F===gi){p(D);return}const N=()=>{s(se),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(D.shapeFlag&1&&de&&!de.persisted){const{leave:H,delayLeave:Q}=de,he=()=>H(se,N);Q?Q(D.el,N,he):he()}else N()},xe=(D,F)=>{let se;for(;D!==F;)se=f(D),s(D),D=se;s(F)},K=(D,F,se)=>{const{bum:ge,scope:de,job:N,subTree:H,um:Q,m:he,a:ye,parent:_e,slots:{__:G}}=D;au(he),au(ye),ge&&No(ge),_e&&$e(G)&&G.forEach(le=>{_e.renderCache[le]=void 0}),de.stop(),N&&(N.flags|=8,fe(H,D,F,se)),Q&&nn(Q,F),nn(()=>{D.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},W=(D,F,se,ge=!1,de=!1,N=0)=>{for(let H=N;H<D.length;H++)fe(D[H],F,se,ge,de)},$=D=>{if(D.shapeFlag&6)return $(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const F=f(D.anchor||D.el),se=F&&F[q1];return se?f(se):F};let X=!1;const ie=(D,F,se)=>{D==null?F._vnode&&fe(F._vnode,null,null,!0):y(F._vnode||null,D,F,null,null,null,se),F._vnode=D,X||(X=!0,nv(),iu(),X=!1)},ee={p:y,um:fe,m:ae,r:pe,mt:L,mc:T,pc:B,pbc:C,n:$,o:t};let we,Ae;return e&&([we,Ae]=e(ee)),{render:ie,hydrate:we,createApp:QD(ie,we)}}function Vf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Di({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function xx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ng(t,e,n=!1){const r=t.children,s=e.children;if($e(r)&&$e(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ni(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&ng(o,a)),a.type===is&&(a.el=o.el),a.type===Bt&&!a.el&&(a.el=o.el)}}function iP(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ex(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ex(e)}function au(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ax=Symbol.for("v-scx"),Sx=()=>Vt(Ax);function $t(t,e){return kl(t,null,e)}function rg(t,e){return kl(t,null,{flush:"post"})}function Tx(t,e){return kl(t,null,{flush:"sync"})}function st(t,e,n){return kl(t,e,n)}function kl(t,e,n=rt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Rt({},n),l=e&&r||!e&&i!=="post";let c;if(Wo){if(i==="sync"){const h=Sx();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Er,h.resume=Er,h.pause=Er,h}}const u=rn;a.call=(h,m,y)=>Rr(h,u,m,y);let d=!1;i==="post"?a.scheduler=h=>{nn(h,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():Bm(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=sD(t,e,a);return Wo&&(c?c.push(f):l&&f()),f}function oP(t,e,n){const r=this.proxy,s=Ot(t)?t.includes(".")?Rx(r,t):()=>r[t]:t.bind(r,r);let i;Ve(e)?i=e:(i=e.handler,n=e);const o=Ki(this),a=kl(s,i.bind(r),n);return o(),a}function Rx(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function aP(t,e,n=rt){const r=zt(),s=on(e),i=Gn(e),o=Ix(t,s),a=Tl((l,c)=>{let u,d=rt,f;return Tx(()=>{const h=t[s];$n(u,h)&&(u=h,c())}),{get(){return l(),n.get?n.get(u):u},set(h){const m=n.set?n.set(h):h;if(!$n(m,u)&&!(d!==rt&&$n(h,d)))return;const y=r.vnode.props;y&&(e in y||s in y||i in y)&&(`onUpdate:${e}`in y||`onUpdate:${s}`in y||`onUpdate:${i}`in y)||(u=h,c()),r.emit(`update:${e}`,m),$n(h,m)&&$n(h,d)&&!$n(m,f)&&c(),d=h,f=m}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||rt:a,done:!1}:{done:!0}}}},a}const Ix=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${on(e)}Modifiers`]||t[`${Gn(e)}Modifiers`];function lP(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||rt;let s=n;const i=e.startsWith("update:"),o=i&&Ix(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>Ot(u)?u.trim():u)),o.number&&(s=n.map(Qc)));let a,l=r[a=$o(e)]||r[a=$o(on(e))];!l&&i&&(l=r[a=$o(Gn(e))]),l&&Rr(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Rr(c,t,6,s)}}function Cx(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ve(t)){const l=c=>{const u=Cx(c,e,!0);u&&(a=!0,Rt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(At(t)&&r.set(t,null),null):($e(i)?i.forEach(l=>o[l]=null):Rt(o,i),At(t)&&r.set(t,o),o)}function id(t,e){return!t||!El(e)?!1:(e=e.slice(2).replace(/Once$/,""),ct(t,e[0].toLowerCase()+e.slice(1))||ct(t,Gn(e))||ct(t,e))}function Nc(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,A=cl(t);let E,_;try{if(n.shapeFlag&4){const p=s||r,b=p;E=Kn(c.call(b,p,u,d,h,f,m)),_=a}else{const p=e;E=Kn(p.length>1?p(d,{attrs:a,slots:o,emit:l}):p(d,null)),_=e.props?a:uP(a)}}catch(p){Ka.length=0,Qi(p,t,1),E=oe(Bt)}let g=E;if(_&&y!==!1){const p=Object.keys(_),{shapeFlag:b}=g;p.length&&b&7&&(i&&p.some(Om)&&(_=dP(_,i)),g=Vr(g,_,!1,!0))}return n.dirs&&(g=Vr(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&js(g,n.transition),E=g,cl(A),E}function cP(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Us(s)){if(s.type!==Bt||s.children==="v-if"){if(n)return;n=s}}else return}return n}const uP=t=>{let e;for(const n in t)(n==="class"||n==="style"||El(n))&&((e||(e={}))[n]=t[n]);return e},dP=(t,e)=>{const n={};for(const r in t)(!Om(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function fP(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?pv(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!id(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?pv(r,o,c):!0:!!o;return!1}function pv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!id(n,i))return!0}return!1}function od({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const lu=t=>t.__isSuspense;let rp=0;const hP={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,l,c){if(t==null)mP(e,n,r,s,i,o,a,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}gP(t,e,n,r,s,o,a,l,c)}},hydrate:yP,normalize:bP},pP=hP;function dl(t,e){const n=t.props&&t.props[e];Ve(n)&&n()}function mP(t,e,n,r,s,i,o,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=kx(t,s,r,e,d,n,i,o,a,l);c(null,f.pendingBranch=t.ssContent,d,null,r,f,i,o),f.deps>0?(dl(t,"onPending"),dl(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,i,o),Fo(f,t.ssFallback)):f.resolve(!1,!0)}function gP(t,e,n,r,s,i,o,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:m,pendingBranch:y,isInFallback:A,isHydrating:E}=d;if(y)d.pendingBranch=f,Lr(f,y)?(l(y,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():A&&(E||(l(m,h,n,r,s,null,i,o,a),Fo(d,h)))):(d.pendingId=rp++,E?(d.isHydrating=!1,d.activeBranch=y):c(y,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),A?(l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(l(m,h,n,r,s,null,i,o,a),Fo(d,h))):m&&Lr(f,m)?(l(m,f,n,r,s,d,i,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(m&&Lr(f,m))l(m,f,n,r,s,d,i,o,a),Fo(d,f);else if(dl(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=rp++,l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:_,pendingId:g}=d;_>0?setTimeout(()=>{d.pendingId===g&&d.fallback(h)},_):_===0&&d.fallback(h)}}function kx(t,e,n,r,s,i,o,a,l,c,u=!1){const{p:d,m:f,um:h,n:m,o:{parentNode:y,remove:A}}=c;let E;const _=vP(t);_&&e&&e.pendingBranch&&(E=e.pendingId,e.deps++);const g=t.props?Zc(t.props.timeout):void 0,p=i,b={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:rp++,timeout:typeof g=="number"?g:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(x=!1,R=!1){const{vnode:T,activeBranch:S,pendingBranch:C,pendingId:M,effects:P,parentComponent:j,container:L}=b;let Y=!1;b.isHydrating?b.isHydrating=!1:x||(Y=S&&C.transition&&C.transition.mode==="out-in",Y&&(S.transition.afterLeave=()=>{M===b.pendingId&&(f(C,L,i===p?m(S):i,0),al(P))}),S&&(y(S.el)===L&&(i=m(S)),h(S,j,b,!0)),Y||f(C,L,i,0)),Fo(b,C),b.pendingBranch=null,b.isInFallback=!1;let O=b.parent,q=!1;for(;O;){if(O.pendingBranch){O.effects.push(...P),q=!0;break}O=O.parent}!q&&!Y&&al(P),b.effects=[],_&&e&&e.pendingBranch&&E===e.pendingId&&(e.deps--,e.deps===0&&!R&&e.resolve()),dl(T,"onResolve")},fallback(x){if(!b.pendingBranch)return;const{vnode:R,activeBranch:T,parentComponent:S,container:C,namespace:M}=b;dl(R,"onFallback");const P=m(T),j=()=>{b.isInFallback&&(d(null,x,C,P,S,null,M,a,l),Fo(b,x))},L=x.transition&&x.transition.mode==="out-in";L&&(T.transition.afterLeave=j),b.isInFallback=!0,h(T,S,null,!0),L||j()},move(x,R,T){b.activeBranch&&f(b.activeBranch,x,R,T),b.container=x},next(){return b.activeBranch&&m(b.activeBranch)},registerDep(x,R,T){const S=!!b.pendingBranch;S&&b.deps++;const C=x.vnode.el;x.asyncDep.catch(M=>{Qi(M,x,0)}).then(M=>{if(x.isUnmounted||b.isUnmounted||b.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:P}=x;ap(x,M,!1),C&&(P.el=C);const j=!C&&x.subTree.el;R(x,P,y(C||x.subTree.el),C?null:m(x.subTree),b,o,T),j&&A(j),od(x,P.el),S&&--b.deps===0&&b.resolve()})},unmount(x,R){b.isUnmounted=!0,b.activeBranch&&h(b.activeBranch,n,x,R),b.pendingBranch&&h(b.pendingBranch,n,x,R)}};return b}function yP(t,e,n,r,s,i,o,a,l){const c=e.suspense=kx(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,i,o);return c.deps===0&&c.resolve(!1,!0),u}function bP(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=mv(r?n.default:n),t.ssFallback=r?mv(n.fallback):oe(Bt)}function mv(t){let e;if(Ve(t)){const n=Wi&&t._c;n&&(t._d=!1,V()),t=t(),n&&(t._d=!0,e=Tn,Dx())}return $e(t)&&(t=cP(t)),t=Kn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Ox(t,e){e&&e.pendingBranch?$e(t)?e.effects.push(...t):e.effects.push(t):al(t)}function Fo(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,od(r,s))}function vP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ze=Symbol.for("v-fgt"),is=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),gi=Symbol.for("v-stc"),Ka=[];let Tn=null;function V(t=!1){Ka.push(Tn=t?null:[])}function Dx(){Ka.pop(),Tn=Ka[Ka.length-1]||null}let Wi=1;function sp(t,e=!1){Wi+=t,t<0&&Tn&&e&&(Tn.hasOnce=!0)}function Px(t){return t.dynamicChildren=Wi>0?Tn||Oo:null,Dx(),Wi>0&&Tn&&Tn.push(t),t}function Te(t,e,n,r,s,i){return Px(Ee(t,e,n,r,s,i,!0))}function ce(t,e,n,r,s){return Px(oe(t,e,n,r,s,!0))}function Us(t){return t?t.__v_isVNode===!0:!1}function Lr(t,e){return t.type===e.type&&t.key===e.key}function wP(t){}const $x=({key:t})=>t??null,Lc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ot(t)||Pt(t)||Ve(t)?{i:sn,r:t,k:e,f:!!n}:t:null);function Ee(t,e=null,n=null,r=0,s=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$x(e),ref:e&&Lc(e),scopeId:Zu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:sn};return a?(sg(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ot(n)?8:16),Wi>0&&!o&&Tn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Tn.push(l),l}const oe=_P;function _P(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===ox)&&(t=Bt),Us(t)){const a=Vr(t,e,!0);return n&&sg(a,n),Wi>0&&!i&&Tn&&(a.shapeFlag&6?Tn[Tn.indexOf(t)]=a:Tn.push(a)),a.patchFlag=-2,a}if(CP(t)&&(t=t.__vccOpts),e){e=qn(e);let{class:a,style:l}=e;a&&!Ot(a)&&(e.class=Ge(a)),At(l)&&(Qu(l)&&!$e(l)&&(l=Rt({},l)),e.style=fs(l))}const o=Ot(t)?1:lu(t)?128:z1(t)?64:At(t)?4:Ve(t)?2:0;return Ee(t,e,n,r,s,o,i,!0)}function qn(t){return t?Qu(t)||hx(t)?Rt({},t):t:null}function Vr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?Be(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&$x(c),ref:e&&e.ref?n&&i?$e(i)?i.concat(Lc(e)):[i,Lc(e)]:Lc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Vr(t.ssContent),ssFallback:t.ssFallback&&Vr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&js(u,l.clone(u)),u}function nt(t=" ",e=0){return oe(is,null,t,e)}function xP(t,e){const n=oe(gi,null,t);return n.staticCount=e,n}function ze(t="",e=!1){return e?(V(),ce(Bt,null,t)):oe(Bt,null,t)}function Kn(t){return t==null||typeof t=="boolean"?oe(Bt):$e(t)?oe(Ze,null,t.slice()):Us(t)?ni(t):oe(is,null,String(t))}function ni(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Vr(t)}function sg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if($e(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),sg(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!hx(e)?e._ctx=sn:s===3&&sn&&(sn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ve(e)?(e={default:e,_ctx:sn},n=32):(e=String(e),r&64?(n=16,e=[nt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Be(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ge([e.class,r.class]));else if(s==="style")e.style=fs([e.style,r.style]);else if(El(s)){const i=e[s],o=r[s];o&&i!==o&&!($e(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Wn(t,e,n,r=null){Rr(t,e,7,[n,r])}const EP=cx();let AP=0;function Nx(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||EP,i={uid:AP++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Nm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mx(r,s),emitsOptions:Cx(r,s),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:r.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=lP.bind(null,i),t.ce&&t.ce(i),i}let rn=null;const zt=()=>rn||sn;let cu,ip;{const t=Wu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};cu=e("__VUE_INSTANCE_SETTERS__",n=>rn=n),ip=e("__VUE_SSR_SETTERS__",n=>Wo=n)}const Ki=t=>{const e=rn;return cu(t),t.scope.on(),()=>{t.scope.off(),cu(e)}},op=()=>{rn&&rn.scope.off(),cu(null)};function Lx(t){return t.vnode.shapeFlag&4}let Wo=!1;function Mx(t,e=!1,n=!1){e&&ip(e);const{props:r,children:s}=t.vnode,i=Lx(t);ZD(t,r,i,e),rP(t,s,n||e);const o=i?SP(t,e):void 0;return e&&ip(!1),o}function SP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Zh);const{setup:r}=n;if(r){Ls();const s=t.setupContext=r.length>1?jx(t):null,i=Ki(t),o=oa(r,t,0,[t.props,s]),a=Pm(o);if(Ms(),i(),(a||t.sp)&&!mi(t)&&qm(t),a){if(o.then(op,op),e)return o.then(l=>{ap(t,l,e)}).catch(l=>{Qi(l,t,0)});t.asyncDep=o}else ap(t,o,e)}else Fx(t,e)}function ap(t,e,n){Ve(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:At(e)&&(t.setupState=Um(e)),Fx(t,n)}let uu,lp;function TP(t){uu=t,lp=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,LD))}}const RP=()=>!uu;function Fx(t,e,n){const r=t.type;if(!t.render){if(!e&&uu&&!r.render){const s=r.template||Zm(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Rt(Rt({isCustomElement:i,delimiters:a},o),l);r.render=uu(s,c)}}t.render=r.render||Er,lp&&lp(t)}{const s=Ki(t);Ls();try{WD(t)}finally{Ms(),s()}}}const IP={get(t,e){return An(t,"get",""),t[e]}};function jx(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,IP),slots:t.slots,emit:t.emit,expose:e}}function Ol(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Um(ot(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Wa)return Wa[n](t)},has(e,n){return n in e||n in Wa}})):t.proxy}function cp(t,e=!0){return Ve(t)?t.displayName||t.name:t.name||e&&t.__name}function CP(t){return Ve(t)&&"__vccOpts"in t}const ne=(t,e)=>eD(t,e,Wo);function jn(t,e,n){const r=arguments.length;return r===2?At(e)&&!$e(e)?Us(e)?oe(t,null,[e]):oe(t,e):oe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Us(n)&&(n=[n]),oe(t,e,n))}function kP(){}function OP(t,e,n,r){const s=n[r];if(s&&Ux(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=r,n[r]=i}function Ux(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if($n(n[r],e[r]))return!1;return Wi>0&&Tn&&Tn.push(t),!0}const Bx="3.5.17",DP=Er,PP=cD,$P=vo,NP=V1,LP={createComponentInstance:Nx,setupComponent:Mx,renderComponentRoot:Nc,setCurrentRenderingInstance:cl,isVNode:Us,normalizeVNode:Kn,getComponentPublicInstance:Ol,ensureValidVNode:Xm,pushWarningContext:iD,popWarningContext:oD},MP=LP,FP=null,jP=null,UP=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let up;const gv=typeof window<"u"&&window.trustedTypes;if(gv)try{up=gv.createPolicy("vue",{createHTML:t=>t})}catch{}const Hx=up?t=>up.createHTML(t):t=>t,BP="http://www.w3.org/2000/svg",HP="http://www.w3.org/1998/Math/MathML",Ss=typeof document<"u"?document:null,yv=Ss&&Ss.createElement("template"),VP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Ss.createElementNS(BP,t):e==="mathml"?Ss.createElementNS(HP,t):n?Ss.createElement(t,{is:n}):Ss.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ss.createTextNode(t),createComment:t=>Ss.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ss.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{yv.innerHTML=Hx(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=yv.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ws="transition",_a="animation",Ko=Symbol("_vtc"),Vx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qx=Rt({},Vm,Vx),qP=t=>(t.displayName="Transition",t.props=qx,t),zP=qP((t,{slots:e})=>jn(X1,zx(t),e)),Pi=(t,e=[])=>{$e(t)?t.forEach(n=>n(...e)):t&&t(...e)},bv=t=>t?$e(t)?t.some(e=>e.length>1):t.length>1:!1;function zx(t){const e={};for(const P in t)P in Vx||(e[P]=t[P]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,m=WP(s),y=m&&m[0],A=m&&m[1],{onBeforeEnter:E,onEnter:_,onEnterCancelled:g,onLeave:p,onLeaveCancelled:b,onBeforeAppear:x=E,onAppear:R=_,onAppearCancelled:T=g}=e,S=(P,j,L,Y)=>{P._enterCancelled=Y,Xs(P,j?u:a),Xs(P,j?c:o),L&&L()},C=(P,j)=>{P._isLeaving=!1,Xs(P,d),Xs(P,h),Xs(P,f),j&&j()},M=P=>(j,L)=>{const Y=P?R:_,O=()=>S(j,P,L);Pi(Y,[j,O]),vv(()=>{Xs(j,P?l:i),Yr(j,P?u:a),bv(Y)||wv(j,r,y,O)})};return Rt(e,{onBeforeEnter(P){Pi(E,[P]),Yr(P,i),Yr(P,o)},onBeforeAppear(P){Pi(x,[P]),Yr(P,l),Yr(P,c)},onEnter:M(!1),onAppear:M(!0),onLeave(P,j){P._isLeaving=!0;const L=()=>C(P,j);Yr(P,d),P._enterCancelled?(Yr(P,f),dp()):(dp(),Yr(P,f)),vv(()=>{P._isLeaving&&(Xs(P,d),Yr(P,h),bv(p)||wv(P,r,A,L))}),Pi(p,[P,L])},onEnterCancelled(P){S(P,!1,void 0,!0),Pi(g,[P])},onAppearCancelled(P){S(P,!0,void 0,!0),Pi(T,[P])},onLeaveCancelled(P){C(P),Pi(b,[P])}})}function WP(t){if(t==null)return null;if(At(t))return[qf(t.enter),qf(t.leave)];{const e=qf(t);return[e,e]}}function qf(t){return Zc(t)}function Yr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ko]||(t[Ko]=new Set)).add(e)}function Xs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ko];n&&(n.delete(e),n.size||(t[Ko]=void 0))}function vv(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let KP=0;function wv(t,e,n,r){const s=t._endId=++KP,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Wx(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function Wx(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${Ws}Delay`),i=r(`${Ws}Duration`),o=_v(s,i),a=r(`${_a}Delay`),l=r(`${_a}Duration`),c=_v(a,l);let u=null,d=0,f=0;e===Ws?o>0&&(u=Ws,d=o,f=i.length):e===_a?c>0&&(u=_a,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?Ws:_a:null,f=u?u===Ws?i.length:l.length:0);const h=u===Ws&&/\b(transform|all)(,|$)/.test(r(`${Ws}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function _v(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>xv(n)+xv(t[r])))}function xv(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function dp(){return document.body.offsetHeight}function GP(t,e,n){const r=t[Ko];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const du=Symbol("_vod"),Kx=Symbol("_vsh"),Gx={beforeMount(t,{value:e},{transition:n}){t[du]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):xa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),xa(t,!0),r.enter(t)):r.leave(t,()=>{xa(t,!1)}):xa(t,e))},beforeUnmount(t,{value:e}){xa(t,e)}};function xa(t,e){t.style.display=e?t[du]:"none",t[Kx]=!e}function JP(){Gx.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Jx=Symbol("");function XP(t){const e=zt();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>fu(i,s))},r=()=>{const s=t(e.proxy);e.ce?fu(e.ce,s):fp(e.subTree,s),n(s)};zm(()=>{al(r)}),qt(()=>{st(r,Er,{flush:"post"});const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),Vn(()=>s.disconnect())})}function fp(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{fp(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)fu(t.el,e);else if(t.type===Ze)t.children.forEach(n=>fp(n,e));else if(t.type===gi){let{el:n,anchor:r}=t;for(;n&&(fu(n,e),n!==r);)n=n.nextSibling}}function fu(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty(`--${s}`,e[s]),r+=`--${s}: ${e[s]};`;n[Jx]=r}}const YP=/(^|;)\s*display\s*:/;function QP(t,e,n){const r=t.style,s=Ot(n);let i=!1;if(n&&!s){if(e)if(Ot(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Mc(r,a,"")}else for(const o in e)n[o]==null&&Mc(r,o,"");for(const o in n)o==="display"&&(i=!0),Mc(r,o,n[o])}else if(s){if(e!==n){const o=r[Jx];o&&(n+=";"+o),r.cssText=n,i=YP.test(n)}}else e&&t.removeAttribute("style");du in t&&(t[du]=i?r.display:"",t[Kx]&&(r.display="none"))}const Ev=/\s*!important$/;function Mc(t,e,n){if($e(n))n.forEach(r=>Mc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ZP(t,e);Ev.test(n)?t.setProperty(Gn(r),n.replace(Ev,""),"important"):t[r]=n}}const Av=["Webkit","Moz","ms"],zf={};function ZP(t,e){const n=zf[e];if(n)return n;let r=on(e);if(r!=="filter"&&r in t)return zf[e]=r;r=Al(r);for(let s=0;s<Av.length;s++){const i=Av[s]+r;if(i in t)return zf[e]=i}return e}const Sv="http://www.w3.org/1999/xlink";function Tv(t,e,n,r,s,i=SO(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Sv,e.slice(6,e.length)):t.setAttributeNS(Sv,e,n):n==null||i&&!b1(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Hr(n)?String(n):n)}function Rv(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hx(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=b1(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Cs(t,e,n,r){t.addEventListener(e,n,r)}function e$(t,e,n,r){t.removeEventListener(e,n,r)}const Iv=Symbol("_vei");function t$(t,e,n,r,s=null){const i=t[Iv]||(t[Iv]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=n$(e);if(r){const c=i[e]=i$(r,s);Cs(t,a,c,l)}else o&&(e$(t,a,o,l),i[e]=void 0)}}const Cv=/(?:Once|Passive|Capture)$/;function n$(t){let e;if(Cv.test(t)){e={};let r;for(;r=t.match(Cv);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gn(t.slice(2)),e]}let Wf=0;const r$=Promise.resolve(),s$=()=>Wf||(r$.then(()=>Wf=0),Wf=Date.now());function i$(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Rr(o$(r,n.value),e,5,[r])};return n.value=t,n.attached=s$(),n}function o$(t,e){if($e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const kv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,a$=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?GP(t,r,o):e==="style"?QP(t,n,r):El(e)?Om(e)||t$(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):l$(t,e,r,o))?(Rv(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Tv(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ot(r))?Rv(t,on(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Tv(t,e,r,o))};function l$(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&kv(e)&&Ve(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return kv(e)&&Ot(n)?!1:e in t}const Ov={};/*! #__NO_SIDE_EFFECTS__ */function Xx(t,e,n){const r=me(t,e);qu(r)&&Rt(r,e);class s extends ad{constructor(o){super(r,o,n)}}return s.def=r,s}/*! #__NO_SIDE_EFFECTS__ */const c$=(t,e)=>Xx(t,e,lE),u$=typeof HTMLElement<"u"?HTMLElement:class{};class ad extends u${constructor(e,n={},r=pu){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==pu?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof ad){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,kt(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=r;let a;if(i&&!$e(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Zc(this._props[l])),(a||(a=Object.create(null)))[on(l)]=!0)}this._numberProps=a,this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>{r.configureApp=this._def.configureApp,e(this._def=r,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ct(this,r)||Object.defineProperty(this,r,{get:()=>I(n[r])})}_resolveProps(e){const{props:n}=e,r=$e(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s]);for(const s of r.map(on))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Ov;const s=on(e);n&&this._numberProps&&this._numberProps[s]&&(r=Zc(r)),this._setProp(s,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,s=!1){if(n!==this._props[e]&&(n===Ov?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),s&&this._instance&&this._update(),r)){const i=this._ob;i&&i.disconnect(),n===!0?this.setAttribute(Gn(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Gn(e),n+""):n||this.removeAttribute(Gn(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),aE(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=oe(this._def,Rt(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const s=(i,o)=>{this.dispatchEvent(new CustomEvent(i,qu(o[0])?Rt({detail:o},o[0]):{detail:o}))};r.emit=(i,...o)=>{s(i,o),Gn(i)!==i&&s(Gn(i),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const s=e[r],i=s.getAttribute("name")||"default",o=this._slots[i],a=s.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function Yx(t){const e=zt(),n=e&&e.ce;return n||null}function d$(){const t=Yx();return t&&t.shadowRoot}function f$(t="$style"){{const e=zt();if(!e)return rt;const n=e.type.__cssModules;if(!n)return rt;const r=n[t];return r||rt}}const Qx=new WeakMap,Zx=new WeakMap,hu=Symbol("_moveCb"),Dv=Symbol("_enterCb"),h$=t=>(delete t.props.mode,t),p$=h$({name:"TransitionGroup",props:Rt({},qx,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=zt(),r=Hm();let s,i;return rd(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!v$(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(g$),s.forEach(y$);const a=s.filter(b$);dp(),a.forEach(l=>{const c=l.el,u=c.style;Yr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[hu]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[hu]=null,Xs(c,o))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Xe(t),a=zx(o);let l=o.tag||Ze;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),js(u,zo(u,a,r,n)),Qx.set(u,u.el.getBoundingClientRect()))}i=e.default?td(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&js(u,zo(u,a,r,n))}return oe(l,null,i)}}}),m$=p$;function g$(t){const e=t.el;e[hu]&&e[hu](),e[Dv]&&e[Dv]()}function y$(t){Zx.set(t,t.el.getBoundingClientRect())}function b$(t){const e=Qx.get(t),n=Zx.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function v$(t,e,n){const r=t.cloneNode(),s=t[Ko];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Wx(r);return i.removeChild(r),o}const vi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $e(e)?n=>No(e,n):e};function w$(t){t.target.composing=!0}function Pv(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ar=Symbol("_assign"),fl={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Ar]=vi(s);const i=r||s.props&&s.props.type==="number";Cs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Qc(a)),t[Ar](a)}),n&&Cs(t,"change",()=>{t.value=t.value.trim()}),e||(Cs(t,"compositionstart",w$),Cs(t,"compositionend",Pv),Cs(t,"change",Pv))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Ar]=vi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},ld={deep:!0,created(t,e,n){t[Ar]=vi(n),Cs(t,"change",()=>{const r=t._modelValue,s=Go(t),i=t.checked,o=t[Ar];if($e(r)){const a=Ku(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Yi(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(tE(t,i))})},mounted:$v,beforeUpdate(t,e,n){t[Ar]=vi(n),$v(t,e,n)}};function $v(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if($e(e))s=Ku(e,r.props.value)>-1;else if(Yi(e))s=e.has(r.props.value);else{if(e===n)return;s=bi(e,tE(t,!0))}t.checked!==s&&(t.checked=s)}const ig={created(t,{value:e},n){t.checked=bi(e,n.props.value),t[Ar]=vi(n),Cs(t,"change",()=>{t[Ar](Go(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Ar]=vi(r),e!==n&&(t.checked=bi(e,r.props.value))}},eE={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Yi(e);Cs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qc(Go(o)):Go(o));t[Ar](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,kt(()=>{t._assigning=!1})}),t[Ar]=vi(r)},mounted(t,{value:e}){Nv(t,e)},beforeUpdate(t,e,n){t[Ar]=vi(n)},updated(t,{value:e}){t._assigning||Nv(t,e)}};function Nv(t,e){const n=t.multiple,r=$e(e);if(!(n&&!r&&!Yi(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Go(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ku(e,a)>-1}else o.selected=e.has(a);else if(bi(Go(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Go(t){return"_value"in t?t._value:t.value}function tE(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const nE={created(t,e,n){ic(t,e,n,null,"created")},mounted(t,e,n){ic(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){ic(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){ic(t,e,n,r,"updated")}};function rE(t,e){switch(t){case"SELECT":return eE;case"TEXTAREA":return fl;default:switch(e){case"checkbox":return ld;case"radio":return ig;default:return fl}}}function ic(t,e,n,r,s){const o=rE(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}function _$(){fl.getSSRProps=({value:t})=>({value:t}),ig.getSSRProps=({value:t},e)=>{if(e.props&&bi(e.props.value,t))return{checked:!0}},ld.getSSRProps=({value:t},e)=>{if($e(t)){if(e.props&&Ku(t,e.props.value)>-1)return{checked:!0}}else if(Yi(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},nE.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=rE(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const x$=["ctrl","shift","alt","meta"],E$={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>x$.some(n=>t[`${n}Key`]&&!e.includes(n))},Ur=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=E$[e[o]];if(a&&a(s,e))return}return t(s,...i)})},A$={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},og=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Gn(s.key);if(e.some(o=>o===i||A$[o]===i))return t(s)})},sE=Rt({patchProp:a$},VP);let Ga,Lv=!1;function iE(){return Ga||(Ga=vx(sE))}function oE(){return Ga=Lv?Ga:wx(sE),Lv=!0,Ga}const aE=(...t)=>{iE().render(...t)},S$=(...t)=>{oE().hydrate(...t)},pu=(...t)=>{const e=iE().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=uE(r);if(!s)return;const i=e._component;!Ve(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,cE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},lE=(...t)=>{const e=oE().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=uE(r);if(s)return n(s,!0,cE(s))},e};function cE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function uE(t){return Ot(t)?document.querySelector(t):t}let Mv=!1;const T$=()=>{Mv||(Mv=!0,_$(),JP())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const R$=()=>{},I$=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:X1,BaseTransitionPropsValidators:Vm,Comment:Bt,DeprecationTypes:UP,EffectScope:Nm,ErrorCodes:lD,ErrorTypeStrings:PP,Fragment:Ze,KeepAlive:OD,ReactiveEffect:sl,Static:gi,Suspense:pP,Teleport:ed,Text:is,TrackOpTypes:tD,Transition:zP,TransitionGroup:m$,TriggerOpTypes:nD,VueElement:ad,assertNumber:aD,callWithAsyncErrorHandling:Rr,callWithErrorHandling:oa,camelize:on,capitalize:Al,cloneVNode:Vr,compatUtils:jP,compile:R$,computed:ne,createApp:pu,createBlock:ce,createCommentVNode:ze,createElementBlock:Te,createElementVNode:Ee,createHydrationRenderer:wx,createPropsRestProxy:Ti,createRenderer:vx,createSSRApp:lE,createSlots:$D,createStaticVNode:xP,createTextVNode:nt,createVNode:oe,customRef:Tl,defineAsyncComponent:CD,defineComponent:me,defineCustomElement:Xx,defineEmits:FD,defineExpose:jD,defineModel:HD,defineOptions:UD,defineProps:MD,defineSSRCustomElement:c$,defineSlots:BD,devtools:$P,effect:IO,effectScope:sa,getCurrentInstance:zt,getCurrentScope:ia,getCurrentWatcher:rD,getTransitionRawChildren:td,guardReactiveProps:qn,h:jn,handleError:Qi,hasInjectionContext:ux,hydrate:S$,hydrateOnIdle:ED,hydrateOnInteraction:RD,hydrateOnMediaQuery:TD,hydrateOnVisible:SD,initCustomFormatter:kP,initDirectivesForSSR:T$,inject:Vt,isMemoSame:Ux,isProxy:Qu,isReactive:ss,isReadonly:Fs,isRef:Pt,isRuntimeOnly:RP,isShallow:sr,isVNode:Us,markRaw:ot,mergeDefaults:Qm,mergeModels:qD,mergeProps:Be,nextTick:kt,normalizeClass:Ge,normalizeProps:Rn,normalizeStyle:fs,onActivated:Q1,onBeforeMount:tx,onBeforeUnmount:Cl,onBeforeUpdate:zm,onDeactivated:Z1,onErrorCaptured:ix,onMounted:qt,onRenderTracked:sx,onRenderTriggered:rx,onScopeDispose:Sl,onServerPrefetch:nx,onUnmounted:Vn,onUpdated:rd,onWatcherCleanup:F1,openBlock:V,popScopeId:hD,provide:ir,proxyRefs:Um,pushScopeId:fD,queuePostFlushCb:al,reactive:Tr,readonly:hs,ref:ve,registerRuntimeCompiler:TP,render:aE,renderList:er,renderSlot:Se,resolveComponent:Km,resolveDirective:Gm,resolveDynamicComponent:ps,resolveFilter:FP,resolveTransitionHooks:zo,setBlockTracking:sp,setDevtoolsHook:NP,setTransitionHooks:js,shallowReactive:jm,shallowReadonly:Li,shallowRef:lr,ssrContextKey:Ax,ssrUtils:MP,stop:CO,toDisplayString:Ne,toHandlerKey:$o,toHandlers:ND,toRaw:Xe,toRef:nu,toRefs:Zn,toValue:un,transformVNodeArgs:wP,triggerRef:Dc,unref:I,useAttrs:Ym,useCssModule:f$,useCssVars:XP,useHost:Yx,useId:$c,useModel:aP,useSSRContext:Sx,useShadowRoot:d$,useSlots:sd,useTemplateRef:Zi,useTransitionState:Hm,vModelCheckbox:ld,vModelDynamic:nE,vModelRadio:ig,vModelSelect:eE,vModelText:fl,vShow:Gx,version:Bx,warn:DP,watch:st,watchEffect:$t,watchPostEffect:rg,watchSyncEffect:Tx,withAsyncContext:zD,withCtx:te,withDefaults:VD,withDirectives:Rl,withKeys:og,withMemo:OP,withModifiers:Ur,withScopeId:pD},Symbol.toStringTag,{value:"Module"})),Mr={name:"Diogenes Reader",version:"?",sourceHash:`d05f0f11cf33f8bf8d332c9c4addcd1df43f4829
`,basePath:"/diogenes-reader/",locales:{en:"English"}};/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let dE;const Dl=t=>dE=t,fE=Symbol();function hp(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ja;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ja||(Ja={}));function C$(){const t=sa(!0),e=t.run(()=>ve({}));let n=[],r=[];const s=ot({install(i){Dl(s),s._a=i,i.provide(fE,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const hE=()=>{};function Fv(t,e,n,r=hE){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&ia()&&Sl(s),s}function fo(t,...e){t.slice().forEach(n=>{n(...e)})}const k$=t=>t(),jv=Symbol(),Kf=Symbol();function pp(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];hp(s)&&hp(r)&&t.hasOwnProperty(n)&&!Pt(r)&&!ss(r)?t[n]=pp(s,r):t[n]=r}return t}const O$=Symbol();function D$(t){return!hp(t)||!t.hasOwnProperty(O$)}const{assign:Ys}=Object;function P$(t){return!!(Pt(t)&&t.effect)}function $$(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Zn(n.state.value[t]);return Ys(u,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=ot(ne(()=>{Dl(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=pE(t,c,e,n,r,!0),l}function pE(t,e,n={},r,s,i){let o;const a=Ys({actions:{}},n),l={deep:!0};let c,u,d=[],f=[],h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),ve({});let y;function A(T){let S;c=u=!1,typeof T=="function"?(T(r.state.value[t]),S={type:Ja.patchFunction,storeId:t,events:h}):(pp(r.state.value[t],T),S={type:Ja.patchObject,payload:T,storeId:t,events:h});const C=y=Symbol();kt().then(()=>{y===C&&(c=!0)}),u=!0,fo(d,S,r.state.value[t])}const E=i?function(){const{state:S}=n,C=S?S():{};this.$patch(M=>{Ys(M,C)})}:hE;function _(){o.stop(),d=[],f=[],r._s.delete(t)}const g=(T,S="")=>{if(jv in T)return T[Kf]=S,T;const C=function(){Dl(r);const M=Array.from(arguments),P=[],j=[];function L(q){P.push(q)}function Y(q){j.push(q)}fo(f,{args:M,name:C[Kf],store:b,after:L,onError:Y});let O;try{O=T.apply(this&&this.$id===t?this:b,M)}catch(q){throw fo(j,q),q}return O instanceof Promise?O.then(q=>(fo(P,q),q)).catch(q=>(fo(j,q),Promise.reject(q))):(fo(P,O),O)};return C[jv]=!0,C[Kf]=S,C},p={_p:r,$id:t,$onAction:Fv.bind(null,f),$patch:A,$reset:E,$subscribe(T,S={}){const C=Fv(d,T,S.detached,()=>M()),M=o.run(()=>st(()=>r.state.value[t],P=>{(S.flush==="sync"?u:c)&&T({storeId:t,type:Ja.direct,events:h},P)},Ys({},l,S)));return C},$dispose:_},b=Tr(p);r._s.set(t,b);const R=(r._a&&r._a.runWithContext||k$)(()=>r._e.run(()=>(o=sa()).run(()=>e({action:g}))));for(const T in R){const S=R[T];if(Pt(S)&&!P$(S)||ss(S))i||(m&&D$(S)&&(Pt(S)?S.value=m[T]:pp(S,m[T])),r.state.value[t][T]=S);else if(typeof S=="function"){const C=g(S,T);R[T]=C,a.actions[T]=S}}return Ys(b,R),Ys(Xe(b),R),Object.defineProperty(b,"$state",{get:()=>r.state.value[t],set:T=>{A(S=>{Ys(S,T)})}}),r._p.forEach(T=>{Ys(b,o.run(()=>T({store:b,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(b.$state,m),c=!0,u=!0,b}/*! #__NO_SIDE_EFFECTS__ */function N$(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=ux();return a=a||(c?Vt(fE,null):null),a&&Dl(a),a=dE,a._s.has(r)||(i?pE(r,e,s,a):$$(r,s,a)),a._s.get(r)}return o.$id=r,o}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:mE,setPrototypeOf:Uv,isFrozen:L$,getPrototypeOf:M$,getOwnPropertyDescriptor:F$}=Object;let{freeze:Bn,seal:Ir,create:gE}=Object,{apply:mp,construct:gp}=typeof Reflect<"u"&&Reflect;Bn||(Bn=function(e){return e});Ir||(Ir=function(e){return e});mp||(mp=function(e,n,r){return e.apply(n,r)});gp||(gp=function(e,n){return new e(...n)});const oc=Hn(Array.prototype.forEach),j$=Hn(Array.prototype.lastIndexOf),Bv=Hn(Array.prototype.pop),Ea=Hn(Array.prototype.push),U$=Hn(Array.prototype.splice),Fc=Hn(String.prototype.toLowerCase),Gf=Hn(String.prototype.toString),Hv=Hn(String.prototype.match),Aa=Hn(String.prototype.replace),B$=Hn(String.prototype.indexOf),H$=Hn(String.prototype.trim),Dr=Hn(Object.prototype.hasOwnProperty),kn=Hn(RegExp.prototype.test),Sa=V$(TypeError);function Hn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return mp(t,e,r)}}function V$(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gp(t,n)}}function Qe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fc;Uv&&Uv(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(L$(e)||(e[r]=i),s=i)}t[s]=!0}return t}function q$(t){for(let e=0;e<t.length;e++)Dr(t,e)||(t[e]=null);return t}function As(t){const e=gE(null);for(const[n,r]of mE(t))Dr(t,n)&&(Array.isArray(r)?e[n]=q$(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=As(r):e[n]=r);return e}function Ta(t,e){for(;t!==null;){const r=F$(t,e);if(r){if(r.get)return Hn(r.get);if(typeof r.value=="function")return Hn(r.value)}t=M$(t)}function n(){return null}return n}const Vv=Bn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jf=Bn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xf=Bn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z$=Bn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yf=Bn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),W$=Bn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qv=Bn(["#text"]),zv=Bn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qf=Bn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wv=Bn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ac=Bn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K$=Ir(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G$=Ir(/<%[\w\W]*|[\w\W]*%>/gm),J$=Ir(/\$\{[\w\W]*/gm),X$=Ir(/^data-[\-\w.\u00B7-\uFFFF]+$/),Y$=Ir(/^aria-[\-\w]+$/),yE=Ir(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q$=Ir(/^(?:\w+script|data):/i),Z$=Ir(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bE=Ir(/^html$/i),eN=Ir(/^[a-z][.\w]*(-[.\w]+)+$/i);var Kv=Object.freeze({__proto__:null,ARIA_ATTR:Y$,ATTR_WHITESPACE:Z$,CUSTOM_ELEMENT:eN,DATA_ATTR:X$,DOCTYPE_NAME:bE,ERB_EXPR:G$,IS_ALLOWED_URI:yE,IS_SCRIPT_OR_DATA:Q$,MUSTACHE_EXPR:K$,TMPLIT_EXPR:J$});const Ra={element:1,text:3,progressingInstruction:7,comment:8,document:9},tN=function(){return typeof window>"u"?null:window},nN=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Gv=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function vE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tN();const e=je=>vE(je);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Ra.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,m=l.prototype,y=Ta(m,"cloneNode"),A=Ta(m,"remove"),E=Ta(m,"nextSibling"),_=Ta(m,"childNodes"),g=Ta(m,"parentNode");if(typeof o=="function"){const je=n.createElement("template");je.content&&je.content.ownerDocument&&(n=je.content.ownerDocument)}let p,b="";const{implementation:x,createNodeIterator:R,createDocumentFragment:T,getElementsByTagName:S}=n,{importNode:C}=r;let M=Gv();e.isSupported=typeof mE=="function"&&typeof g=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:j,TMPLIT_EXPR:L,DATA_ATTR:Y,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:B,CUSTOM_ELEMENT:re}=Kv;let{IS_ALLOWED_URI:z}=Kv,ae=null;const fe=Qe({},[...Vv,...Jf,...Xf,...Yf,...qv]);let pe=null;const xe=Qe({},[...zv,...Qf,...Wv,...ac]);let K=Object.seal(gE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,$=null,X=!0,ie=!0,ee=!1,we=!0,Ae=!1,D=!0,F=!1,se=!1,ge=!1,de=!1,N=!1,H=!1,Q=!0,he=!1;const ye="user-content-";let _e=!0,G=!1,le={},Ce=null;const k=Qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let v=null;const w=Qe({},["audio","video","img","source","image","track"]);let U=null;const J=Qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",be="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml";let at=Ue,Ke=!1,Ye=null;const lt=Qe({},[ue,be,Ue],Gf);let Ul=Qe({},["mi","mo","mn","ms","mtext"]),Bl=Qe({},["annotation-xml"]);const ZS=Qe({},["title","style","font","a","script"]);let da=null;const eT=["application/xhtml+xml","text/html"],tT="text/html";let an=null,io=null;const nT=n.createElement("form"),oy=function(Z){return Z instanceof RegExp||Z instanceof Function},Id=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(io&&io===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=As(Z),da=eT.indexOf(Z.PARSER_MEDIA_TYPE)===-1?tT:Z.PARSER_MEDIA_TYPE,an=da==="application/xhtml+xml"?Gf:Fc,ae=Dr(Z,"ALLOWED_TAGS")?Qe({},Z.ALLOWED_TAGS,an):fe,pe=Dr(Z,"ALLOWED_ATTR")?Qe({},Z.ALLOWED_ATTR,an):xe,Ye=Dr(Z,"ALLOWED_NAMESPACES")?Qe({},Z.ALLOWED_NAMESPACES,Gf):lt,U=Dr(Z,"ADD_URI_SAFE_ATTR")?Qe(As(J),Z.ADD_URI_SAFE_ATTR,an):J,v=Dr(Z,"ADD_DATA_URI_TAGS")?Qe(As(w),Z.ADD_DATA_URI_TAGS,an):w,Ce=Dr(Z,"FORBID_CONTENTS")?Qe({},Z.FORBID_CONTENTS,an):k,W=Dr(Z,"FORBID_TAGS")?Qe({},Z.FORBID_TAGS,an):As({}),$=Dr(Z,"FORBID_ATTR")?Qe({},Z.FORBID_ATTR,an):As({}),le=Dr(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,X=Z.ALLOW_ARIA_ATTR!==!1,ie=Z.ALLOW_DATA_ATTR!==!1,ee=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,we=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ae=Z.SAFE_FOR_TEMPLATES||!1,D=Z.SAFE_FOR_XML!==!1,F=Z.WHOLE_DOCUMENT||!1,de=Z.RETURN_DOM||!1,N=Z.RETURN_DOM_FRAGMENT||!1,H=Z.RETURN_TRUSTED_TYPE||!1,ge=Z.FORCE_BODY||!1,Q=Z.SANITIZE_DOM!==!1,he=Z.SANITIZE_NAMED_PROPS||!1,_e=Z.KEEP_CONTENT!==!1,G=Z.IN_PLACE||!1,z=Z.ALLOWED_URI_REGEXP||yE,at=Z.NAMESPACE||Ue,Ul=Z.MATHML_TEXT_INTEGRATION_POINTS||Ul,Bl=Z.HTML_INTEGRATION_POINTS||Bl,K=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&oy(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&oy(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(ie=!1),N&&(de=!0),le&&(ae=Qe({},qv),pe=[],le.html===!0&&(Qe(ae,Vv),Qe(pe,zv)),le.svg===!0&&(Qe(ae,Jf),Qe(pe,Qf),Qe(pe,ac)),le.svgFilters===!0&&(Qe(ae,Xf),Qe(pe,Qf),Qe(pe,ac)),le.mathMl===!0&&(Qe(ae,Yf),Qe(pe,Wv),Qe(pe,ac))),Z.ADD_TAGS&&(ae===fe&&(ae=As(ae)),Qe(ae,Z.ADD_TAGS,an)),Z.ADD_ATTR&&(pe===xe&&(pe=As(pe)),Qe(pe,Z.ADD_ATTR,an)),Z.ADD_URI_SAFE_ATTR&&Qe(U,Z.ADD_URI_SAFE_ATTR,an),Z.FORBID_CONTENTS&&(Ce===k&&(Ce=As(Ce)),Qe(Ce,Z.FORBID_CONTENTS,an)),_e&&(ae["#text"]=!0),F&&Qe(ae,["html","head","body"]),ae.table&&(Qe(ae,["tbody"]),delete W.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw Sa('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Sa('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=Z.TRUSTED_TYPES_POLICY,b=p.createHTML("")}else p===void 0&&(p=nN(h,s)),p!==null&&typeof b=="string"&&(b=p.createHTML(""));Bn&&Bn(Z),io=Z}},ay=Qe({},[...Jf,...Xf,...z$]),ly=Qe({},[...Yf,...W$]),rT=function(Z){let Re=g(Z);(!Re||!Re.tagName)&&(Re={namespaceURI:at,tagName:"template"});const Me=Fc(Z.tagName),Nt=Fc(Re.tagName);return Ye[Z.namespaceURI]?Z.namespaceURI===be?Re.namespaceURI===Ue?Me==="svg":Re.namespaceURI===ue?Me==="svg"&&(Nt==="annotation-xml"||Ul[Nt]):!!ay[Me]:Z.namespaceURI===ue?Re.namespaceURI===Ue?Me==="math":Re.namespaceURI===be?Me==="math"&&Bl[Nt]:!!ly[Me]:Z.namespaceURI===Ue?Re.namespaceURI===be&&!Bl[Nt]||Re.namespaceURI===ue&&!Ul[Nt]?!1:!ly[Me]&&(ZS[Me]||!ay[Me]):!!(da==="application/xhtml+xml"&&Ye[Z.namespaceURI]):!1},Jr=function(Z){Ea(e.removed,{element:Z});try{g(Z).removeChild(Z)}catch{A(Z)}},oo=function(Z,Re){try{Ea(e.removed,{attribute:Re.getAttributeNode(Z),from:Re})}catch{Ea(e.removed,{attribute:null,from:Re})}if(Re.removeAttribute(Z),Z==="is")if(de||N)try{Jr(Re)}catch{}else try{Re.setAttribute(Z,"")}catch{}},cy=function(Z){let Re=null,Me=null;if(ge)Z="<remove></remove>"+Z;else{const Zt=Hv(Z,/^[\r\n\t ]+/);Me=Zt&&Zt[0]}da==="application/xhtml+xml"&&at===Ue&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const Nt=p?p.createHTML(Z):Z;if(at===Ue)try{Re=new f().parseFromString(Nt,da)}catch{}if(!Re||!Re.documentElement){Re=x.createDocument(at,"template",null);try{Re.documentElement.innerHTML=Ke?b:Nt}catch{}}const yn=Re.body||Re.documentElement;return Z&&Me&&yn.insertBefore(n.createTextNode(Me),yn.childNodes[0]||null),at===Ue?S.call(Re,F?"html":"body")[0]:F?Re.documentElement:yn},uy=function(Z){return R.call(Z.ownerDocument||Z,Z,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Cd=function(Z){return Z instanceof d&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof u)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},dy=function(Z){return typeof a=="function"&&Z instanceof a};function bs(je,Z,Re){oc(je,Me=>{Me.call(e,Z,Re,io)})}const fy=function(Z){let Re=null;if(bs(M.beforeSanitizeElements,Z,null),Cd(Z))return Jr(Z),!0;const Me=an(Z.nodeName);if(bs(M.uponSanitizeElement,Z,{tagName:Me,allowedTags:ae}),D&&Z.hasChildNodes()&&!dy(Z.firstElementChild)&&kn(/<[/\w!]/g,Z.innerHTML)&&kn(/<[/\w!]/g,Z.textContent)||Z.nodeType===Ra.progressingInstruction||D&&Z.nodeType===Ra.comment&&kn(/<[/\w]/g,Z.data))return Jr(Z),!0;if(!ae[Me]||W[Me]){if(!W[Me]&&py(Me)&&(K.tagNameCheck instanceof RegExp&&kn(K.tagNameCheck,Me)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Me)))return!1;if(_e&&!Ce[Me]){const Nt=g(Z)||Z.parentNode,yn=_(Z)||Z.childNodes;if(yn&&Nt){const Zt=yn.length;for(let zn=Zt-1;zn>=0;--zn){const vs=y(yn[zn],!0);vs.__removalCount=(Z.__removalCount||0)+1,Nt.insertBefore(vs,E(Z))}}}return Jr(Z),!0}return Z instanceof l&&!rT(Z)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&kn(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Jr(Z),!0):(Ae&&Z.nodeType===Ra.text&&(Re=Z.textContent,oc([P,j,L],Nt=>{Re=Aa(Re,Nt," ")}),Z.textContent!==Re&&(Ea(e.removed,{element:Z.cloneNode()}),Z.textContent=Re)),bs(M.afterSanitizeElements,Z,null),!1)},hy=function(Z,Re,Me){if(Q&&(Re==="id"||Re==="name")&&(Me in n||Me in nT))return!1;if(!(ie&&!$[Re]&&kn(Y,Re))){if(!(X&&kn(O,Re))){if(!pe[Re]||$[Re]){if(!(py(Z)&&(K.tagNameCheck instanceof RegExp&&kn(K.tagNameCheck,Z)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Z))&&(K.attributeNameCheck instanceof RegExp&&kn(K.attributeNameCheck,Re)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(Re))||Re==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&kn(K.tagNameCheck,Me)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Me))))return!1}else if(!U[Re]){if(!kn(z,Aa(Me,B,""))){if(!((Re==="src"||Re==="xlink:href"||Re==="href")&&Z!=="script"&&B$(Me,"data:")===0&&v[Z])){if(!(ee&&!kn(q,Aa(Me,B,"")))){if(Me)return!1}}}}}}return!0},py=function(Z){return Z!=="annotation-xml"&&Hv(Z,re)},my=function(Z){bs(M.beforeSanitizeAttributes,Z,null);const{attributes:Re}=Z;if(!Re||Cd(Z))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pe,forceKeepAttr:void 0};let Nt=Re.length;for(;Nt--;){const yn=Re[Nt],{name:Zt,namespaceURI:zn,value:vs}=yn,fa=an(Zt),kd=vs;let bn=Zt==="value"?kd:H$(kd);if(Me.attrName=fa,Me.attrValue=bn,Me.keepAttr=!0,Me.forceKeepAttr=void 0,bs(M.uponSanitizeAttribute,Z,Me),bn=Me.attrValue,he&&(fa==="id"||fa==="name")&&(oo(Zt,Z),bn=ye+bn),D&&kn(/((--!?|])>)|<\/(style|title)/i,bn)){oo(Zt,Z);continue}if(Me.forceKeepAttr)continue;if(!Me.keepAttr){oo(Zt,Z);continue}if(!we&&kn(/\/>/i,bn)){oo(Zt,Z);continue}Ae&&oc([P,j,L],yy=>{bn=Aa(bn,yy," ")});const gy=an(Z.nodeName);if(!hy(gy,fa,bn)){oo(Zt,Z);continue}if(p&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!zn)switch(h.getAttributeType(gy,fa)){case"TrustedHTML":{bn=p.createHTML(bn);break}case"TrustedScriptURL":{bn=p.createScriptURL(bn);break}}if(bn!==kd)try{zn?Z.setAttributeNS(zn,Zt,bn):Z.setAttribute(Zt,bn),Cd(Z)?Jr(Z):Bv(e.removed)}catch{oo(Zt,Z)}}bs(M.afterSanitizeAttributes,Z,null)},sT=function je(Z){let Re=null;const Me=uy(Z);for(bs(M.beforeSanitizeShadowDOM,Z,null);Re=Me.nextNode();)bs(M.uponSanitizeShadowNode,Re,null),fy(Re),my(Re),Re.content instanceof i&&je(Re.content);bs(M.afterSanitizeShadowDOM,Z,null)};return e.sanitize=function(je){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=null,Me=null,Nt=null,yn=null;if(Ke=!je,Ke&&(je="<!-->"),typeof je!="string"&&!dy(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw Sa("dirty is not a string, aborting")}else throw Sa("toString is not a function");if(!e.isSupported)return je;if(se||Id(Z),e.removed=[],typeof je=="string"&&(G=!1),G){if(je.nodeName){const vs=an(je.nodeName);if(!ae[vs]||W[vs])throw Sa("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof a)Re=cy("<!---->"),Me=Re.ownerDocument.importNode(je,!0),Me.nodeType===Ra.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?Re=Me:Re.appendChild(Me);else{if(!de&&!Ae&&!F&&je.indexOf("<")===-1)return p&&H?p.createHTML(je):je;if(Re=cy(je),!Re)return de?null:H?b:""}Re&&ge&&Jr(Re.firstChild);const Zt=uy(G?je:Re);for(;Nt=Zt.nextNode();)fy(Nt),my(Nt),Nt.content instanceof i&&sT(Nt.content);if(G)return je;if(de){if(N)for(yn=T.call(Re.ownerDocument);Re.firstChild;)yn.appendChild(Re.firstChild);else yn=Re;return(pe.shadowroot||pe.shadowrootmode)&&(yn=C.call(r,yn,!0)),yn}let zn=F?Re.outerHTML:Re.innerHTML;return F&&ae["!doctype"]&&Re.ownerDocument&&Re.ownerDocument.doctype&&Re.ownerDocument.doctype.name&&kn(bE,Re.ownerDocument.doctype.name)&&(zn="<!DOCTYPE "+Re.ownerDocument.doctype.name+`>
`+zn),Ae&&oc([P,j,L],vs=>{zn=Aa(zn,vs," ")}),p&&H?p.createHTML(zn):zn},e.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Id(je),se=!0},e.clearConfig=function(){io=null,se=!1},e.isValidAttribute=function(je,Z,Re){io||Id({});const Me=an(je),Nt=an(Z);return hy(Me,Nt,Re)},e.addHook=function(je,Z){typeof Z=="function"&&Ea(M[je],Z)},e.removeHook=function(je,Z){if(Z!==void 0){const Re=j$(M[je],Z);return Re===-1?void 0:U$(M[je],Re,1)[0]}return Bv(M[je])},e.removeHooks=function(je){M[je]=[]},e.removeAllHooks=function(){M=Gv()},e}var rN=vE();function ag(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var eo=ag();function wE(t){eo=t}var Xa={exec:()=>null};function mt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Ln.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}var Ln={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},sN=/^(?:[ \t]*(?:\n|$))+/,iN=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,oN=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Pl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,aN=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,lg=/(?:[*+-]|\d{1,9}[.)])/,_E=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,xE=mt(_E).replace(/bull/g,lg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),lN=mt(_E).replace(/bull/g,lg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),cg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,cN=/^[^\n]+/,ug=/(?!\s*\])(?:\\.|[^\[\]\\])+/,uN=mt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ug).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),dN=mt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lg).getRegex(),cd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dg=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fN=mt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dg).replace("tag",cd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),EE=mt(cg).replace("hr",Pl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",cd).getRegex(),hN=mt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",EE).getRegex(),fg={blockquote:hN,code:iN,def:uN,fences:oN,heading:aN,hr:Pl,html:fN,lheading:xE,list:dN,newline:sN,paragraph:EE,table:Xa,text:cN},Jv=mt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Pl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",cd).getRegex(),pN={...fg,lheading:lN,table:Jv,paragraph:mt(cg).replace("hr",Pl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Jv).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",cd).getRegex()},mN={...fg,html:mt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dg).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:mt(cg).replace("hr",Pl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xE).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},gN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,AE=/^( {2,}|\\)\n(?!\s*$)/,bN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ud=/[\p{P}\p{S}]/u,hg=/[\s\p{P}\p{S}]/u,SE=/[^\s\p{P}\p{S}]/u,vN=mt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,hg).getRegex(),TE=/(?!~)[\p{P}\p{S}]/u,wN=/(?!~)[\s\p{P}\p{S}]/u,_N=/(?:[^\s\p{P}\p{S}]|~)/u,xN=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,RE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,EN=mt(RE,"u").replace(/punct/g,ud).getRegex(),AN=mt(RE,"u").replace(/punct/g,TE).getRegex(),IE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",SN=mt(IE,"gu").replace(/notPunctSpace/g,SE).replace(/punctSpace/g,hg).replace(/punct/g,ud).getRegex(),TN=mt(IE,"gu").replace(/notPunctSpace/g,_N).replace(/punctSpace/g,wN).replace(/punct/g,TE).getRegex(),RN=mt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,SE).replace(/punctSpace/g,hg).replace(/punct/g,ud).getRegex(),IN=mt(/\\(punct)/,"gu").replace(/punct/g,ud).getRegex(),CN=mt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),kN=mt(dg).replace("(?:-->|$)","-->").getRegex(),ON=mt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",kN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),mu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,DN=mt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",mu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),CE=mt(/^!?\[(label)\]\[(ref)\]/).replace("label",mu).replace("ref",ug).getRegex(),kE=mt(/^!?\[(ref)\](?:\[\])?/).replace("ref",ug).getRegex(),PN=mt("reflink|nolink(?!\\()","g").replace("reflink",CE).replace("nolink",kE).getRegex(),pg={_backpedal:Xa,anyPunctuation:IN,autolink:CN,blockSkip:xN,br:AE,code:yN,del:Xa,emStrongLDelim:EN,emStrongRDelimAst:SN,emStrongRDelimUnd:RN,escape:gN,link:DN,nolink:kE,punctuation:vN,reflink:CE,reflinkSearch:PN,tag:ON,text:bN,url:Xa},$N={...pg,link:mt(/^!?\[(label)\]\((.*?)\)/).replace("label",mu).getRegex(),reflink:mt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mu).getRegex()},yp={...pg,emStrongRDelimAst:TN,emStrongLDelim:AN,url:mt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},NN={...yp,br:mt(AE).replace("{2,}","*").getRegex(),text:mt(yp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},lc={normal:fg,gfm:pN,pedantic:mN},Ia={normal:pg,gfm:yp,breaks:NN,pedantic:$N},LN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xv=t=>LN[t];function Qr(t,e){if(e){if(Ln.escapeTest.test(t))return t.replace(Ln.escapeReplace,Xv)}else if(Ln.escapeTestNoEncode.test(t))return t.replace(Ln.escapeReplaceNoEncode,Xv);return t}function Yv(t){try{t=encodeURI(t).replace(Ln.percentDecode,"%")}catch{return null}return t}function Qv(t,e){var i;const n=t.replace(Ln.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Ln.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Ln.slashPipe,"|");return r}function Ca(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function MN(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function Zv(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function FN(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var gu=class{constructor(t){xt(this,"options");xt(this,"rules");xt(this,"lexer");this.options=t||eo}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ca(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=FN(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=Ca(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ca(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=Ca(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,s=s?`${s}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=d,n.length===0)break;const f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.blockquote(m);i[i.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,s=s.substring(0,s.length-h.text.length)+y.text;break}else if((f==null?void 0:f.type)==="list"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.list(m);i[i.length-1]=y,r=r.substring(0,r.length-f.raw.length)+y.raw,s=s.substring(0,s.length-h.raw.length)+y.raw,n=m.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let o=!1;for(;t;){let l=!1,c="",u="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,E=>" ".repeat(3*E.length)),f=t.split(`
`,1)[0],h=!d.trim(),m=0;if(this.options.pedantic?(m=2,u=d.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=d.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const E=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),g=this.rules.other.fencesBeginRegex(m),p=this.rules.other.headingBeginRegex(m),b=this.rules.other.htmlBeginRegex(m);for(;t;){const x=t.split(`
`,1)[0];let R;if(f=x,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),R=f):R=f.replace(this.rules.other.tabCharGlobal,"    "),g.test(f)||p.test(f)||b.test(f)||E.test(f)||_.test(f))break;if(R.search(this.rules.other.nonSpaceChar)>=m||!f.trim())u+=`
`+R.slice(m);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(d)||p.test(d)||_.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),c+=x+`
`,t=t.substring(x.length+1),d=R.slice(m)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let y=null,A;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(A=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:c,task:!!y,checked:A,loose:!1,text:u,tokens:[]}),s.raw+=c}const a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var o;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=Qv(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(Qv(a,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=Ca(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=MN(e[2],"()");if(i===-2)return;if(i>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Zv(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return Zv(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let o,a,l=i,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+i);(r=u.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const d=[...r[0]][0].length,f=t.slice(0,i+r.index+d+a);if(Math.min(i,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=e[0],s="mailto:"+r;else{let i;do i=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},ks=class bp{constructor(e){xt(this,"tokens");xt(this,"options");xt(this,"state");xt(this,"tokenizer");xt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||eo,this.options.tokenizer=this.options.tokenizer||new gu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Ln,block:lc.normal,inline:Ia.normal};this.options.pedantic?(n.block=lc.pedantic,n.inline=Ia.pedantic):this.options.gfm&&(n.block=lc.gfm,this.options.breaks?n.inline=Ia.breaks:n.inline=Ia.gfm),this.tokenizer.rules=n}static get rules(){return{block:lc,inline:Ia}}static lex(e,n){return new bp(n).lex(e)}static lexInline(e,n){return new bp(n).inlineTokens(e)}lex(e){e=e.replace(Ln.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Ln.tabCharGlobal,"    ").replace(Ln.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,c;let r=e,s=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(u=f.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,o)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let f=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(y=>{m=y.call({lexer:this},h),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),i=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},Jo=class{constructor(t){xt(this,"options");xt(this,"parser");this.options=t||eo}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(Ln.notSpaceStart))==null?void 0:i[0],s=t.replace(Ln.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Qr(r)+'">'+(n?s:Qr(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:Qr(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let o=0;o<t.items.length;o++){const a=t.items[o];r+=this.listitem(a)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+Qr(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let o=0;o<i.length;o++)n+=this.tablecell(i[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Qr(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=Yv(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+Qr(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=Yv(t);if(s===null)return Qr(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${Qr(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Qr(t.text)}},mg=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Os=class vp{constructor(e){xt(this,"options");xt(this,"renderer");xt(this,"textRenderer");this.options=e||eo,this.options.renderer=this.options.renderer||new Jo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new mg}static parse(e,n){return new vp(n).parse(e)}static parseInline(e,n){return new vp(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},Sh,jc=(Sh=class{constructor(t){xt(this,"options");xt(this,"block");this.options=t||eo}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?ks.lex:ks.lexInline}provideParser(){return this.block?Os.parse:Os.parseInline}},xt(Sh,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Sh),jN=class{constructor(...t){xt(this,"defaults",ag());xt(this,"options",this.setOptions);xt(this,"parse",this.parseMarkdown(!0));xt(this,"parseInline",this.parseMarkdown(!1));xt(this,"Parser",Os);xt(this,"Renderer",Jo);xt(this,"TextRenderer",mg);xt(this,"Lexer",ks);xt(this,"Tokenizer",gu);xt(this,"Hooks",jc);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new Jo(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,a=n.renderer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new gu(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,a=n.tokenizer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new jc;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,a=n.hooks[o],l=s[o];jc.passThroughHooks.has(i)?s[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(s,c)).then(d=>l.call(s,d));const u=a.call(s,c);return l.call(s,u)}:s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return ks.lex(t,e??this.defaults)}parser(t,e){return Os.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const s={...r},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?ks.lex:ks.lexInline,l=i.hooks?i.hooks.provideParser():t?Os.parse:Os.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(c=>a(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let c=a(n,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let u=l(c,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Qr(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},Gi=new jN;function _t(t,e){return Gi.parse(t,e)}_t.options=_t.setOptions=function(t){return Gi.setOptions(t),_t.defaults=Gi.defaults,wE(_t.defaults),_t};_t.getDefaults=ag;_t.defaults=eo;_t.use=function(...t){return Gi.use(...t),_t.defaults=Gi.defaults,wE(_t.defaults),_t};_t.walkTokens=function(t,e){return Gi.walkTokens(t,e)};_t.parseInline=Gi.parseInline;_t.Parser=Os;_t.parser=Os.parse;_t.Renderer=Jo;_t.TextRenderer=mg;_t.Lexer=ks;_t.lexer=ks.lex;_t.Tokenizer=gu;_t.Hooks=jc;_t.parse=_t;_t.options;_t.setOptions;_t.use;_t.walkTokens;_t.parseInline;Os.parse;ks.lex;function OE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=OE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DE(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=OE(t))&&(r&&(r+=" "),r+=e);return r}const ew=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tw=DE,UN=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=ew(u)||ew(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(m=>{let[y,A]=m;return Array.isArray(A)?A.includes({...i,...a}[y]):{...i,...a}[y]===A})?[...c,d,f]:c},[]);return tw(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},gg="-",BN=t=>{const e=VN(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(gg);return a[0]===""&&a.length!==1&&a.shift(),PE(a,e)||HN(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},PE=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?PE(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(gg);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},nw=/^\[(.+)\]$/,HN=t=>{if(nw.test(t)){const e=nw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},VN=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)wp(n[s],r,s,e);return r},wp=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:rw(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(qN(s)){wp(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{wp(o,rw(e,i),n,r)})})},rw=(t,e)=>{let n=t;return e.split(gg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qN=t=>t.isThemeGetter,zN=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},_p="!",xp=":",WN=xp.length,KN=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,c;for(let m=0;m<s.length;m++){let y=s[m];if(o===0&&a===0){if(y===xp){i.push(s.slice(l,m)),l=m+WN;continue}if(y==="/"){c=m;continue}}y==="["?o++:y==="]"?o--:y==="("?a++:y===")"&&a--}const u=i.length===0?s:s.substring(l),d=GN(u),f=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(e){const s=e+xp,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},GN=t=>t.endsWith(_p)?t.substring(0,t.length-1):t.startsWith(_p)?t.substring(1):t,JN=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||e[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},XN=t=>({cache:zN(t.cacheSize),parseClassName:KN(t),sortModifiers:JN(t),...BN(t)}),YN=/\s+/,QN=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(YN);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let A=!!y,E=r(A?m.substring(0,y):m);if(!E){if(!A){l=u+(l.length>0?" "+l:l);continue}if(E=r(m),!E){l=u+(l.length>0?" "+l:l);continue}A=!1}const _=i(f).join(":"),g=h?_+_p:_,p=g+E;if(o.includes(p))continue;o.push(p);const b=s(E,A);for(let x=0;x<b.length;++x){const R=b[x];o.push(g+R)}l=u+(l.length>0?" "+l:l)}return l};function ZN(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$E(e))&&(r&&(r+=" "),r+=n);return r}const $E=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$E(t[r]))&&(n&&(n+=" "),n+=e);return n};function eL(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=XN(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=QN(l,n);return s(l,u),u}return function(){return i(ZN.apply(null,arguments))}}const en=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},NE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,LE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tL=/^\d+\/\d+$/,nL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ho=t=>tL.test(t),Je=t=>!!t&&!Number.isNaN(Number(t)),Ks=t=>!!t&&Number.isInteger(Number(t)),Zf=t=>t.endsWith("%")&&Je(t.slice(0,-1)),_s=t=>nL.test(t),aL=()=>!0,lL=t=>rL.test(t)&&!sL.test(t),ME=()=>!1,cL=t=>iL.test(t),uL=t=>oL.test(t),dL=t=>!Oe(t)&&!De(t),fL=t=>aa(t,UE,ME),Oe=t=>NE.test(t),$i=t=>aa(t,BE,lL),eh=t=>aa(t,yL,Je),sw=t=>aa(t,FE,ME),hL=t=>aa(t,jE,uL),cc=t=>aa(t,HE,cL),De=t=>LE.test(t),ka=t=>la(t,BE),pL=t=>la(t,bL),iw=t=>la(t,FE),mL=t=>la(t,UE),gL=t=>la(t,jE),uc=t=>la(t,HE,!0),aa=(t,e,n)=>{const r=NE.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},la=(t,e,n=!1)=>{const r=LE.exec(t);return r?r[1]?e(r[1]):n:!1},FE=t=>t==="position"||t==="percentage",jE=t=>t==="image"||t==="url",UE=t=>t==="length"||t==="size"||t==="bg-size",BE=t=>t==="length",yL=t=>t==="number",bL=t=>t==="family-name",HE=t=>t==="shadow",vL=()=>{const t=en("color"),e=en("font"),n=en("text"),r=en("font-weight"),s=en("tracking"),i=en("leading"),o=en("breakpoint"),a=en("container"),l=en("spacing"),c=en("radius"),u=en("shadow"),d=en("inset-shadow"),f=en("text-shadow"),h=en("drop-shadow"),m=en("blur"),y=en("perspective"),A=en("aspect"),E=en("ease"),_=en("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],p=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...p(),De,Oe],x=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],T=()=>[De,Oe,l],S=()=>[ho,"full","auto",...T()],C=()=>[Ks,"none","subgrid",De,Oe],M=()=>["auto",{span:["full",Ks,De,Oe]},Ks,De,Oe],P=()=>[Ks,"auto",De,Oe],j=()=>["auto","min","max","fr",De,Oe],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Y=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...T()],q=()=>[ho,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],B=()=>[t,De,Oe],re=()=>[...p(),iw,sw,{position:[De,Oe]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",mL,fL,{size:[De,Oe]}],fe=()=>[Zf,ka,$i],pe=()=>["","none","full",c,De,Oe],xe=()=>["",Je,ka,$i],K=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[Je,Zf,iw,sw],X=()=>["","none",m,De,Oe],ie=()=>["none",Je,De,Oe],ee=()=>["none",Je,De,Oe],we=()=>[Je,De,Oe],Ae=()=>[ho,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_s],breakpoint:[_s],color:[aL],container:[_s],"drop-shadow":[_s],ease:["in","out","in-out"],font:[dL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_s],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_s],shadow:[_s],spacing:["px",Je],text:[_s],"text-shadow":[_s],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ho,Oe,De,A]}],container:["container"],columns:[{columns:[Je,Oe,De,a]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[Ks,"auto",De,Oe]}],basis:[{basis:[ho,"full","auto",a,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Je,ho,"auto","initial","none",Oe]}],grow:[{grow:["",Je,De,Oe]}],shrink:[{shrink:["",Je,De,Oe]}],order:[{order:[Ks,"first","last","none",De,Oe]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...Y(),"normal"]}],"justify-self":[{"justify-self":["auto",...Y()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...Y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Y(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...Y(),"baseline"]}],"place-self":[{"place-self":["auto",...Y()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,ka,$i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,De,eh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Zf,Oe]}],"font-family":[{font:[pL,Oe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,De,Oe]}],"line-clamp":[{"line-clamp":[Je,"none",De,eh]}],leading:[{leading:[i,...T()]}],"list-image":[{"list-image":["none",De,Oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[Je,"from-font","auto",De,$i]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Je,"auto",De,Oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ks,De,Oe],radial:["",De,Oe],conic:[Ks,De,Oe]},gL,hL]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:xe()}],"border-w-x":[{"border-x":xe()}],"border-w-y":[{"border-y":xe()}],"border-w-s":[{"border-s":xe()}],"border-w-e":[{"border-e":xe()}],"border-w-t":[{"border-t":xe()}],"border-w-r":[{"border-r":xe()}],"border-w-b":[{"border-b":xe()}],"border-w-l":[{"border-l":xe()}],"divide-x":[{"divide-x":xe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":xe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Je,De,Oe]}],"outline-w":[{outline:["",Je,ka,$i]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",u,uc,cc]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",d,uc,cc]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Je,$i]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":xe()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",f,uc,cc]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Je,De,Oe]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Je]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[De,Oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":p()}],"mask-image-conic-pos":[{"mask-conic":[Je]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Oe]}],filter:[{filter:["","none",De,Oe]}],blur:[{blur:X()}],brightness:[{brightness:[Je,De,Oe]}],contrast:[{contrast:[Je,De,Oe]}],"drop-shadow":[{"drop-shadow":["","none",h,uc,cc]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Je,De,Oe]}],"hue-rotate":[{"hue-rotate":[Je,De,Oe]}],invert:[{invert:["",Je,De,Oe]}],saturate:[{saturate:[Je,De,Oe]}],sepia:[{sepia:["",Je,De,Oe]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Oe]}],"backdrop-blur":[{"backdrop-blur":X()}],"backdrop-brightness":[{"backdrop-brightness":[Je,De,Oe]}],"backdrop-contrast":[{"backdrop-contrast":[Je,De,Oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Je,De,Oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Je,De,Oe]}],"backdrop-invert":[{"backdrop-invert":["",Je,De,Oe]}],"backdrop-opacity":[{"backdrop-opacity":[Je,De,Oe]}],"backdrop-saturate":[{"backdrop-saturate":[Je,De,Oe]}],"backdrop-sepia":[{"backdrop-sepia":["",Je,De,Oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Je,"initial",De,Oe]}],ease:[{ease:["linear","initial",E,De,Oe]}],delay:[{delay:[Je,De,Oe]}],animate:[{animate:["none",_,De,Oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,De,Oe]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:ie()}],"rotate-x":[{"rotate-x":ie()}],"rotate-y":[{"rotate-y":ie()}],"rotate-z":[{"rotate-z":ie()}],scale:[{scale:ee()}],"scale-x":[{"scale-x":ee()}],"scale-y":[{"scale-y":ee()}],"scale-z":[{"scale-z":ee()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[De,Oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ae()}],"translate-x":[{"translate-x":Ae()}],"translate-y":[{"translate-y":Ae()}],"translate-z":[{"translate-z":Ae()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Oe]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Je,ka,$i,eh]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wL=eL(vL),_L=["top","right","bottom","left"],wi=Math.min,tr=Math.max,yu=Math.round,dc=Math.floor,os=t=>({x:t,y:t}),xL={left:"right",right:"left",bottom:"top",top:"bottom"},EL={start:"end",end:"start"};function Ep(t,e,n){return tr(t,wi(e,n))}function Bs(t,e){return typeof t=="function"?t(e):t}function Hs(t){return t.split("-")[0]}function ca(t){return t.split("-")[1]}function yg(t){return t==="x"?"y":"x"}function bg(t){return t==="y"?"height":"width"}const AL=new Set(["top","bottom"]);function ns(t){return AL.has(Hs(t))?"y":"x"}function vg(t){return yg(ns(t))}function SL(t,e,n){n===void 0&&(n=!1);const r=ca(t),s=vg(t),i=bg(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=bu(o)),[o,bu(o)]}function TL(t){const e=bu(t);return[Ap(t),e,Ap(e)]}function Ap(t){return t.replace(/start|end/g,e=>EL[e])}const ow=["left","right"],aw=["right","left"],RL=["top","bottom"],IL=["bottom","top"];function CL(t,e,n){switch(t){case"top":case"bottom":return n?e?aw:ow:e?ow:aw;case"left":case"right":return e?RL:IL;default:return[]}}function kL(t,e,n,r){const s=ca(t);let i=CL(Hs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Ap)))),i}function bu(t){return t.replace(/left|right|bottom|top/g,e=>xL[e])}function OL(t){return{top:0,right:0,bottom:0,left:0,...t}}function VE(t){return typeof t!="number"?OL(t):{top:t,right:t,bottom:t,left:t}}function vu(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function lw(t,e,n){let{reference:r,floating:s}=t;const i=ns(e),o=vg(e),a=bg(o),l=Hs(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(ca(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const DL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=lw(c,r,l),f=r,h={},m=0;for(let y=0;y<a.length;y++){const{name:A,fn:E}=a[y],{x:_,y:g,data:p,reset:b}=await E({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=_??u,d=g??d,h={...h,[A]:{...h[A],...p}},b&&m<=50&&(m++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):b.rects),{x:u,y:d}=lw(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function hl(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Bs(e,t),m=VE(h),A=a[f?d==="floating"?"reference":"floating":d],E=vu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(A)))==null||n?A:A.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,g=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),p=await(i.isElement==null?void 0:i.isElement(g))?await(i.getScale==null?void 0:i.getScale(g))||{x:1,y:1}:{x:1,y:1},b=vu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:g,strategy:l}):_);return{top:(E.top-b.top+m.top)/p.y,bottom:(b.bottom-E.bottom+m.bottom)/p.y,left:(E.left-b.left+m.left)/p.x,right:(b.right-E.right+m.right)/p.x}}const PL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Bs(t,e)||{};if(c==null)return{};const d=VE(u),f={x:n,y:r},h=vg(s),m=bg(h),y=await o.getDimensions(c),A=h==="y",E=A?"top":"left",_=A?"bottom":"right",g=A?"clientHeight":"clientWidth",p=i.reference[m]+i.reference[h]-f[h]-i.floating[m],b=f[h]-i.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=x?x[g]:0;(!R||!await(o.isElement==null?void 0:o.isElement(x)))&&(R=a.floating[g]||i.floating[m]);const T=p/2-b/2,S=R/2-y[m]/2-1,C=wi(d[E],S),M=wi(d[_],S),P=C,j=R-y[m]-M,L=R/2-y[m]/2+T,Y=Ep(P,L,j),O=!l.arrow&&ca(s)!=null&&L!==Y&&i.reference[m]/2-(L<P?C:M)-y[m]/2<0,q=O?L<P?L-P:L-j:0;return{[h]:f[h]+q,data:{[h]:Y,centerOffset:L-Y-q,...O&&{alignmentOffset:q}},reset:O}}}),$L=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...A}=Bs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=Hs(s),_=ns(a),g=Hs(a)===a,p=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=f||(g||!y?[bu(a)]:TL(a)),x=m!=="none";!f&&x&&b.push(...kL(a,y,m,p));const R=[a,...b],T=await hl(e,A),S=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&S.push(T[E]),d){const L=SL(s,o,p);S.push(T[L[0]],T[L[1]])}if(C=[...C,{placement:s,overflows:S}],!S.every(L=>L<=0)){var M,P;const L=(((M=i.flip)==null?void 0:M.index)||0)+1,Y=R[L];if(Y&&(!(d==="alignment"?_!==ns(Y):!1)||C.every(B=>B.overflows[0]>0&&ns(B.placement)===_)))return{data:{index:L,overflows:C},reset:{placement:Y}};let O=(P=C.filter(q=>q.overflows[0]<=0).sort((q,B)=>q.overflows[1]-B.overflows[1])[0])==null?void 0:P.placement;if(!O)switch(h){case"bestFit":{var j;const q=(j=C.filter(B=>{if(x){const re=ns(B.placement);return re===_||re==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(re=>re>0).reduce((re,z)=>re+z,0)]).sort((B,re)=>B[1]-re[1])[0])==null?void 0:j[0];q&&(O=q);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function cw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function uw(t){return _L.some(e=>t[e]>=0)}const NL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Bs(t,e);switch(r){case"referenceHidden":{const i=await hl(e,{...s,elementContext:"reference"}),o=cw(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:uw(o)}}}case"escaped":{const i=await hl(e,{...s,altBoundary:!0}),o=cw(i,n.floating);return{data:{escapedOffsets:o,escaped:uw(o)}}}default:return{}}}}},qE=new Set(["left","top"]);async function LL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Hs(n),a=ca(n),l=ns(n)==="y",c=qE.has(o)?-1:1,u=i&&l?-1:1,d=Bs(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const ML=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await LL(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},FL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:A=>{let{x:E,y:_}=A;return{x:E,y:_}}},...l}=Bs(t,e),c={x:n,y:r},u=await hl(e,l),d=ns(Hs(s)),f=yg(d);let h=c[f],m=c[d];if(i){const A=f==="y"?"top":"left",E=f==="y"?"bottom":"right",_=h+u[A],g=h-u[E];h=Ep(_,h,g)}if(o){const A=d==="y"?"top":"left",E=d==="y"?"bottom":"right",_=m+u[A],g=m-u[E];m=Ep(_,m,g)}const y=a.fn({...e,[f]:h,[d]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[d]:o}}}}}},jL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Bs(t,e),u={x:n,y:r},d=ns(s),f=yg(d);let h=u[f],m=u[d];const y=Bs(a,e),A=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const g=f==="y"?"height":"width",p=i.reference[f]-i.floating[g]+A.mainAxis,b=i.reference[f]+i.reference[g]-A.mainAxis;h<p?h=p:h>b&&(h=b)}if(c){var E,_;const g=f==="y"?"width":"height",p=qE.has(Hs(s)),b=i.reference[d]-i.floating[g]+(p&&((E=o.offset)==null?void 0:E[d])||0)+(p?0:A.crossAxis),x=i.reference[d]+i.reference[g]+(p?0:((_=o.offset)==null?void 0:_[d])||0)-(p?A.crossAxis:0);m<b?m=b:m>x&&(m=x)}return{[f]:h,[d]:m}}}},UL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Bs(t,e),u=await hl(e,c),d=Hs(s),f=ca(s),h=ns(s)==="y",{width:m,height:y}=i.floating;let A,E;d==="top"||d==="bottom"?(A=d,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=d,A=f==="end"?"top":"bottom");const _=y-u.top-u.bottom,g=m-u.left-u.right,p=wi(y-u[A],_),b=wi(m-u[E],g),x=!e.middlewareData.shift;let R=p,T=b;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=g),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=_),x&&!f){const C=tr(u.left,0),M=tr(u.right,0),P=tr(u.top,0),j=tr(u.bottom,0);h?T=m-2*(C!==0||M!==0?C+M:tr(u.left,u.right)):R=y-2*(P!==0||j!==0?P+j:tr(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:R});const S=await o.getDimensions(a.floating);return m!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function dd(){return typeof window<"u"}function to(t){return wg(t)?(t.nodeName||"").toLowerCase():"#document"}function or(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ms(t){var e;return(e=(wg(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wg(t){return dd()?t instanceof Node||t instanceof or(t).Node:!1}function qr(t){return dd()?t instanceof Element||t instanceof or(t).Element:!1}function ls(t){return dd()?t instanceof HTMLElement||t instanceof or(t).HTMLElement:!1}function dw(t){return!dd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof or(t).ShadowRoot}const BL=new Set(["inline","contents"]);function $l(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!BL.has(s)}const HL=new Set(["table","td","th"]);function VL(t){return HL.has(to(t))}const qL=[":popover-open",":modal"];function fd(t){return qL.some(e=>{try{return t.matches(e)}catch{return!1}})}const zL=["transform","translate","scale","rotate","perspective"],WL=["transform","translate","scale","rotate","perspective","filter"],KL=["paint","layout","strict","content"];function _g(t){const e=xg(),n=qr(t)?zr(t):t;return zL.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||WL.some(r=>(n.willChange||"").includes(r))||KL.some(r=>(n.contain||"").includes(r))}function GL(t){let e=_i(t);for(;ls(e)&&!Xo(e);){if(_g(e))return e;if(fd(e))return null;e=_i(e)}return null}function xg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JL=new Set(["html","body","#document"]);function Xo(t){return JL.has(to(t))}function zr(t){return or(t).getComputedStyle(t)}function hd(t){return qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _i(t){if(to(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dw(t)&&t.host||ms(t);return dw(e)?e.host:e}function zE(t){const e=_i(t);return Xo(e)?t.ownerDocument?t.ownerDocument.body:t.body:ls(e)&&$l(e)?e:zE(e)}function pl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=zE(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=or(s);if(i){const a=Sp(o);return e.concat(o,o.visualViewport||[],$l(s)?s:[],a&&n?pl(a):[])}return e.concat(s,pl(s,[],n))}function Sp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function WE(t){const e=zr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ls(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=yu(n)!==i||yu(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Eg(t){return qr(t)?t:t.contextElement}function jo(t){const e=Eg(t);if(!ls(e))return os(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=WE(e);let o=(i?yu(n.width):n.width)/r,a=(i?yu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const XL=os(0);function KE(t){const e=or(t);return!xg()||!e.visualViewport?XL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==or(t)?!1:e}function Ji(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Eg(t);let o=os(1);e&&(r?qr(r)&&(o=jo(r)):o=jo(t));const a=YL(i,n,r)?KE(i):os(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=or(i),h=r&&qr(r)?or(r):r;let m=f,y=Sp(m);for(;y&&r&&h!==m;){const A=jo(y),E=y.getBoundingClientRect(),_=zr(y),g=E.left+(y.clientLeft+parseFloat(_.paddingLeft))*A.x,p=E.top+(y.clientTop+parseFloat(_.paddingTop))*A.y;l*=A.x,c*=A.y,u*=A.x,d*=A.y,l+=g,c+=p,m=or(y),y=Sp(m)}}return vu({width:u,height:d,x:l,y:c})}function Ag(t,e){const n=hd(t).scrollLeft;return e?e.left+n:Ji(ms(t)).left+n}function GE(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Ag(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function QL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=ms(r),a=e?fd(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=os(1);const u=os(0),d=ls(r);if((d||!d&&!i)&&((to(r)!=="body"||$l(o))&&(l=hd(r)),ls(r))){const h=Ji(r);c=jo(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!i?GE(o,l,!0):os(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function ZL(t){return Array.from(t.getClientRects())}function eM(t){const e=ms(t),n=hd(t),r=t.ownerDocument.body,s=tr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=tr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ag(t);const a=-n.scrollTop;return zr(r).direction==="rtl"&&(o+=tr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function tM(t,e){const n=or(t),r=ms(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=xg();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const nM=new Set(["absolute","fixed"]);function rM(t,e){const n=Ji(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ls(t)?jo(t):os(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function fw(t,e,n){let r;if(e==="viewport")r=tM(t,n);else if(e==="document")r=eM(ms(t));else if(qr(e))r=rM(e,n);else{const s=KE(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return vu(r)}function JE(t,e){const n=_i(t);return n===e||!qr(n)||Xo(n)?!1:zr(n).position==="fixed"||JE(n,e)}function sM(t,e){const n=e.get(t);if(n)return n;let r=pl(t,[],!1).filter(a=>qr(a)&&to(a)!=="body"),s=null;const i=zr(t).position==="fixed";let o=i?_i(t):t;for(;qr(o)&&!Xo(o);){const a=zr(o),l=_g(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&nM.has(s.position)||$l(o)&&!l&&JE(t,o))?r=r.filter(u=>u!==o):s=a,o=_i(o)}return e.set(t,r),r}function iM(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?fd(e)?[]:sM(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=fw(e,u,s);return c.top=tr(d.top,c.top),c.right=wi(d.right,c.right),c.bottom=wi(d.bottom,c.bottom),c.left=tr(d.left,c.left),c},fw(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function oM(t){const{width:e,height:n}=WE(t);return{width:e,height:n}}function aM(t,e,n){const r=ls(e),s=ms(e),i=n==="fixed",o=Ji(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=os(0);function c(){l.x=Ag(s)}if(r||!r&&!i)if((to(e)!=="body"||$l(s))&&(a=hd(e)),r){const h=Ji(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?GE(s,a):os(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function th(t){return zr(t).position==="static"}function hw(t,e){if(!ls(t)||zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ms(t)===n&&(n=n.ownerDocument.body),n}function XE(t,e){const n=or(t);if(fd(t))return n;if(!ls(t)){let s=_i(t);for(;s&&!Xo(s);){if(qr(s)&&!th(s))return s;s=_i(s)}return n}let r=hw(t,e);for(;r&&VL(r)&&th(r);)r=hw(r,e);return r&&Xo(r)&&th(r)&&!_g(r)?n:r||GL(t)||n}const lM=async function(t){const e=this.getOffsetParent||XE,n=this.getDimensions,r=await n(t.floating);return{reference:aM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cM(t){return zr(t).direction==="rtl"}const uM={convertOffsetParentRelativeRectToViewportRelativeRect:QL,getDocumentElement:ms,getClippingRect:iM,getOffsetParent:XE,getElementRects:lM,getClientRects:ZL,getDimensions:oM,getScale:jo,isElement:qr,isRTL:cM};function YE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dM(t,e){let n=null,r;const s=ms(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const m=dc(d),y=dc(s.clientWidth-(u+f)),A=dc(s.clientHeight-(d+h)),E=dc(u),g={rootMargin:-m+"px "+-y+"px "+-A+"px "+-E+"px",threshold:tr(0,wi(1,l))||1};let p=!0;function b(x){const R=x[0].intersectionRatio;if(R!==l){if(!p)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!YE(c,t.getBoundingClientRect())&&o(),p=!1}try{n=new IntersectionObserver(b,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,g)}n.observe(t)}return o(!0),i}function fM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Eg(t),u=s||i?[...c?pl(c):[],...pl(e)]:[];u.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const d=c&&a?dM(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(E=>{let[_]=E;_&&_.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var g;(g=h)==null||g.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let m,y=l?Ji(t):null;l&&A();function A(){const E=Ji(t);y&&!YE(y,E)&&n(),y=E,m=requestAnimationFrame(A)}return n(),()=>{var E;u.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),d==null||d(),(E=h)==null||E.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const hM=ML,pM=FL,pw=$L,mM=UL,gM=NL,yM=PL,bM=jL,vM=(t,e,n)=>{const r=new Map,s={platform:uM,...n},i={...s.platform,_c:r};return DL(t,e,{...s,platform:i})};function wM(t){return t!=null&&typeof t=="object"&&"$el"in t}function Tp(t){if(wM(t)){const e=t.$el;return wg(e)&&to(e)==="#comment"?null:e}return t}function wo(t){return typeof t=="function"?t():I(t)}function _M(t){return{name:"arrow",options:t,fn(e){const n=Tp(wo(t.element));return n==null?{}:yM({element:n,padding:t.padding}).fn(e)}}}function QE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mw(t,e){const n=QE(t);return Math.round(e*n)/n}function xM(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=ne(()=>{var R;return(R=wo(n.open))!=null?R:!0}),i=ne(()=>wo(n.middleware)),o=ne(()=>{var R;return(R=wo(n.placement))!=null?R:"bottom"}),a=ne(()=>{var R;return(R=wo(n.strategy))!=null?R:"absolute"}),l=ne(()=>{var R;return(R=wo(n.transform))!=null?R:!0}),c=ne(()=>Tp(t.value)),u=ne(()=>Tp(e.value)),d=ve(0),f=ve(0),h=ve(a.value),m=ve(o.value),y=lr({}),A=ve(!1),E=ne(()=>{const R={position:h.value,left:"0",top:"0"};if(!u.value)return R;const T=mw(u.value,d.value),S=mw(u.value,f.value);return l.value?{...R,transform:"translate("+T+"px, "+S+"px)",...QE(u.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:T+"px",top:S+"px"}});let _;function g(){if(c.value==null||u.value==null)return;const R=s.value;vM(c.value,u.value,{middleware:i.value,placement:o.value,strategy:a.value}).then(T=>{d.value=T.x,f.value=T.y,h.value=T.strategy,m.value=T.placement,y.value=T.middlewareData,A.value=R!==!1})}function p(){typeof _=="function"&&(_(),_=void 0)}function b(){if(p(),r===void 0){g();return}if(c.value!=null&&u.value!=null){_=r(c.value,u.value,g);return}}function x(){s.value||(A.value=!1)}return st([i,o,a,s],g,{flush:"sync"}),st([c,u],b,{flush:"sync"}),st(s,x,{flush:"sync"}),ia()&&Sl(p),{x:Li(d),y:Li(f),strategy:Li(h),placement:Li(m),middlewareData:Li(y),isPositioned:Li(A),floatingStyles:E,update:g}}function Sg(t){return t?t.flatMap(e=>e.type===Ze?Sg(e.children):[e]):[]}const Rp=me({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=Sg(n.default()),s=r.findIndex(c=>c.type!==Bt);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const o=i.props?Be(e,i.props):e,a=Vr({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),EM=["area","img","input"],St=me({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&EM.includes(r)?()=>jn(r,e):r!=="template"?()=>jn(t.as,e,{default:n.default}):()=>jn(Rp,e,{default:n.default})}}),pd=me({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(V(),ce(I(St),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:te(()=>[Se(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function AM(t,e){var n;const r=lr();return $t(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),hs(r)}function ua(t){return ia()?(Sl(t),!0):!1}function SM(t){let e=!1,n;const r=sa(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function ZE(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=sa(!0),n=r.run(()=>t(...i))),ua(s),n)}const gs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const TM=t=>typeof t<"u",RM=Object.prototype.toString,IM=t=>RM.call(t)==="[object Object]",CM=()=>{},gw=kM();function kM(){var t,e;return gs&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function OM(t){return zt()}function nh(t){return Array.isArray(t)?t:[t]}function DM(t,e=1e4){return Tl((n,r)=>{let s=un(t),i;const o=()=>setTimeout(()=>{s=un(t),r()},un(e));return ua(()=>{clearTimeout(i)}),{get(){return n(),s},set(a){s=a,r(),clearTimeout(i),i=o()}}})}const PM=un;function $M(t,e){OM()&&Cl(t,e)}function NM(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=lr(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function c(...u){s&&t(),a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,t(...u)},un(e))}return r&&(i.value=!0,gs&&c()),ua(l),{isPending:hs(i),start:c,stop:l}}function LM(t=1e3,e={}){const{controls:n=!1,callback:r}=e,s=NM(r??CM,t,e),i=ne(()=>!s.isPending.value);return n?{ready:i,...s}:i}function MM(t,e,n){return st(t,e,{...n,immediate:!0})}const Nl=gs?window:void 0;function Cr(t){var e;const n=un(t);return(e=n==null?void 0:n.$el)!=null?e:n}function wu(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=ne(()=>{const a=nh(un(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=MM(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>Cr(c)))!=null?l:[Nl].filter(c=>c!=null),nh(un(s.value?t[1]:t[0])),nh(I(s.value?t[2]:t[1])),un(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const d=IM(u)?{...u}:u;e.push(...a.flatMap(f=>l.flatMap(h=>c.map(m=>r(f,h,m,d)))))},{flush:"post"}),o=()=>{i(),n()};return ua(n),o}function eA(){const t=lr(!1),e=zt();return e&&qt(()=>{t.value=!0},e),t}function FM(t){const e=eA();return ne(()=>(e.value,!!t()))}function jM(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Tg(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=Nl,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=jM(e);return wu(s,i,u=>{u.repeat&&un(a)||l(u)&&n(u)},o)}function tA(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=Nl,once:i=!1}=e,o=lr(!1),a=ne(()=>r?1e3/un(r):null);let l=0,c=null;function u(h){if(!o.value||!s)return;l||(l=h);const m=h-l;if(a.value&&m<a.value){c=s.requestAnimationFrame(u);return}if(l=h,t({delta:m,timestamp:h}),i){o.value=!1,c=null;return}c=s.requestAnimationFrame(u)}function d(){!o.value&&s&&(o.value=!0,l=0,c=s.requestAnimationFrame(u))}function f(){o.value=!1,c!=null&&s&&(s.cancelAnimationFrame(c),c=null)}return n&&d(),ua(f),{isActive:hs(o),pause:f,resume:d}}function UM(t){return JSON.parse(JSON.stringify(t))}function BM(t,e,n={}){const{window:r=Nl,...s}=n;let i;const o=FM(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},l=ne(()=>{const d=un(t);return Array.isArray(d)?d.map(f=>Cr(f)):[Cr(d)]}),c=st(l,d=>{if(a(),o.value&&r){i=new ResizeObserver(e);for(const f of d)f&&i.observe(f,s)}},{immediate:!0,flush:"post"}),u=()=>{a(),c()};return ua(u),{isSupported:o,stop:u}}function xi(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d,shouldEmit:f}=r,h=zt(),m=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let y=c;e||(e="modelValue"),y=y||`update:${e.toString()}`;const A=g=>a?typeof a=="function"?a(g):UM(g):g,E=()=>TM(t[e])?A(t[e]):d,_=g=>{f?f(g)&&m(y,g):m(y,g)};if(l){const g=E(),p=ve(g);let b=!1;return st(()=>t[e],x=>{b||(b=!0,p.value=A(x),kt(()=>b=!1))}),st(p,x=>{!b&&(x!==t[e]||u)&&_(x)},{deep:u}),p}else return ne({get(){return E()},set(g){_(g)}})}function In(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=Vt(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(ir(r,o),o)]}function yw(t){return typeof t=="string"?`'${t}'`:new HM().serialize(t)}const HM=function(){var e;class t{constructor(){vy(this,e,new Map)}compare(r,s){const i=typeof r,o=typeof s;return i==="string"&&o==="string"?r.localeCompare(s):i==="number"&&o==="number"?r-s:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(s,!0))}serialize(r,s){if(r===null)return"null";switch(typeof r){case"string":return s?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const s=Object.prototype.toString.call(r);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),r);const i=r.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,r);if(typeof r.toJSON=="function"){const a=r.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(r))}serializeBuiltInType(r,s){const i=this["$"+r];if(i)return i.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(r,s.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,s){const i=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${r}{`;for(let a=0;a<i.length;a++){const[l,c]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(r){let s=ha(this,e).get(r);return s===void 0&&(ha(this,e).set(r,`#${ha(this,e).size}`),s=this.serializeObject(r),ha(this,e).set(r,s)),s}$function(r){const s=Function.prototype.toString.call(r);return s.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(r){let s="[";for(let i=0;i<r.length;i++)s+=this.serialize(r[i]),i<r.length-1&&(s+=",");return s+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((s,i)=>this.compare(s,i)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}e=new WeakMap;for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(r){return`${n}(${r})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join("n,")}${r.length>0?"n":""}]`};return t}();function VM(t,e){return t===e||yw(t)===yw(e)}function bw(t){return t==null}const[md,Gq]=In("ConfigProvider");function gd(t){const e=md({dir:ve("ltr")});return ne(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function et(){const t=zt(),e=ve(),n=ne(()=>{var o,a;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(a=e.value)==null?void 0:a.$el.nextElementSibling:Cr(e)}),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}const qM=["INPUT","TEXTAREA"];function zM(t,e,n,r={}){if(!e||r.enableIgnoredElement&&qM.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:c=!0,focus:u=!1}=r,[d,f,h,m,y,A]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],E=h||m,_=d||f;if(!y&&!A&&(!E&&!_||s==="vertical"&&_||s==="horizontal"&&E))return null;const g=n?Array.from(n.querySelectorAll(i)):o;if(!g.length)return null;c&&t.preventDefault();let p=null;return _||E?p=nA(g,e,{goForward:E?m:l==="ltr"?d:f,loop:a}):y?p=g.at(0)||null:A&&(p=g.at(-1)||null),u&&(p==null||p.focus()),p}function nA(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const o=(i+t.length)%t.length,a=t[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?nA(t,a,n,r):a:null}let WM=0;function Yo(t,e="reka"){const n=md({useId:void 0});return Object.hasOwn(I$,"useId")?`${e}-${$c==null?void 0:$c()}`:n.useId?`${e}-${n.useId()}`:`${e}-${++WM}`}function KM(t,e){const n=ve(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function GM(t,e){var A;const n=ve({}),r=ve("none"),s=ve(t),i=t.value?"mounted":"unmounted";let o;const a=((A=e.value)==null?void 0:A.ownerDocument.defaultView)??Nl,{state:l,dispatch:c}=KM(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=E=>{var _;if(gs){const g=new CustomEvent(E,{bubbles:!1,cancelable:!1});(_=e.value)==null||_.dispatchEvent(g)}};st(t,async(E,_)=>{var p;const g=_!==E;if(await kt(),g){const b=r.value,x=fc(e.value);E?(c("MOUNT"),u("enter"),x==="none"&&u("after-enter")):x==="none"||x==="undefined"||((p=n.value)==null?void 0:p.display)==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):_&&b!==x?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const d=E=>{const _=fc(e.value),g=_.includes(E.animationName),p=l.value==="mounted"?"enter":"leave";if(E.target===e.value&&g&&(u(`after-${p}`),c("ANIMATION_END"),!s.value)){const b=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a==null?void 0:a.setTimeout(()=>{var x;((x=e.value)==null?void 0:x.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=b)})}E.target===e.value&&_==="none"&&c("ANIMATION_END")},f=E=>{E.target===e.value&&(r.value=fc(e.value))},h=st(e,(E,_)=>{E?(n.value=getComputedStyle(E),E.addEventListener("animationstart",f),E.addEventListener("animationcancel",d),E.addEventListener("animationend",d)):(c("ANIMATION_END"),o!==void 0&&(a==null||a.clearTimeout(o)),_==null||_.removeEventListener("animationstart",f),_==null||_.removeEventListener("animationcancel",d),_==null||_.removeEventListener("animationend",d))},{immediate:!0}),m=st(l,()=>{const E=fc(e.value);r.value=l.value==="mounted"?E:"none"});return Vn(()=>{h(),m()}),{isPresent:ne(()=>["mounted","unmountSuspended"].includes(l.value))}}function fc(t){return t&&getComputedStyle(t).animationName||"none"}const Ll=me({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var c;const{present:r,forceMount:s}=Zn(t),i=ve(),{isPresent:o}=GM(r,i);n({present:o});let a=e.default({present:o.value});a=Sg(a||[]);const l=zt();if(a&&(a==null?void 0:a.length)>1){const u=(c=l==null?void 0:l.parent)!=null&&c.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?jn(e.default({present:o.value})[0],{ref:u=>{const d=Cr(u);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?i.value=d.firstElementChild:i.value=d),d}}):null}}),[Ri,JM]=In("DialogRoot"),XM=me({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=xi(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=ve(),o=ve(),{modal:a}=Zn(n);return JM({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>Se(l.$slots,"default",{open:I(s),close:()=>s.value=!1})}});function Ml(t){const e=zt(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[$o(on(s))]=(...i)=>t(s,...i)}),r}function dn(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const YM="menu.itemSelect",Ip=["Enter"," "],QM=["ArrowDown","PageUp","Home"],rA=["ArrowUp","PageDown","End"],ZM=[...QM,...rA];[...Ip],[...Ip];function sA(t){return t?"open":"closed"}function Cp(t){const e=dn();for(const n of t)if(n===e||(n.focus(),dn()!==e))return}function e2(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function t2(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return e2(n,e)}function kp(t){return t.pointerType==="mouse"}const n2=SM(()=>ve([]));function r2(){const t=n2();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=vw(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=vw(t.value,e),(n=t.value[0])==null||n.resume()}}}function vw(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function s2(t){return t.filter(e=>e.tagName!=="A")}const rh="focusScope.autoFocusOnMount",sh="focusScope.autoFocusOnUnmount",ww={bubbles:!1,cancelable:!0};function Uc(t,{select:e=!1}={}){const n=dn();for(const r of t)if(Qs(r,{select:e}),dn()!==n)return!0}function i2(t){const e=Rg(t),n=_w(e,t),r=_w(e.reverse(),t);return[n,r]}function Rg(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _w(t,e){for(const n of t)if(!o2(n,{upTo:e}))return n}function o2(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function a2(t){return t instanceof HTMLInputElement&&"select"in t}function Qs(t,{select:e=!1}={}){if(t&&t.focus){const n=dn();t.focus({preventScroll:!0}),t!==n&&a2(t)&&e&&t.select()}}const Ig=me({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=et(),o=ve(null),a=r2(),l=Tr({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});$t(u=>{if(!gs)return;const d=i.value;if(!n.trapped)return;function f(A){if(l.paused||!d)return;const E=A.target;d.contains(E)?o.value=E:Qs(o.value,{select:!0})}function h(A){if(l.paused||!d)return;const E=A.relatedTarget;E!==null&&(d.contains(E)||Qs(o.value,{select:!0}))}function m(A){d.contains(o.value)||Qs(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const y=new MutationObserver(m);d&&y.observe(d,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),y.disconnect()})}),$t(async u=>{const d=i.value;if(await kt(),!d)return;a.add(l);const f=dn();if(!d.contains(f)){const m=new CustomEvent(rh,ww);d.addEventListener(rh,y=>r("mountAutoFocus",y)),d.dispatchEvent(m),m.defaultPrevented||(Uc(s2(Rg(d)),{select:!0}),dn()===f&&Qs(d))}u(()=>{d.removeEventListener(rh,A=>r("mountAutoFocus",A));const m=new CustomEvent(sh,ww),y=A=>{r("unmountAutoFocus",A)};d.addEventListener(sh,y),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||Qs(f??document.body,{select:!0}),d.removeEventListener(sh,y),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const d=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,f=dn();if(d&&f){const h=u.currentTarget,[m,y]=i2(h);m&&y?!u.shiftKey&&f===y?(u.preventDefault(),n.loop&&Qs(m,{select:!0})):u.shiftKey&&f===m&&(u.preventDefault(),n.loop&&Qs(y,{select:!0})):f===h&&u.preventDefault()}}return(u,d)=>(V(),ce(I(St),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:te(()=>[Se(u.$slots,"default")]),_:3},8,["as-child","as"]))}});function Cg(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}const l2="dismissableLayer.pointerDownOutside",c2="dismissableLayer.focusOutside";function iA(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function u2(t,e,n=!0){var o;const r=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ve(!1),i=ve(()=>{});return $t(a=>{if(!gs||!un(n))return;const l=async u=>{const d=u.target;if(!(!(e!=null&&e.value)||!d)){if(iA(e.value,d)){s.value=!1;return}if(u.target&&!s.value){let f=function(){Cg(l2,t,h)};const h={originalEvent:u};u.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=f,r.addEventListener("click",i.value,{once:!0})):f()}else r.removeEventListener("click",i.value);s.value=!1}},c=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);a(()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",l),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{un(n)&&(s.value=!0)}}}function d2(t,e,n=!0){var i;const r=((i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=ve(!1);return $t(o=>{if(!gs||!un(n))return;const a=async l=>{if(!(e!=null&&e.value))return;await kt(),await kt();const c=l.target;!e.value||!c||iA(e.value,c)||l.target&&!s.value&&Cg(c2,t,{originalEvent:l})};r.addEventListener("focusin",a),o(()=>r.removeEventListener("focusin",a))}),{onFocusCapture:()=>{un(n)&&(s.value=!0)},onBlurCapture:()=>{un(n)&&(s.value=!1)}}}const Pr=Tr({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kg=me({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=et(),o=ne(()=>{var m;return((m=i.value)==null?void 0:m.ownerDocument)??globalThis.document}),a=ne(()=>Pr.layersRoot),l=ne(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=ne(()=>Pr.layersWithOutsidePointerEventsDisabled.size>0),u=ne(()=>{const m=Array.from(a.value),[y]=[...Pr.layersWithOutsidePointerEventsDisabled].slice(-1),A=m.indexOf(y);return l.value>=A}),d=u2(async m=>{const y=[...Pr.branches].some(A=>A==null?void 0:A.contains(m.target));!u.value||y||(r("pointerDownOutside",m),r("interactOutside",m),await kt(),m.defaultPrevented||r("dismiss"))},i),f=d2(m=>{[...Pr.branches].some(A=>A==null?void 0:A.contains(m.target))||(r("focusOutside",m),r("interactOutside",m),m.defaultPrevented||r("dismiss"))},i);Tg("Escape",m=>{l.value===a.value.size-1&&(r("escapeKeyDown",m),m.defaultPrevented||r("dismiss"))});let h;return $t(m=>{i.value&&(n.disableOutsidePointerEvents&&(Pr.layersWithOutsidePointerEventsDisabled.size===0&&(h=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),Pr.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),m(()=>{n.disableOutsidePointerEvents&&Pr.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=h)}))}),$t(m=>{m(()=>{i.value&&(a.value.delete(i.value),Pr.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(m,y)=>(V(),ce(I(St),{ref:I(s),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:fs({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:I(f).onFocusCapture,onBlurCapture:I(f).onBlurCapture,onPointerdownCapture:I(d).onPointerDownCapture},{default:te(()=>[Se(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),oA=me({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ri(),{forwardRef:i,currentElement:o}=et();return s.titleId||(s.titleId=Yo(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Yo(void 0,"reka-dialog-description")),qt(()=>{s.contentElement=o,dn()!==document.body&&(s.triggerElement.value=dn())}),(a,l)=>(V(),ce(I(Ig),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:te(()=>[oe(I(kg),Be({id:I(s).contentId,ref:I(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":I(s).descriptionId,"aria-labelledby":I(s).titleId,"data-state":I(sA)(I(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>I(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:te(()=>[Se(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}});var f2=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},po=new WeakMap,hc=new WeakMap,pc={},ih=0,aA=function(t){return t&&(t.host||aA(t.parentNode))},h2=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=aA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},p2=function(t,e,n,r){var s=h2(e,Array.isArray(t)?t:[t]);pc[n]||(pc[n]=new WeakMap);var i=pc[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",y=(po.get(f)||0)+1,A=(i.get(f)||0)+1;po.set(f,y),i.set(f,A),o.push(f),y===1&&m&&hc.set(f,!0),A===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),ih++,function(){o.forEach(function(d){var f=po.get(d)-1,h=i.get(d)-1;po.set(d,f),i.set(d,h),f||(hc.has(d)||d.removeAttribute(r),hc.delete(d)),h||d.removeAttribute(n)}),ih--,ih||(po=new WeakMap,po=new WeakMap,hc=new WeakMap,pc={})}},m2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=f2(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),p2(r,s,n,"aria-hidden")):function(){return null}};function Og(t){let e;st(()=>Cr(t),n=>{n?e=m2(n):e&&e()}),Vn(()=>{e&&e()})}const g2=me({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ri(),i=Ml(r),{forwardRef:o,currentElement:a}=et();return Og(a),(l,c)=>(V(),ce(oA,Be({...n,...I(i)},{ref:I(o),"trap-focus":I(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(u.preventDefault(),(d=I(s).triggerElement.value)==null||d.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const d=u.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),y2=me({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=Ml(e);et();const i=Ri(),o=ve(!1),a=ve(!1);return(l,c)=>(V(),ce(oA,Be({...n,...I(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(o.value||(d=I(i).triggerElement.value)==null||d.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{var h;u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=u.target;((h=I(i).triggerElement.value)==null?void 0:h.contains(d))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16))}}),b2=me({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ri(),i=Ml(r),{forwardRef:o}=et();return(a,l)=>(V(),ce(I(Ll),{present:a.forceMount||I(s).open.value},{default:te(()=>[I(s).modal.value?(V(),ce(g2,Be({key:0,ref:I(o)},{...n,...I(i),...a.$attrs}),{default:te(()=>[Se(a.$slots,"default")]),_:3},16)):(V(),ce(y2,Be({key:1,ref:I(o)},{...n,...I(i),...a.$attrs}),{default:te(()=>[Se(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),v2=me({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(t){const e=t;et();const n=Ri();return(r,s)=>(V(),ce(I(St),Be(e,{id:I(n).descriptionId}),{default:te(()=>[Se(r.$slots,"default")]),_:3},16,["id"]))}});function oh(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Op(t,e,n=".",r){if(!oh(e))return Op(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:oh(o)&&oh(s[i])?s[i]=Op(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function w2(t){return(...e)=>e.reduce((n,r)=>Op(n,r,"",t),{})}const _2=w2(),x2=ZE(()=>{const t=ve(new Map),e=ve(),n=ne(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=md({scrollBody:ve(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",gw&&(s==null||s()),e.value=void 0};return st(n,(o,a)=>{var d;if(!gs)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=(d=r.scrollBody)!=null&&d.value?typeof r.scrollBody.value=="object"?_2({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),gw&&(s=wu(document,"touchmove",f=>E2(f),{passive:!1})),kt(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Dg(t){const e=Math.random().toString(36).substring(2,7),n=x2();n.value.set(e,t??!1);const r=ne({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return $M(()=>{n.value.delete(e)}),r}function lA(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:lA(n)}}function E2(t){const e=t||window.event,n=e.target;return n instanceof Element&&lA(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const A2=me({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Ri();return Dg(!0),et(),(n,r)=>(V(),ce(I(St),{as:n.as,"as-child":n.asChild,"data-state":I(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:te(()=>[Se(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),S2=me({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const e=Ri(),{forwardRef:n}=et();return(r,s)=>{var i;return(i=I(e))!=null&&i.modal.value?(V(),ce(I(Ll),{key:0,present:r.forceMount||I(e).open.value},{default:te(()=>[oe(A2,Be(r.$attrs,{ref:I(n),as:r.as,"as-child":r.asChild}),{default:te(()=>[Se(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ze("",!0)}}}),Pg=me({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=eA();return(n,r)=>I(e)||n.forceMount?(V(),ce(ed,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Se(n.$slots,"default")],8,["to","disabled","defer"])):ze("",!0)}});function $g(t){const e=zt(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,i)=>{const o=(e==null?void 0:e.type.props[i]).default;return o!==void 0&&(s[i]=o),s},{}),r=nu(t);return ne(()=>{const s={},i=(e==null?void 0:e.vnode.props)??{};return Object.keys(i).forEach(o=>{s[on(o)]=i[o]}),Object.keys({...n,...s}).reduce((o,a)=>(r.value[a]!==void 0&&(o[a]=r.value[a]),o),{})})}function Fl(t,e){const n=$g(t),r=e?Ml(e):{};return ne(()=>({...n.value,...r}))}const T2=me({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(t){const e=t,n=Ri();return et(),(r,s)=>(V(),ce(I(St),Be(e,{id:I(n).titleId}),{default:te(()=>[Se(r.$slots,"default")]),_:3},16,["id"]))}});function Dp(){const t=ve(),e=ne(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:Cr(t)});return{primitiveElement:t,currentElement:e}}function cA(t){return ne(()=>{var e;return PM(t)?!!((e=Cr(t))!=null&&e.closest("form")):!0})}const xw="data-reka-collection-item";function ys(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const u=ve(new Map);s={collectionRef:ve(),itemMap:u},ir(r,s)}else s=Vt(r);const i=(u=!1)=>{const d=s.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${xw}]`)),m=Array.from(s.itemMap.value.values()).sort((y,A)=>f.indexOf(y.ref)-f.indexOf(A.ref));return u?m:m.filter(y=>y.ref.dataset.disabled!=="")},o=me({name:"CollectionSlot",setup(u,{slots:d}){const{primitiveElement:f,currentElement:h}=Dp();return st(h,()=>{s.collectionRef.value=h.value}),()=>jn(Rp,{ref:f},d)}}),a=me({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(u,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=Dp();return $t(y=>{if(m.value){const A=ot(m.value);s.itemMap.value.set(A,{ref:m.value,value:u.value}),y(()=>s.itemMap.value.delete(A))}}),()=>jn(Rp,{...f,[xw]:"",ref:h},d)}}),l=ne(()=>Array.from(s.itemMap.value.values())),c=ne(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:c,CollectionSlot:o,CollectionItem:a}}const R2="rovingFocusGroup.onEntryFocus",I2={bubbles:!1,cancelable:!0};function C2(t,e=!1){const n=dn();for(const r of t)if(r===n||(r.focus({preventScroll:e}),dn()!==n))return}const[Jq,k2]=In("RovingFocusGroup"),O2=me({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:o,dir:a}=Zn(r),l=gd(a),c=xi(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),u=ve(!1),d=ve(!1),f=ve(0),{getItems:h,CollectionSlot:m}=ys({isProvider:!0});function y(E){const _=!d.value;if(E.currentTarget&&E.target===E.currentTarget&&_&&!u.value){const g=new CustomEvent(R2,I2);if(E.currentTarget.dispatchEvent(g),s("entryFocus",g),!g.defaultPrevented){const p=h().map(T=>T.ref).filter(T=>T.dataset.disabled!==""),b=p.find(T=>T.getAttribute("data-active")===""),x=p.find(T=>T.id===c.value),R=[b,x,...p].filter(Boolean);C2(R,r.preventScrollOnEntryFocus)}}d.value=!1}function A(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),k2({loop:i,dir:l,orientation:o,currentTabStopId:c,onItemFocus:E=>{c.value=E},onItemShiftTab:()=>{u.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(E,_)=>(V(),ce(I(m),null,{default:te(()=>[oe(I(St),{tabindex:u.value||f.value===0?-1:0,"data-orientation":I(o),as:E.as,"as-child":E.asChild,dir:I(l),style:{outline:"none"},onMousedown:_[0]||(_[0]=g=>d.value=!0),onMouseup:A,onFocus:y,onBlur:_[1]||(_[1]=g=>u.value=!1)},{default:te(()=>[Se(E.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Ew=me({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=Dp(),s=ne(()=>e.checked??e.value);return st(s,(i,o)=>{if(!r.value)return;const a=r.value,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(u&&i!==o){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});u.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,o)=>(V(),ce(pd,Be({ref_key:"primitiveElement",ref:n},{...e,...i.$attrs},{as:"input"}),null,16))}}),D2=me({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,n=ne(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=ne(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`[${e.name}][${i}][${o}]`,value:a})):{name:`[${e.name}][${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`[${e.name}][${s}]`,value:i})):[]);return(s,i)=>n.value?(V(),ce(Ew,Be({key:s.name},{...e,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(V(!0),Te(Ze,{key:1},er(r.value,o=>(V(),ce(Ew,Be({key:o.name,ref_for:!0},{...e,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))}}),[uA,P2]=In("PopperRoot"),dA=me({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=ve();return P2({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>Se(n.$slots,"default")}}),fA=me({__name:"PopperAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=et(),s=uA();return rg(()=>{s.onAnchorChange(e.reference??r.value)}),(i,o)=>(V(),ce(I(St),{ref:I(n),as:i.as,"as-child":i.asChild},{default:te(()=>[Se(i.$slots,"default")]),_:3},8,["as","as-child"]))}});function $2(t){return t!==null}function N2(t){return{name:"transformOrigin",options:t,fn(e){var A,E,_;const{placement:n,rects:r,middlewareData:s}=e,o=((A=s.arrow)==null?void 0:A.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Pp(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,h=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=o?d:`${f}px`,y=`${-l}px`):c==="top"?(m=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=o?d:`${h}px`):c==="left"&&(m=`${r.floating.width+l}px`,y=o?d:`${h}px`),{data:{x:m,y}}}}}function Pp(t){const[e,n="center"]=t.split("-");return[e,n]}function L2(t){const e=ve(),n=ne(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),r=ne(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return qt(()=>{const s=Cr(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;l=d.inlineSize,c=d.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e.value={width:l,height:c}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}const hA={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[Xq,M2]=In("PopperContent"),pA=me({inheritAttrs:!1,__name:"PopperContent",props:Qm({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...hA}),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=uA(),{forwardRef:i,currentElement:o}=et(),a=ve(),l=ve(),{width:c,height:u}=L2(l),d=ne(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=ne(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),h=ne(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=ne(()=>({padding:f.value,boundary:h.value.filter($2),altBoundary:h.value.length>0})),y=AM(()=>[hM({mainAxis:n.sideOffset+u.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&pw({...m.value}),n.avoidCollisions&&pM({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?bM():void 0,...m.value}),!n.prioritizePosition&&n.avoidCollisions&&pw({...m.value}),mM({...m.value,apply:({elements:M,rects:P,availableWidth:j,availableHeight:L})=>{const{width:Y,height:O}=P.reference,q=M.floating.style;q.setProperty("--reka-popper-available-width",`${j}px`),q.setProperty("--reka-popper-available-height",`${L}px`),q.setProperty("--reka-popper-anchor-width",`${Y}px`),q.setProperty("--reka-popper-anchor-height",`${O}px`)}}),l.value&&_M({element:l.value,padding:n.arrowPadding}),N2({arrowWidth:c.value,arrowHeight:u.value}),n.hideWhenDetached&&gM({strategy:"referenceHidden",...m.value})]),A=ne(()=>n.reference??s.anchor.value),{floatingStyles:E,placement:_,isPositioned:g,middlewareData:p}=xM(A,a,{strategy:n.positionStrategy,placement:d,whileElementsMounted:(...M)=>fM(...M,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:y}),b=ne(()=>Pp(_.value)[0]),x=ne(()=>Pp(_.value)[1]);rg(()=>{g.value&&r("placed")});const R=ne(()=>{var M;return((M=p.value.arrow)==null?void 0:M.centerOffset)!==0}),T=ve("");$t(()=>{o.value&&(T.value=window.getComputedStyle(o.value).zIndex)});const S=ne(()=>{var M;return((M=p.value.arrow)==null?void 0:M.x)??0}),C=ne(()=>{var M;return((M=p.value.arrow)==null?void 0:M.y)??0});return M2({placedSide:b,onArrowChange:M=>l.value=M,arrowX:S,arrowY:C,shouldHideArrow:R}),(M,P)=>{var j,L,Y;return V(),Te("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:fs({...I(E),transform:I(g)?I(E).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:T.value,"--reka-popper-transform-origin":[(j=I(p).transformOrigin)==null?void 0:j.x,(L=I(p).transformOrigin)==null?void 0:L.y].join(" "),...((Y=I(p).hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[oe(I(St),Be({ref:I(i)},M.$attrs,{"as-child":n.asChild,as:M.as,"data-side":b.value,"data-align":x.value,style:{animation:I(g)?void 0:"none"}}),{default:te(()=>[Se(M.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}});function Ng(t){const e=DM("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const o=dn(),a=i.map(f=>{var h,m;return{...f,textValue:((h=f.value)==null?void 0:h.textValue)??((m=f.ref.textContent)==null?void 0:m.trim())??""}}),l=a.find(f=>f.ref===o),c=a.map(f=>f.textValue),u=j2(c,e.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===u);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{e.value=""}}}function F2(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function j2(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=F2(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function U2(t){const e=md({nonce:ve()});return ne(()=>{var n;return(t==null?void 0:t.value)||((n=e.nonce)==null?void 0:n.value)})}function B2(){const t=ve(!1);return qt(()=>{wu("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),wu(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const H2=ZE(B2),[yd,V2]=In(["MenuRoot","MenuSub"],"MenuContext"),[Lg,q2]=In("MenuRoot"),z2=me({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=Zn(n),o=gd(i),a=xi(n,"open",r),l=ve(),c=H2();return V2({open:a,onOpenChange:u=>{a.value=u},content:l,onContentChange:u=>{l.value=u}}),q2({onClose:()=>{a.value=!1},isUsingKeyboardRef:c,dir:o,modal:s}),(u,d)=>(V(),ce(I(dA),null,{default:te(()=>[Se(u.$slots,"default")]),_:3}))}});let ah=0;function mA(){$t(t=>{if(!gs)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Aw()),document.body.insertAdjacentElement("beforeend",e[1]??Aw()),ah++,t(()=>{ah===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),ah--})})}function Aw(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}const[gA,W2]=In("MenuContent"),yA=me({__name:"MenuContentImpl",props:Qm({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...hA}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=yd(),i=Lg(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=Zn(n);mA(),Dg(a.value);const c=ve(""),u=ve(0),d=ve(0),f=ve(null),h=ve("right"),m=ve(0),y=ve(null),A=ve(),{forwardRef:E,currentElement:_}=et(),{handleTypeaheadSearch:g}=Ng();st(_,S=>{s.onContentChange(S)}),Vn(()=>{window.clearTimeout(u.value)});function p(S){var M,P;return h.value===((M=f.value)==null?void 0:M.side)&&t2(S,(P=f.value)==null?void 0:P.area)}async function b(S){var C;r("openAutoFocus",S),!S.defaultPrevented&&(S.preventDefault(),(C=_.value)==null||C.focus({preventScroll:!0}))}function x(S){var q;if(S.defaultPrevented)return;const M=S.target.closest("[data-reka-menu-content]")===S.currentTarget,P=S.ctrlKey||S.altKey||S.metaKey,j=S.key.length===1,L=zM(S,dn(),_.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(L)return L==null?void 0:L.focus();if(S.code==="Space")return;const Y=((q=A.value)==null?void 0:q.getItems())??[];if(M&&(S.key==="Tab"&&S.preventDefault(),!P&&j&&g(S.key,Y)),S.target!==_.value||!ZM.includes(S.key))return;S.preventDefault();const O=[...Y.map(B=>B.ref)];rA.includes(S.key)&&O.reverse(),Cp(O)}function R(S){var C,M;(M=(C=S==null?void 0:S.currentTarget)==null?void 0:C.contains)!=null&&M.call(C,S.target)||(window.clearTimeout(u.value),c.value="")}function T(S){var P;if(!kp(S))return;const C=S.target,M=m.value!==S.clientX;if((P=S==null?void 0:S.currentTarget)!=null&&P.contains(C)&&M){const j=S.clientX>m.value?"right":"left";h.value=j,m.value=S.clientX}}return W2({onItemEnter:S=>!!p(S),onItemLeave:S=>{var C;p(S)||((C=_.value)==null||C.focus(),y.value=null)},onTriggerLeave:S=>!!p(S),searchRef:c,pointerGraceTimerRef:d,onPointerGraceIntentChange:S=>{f.value=S}}),(S,C)=>(V(),ce(I(Ig),{"as-child":"",trapped:I(o),onMountAutoFocus:b,onUnmountAutoFocus:C[7]||(C[7]=M=>r("closeAutoFocus",M))},{default:te(()=>[oe(I(kg),{"as-child":"","disable-outside-pointer-events":I(a),onEscapeKeyDown:C[2]||(C[2]=M=>r("escapeKeyDown",M)),onPointerDownOutside:C[3]||(C[3]=M=>r("pointerDownOutside",M)),onFocusOutside:C[4]||(C[4]=M=>r("focusOutside",M)),onInteractOutside:C[5]||(C[5]=M=>r("interactOutside",M)),onDismiss:C[6]||(C[6]=M=>r("dismiss"))},{default:te(()=>[oe(I(O2),{ref_key:"rovingFocusGroupRef",ref:A,"current-tab-stop-id":y.value,"onUpdate:currentTabStopId":C[0]||(C[0]=M=>y.value=M),"as-child":"",orientation:"vertical",dir:I(i).dir.value,loop:I(l),onEntryFocus:C[1]||(C[1]=M=>{r("entryFocus",M),I(i).isUsingKeyboardRef.value||M.preventDefault()})},{default:te(()=>[oe(I(pA),{ref:I(E),role:"menu",as:S.as,"as-child":S.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":I(sA)(I(s).open.value),dir:I(i).dir.value,side:S.side,"side-offset":S.sideOffset,align:S.align,"align-offset":S.alignOffset,"avoid-collisions":S.avoidCollisions,"collision-boundary":S.collisionBoundary,"collision-padding":S.collisionPadding,"arrow-padding":S.arrowPadding,"prioritize-position":S.prioritizePosition,"position-strategy":S.positionStrategy,"update-position-strategy":S.updatePositionStrategy,sticky:S.sticky,"hide-when-detached":S.hideWhenDetached,reference:S.reference,onKeydown:x,onBlur:R,onPointermove:T},{default:te(()=>[Se(S.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),K2=me({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,n=gA(),{forwardRef:r}=et(),{CollectionItem:s}=ys(),i=ve(!1);async function o(l){if(!l.defaultPrevented&&kp(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const u=l.currentTarget;u==null||u.focus({preventScroll:!0})}}}async function a(l){await kt(),!l.defaultPrevented&&kp(l)&&n.onItemLeave(l)}return(l,c)=>(V(),ce(I(s),{value:{textValue:l.textValue}},{default:te(()=>[oe(I(St),Be({ref:I(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:c[0]||(c[0]=async u=>{await kt(),!(u.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:c[1]||(c[1]=async u=>{await kt(),!u.defaultPrevented&&(i.value=!1)})}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),G2=me({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=et(),o=Lg(),a=gA(),l=ve(!1);async function c(){const u=i.value;if(!n.disabled&&u){const d=new CustomEvent(YM,{bubbles:!0,cancelable:!0});r("select",d),await kt(),d.defaultPrevented?l.value=!1:o.onClose()}}return(u,d)=>(V(),ce(K2,Be(n,{ref:I(s),onClick:c,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var h;await kt(),!f.defaultPrevented&&(l.value||(h=f.currentTarget)==null||h.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=I(a).searchRef.value!=="";u.disabled||h&&f.key===" "||I(Ip).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:te(()=>[Se(u.$slots,"default")]),_:3},16))}}),J2=me({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Fl(n,r),i=yd(),{forwardRef:o,currentElement:a}=et();return Og(a),(l,c)=>(V(),ce(yA,Be(I(s),{ref:I(o),"trap-focus":I(i).open.value,"disable-outside-pointer-events":I(i).open.value,"disable-outside-scroll":!0,onDismiss:c[0]||(c[0]=u=>I(i).onOpenChange(!1)),onFocusOutside:c[1]||(c[1]=Ur(u=>r("focusOutside",u),["prevent"]))}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),X2=me({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Fl(t,e),i=yd();return(o,a)=>(V(),ce(yA,Be(I(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>I(i).onOpenChange(!1))}),{default:te(()=>[Se(o.$slots,"default")]),_:3},16))}}),Y2=me({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Fl(t,e),i=yd(),o=Lg();return(a,l)=>(V(),ce(I(Ll),{present:a.forceMount||I(i).open.value},{default:te(()=>[I(o).modal.value?(V(),ce(J2,Rn(Be({key:0},{...a.$attrs,...I(s)})),{default:te(()=>[Se(a.$slots,"default")]),_:3},16)):(V(),ce(X2,Rn(Be({key:1},{...a.$attrs,...I(s)})),{default:te(()=>[Se(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Q2=me({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(V(),ce(I(Pg),Rn(qn(e)),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}}),Z2=me({__name:"MenuAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(n,r)=>(V(),ce(I(fA),Rn(qn(e)),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}}),eF=me({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(V(),ce(I(Pg),Rn(qn(e)),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}}),[bA,tF]=In("DropdownMenuRoot"),nF=me({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;et();const s=xi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=ve(),{modal:o,dir:a}=Zn(n),l=gd(a);return tF({open:s,onOpenChange:c=>{s.value=c},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:o,dir:l}),(c,u)=>(V(),ce(I(z2),{open:I(s),"onUpdate:open":u[0]||(u[0]=d=>Pt(s)?s.value=d:null),dir:I(l),modal:I(o)},{default:te(()=>[Se(c.$slots,"default",{open:I(s)})]),_:3},8,["open","dir","modal"]))}}),rF=me({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=Fl(t,e);et();const i=bA(),o=ve(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{var c;(c=i.triggerElement.value)==null||c.focus()},0),o.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Yo(void 0,"reka-dropdown-menu-content")),(l,c)=>{var u;return V(),ce(I(Y2),Be(I(s),{id:I(i).contentId,"aria-labelledby":(u=I(i))==null?void 0:u.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:c[0]||(c[0]=d=>{var y;if(d.defaultPrevented)return;const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!I(i).modal.value||m)&&(o.value=!0),(y=I(i).triggerElement.value)!=null&&y.contains(d.target)&&d.preventDefault()})}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),sF=me({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,s=Ml(e);return et(),(i,o)=>(V(),ce(I(G2),Rn(qn({...n,...I(s)})),{default:te(()=>[Se(i.$slots,"default")]),_:3},16))}}),iF=me({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(V(),ce(I(Q2),Rn(qn(e)),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}}),oF=me({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=bA(),{forwardRef:r,currentElement:s}=et();return qt(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Yo(void 0,"reka-dropdown-menu-trigger")),(i,o)=>(V(),ce(I(Z2),{"as-child":""},{default:te(()=>[oe(I(St),{id:I(n).triggerId,ref:I(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":I(n).open.value,"aria-controls":I(n).open.value?I(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":I(n).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{var l;!i.disabled&&a.button===0&&a.ctrlKey===!1&&((l=I(n))==null||l.onOpenToggle(),await kt(),I(n).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=og(a=>{i.disabled||(["Enter"," "].includes(a.key)&&I(n).onOpenToggle(),a.key==="ArrowDown"&&I(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:te(()=>[Se(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),aF=me({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(t){const e=t;return et(),(n,r)=>(V(),ce(I(St),Be(e,{onMousedown:r[0]||(r[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}});function Sw(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,t))}const lF=[" ","Enter","ArrowUp","ArrowDown"],cF=[" ","Enter"],$r=10;function _u(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>$p(r,e,n)):$p(t,e,n)}function $p(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):VM(t,e)}function uF(t){return t==null||t===""||Array.isArray(t)&&t.length===0}const dF=me({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(t){const e=t,n=ve();return st(()=>e.value,(r,s)=>{const i=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(i,"value").set;if(r!==s&&a&&n.value){const l=new Event("change",{bubbles:!0});a.call(n.value,r),n.value.dispatchEvent(l)}}),(r,s)=>(V(),ce(I(pd),{"as-child":""},{default:te(()=>[Ee("select",Be({ref_key:"selectElement",ref:n},e),[Se(r.$slots,"default")],16)]),_:3}))}}),fF={key:0,value:""},[no,vA]=In("SelectRoot"),hF=me({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{default:void 0},by:{},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(t,{emit:e}){const n=t,r=e,{required:s,disabled:i,multiple:o,dir:a}=Zn(n),l=xi(n,"modelValue",r,{defaultValue:n.defaultValue??(o.value?[]:void 0),passive:n.modelValue===void 0,deep:!0}),c=xi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),u=ve(),d=ve(),f=ve({x:0,y:0}),h=ne(()=>{var g;return o.value&&Array.isArray(l.value)?((g=l.value)==null?void 0:g.length)===0:bw(l.value)});ys({isProvider:!0});const m=gd(a),y=cA(u),A=ve(new Set),E=ne(()=>Array.from(A.value).map(g=>g.value).join(";"));function _(g){if(o.value){const p=Array.isArray(l.value)?[...l.value]:[],b=p.findIndex(x=>$p(x,g,n.by));b===-1?p.push(g):p.splice(b,1),l.value=[...p]}else l.value=g}return vA({triggerElement:u,onTriggerChange:g=>{u.value=g},valueElement:d,onValueElementChange:g=>{d.value=g},contentId:"",modelValue:l,onValueChange:_,by:n.by,open:c,multiple:o,required:s,onOpenChange:g=>{c.value=g},dir:m,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:h,optionsSet:A,onOptionAdd:g=>A.value.add(g),onOptionRemove:g=>A.value.delete(g)}),(g,p)=>(V(),ce(I(dA),null,{default:te(()=>[Se(g.$slots,"default",{modelValue:I(l),open:I(c)}),I(y)?(V(),ce(dF,{key:E.value,"aria-hidden":"true",tabindex:"-1",multiple:I(o),required:I(s),name:g.name,autocomplete:g.autocomplete,disabled:I(i),value:I(l)},{default:te(()=>[I(bw)(I(l))?(V(),Te("option",fF)):ze("",!0),(V(!0),Te(Ze,null,er(Array.from(A.value),b=>(V(),Te("option",Be({key:b.value??"",ref_for:!0},b),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):ze("",!0)]),_:3}))}}),[pF,mF]=In("SelectItemAlignedPosition"),gF=me({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(t,{emit:e}){const n=t,r=e,{getItems:s}=ys(),i=no(),o=bd(),a=ve(!1),l=ve(!0),c=ve(),{forwardRef:u,currentElement:d}=et(),{viewport:f,selectedItem:h,selectedItemText:m,focusSelectedItem:y}=o;function A(){if(i.triggerElement.value&&i.valueElement.value&&c.value&&d.value&&(f!=null&&f.value)&&(h!=null&&h.value)&&(m!=null&&m.value)){const g=i.triggerElement.value.getBoundingClientRect(),p=d.value.getBoundingClientRect(),b=i.valueElement.value.getBoundingClientRect(),x=m.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const $=x.left-p.left,X=b.left-$,ie=g.left-X,ee=g.width+ie,we=Math.max(ee,p.width),Ae=window.innerWidth-$r,D=Sw(X,$r,Math.max($r,Ae-we));c.value.style.minWidth=`${ee}px`,c.value.style.left=`${D}px`}else{const $=p.right-x.right,X=window.innerWidth-b.right-$,ie=window.innerWidth-g.right-X,ee=g.width+ie,we=Math.max(ee,p.width),Ae=window.innerWidth-$r,D=Sw(X,$r,Math.max($r,Ae-we));c.value.style.minWidth=`${ee}px`,c.value.style.right=`${D}px`}const R=s().map($=>$.ref),T=window.innerHeight-$r*2,S=f.value.scrollHeight,C=window.getComputedStyle(d.value),M=Number.parseInt(C.borderTopWidth,10),P=Number.parseInt(C.paddingTop,10),j=Number.parseInt(C.borderBottomWidth,10),L=Number.parseInt(C.paddingBottom,10),Y=M+P+S+L+j,O=Math.min(h.value.offsetHeight*5,Y),q=window.getComputedStyle(f.value),B=Number.parseInt(q.paddingTop,10),re=Number.parseInt(q.paddingBottom,10),z=g.top+g.height/2-$r,ae=T-z,fe=h.value.offsetHeight/2,pe=h.value.offsetTop+fe,xe=M+P+pe,K=Y-xe;if(xe<=z){const $=h.value===R[R.length-1];c.value.style.bottom="0px";const X=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,ie=Math.max(ae,fe+($?re:0)+X+j),ee=xe+ie;c.value.style.height=`${ee}px`}else{const $=h.value===R[0];c.value.style.top="0px";const ie=Math.max(z,M+f.value.offsetTop+($?B:0)+fe)+K;c.value.style.height=`${ie}px`,f.value.scrollTop=xe-z+f.value.offsetTop}c.value.style.margin=`${$r}px 0`,c.value.style.minHeight=`${O}px`,c.value.style.maxHeight=`${T}px`,r("placed"),requestAnimationFrame(()=>a.value=!0)}}const E=ve("");qt(async()=>{await kt(),A(),d.value&&(E.value=window.getComputedStyle(d.value).zIndex)});function _(g){g&&l.value===!0&&(A(),y==null||y(),l.value=!1)}return BM(i.triggerElement,()=>{A()}),mF({contentWrapper:c,shouldExpandOnScrollRef:a,onScrollButtonChange:_}),(g,p)=>(V(),Te("div",{ref_key:"contentWrapperElement",ref:c,style:fs({display:"flex",flexDirection:"column",position:"fixed",zIndex:E.value})},[oe(I(St),Be({ref:I(u),style:{boxSizing:"border-box",maxHeight:"100%"}},{...g.$attrs,...n}),{default:te(()=>[Se(g.$slots,"default")]),_:3},16)],4))}}),yF=me({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:$r},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},setup(t){const n=$g(t);return(r,s)=>(V(),ce(I(pA),Be(I(n),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:te(()=>[Se(r.$slots,"default")]),_:3},16))}}),bF={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[bd,wA]=In("SelectContent"),vF=me({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=no();mA(),Dg(n.bodyLock);const{CollectionSlot:i,getItems:o}=ys(),a=ve();Og(a);const{search:l,handleTypeaheadSearch:c}=Ng(),u=ve(),d=ve(),f=ve(),h=ve(!1),m=ve(!1),y=ve(!1);function A(){d.value&&a.value&&Cp([d.value,a.value])}st(h,()=>{A()});const{onOpenChange:E,triggerPointerDownPosRef:_}=s;$t(x=>{if(!a.value)return;let R={x:0,y:0};const T=C=>{var M,P;R={x:Math.abs(Math.round(C.pageX)-(((M=_.value)==null?void 0:M.x)??0)),y:Math.abs(Math.round(C.pageY)-(((P=_.value)==null?void 0:P.y)??0))}},S=C=>{var M;C.pointerType!=="touch"&&(R.x<=10&&R.y<=10?C.preventDefault():(M=a.value)!=null&&M.contains(C.target)||E(!1),document.removeEventListener("pointermove",T),_.value=null)};_.value!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",S,{capture:!0,once:!0})),x(()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",S,{capture:!0})})});function g(x){const R=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!R&&x.key.length===1&&c(x.key,o()),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let S=[...o().map(C=>C.ref)];if(["ArrowUp","End"].includes(x.key)&&(S=S.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const C=x.target,M=S.indexOf(C);S=S.slice(M+1)}setTimeout(()=>Cp(S)),x.preventDefault()}}const p=ne(()=>n.position==="popper"?n:{}),b=$g(p.value);return wA({content:a,viewport:u,onViewportChange:x=>{u.value=x},itemRefCallback:(x,R,T)=>{const S=!m.value&&!T,C=_u(s.modelValue.value,R,s.by);if(s.multiple.value){if(y.value)return;(C||S)&&(d.value=x,C&&(y.value=!0))}else(C||S)&&(d.value=x);S&&(m.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{var x;(x=a.value)==null||x.focus()},itemTextRefCallback:(x,R,T)=>{const S=!m.value&&!T;(_u(s.modelValue.value,R,s.by)||S)&&(f.value=x)},focusSelectedItem:A,position:n.position,isPositioned:h,searchRef:l}),(x,R)=>(V(),ce(I(i),null,{default:te(()=>[oe(I(Ig),{"as-child":"",onMountAutoFocus:R[6]||(R[6]=Ur(()=>{},["prevent"])),onUnmountAutoFocus:R[7]||(R[7]=T=>{var S;r("closeAutoFocus",T),!T.defaultPrevented&&((S=I(s).triggerElement.value)==null||S.focus({preventScroll:!0}),T.preventDefault())})},{default:te(()=>[oe(I(kg),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:R[2]||(R[2]=Ur(()=>{},["prevent"])),onDismiss:R[3]||(R[3]=T=>I(s).onOpenChange(!1)),onEscapeKeyDown:R[4]||(R[4]=T=>r("escapeKeyDown",T)),onPointerDownOutside:R[5]||(R[5]=T=>r("pointerDownOutside",T))},{default:te(()=>[(V(),ce(ps(x.position==="popper"?yF:gF),Be({...x.$attrs,...I(b)},{id:I(s).contentId,ref:T=>{a.value=I(Cr)(T)},role:"listbox","data-state":I(s).open.value?"open":"closed",dir:I(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:R[0]||(R[0]=Ur(()=>{},["prevent"])),onPlaced:R[1]||(R[1]=T=>h.value=!0),onKeydown:g}),{default:te(()=>[Se(x.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3})]),_:3}))}}),wF=me({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(t){return vA(t.context),wA(bF),(n,r)=>Se(n.$slots,"default")}}),_F={key:1},xF=me({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,s=Fl(n,e),i=no(),o=ve();qt(()=>{o.value=new DocumentFragment});const a=ve(),l=ne(()=>n.forceMount||i.open.value),c=ve(l.value);return st(l,()=>{setTimeout(()=>c.value=l.value)}),(u,d)=>{var f;return l.value||c.value||(f=a.value)!=null&&f.present?(V(),ce(I(Ll),{key:0,ref_key:"presenceRef",ref:a,present:l.value},{default:te(()=>[oe(vF,Rn(qn({...I(s),...u.$attrs})),{default:te(()=>[Se(u.$slots,"default")]),_:3},16)]),_:3},8,["present"])):o.value?(V(),Te("div",_F,[(V(),ce(ed,{to:o.value},[oe(wF,{context:I(i)},{default:te(()=>[Se(u.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):ze("",!0)}}}),EF=me({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(V(),ce(I(St),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:te(()=>[Se(e.$slots,"default",{},()=>[n[0]||(n[0]=nt("▼"))])]),_:3},8,["as","as-child"]))}}),[AF,SF]=In("SelectItem"),TF=me({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=Zn(n),i=no(),o=bd(),{forwardRef:a,currentElement:l}=et(),{CollectionItem:c}=ys(),u=ne(()=>{var p;return _u((p=i.modelValue)==null?void 0:p.value,n.value,i.by)}),d=ve(!1),f=ve(n.textValue??""),h=Yo(void 0,"reka-select-item-text"),m="select.select";async function y(p){if(p.defaultPrevented)return;const b={originalEvent:p,value:n.value};Cg(m,A,b)}async function A(p){await kt(),r("select",p),!p.defaultPrevented&&(s.value||(i.onValueChange(n.value),i.multiple.value||i.onOpenChange(!1)))}async function E(p){var b,x;await kt(),!p.defaultPrevented&&(s.value?(b=o.onItemLeave)==null||b.call(o):(x=p.currentTarget)==null||x.focus({preventScroll:!0}))}async function _(p){var b;await kt(),!p.defaultPrevented&&p.currentTarget===dn()&&((b=o.onItemLeave)==null||b.call(o))}async function g(p){var x;await kt(),!(p.defaultPrevented||((x=o.searchRef)==null?void 0:x.value)!==""&&p.key===" ")&&(cF.includes(p.key)&&y(p),p.key===" "&&p.preventDefault())}if(n.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return qt(()=>{l.value&&o.itemRefCallback(l.value,n.value,n.disabled)}),SF({value:n.value,disabled:s,textId:h,isSelected:u,onItemTextChange:p=>{f.value=((f.value||(p==null?void 0:p.textContent))??"").trim()}}),(p,b)=>(V(),ce(I(c),{value:{textValue:f.value}},{default:te(()=>[oe(I(St),{ref:I(a),role:"option","aria-labelledby":I(h),"data-highlighted":d.value?"":void 0,"aria-selected":u.value,"data-state":u.value?"checked":"unchecked","aria-disabled":I(s)||void 0,"data-disabled":I(s)?"":void 0,tabindex:I(s)?void 0:-1,as:p.as,"as-child":p.asChild,onFocus:b[0]||(b[0]=x=>d.value=!0),onBlur:b[1]||(b[1]=x=>d.value=!1),onPointerup:y,onPointerdown:b[2]||(b[2]=x=>{x.currentTarget.focus({preventScroll:!0})}),onTouchend:b[3]||(b[3]=Ur(()=>{},["prevent","stop"])),onPointermove:E,onPointerleave:_,onKeydown:g},{default:te(()=>[Se(p.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),RF=me({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,n=no(),r=bd(),s=AF(),{forwardRef:i,currentElement:o}=et(),a=ne(()=>{var l,c;return{value:s.value,disabled:s.disabled.value,textContent:((l=o.value)==null?void 0:l.textContent)??((c=s.value)==null?void 0:c.toString())??""}});return qt(()=>{o.value&&(s.onItemTextChange(o.value),r.itemTextRefCallback(o.value,s.value,s.disabled.value),n.onOptionAdd(a.value))}),Vn(()=>{n.onOptionRemove(a.value)}),(l,c)=>(V(),ce(I(St),Be({id:I(s).textId,ref:I(i)},{...e,...l.$attrs}),{default:te(()=>[Se(l.$slots,"default")]),_:3},16,["id"]))}}),IF=me({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(V(),ce(I(Pg),Rn(qn(e)),{default:te(()=>[Se(n.$slots,"default")]),_:3},16))}}),CF=me({__name:"SelectTrigger",props:{disabled:{type:Boolean},reference:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=no(),{forwardRef:r,currentElement:s}=et(),i=ne(()=>{var f;return((f=n.disabled)==null?void 0:f.value)||e.disabled});n.contentId||(n.contentId=Yo(void 0,"reka-select-content")),qt(()=>{n.onTriggerChange(s.value)});const{getItems:o}=ys(),{search:a,handleTypeaheadSearch:l,resetTypeahead:c}=Ng();function u(){i.value||(n.onOpenChange(!0),c())}function d(f){u(),n.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,h)=>(V(),ce(I(fA),{"as-child":"",reference:f.reference},{default:te(()=>{var m,y,A,E;return[oe(I(St),{ref:I(r),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":I(n).contentId,"aria-expanded":I(n).open.value||!1,"aria-required":(m=I(n).required)==null?void 0:m.value,"aria-autocomplete":"none",disabled:i.value,dir:(y=I(n))==null?void 0:y.dir.value,"data-state":(A=I(n))!=null&&A.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":I(uF)((E=I(n).modelValue)==null?void 0:E.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:h[0]||(h[0]=_=>{var g;(g=_==null?void 0:_.currentTarget)==null||g.focus()}),onPointerdown:h[1]||(h[1]=_=>{if(_.pointerType==="touch")return _.preventDefault();const g=_.target;g.hasPointerCapture(_.pointerId)&&g.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&(d(_),_.preventDefault())}),onPointerup:h[2]||(h[2]=Ur(_=>{_.pointerType==="touch"&&d(_)},["prevent"])),onKeydown:h[3]||(h[3]=_=>{const g=I(a)!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&g&&_.key===" "||(I(l)(_.key,I(o)()),I(lF).includes(_.key)&&(u(),_.preventDefault()))})},{default:te(()=>[Se(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3},8,["reference"]))}}),Tw=me({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,{forwardRef:n,currentElement:r}=et(),s=no();qt(()=>{s.valueElement=r});const i=ne(()=>{var u;let a=[];const l=Array.from(s.optionsSet.value),c=d=>l.find(f=>_u(d,f.value,s.by));return Array.isArray(s.modelValue.value)?a=s.modelValue.value.map(d=>{var f;return((f=c(d))==null?void 0:f.textContent)??""}):a=[((u=c(s.modelValue.value))==null?void 0:u.textContent)??""],a.filter(Boolean)}),o=ne(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(V(),ce(I(St),{ref:I(n),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:te(()=>[Se(a.$slots,"default",{selectedLabel:i.value,modelValue:I(s).modelValue.value},()=>[nt(Ne(o.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),kF=me({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{nonce:n}=Zn(e),r=U2(n),s=bd(),i=s.position==="item-aligned"?pF():void 0,{forwardRef:o,currentElement:a}=et();qt(()=>{s==null||s.onViewportChange(a.value)});const l=ve(0);function c(u){const d=u.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:h}=i??{};if(f!=null&&f.value&&(h!=null&&h.value)){const m=Math.abs(l.value-d.scrollTop);if(m>0){const y=window.innerHeight-$r*2,A=Number.parseFloat(h.value.style.minHeight),E=Number.parseFloat(h.value.style.height),_=Math.max(A,E);if(_<y){const g=_+m,p=Math.min(y,g),b=g-p;h.value.style.height=`${p}px`,h.value.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(u,d)=>(V(),Te(Ze,null,[oe(I(St),Be({ref:I(o),"data-reka-select-viewport":"",role:"presentation"},{...u.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:c}),{default:te(()=>[Se(u.$slots,"default")]),_:3},16),oe(I(St),{as:"style",nonce:I(r)},{default:te(()=>d[0]||(d[0]=[nt(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1},8,["nonce"])],64))}}),[OF,DF]=In("SwitchRoot"),PF=me({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=Zn(n),i=xi(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){s.value||(i.value=!i.value)}const{forwardRef:a,currentElement:l}=et(),c=cA(l),u=ne(()=>{var d;return n.id&&l.value?(d=document.querySelector(`[for="${n.id}"]`))==null?void 0:d.innerText:void 0});return DF({modelValue:i,toggleCheck:o,disabled:s}),(d,f)=>(V(),ce(I(St),Be(d.$attrs,{id:d.id,ref:I(a),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||u.value,"aria-checked":I(i),"aria-required":d.required,"data-state":I(i)?"checked":"unchecked","data-disabled":I(s)?"":void 0,"as-child":d.asChild,as:d.as,disabled:I(s),onClick:o,onKeydown:og(Ur(o,["prevent"]),["enter"])}),{default:te(()=>[Se(d.$slots,"default",{modelValue:I(i)}),I(c)&&d.name?(V(),ce(I(D2),{key:0,type:"checkbox",name:d.name,disabled:I(s),required:d.required,value:d.value,checked:!!I(i)},null,8,["name","disabled","required","value","checked"])):ze("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),$F=me({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=OF();return et(),(n,r)=>{var s;return V(),ce(I(St),{"data-state":(s=I(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":I(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:te(()=>[Se(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),NF=me({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(V(),ce(I(St),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:te(()=>[Se(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),[vd,LF]=In("ToastProvider"),MF=me({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(t){const e=t,{label:n,duration:r,swipeDirection:s,swipeThreshold:i}=Zn(e);ys({isProvider:!0});const o=ve(),a=ve(0),l=ve(!1),c=ve(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const u="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(u)}return LF({label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:a,viewport:o,onViewportChange(u){o.value=u},onToastAdd(){a.value++},onToastRemove(){a.value--},isFocusedToastEscapeKeyDownRef:l,isClosePausedRef:c}),(u,d)=>Se(u.$slots,"default")}}),FF=me({__name:"ToastAnnounce",setup(t){const e=vd(),n=LM(1e3),r=ve(!1);return tA(()=>{r.value=!0}),(s,i)=>I(n)||r.value?(V(),ce(I(pd),{key:0},{default:te(()=>[nt(Ne(I(e).label.value)+" ",1),Se(s.$slots,"default")]),_:3})):ze("",!0)}}),jF="toast.swipeStart",UF="toast.swipeMove",BF="toast.swipeCancel",HF="toast.swipeEnd",Np="toast.viewportPause",Lp="toast.viewportResume";function mc(t,e,n){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function Rw(t,e,n=0){const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n}function VF(t){return t.nodeType===t.ELEMENT_NODE}function _A(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.rekaToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.rekaToastAnnounceAlt;o&&e.push(o)}else e.push(..._A(r))}}),e}const[qF,zF]=In("ToastRoot"),WF=me({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=et(),{CollectionItem:o}=ys(),a=vd(),l=ve(null),c=ve(null),u=ne(()=>typeof n.duration=="number"?n.duration:a.duration.value),d=ve(0),f=ve(u.value),h=ve(0),m=ve(u.value),y=tA(()=>{const g=new Date().getTime()-d.value;m.value=Math.max(f.value-g,0)},{fpsLimit:60});function A(g){g<=0||g===Number.POSITIVE_INFINITY||gs&&(window.clearTimeout(h.value),d.value=new Date().getTime(),h.value=window.setTimeout(E,g))}function E(g){var x,R;const p=(g==null?void 0:g.pointerType)==="";((x=i.value)==null?void 0:x.contains(dn()))&&p&&((R=a.viewport.value)==null||R.focus()),p&&(a.isClosePausedRef.value=!1),r("close")}const _=ne(()=>i.value?_A(i.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const g="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(g)}return $t(g=>{const p=a.viewport.value;if(p){const b=()=>{A(f.value),y.resume(),r("resume")},x=()=>{const R=new Date().getTime()-d.value;f.value=f.value-R,window.clearTimeout(h.value),y.pause(),r("pause")};return p.addEventListener(Np,x),p.addEventListener(Lp,b),()=>{p.removeEventListener(Np,x),p.removeEventListener(Lp,b)}}}),st(()=>[n.open,u.value],()=>{f.value=u.value,n.open&&!a.isClosePausedRef.value&&A(u.value)},{immediate:!0}),Tg("Escape",g=>{r("escapeKeyDown",g),g.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,E())}),qt(()=>{a.onToastAdd()}),Vn(()=>{a.onToastRemove()}),zF({onClose:E}),(g,p)=>(V(),Te(Ze,null,[_.value?(V(),ce(FF,{key:0,role:"alert","aria-live":g.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:te(()=>[nt(Ne(_.value),1)]),_:1},8,["aria-live"])):ze("",!0),I(a).viewport.value?(V(),ce(ed,{key:1,to:I(a).viewport.value},[oe(I(o),null,{default:te(()=>[oe(I(St),Be({ref:I(s),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},g.$attrs,{as:g.as,"as-child":g.asChild,"data-state":g.open?"open":"closed","data-swipe-direction":I(a).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:p[0]||(p[0]=Ur(b=>{l.value={x:b.clientX,y:b.clientY}},["left"])),onPointermove:p[1]||(p[1]=b=>{if(!l.value)return;const x=b.clientX-l.value.x,R=b.clientY-l.value.y,T=!!c.value,S=["left","right"].includes(I(a).swipeDirection.value),C=["left","up"].includes(I(a).swipeDirection.value)?Math.min:Math.max,M=S?C(0,x):0,P=S?0:C(0,R),j=b.pointerType==="touch"?10:2,L={x:M,y:P},Y={originalEvent:b,delta:L};T?(c.value=L,I(mc)(I(UF),O=>r("swipeMove",O),Y)):I(Rw)(L,I(a).swipeDirection.value,j)?(c.value=L,I(mc)(I(jF),O=>r("swipeStart",O),Y),b.target.setPointerCapture(b.pointerId)):(Math.abs(x)>j||Math.abs(R)>j)&&(l.value=null)}),onPointerup:p[2]||(p[2]=b=>{const x=c.value,R=b.target;if(R.hasPointerCapture(b.pointerId)&&R.releasePointerCapture(b.pointerId),c.value=null,l.value=null,x){const T=b.currentTarget,S={originalEvent:b,delta:x};I(Rw)(x,I(a).swipeDirection.value,I(a).swipeThreshold.value)?I(mc)(I(HF),C=>r("swipeEnd",C),S):I(mc)(I(BF),C=>r("swipeCancel",C),S),T==null||T.addEventListener("click",C=>C.preventDefault(),{once:!0})}})}),{default:te(()=>[Se(g.$slots,"default",{remaining:m.value,duration:u.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])]),_:3})],8,["to"])):ze("",!0)],64))}}),KF=me({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=qF(),{forwardRef:r}=et();return(s,i)=>(V(),ce(NF,{"as-child":""},{default:te(()=>[oe(I(St),Be(e,{ref:I(r),type:s.as==="button"?"button":void 0,onClick:I(n).onClose}),{default:te(()=>[Se(s.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),GF=me({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s}=et(),i=xi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(o,a)=>(V(),ce(I(Ll),{present:o.forceMount||I(i)},{default:te(()=>[oe(WF,Be({ref:I(s),open:I(i),type:o.type,as:o.as,"as-child":o.asChild,duration:o.duration},o.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>r("pause")),onResume:a[2]||(a[2]=l=>r("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>r("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{r("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(r("swipeMove",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${u}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(r("swipeCancel",l),!l.defaultPrevented){const c=l.currentTarget;c.setAttribute("data-swipe","cancel"),c.style.removeProperty("--reka-toast-swipe-move-x"),c.style.removeProperty("--reka-toast-swipe-move-y"),c.style.removeProperty("--reka-toast-swipe-end-x"),c.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(r("swipeEnd",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${u}px`),i.value=!1}})}),{default:te(({remaining:l,duration:c})=>[Se(o.$slots,"default",{remaining:l,duration:c,open:I(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),Iw=me({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(t,{emit:e}){const n=e,r=vd();return(s,i)=>(V(),ce(I(pd),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=o=>{var c;const a=o.relatedTarget;!((c=I(r).viewport.value)!=null&&c.contains(a))&&n("focusFromOutsideViewport")})},{default:te(()=>[Se(s.$slots,"default")]),_:3}))}}),JF=me({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=et();return qt(()=>{Pr.branches.add(r.value)}),Vn(()=>{Pr.branches.delete(r.value)}),(s,i)=>(V(),ce(I(St),Be({ref:I(n)},e),{default:te(()=>[Se(s.$slots,"default")]),_:3},16))}}),XF=me({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(t){const e=t,{hotkey:n,label:r}=Zn(e),{forwardRef:s,currentElement:i}=et(),{CollectionSlot:o,getItems:a}=ys(),l=vd(),c=ne(()=>l.toastCount.value>0),u=ve(),d=ve(),f=ne(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));Tg(n.value,()=>{i.value.focus()}),qt(()=>{l.onViewportChange(i.value)}),$t(m=>{const y=i.value;if(c.value&&y){const A=()=>{if(!l.isClosePausedRef.value){const b=new CustomEvent(Np);y.dispatchEvent(b),l.isClosePausedRef.value=!0}},E=()=>{if(l.isClosePausedRef.value){const b=new CustomEvent(Lp);y.dispatchEvent(b),l.isClosePausedRef.value=!1}},_=b=>{!y.contains(b.relatedTarget)&&E()},g=()=>{y.contains(dn())||E()},p=b=>{var T,S,C;const x=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!x){const M=dn(),P=b.shiftKey;if(b.target===y&&P){(T=u.value)==null||T.focus();return}const Y=h({tabbingDirection:P?"backwards":"forwards"}),O=Y.findIndex(q=>q===M);Uc(Y.slice(O+1))?b.preventDefault():P?(S=u.value)==null||S.focus():(C=d.value)==null||C.focus()}};y.addEventListener("focusin",A),y.addEventListener("focusout",_),y.addEventListener("pointermove",A),y.addEventListener("pointerleave",g),y.addEventListener("keydown",p),window.addEventListener("blur",A),window.addEventListener("focus",E),m(()=>{y.removeEventListener("focusin",A),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",A),y.removeEventListener("pointerleave",g),y.removeEventListener("keydown",p),window.removeEventListener("blur",A),window.removeEventListener("focus",E)})}});function h({tabbingDirection:m}){const A=a().map(E=>E.ref).map(E=>{const _=[E,...Rg(E)];return m==="forwards"?_:_.reverse()});return(m==="forwards"?A.reverse():A).flat()}return(m,y)=>(V(),ce(I(JF),{role:"region","aria-label":typeof I(r)=="string"?I(r).replace("{hotkey}",f.value):I(r)(f.value),tabindex:"-1",style:fs({pointerEvents:c.value?void 0:"none"})},{default:te(()=>[c.value?(V(),ce(Iw,{key:0,ref:A=>{u.value=I(Cr)(A)},onFocusFromOutsideViewport:y[0]||(y[0]=()=>{const A=h({tabbingDirection:"forwards"});I(Uc)(A)})},null,512)):ze("",!0),oe(I(o),null,{default:te(()=>[oe(I(St),Be({ref:I(s),tabindex:"-1",as:m.as,"as-child":m.asChild},m.$attrs),{default:te(()=>[Se(m.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),c.value?(V(),ce(Iw,{key:1,ref:A=>{d.value=I(Cr)(A)},onFocusFromOutsideViewport:y[1]||(y[1]=()=>{const A=h({tabbingDirection:"backwards"});I(Uc)(A)})},null,512)):ze("",!0)]),_:3},8,["aria-label","style"]))}});var YF=Object.defineProperty,QF=(t,e,n)=>e in t?YF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e,n)=>QF(t,typeof e!="symbol"?e+"":e,n);class Mp extends cr{constructor(e,n){super(`Service '${e}' failed booting`,{cause:n})}}function Mg(){return Mr.namespace??am(Mr.name)}let Fg=null;function xA(){return Fg??ZF()}function ZF(){return Fe(C$(),t=>{Fg=t,Dl(t)})}function ej(){return Fg??xA()}function tj(t,e){return xA(),N$(t,e)()}function ro(t){var e;return e=class extends wd{usesStore(){return!0}getName(){return t.name??null}getInitialState(){return typeof t.initialState=="function"?t.initialState():Object.entries(t.initialState).reduce((n,[r,s])=>{try{s=structuredClone(s)}catch{console.warn(`Could not clone '${r}' state from ${this.getName()} service, this may cause problems if you're using multiple instances of the service (for example, in unit tests).
To fix this problem, declare your initialState as a function instead.`)}return n[r]=s,n},{})}getComputedStateDefinition(){return t.computed??{}}getStateWatchers(){return t.watch??{}}serializePersistedState(n){var r;return((r=t.serialize)==null?void 0:r.call(t,n))??n}deserializePersistedState(n){var r;return((r=t.restore)==null?void 0:r.call(t,n))??n}},pt(e,"persist",t.persist??[]),e}var lh;let wd=(lh=class extends qc{constructor(){super(),pt(this,"_name"),pt(this,"_booted"),pt(this,"_computedStateKeys"),pt(this,"_watchers"),pt(this,"_store");const t=this.getComputedStateDefinition();this._name=this.getName()??new.target.name,this._booted=new rs,this._computedStateKeys=new Set(Object.keys(t)),this._watchers=this.getStateWatchers(),this._store=this.usesStore()&&tj(this._name,{state:()=>this.getInitialState(),getters:t})}get booted(){return this._booted}static(t){return super.static(t)}launch(){const t=e=>this._booted.reject(new Mp(this._name,e));try{this.frameworkBoot().then(()=>this.boot()).then(()=>this._booted.resolve()).catch(t)}catch(e){t(e)}return this._booted}hasPersistedState(){return pr.has(this.storageKey)}hasState(t){return this._store?t in this._store.$state||this._computedStateKeys.has(t):!1}getState(t){const e=this._store;return t?e?e[t]:void 0:e||{}}setState(t,e){if(!this._store)return;const n=typeof t=="string"?{[t]:e}:t,r=ii(this._store.$state,Object.keys(n));Object.assign(this._store.$state,n),this.onStateUpdated(n,r)}updatePersistedState(t){if(!this._store)return;const e=gn(t),n=ii(this._store.$state,e);Fa(n)||this.onPersistentStateUpdated(n)}__get(t){return this.hasState(t)?this.getState(t):super.__get(t)}__set(t,e){this.setState({[t]:e})}get storageKey(){return`${Mg()}:${this._name}`}onStateUpdated(t,e){const n=ii(t,this.static("persist"));Fa(n)||this.onPersistentStateUpdated(n);for(const r in t){const s=this._watchers[r];!s||t[r]===e[r]||s.call(this,t[r],e[r])}}onPersistentStateUpdated(t){const e=pr.get(this.storageKey);e&&pr.set(this.storageKey,{...e,...this.serializePersistedState(Nr(t))})}usesStore(){return!1}getName(){return null}getInitialState(){return{}}getComputedStateDefinition(){return{}}getStateWatchers(){return{}}serializePersistedState(t){return t}deserializePersistedState(t){return t}async frameworkBoot(){this.restorePersistedState()}async boot(){}restorePersistedState(){if(!(!this.usesStore()||Fa(this.static("persist")))){if(pr.has(this.storageKey)){const t=pr.require(this.storageKey);this.setState(this.deserializePersistedState(t));return}pr.set(this.storageKey,ii(this.getState(),this.static("persist")))}}requireStore(){return this._store?this._store:We(`Failed getting '${this._name}' store`)}},pt(lh,"persist",[]),lh);class nj extends wd{constructor(){super(...arguments),pt(this,"listeners",{})}async boot(){Object.entries(globalThis.__aerogelEvents__??{}).forEach(([e,n])=>this.on(e,n))}async emit(e,n){var r;const s=this.listeners[e]??{priorities:[],handlers:{}};for(const i of s.priorities)await Promise.all(((r=s.handlers[i])==null?void 0:r.map(o=>o(n)))??[])}on(e,n,r){const s=typeof n=="function"?{}:typeof n=="number"?{priority:n}:n,i=typeof n=="function"?n:r;return this.registerListener(e,s,i),()=>this.off(e,i)}once(e,n,r){let s=null;const i=typeof n=="function"?{}:n,o=typeof n=="function"?n:r;return Fe(()=>s&&this.off(e,s),a=>{s=(...l)=>(a(),o(...l)),this.registerListener(e,i,o)})}off(e,n){var r;const s=this.listeners[e];if(!s)return;const i=[...s.priorities];for(const o of i)Yn(s.handlers[o]??[],n),((r=s.handlers[o])==null?void 0:r.length)===0&&(delete s.handlers[o],Yn(s.priorities,o));s.priorities.length===0&&delete this.listeners[e]}registerListener(e,n,r){var s,i,o;const a=n.priority??0;e in this.listeners||(this.listeners[e]={priorities:[],handlers:{}});const l=((s=this.listeners[e])==null?void 0:s.priorities)??We(`priorities missing for event '${e}'`),c=((i=this.listeners[e])==null?void 0:i.handlers)??We(`handlers missing for event '${e}'`);l.includes(a)||(l.push(a),l.sort((u,d)=>d-u),c[a]=[]),(o=c[a])==null||o.push(r)}}const qe=Gr(nj);const rj=ro({name:"app",initialState:{plugins:{},instance:null,environment:ku()??"development",version:Mr.version,sourceUrl:Mr.sourceUrl,settings:[]},computed:{development:t=>t.environment==="development",staging:t=>t.environment==="staging",testing:t=>t.environment==="test"||t.environment==="testing",versionName(t){return this.development?"dev."+Mr.sourceHash.toString().substring(0,7):this.staging?"staging."+Mr.sourceHash.toString().substring(0,7):`v${t.version}`},versionUrl(t){return t.sourceUrl+(this.development||this.staging?`/tree/${Mr.sourceHash}`:`/releases/tag/${this.versionName}`)}}});class sj extends rj{constructor(){super(...arguments),pt(this,"name",Mr.name),pt(this,"ready",new rs),pt(this,"mounted",new rs)}isReady(){return this.ready.isResolved()}isMounted(){return this.mounted.isResolved()}addSetting(e){this.settings.push(ot(e))}async whenReady(e){return await this.ready.then(e)}async reload(e){e&&oR(e),location.reload(),await rR()}plugin(e){return this.plugins[e]??null}service(e){var n;return((n=this.instance)==null?void 0:n.config.globalProperties[e])??null}async boot(){qe.once("application-ready",()=>this.ready.resolve()),qe.once("application-mounted",()=>this.mounted.resolve())}}const ut=Gr(sj);async function ij(t,...e){ut.setState("plugins",t.reduce((n,r)=>(r.name&&(n[r.name]=r),n),{})),await Promise.all(t.map(n=>n.install(...e))??[])}function oj(t){return Object.entries(t.props??{}).reduce((e,[n,r])=>e+`${n}="${Ct(r)}"`,"")}function aj(t){const e=Vt(t);return e?Tr(e):void 0}function Cn(t,e){return aj(t)??We(e??`Could not resolve '${Ct(t)}' injection key`)}function lj(t,e){return Vt(t)??We(`Could not resolve '${Ct(t)}' injection key`)}function EA(t){return typeof t=="string"?t:t.type===Bt?"":t.type===is||t.type===gi?t.children:t.type==="br"?`

`:`<${t.type} ${oj(t)}>${Array.from(t.children).map(EA).join("")}</${t.type}>`}const ch=new WeakMap,cj={mounted(t,{value:e,modifiers:n}){const r=typeof e=="function"?e:null,s=()=>{const i=t.getBoundingClientRect();n.css&&(t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("--height",`${i.height}px`)),r==null||r({width:i.width,height:i.height})};n.watch&&ch.set(t,Fe(new ResizeObserver(s)).observe(t)),s()},unmounted(t){var e;(e=ch.get(t))==null||e.unobserve(t),ch.delete(t)}};function AA(t,e){const{baseClasses:n,...r}=t,{baseClasses:s,...i}=e,o=UN(s,i);return Ht(o(r),I(n))}function Ht(...t){return wL(DE(t))}function jg(t,e){const n=qe.on(t,e);Vn(()=>n())}const uj={required:t=>t?void 0:"required"};function dj(t,e){var n;if(t==null)return!0;switch(e.type){case"string":return typeof t=="string";case"enum":return!!((n=e.values)!=null&&n.includes(t));case"number":return typeof t=="number";case"boolean":return typeof t=="boolean";case"date":return t instanceof Date;case"object":return typeof t=="object"}}const Fp={...uj};function fj(t,e){Fp[t]=e}function hj(t,e){return dj(t,e)?[]:["invalid_value"]}function pj(t,e){var n;const r=(n=Fp[e])==null?void 0:n.call(Fp,t);return r?gn(r):[]}const Cw=new WeakMap;class mj extends qc{constructor(e){super(),pt(this,"errors"),pt(this,"_fields"),pt(this,"_data"),pt(this,"_submitted"),pt(this,"_errors"),pt(this,"_listeners",{}),this._fields=e,this._submitted=ve(!1),this._data=this.getInitialData(e),this._errors=this.getInitialErrors(e),Cw.set(this,ne(()=>!Object.values(this._errors).some(n=>n!==null))),this.errors=hs(this._errors)}get valid(){var e;return!!((e=Cw.get(this))!=null&&e.value)}get submitted(){return this._submitted.value}setFieldValue(e,n){const r=this._fields[e]??We(`Trying to set undefined '${Ct(e)}' field`);this._data[e]=r.type==="string"&&(r.trim??!0)?Ct(n).trim():n,this._submitted.value&&this.validate()}getFieldValue(e){return this._data[e]}getFieldRules(e){var n,r;return((r=(n=this._fields[e])==null?void 0:n.rules)==null?void 0:r.split("|"))??[]}getFieldType(e){var n;return((n=this._fields[e])==null?void 0:n.type)??null}data(){return{...this._data}}validate(){const e=Object.entries(this._fields).reduce((n,[r,s])=>(n[r]=this.getFieldErrors(r,s),n),{});return this.resetErrors(e),this.valid}reset(e={}){this._submitted.value=!1,e.keepData||this.resetData(),e.keepErrors||this.resetErrors()}submit(){var e;this._submitted.value=!0;const n=this.validate();return n&&((e=this._listeners.submit)==null||e.forEach(r=>r())),n}on(e,n){var r,s;return(r=this._listeners)[e]??(r[e]=[]),(s=this._listeners[e])==null||s.push(n),()=>this.off(e,n)}off(e,n){Yn(this._listeners[e]??[],n)}async focus(e){var n;await kt(),(n=this._listeners.focus)==null||n.forEach(r=>r(e))}__get(e){return e in this._fields?this.getFieldValue(e):super.__get(e)}__set(e,n){if(!(e in this._fields)){super.__set(e,n);return}this.setFieldValue(e,n)}getFieldErrors(e,n){var r;const s=[],i=this._data[e],o=((r=n.rules)==null?void 0:r.split("|"))??[];s.push(...hj(i,n));for(const a of o)a!=="required"&&i==null||s.push(...pj(i,a));return s.length>0?s:null}getInitialData(e){if(this.static().isConjuring())return{};const n=Object.entries(e).reduce((r,[s,i])=>(r[s]=i.default??null,r),{});return Tr(n)}getInitialErrors(e){if(this.static().isConjuring())return{};const n=Object.keys(e).reduce((r,s)=>(r[s]=null,r),{});return Tr(n)}resetData(){for(const[e,n]of Object.entries(this._fields))this._data[e]=n.default??null}resetErrors(e){Object.keys(this._errors).forEach(n=>delete this._errors[n]),e&&Object.assign(this._errors,e)}}function gj(t,e){const n=Vt("form",null),r=n==null?void 0:n.on("focus",s=>t.name===s&&e());Vn(()=>r==null?void 0:r())}function Ug(t){return new mj(t)}function SA(){const t=Ym(),e=ne(()=>t.class);return[ne(()=>$s(t,"class")),e]}function yj(t){let e=ER;qt(()=>e=t()),Vn(()=>e())}function bj(t,e){const n=Tr(pr.get(t)??e);return st(n,()=>pr.set(t,Xe(n))),n}function TA(t){const e=ve(),n=ne(t);return st(n,async()=>e.value=await n.value,{immediate:!0}),e}let xu=null;function vj(){return Fe(new Jo,t=>{t.link=function(e){const n=Jo.prototype.link.apply(this,[e]);return e.href.startsWith("#")?n:n.replace("<a",'<a target="_blank"')}})}function wj(t){const e=s0(t,/<a[^>]*href="#action:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e)t=t.replace(n,`<button type="button" data-markdown-action="${r}">${s}</button>`);return t}function _j(t){const e=s0(t,/<a[^>]*href="#route:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e){const i=(xu==null?void 0:xu.resolve(r))??r;t=t.replace(n,`<a data-markdown-route="${r}" href="${i}">${s}</a>`)}return t}function xj(){return xu}function Ej(t){xu=t}function Aj(t){let e=_t(t,{renderer:vj(),async:!1});return e=RA(e),e=wj(e),e=_j(e),e}function RA(t){return rN.sanitize(t,{ADD_ATTR:["target"]})}const Sj={mounted(t,{value:e}){t.innerHTML=RA(e)}},Tj={measure:cj,"safe-html":Sj},Rj={install(t,e){const n={...Tj,...e.directives};for(const[r,s]of Object.entries(n))t.directive(r,s)}};class Ij extends wd{constructor(){super(...arguments),pt(this,"cache")}async get(e){return await(await this.open()).match(e)??null}async store(e,n){await(await this.open()).put(e,n)}async replace(e,n){const r=await this.open();(await r.keys(e)).length!==0&&await r.put(e,n)}async open(){return this.cache=this.cache??Fe(new rs,e=>{caches.open("app").then(n=>e.resolve(n))})}}const uh=Gr(Ij);class Cj extends wd{async purge(){await qe.emit("purge-storage")}}const _d=Gr(Cj);function kw(t,e){return{...t,...ii(e,Object.keys(t))}}const kj={$app:ut,$events:qe,$storage:_d};async function so(t,e){await Promise.all(Object.entries(e).map(async([n,r])=>{await r.launch().catch(s=>{var i,o;return(o=(i=t.config).errorHandler)==null?void 0:o.call(i,s,null,`Failed launching ${n}.`)})})),Object.assign(t.config.globalProperties,e),(yi()||tl())&&Object.assign(globalThis,e)}const Oj={async install(t,e){var n;const r={...kj,...e.services};t.use(ej()),(n=e.settings)==null||n.forEach(s=>ut.addSetting(s)),await so(t,r)}},IA=768,Eu={Mobile:"mobile",Desktop:"desktop"};function CA(){return globalThis.innerWidth>IA?Eu.Desktop:Eu.Mobile}const Dj=ro({name:"ui",initialState:{modals:[],toasts:[],layout:CA()},computed:{desktop:({layout:t})=>t===Eu.Desktop,mobile:({layout:t})=>t===Eu.Mobile,openModals:({modals:t})=>t.filter(({closing:e})=>!e)}});class Pj extends Dj{constructor(){super(...arguments),pt(this,"modalCallbacks",{}),pt(this,"components",{})}registerComponent(e,n){this.components[e]=n}resolveComponent(e){return this.components[e]??null}requireComponent(e){return this.resolveComponent(e)??We(`UI Component '${e}' is not defined!`)}alert(e,n){const r=()=>typeof n!="string"?{message:e}:{title:e,message:n};this.modal(this.requireComponent("alert-modal"),r())}async confirm(e,n,r){const s=typeof n!="string"?{...n??{},message:e,required:!!(n!=null&&n.required)}:{...r??{},title:e,message:n,required:!!(r!=null&&r.required)},i=await this.modalForm(this.requireComponent("confirm-modal"),s),o=typeof i=="object"?i[0]:i??!1,a=typeof i=="object"?i[1]:Object.entries(s.checkboxes??{}).reduce((l,[c,{default:u}])=>({[c]:u??!1,...l}),{});for(const[l,c]of Object.entries(s.checkboxes??{}))if(!(!c.required||a[l]))return o&&yi()&&console.warn(`Confirmed confirm modal was suppressed because required '${l}' checkbox was missing`),[!1,a];return"checkboxes"in s?[o,a]:o}async prompt(e,n,r){const s=(r==null?void 0:r.trim)??!0,i=()=>typeof n!="string"?{message:e,...n??{}}:{title:e,message:n,...r??{}},o=await this.modalForm(this.requireComponent("prompt-modal"),i());return(s&&typeof o=="string"?o==null?void 0:o.trim():o)??null}async loading(e,n){const r=u=>typeof u=="function"?Promise.resolve(u()):u,s=()=>{if(typeof e=="string")return{props:{message:e},operationPromise:r(n)};if(typeof e=="function"||e instanceof Promise)return{operationPromise:r(e)};const{delay:u,...d}=e;return{props:d,delay:I(u),operationPromise:r(n)}};let i=!1;const{operationPromise:o,props:a,delay:l}=s();if(l&&await Promise.race([wr({ms:l}).then(()=>i=!0),o]),l&&!i)return o;const c=await this.modal(this.requireComponent("loading-modal"),a);try{const u=await o;return await wr({ms:500}),u}finally{await this.closeModal(c.id)}}toast(e,n={}){const{component:r,...s}=n,i={id:Un(),properties:{message:e,...s},component:ot(r??this.requireComponent("toast"))};this.setState("toasts",this.toasts.concat(i))}async modal(e,n){const r=Un(),s={},i={id:r,closing:!1,properties:n??{},component:ot(e),beforeClose:new Promise(a=>s.willClose=a),afterClose:new Promise(a=>s.hasClosed=a)},o=this.modals.concat(i);return this.modalCallbacks[i.id]=s,this.setState({modals:o}),await kt(),i}async modalForm(e,n){return await(await this.modal(e,n)).beforeClose}async closeModal(e,n){if(!ut.isMounted()){await this.removeModal(e,n);return}await qe.emit("close-modal",{id:e,result:n})}async closeAllModals(){for(;this.modals.length>0;)await this.closeModal(Jn(this.modals[this.modals.length-1]).id)}async boot(){this.watchModalEvents(),this.watchMountedEvent(),this.watchViewportBreakpoints()}async removeModal(e,n){var r,s;this.setState("modals",this.modals.filter(i=>i.id!==e)),(s=(r=this.modalCallbacks[e])==null?void 0:r.hasClosed)==null||s.call(r,n),delete this.modalCallbacks[e]}watchModalEvents(){qe.on("modal-will-close",({modal:{id:e},result:n})=>{var r,s;const i=this.modals.find(o=>e===o.id);i&&(i.closing=!0),(s=(r=this.modalCallbacks[e])==null?void 0:r.willClose)==null||s.call(r,n)}),qe.on("modal-has-closed",async({modal:{id:e},result:n})=>{await this.removeModal(e,n)})}watchMountedEvent(){qe.once("application-mounted",async()=>{if(!globalThis.document||!globalThis.getComputedStyle)return;const e=globalThis.document.getElementById("splash");e&&(globalThis.getComputedStyle(e).opacity!=="0"&&(e.style.opacity="0",await wr({ms:600})),e.remove())})}watchViewportBreakpoints(){globalThis.matchMedia&&globalThis.matchMedia(`(min-width: ${IA}px)`).addEventListener("change",()=>this.setState({layout:CA()}))}}const Dt=Gr(Pj);class $j{constructor(e,n){this.locale=e,this.fallbackLocale=n}getLocale(){return this.locale}async setLocale(e){this.locale=e}getFallbackLocale(){return this.fallbackLocale}async setFallbackLocale(e){this.fallbackLocale=e}getLocales(){return["en"]}translate(e){return yi()&&console.warn("Lang provider is missing"),e}translateWithDefault(e,n){return yi()&&console.warn("Lang provider is missing"),n}}const Nj=ro({name:"lang",persist:["locale","fallbackLocale"],initialState:{locale:null,locales:["en"],fallbackLocale:"en"}});class Lj extends Nj{constructor(){super(),pt(this,"provider"),this.provider=new $j(this.getState("locale")??this.getBrowserLocale(),this.getState("fallbackLocale"))}async setProvider(e){this.provider=e,this.locales=e.getLocales(),await e.setLocale(this.locale??this.getBrowserLocale()),await e.setFallbackLocale(this.fallbackLocale)}translate(e,n){return this.provider.translate(e,n)??e}translateWithDefault(e,n,r={}){return this.provider.translateWithDefault(e,n,r)}getBrowserLocale(){const e=this.getState("locales");return navigator.languages.find(n=>e.includes(n))??"en"}async boot(){globalThis.document&&this.requireStore().$subscribe(async()=>{var e,n;await this.provider.setLocale(this.locale??this.getBrowserLocale()),await this.provider.setFallbackLocale(this.fallbackLocale),this.locale?(e=document.querySelector("html"))==null||e.setAttribute("lang",this.locale):(n=document.querySelector("html"))==null||n.removeAttribute("lang")},{immediate:!0})}}const Ei=Gr(Lj),Ya=Ei.translate.bind(Ei),Le=Ei.translateWithDefault.bind(Ei),Mj=ro({name:"errors",initialState:{logs:[],startupErrors:[],debug:!1},computed:{hasErrors:({logs:t})=>t.length>0,hasNewErrors:({logs:t})=>t.some(e=>!e.seen),hasStartupErrors:({startupErrors:t})=>t.length>0}});class Fj extends Mj{constructor(){super(...arguments),pt(this,"forceReporting",!1),pt(this,"enabled",!0),pt(this,"eruda",null)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e,n){if(Array.isArray(e)&&e.length===0){Dt.alert(Le("errors.inspectEmpty","Nothing to inspect!"));return}const r=Array.isArray(e)?e[0]:this.isErrorReport(e)?e:await this.createErrorReport(e),s=Array.isArray(e)?e:n??[r];Dt.modal(Dt.requireComponent("error-report-modal"),{report:r,reports:s})}async report(e,n){if(await qe.emit("error",{error:e,message:n}),tl("unit")||(yi()&&this.logError(e),!this.enabled))throw e;if(!ut.isMounted()){const i=await this.createStartupErrorReport(e);i&&this.setState({startupErrors:this.startupErrors.concat(i)});return}const r=await this.createErrorReport(e),s={report:r,seen:!1,date:new Date};Dt.toast(n??Le("errors.notice","Something went wrong, but it's not your fault. Try again!"),{variant:"danger",actions:[{label:Le("errors.viewDetails","View details"),dismiss:!0,click:()=>Dt.modal(Dt.requireComponent("error-report-modal"),{report:r,reports:[r]})}]}),this.setState({logs:[s].concat(this.logs)})}reportDevelopmentError(e,n){yi()&&(n&&console.warn(n),this.logError(e))}see(e){this.setState({logs:this.logs.map(n=>n.report!==e?n:{...n,seen:!0})})}async boot(){$t(async()=>{var e;if(!this.debug){(e=this.eruda)==null||e.destroy();return}this.eruda??(this.eruda=(await So(async()=>{const{default:n}=await import("./eruda-CXmmUCtx.js").then(r=>r.e);return{default:n}},[])).default),this.eruda.init()})}logError(e){console.error(e),yt(e)&&e.cause&&this.logError(e.cause)}isErrorReport(e){return yt(e)&&"title"in e}async createErrorReport(e){return typeof e=="string"?{title:e}:e instanceof Error||e instanceof cr?this.createErrorReportFromError(e):yt(e)?Fn({title:Ct(e.name??e.title??Le("errors.unknown","Unknown Error")),description:Ct(e.message??e.description??Le("errors.unknownDescription","Unknown error object")),error:e}):{title:Le("errors.unknown","Unknown Error"),error:e}}async createStartupErrorReport(e){return e instanceof Mp?e.cause instanceof Mp?null:this.createErrorReport(e.cause):this.createErrorReport(e)}createErrorReportFromError(e,n={}){return{title:e.name,description:e.message,details:e.stack,error:e,...n}}}const Ai=Gr(Fj),kA=me({__name:"HeadlessButton",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=ne(()=>t.as?{as:t.as}:t.route?{as:Dt.resolveComponent("router-link")??"a",to:Fn({name:t.route,params:t.routeParams,query:t.routeQuery})}:t.href?{as:"a",target:"_blank",href:t.href}:{as:"button",type:t.submit?"submit":"button"});return(n,r)=>(V(),ce(I(St),Be({class:t.class,"as-child":n.asChild,disabled:n.disabled},e.value),{default:te(()=>[Se(n.$slots,"default")]),_:3},16,["class","as-child","disabled"]))}}),wt=me({__name:"Button",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=Ti(t,["class","size","variant","disabled"]),n=ne(()=>AA({baseClasses:t.class,variant:t.variant,size:t.size,disabled:t.disabled},{baseClasses:"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",variants:{variant:{default:"bg-primary-600 text-white focus-visible:outline-primary-600",secondary:"bg-background text-gray-900 ring-gray-300",danger:"bg-red-600 text-white focus-visible:outline-red-600",ghost:"bg-transparent",outline:"bg-transparent text-primary-600 ring-primary-600",link:"text-links"},size:{small:"text-xs min-h-6",default:"text-sm min-h-8",large:"text-base min-h-10",icon:"rounded-full p-2.5"},disabled:{false:null,true:"opacity-50 cursor-not-allowed"}},compoundVariants:[{variant:["default","secondary","danger","ghost","outline"],class:"flex items-center justify-center gap-1 font-medium"},{variant:["default","danger"],class:"shadow-sm"},{variant:["secondary","outline"],class:"ring-1 ring-inset"},{variant:["default","secondary","danger","ghost","outline"],size:"small",class:"rounded px-2 py-1"},{variant:["default","secondary","danger","ghost","outline"],size:"default",class:"rounded-md px-2.5 py-1.5"},{variant:["default","secondary","danger","ghost","outline"],size:"large",class:"rounded-md px-3 py-2"},{variant:"default",disabled:!1,class:"hover:bg-primary-500"},{variant:["secondary","ghost","outline"],disabled:!1,class:"hover:bg-gray-50"},{variant:"danger",disabled:!1,class:"hover:bg-red-500"},{variant:"link",disabled:!1,class:"hover:underline"},{variant:"link",size:"small",class:"leading-6"},{variant:"link",size:"default",class:"leading-8"},{variant:"link",size:"large",class:"leading-10"}],defaultVariants:{variant:"default",size:"default",disabled:!1}}));return(r,s)=>(V(),ce(kA,Be({class:n.value,disabled:r.disabled},e),{default:te(()=>[Se(r.$slots,"default")]),_:3},16,["class","disabled"]))}});function jj(t){return typeof t=="object"&&t!==null&&"label"in t}const OA=me({__name:"HeadlessSelectValue",setup(t){const e=Cn("select","<HeadlessSelectValue> must be a child of a <HeadlessSelect>");return(n,r)=>n.$slots.default?(V(),ce(I(Tw),{key:0,placeholder:I(e).placeholder},{default:te(()=>[Se(n.$slots,"default")]),_:3},8,["placeholder"])):(V(),ce(I(Tw),{key:1,placeholder:I(e).placeholder},null,8,["placeholder"]))}}),DA=me({__name:"HeadlessSelectTrigger",setup(t){const e=Cn("select","<HeadlessSelectTrigger> must be a child of a <HeadlessSelect>");return(n,r)=>(V(),ce(I(CF),{id:I(e).id},{default:te(()=>[Se(n.$slots,"default",{},()=>[oe(OA,{placeholder:I(e).placeholder},null,8,["placeholder"]),oe(I(EF))])]),_:3},8,["id"]))}}),PA=me({__name:"HeadlessSelectOption",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=Cn("select","<HeadlessSelectOption> must be a child of a <HeadlessSelect>"),n=ne(()=>{var r;const s=(r=e.options)==null?void 0:r.find(i=>i.value===t.value);return s?s.label:Ct(t.value)});return(r,s)=>(V(),ce(I(TF),Rn(qn(r.$props)),{default:te(()=>[oe(I(RF),null,{default:te(()=>[Se(r.$slots,"default",{},()=>[nt(Ne(n.value),1)])]),_:3})]),_:3},16))}}),$A=me({__name:"HeadlessSelectOptions",props:{class:{},innerClass:{}},setup(t){const e=Cn("select","<HeadlessSelectOptions> must be a child of a <HeadlessSelect>"),n=ne(()=>Ht("min-w-(--reka-select-trigger-width) max-h-(--reka-select-content-available-height)",t.class));return(r,s)=>(V(),ce(I(IF),null,{default:te(()=>[oe(I(xF),{position:"popper",class:Ge(n.value),align:I(e).align,side:I(e).side,"side-offset":4},{default:te(()=>[oe(I(kF),{class:Ge(r.innerClass)},{default:te(()=>[Se(r.$slots,"default",{},()=>[(V(!0),Te(Ze,null,er(I(e).options??[],i=>(V(),ce(PA,{key:i.key,value:i.value},null,8,["value"]))),128))])]),_:3},8,["class"])]),_:3},8,["class","align","side"])]),_:3}))}}),Uj=me({inheritAttrs:!1,__name:"HeadlessSelect",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=Vt("form",null),i=ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),o=ne(()=>i.value),a=ne(()=>!s||!t.name?null:s.errors[t.name]??null),l=ne(()=>t.options?t.options.map(d=>({key:Un(),label:t.renderOption?t.renderOption(d):jj(d)?SR(d.label):Ct(d),value:d})):null),c={labelClass:t.labelClass,optionsClass:t.optionsClass,align:t.align,side:t.side,value:i,id:`select-${Un()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),placeholder:ne(()=>t.placeholder??Le("ui.select","Select an option")),options:l,selectedOption:ne(()=>{var d;return(d=l.value)==null?void 0:d.find(f=>f.value===t.modelValue)}),errors:hs(a),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(d){if(s&&t.name){s.setFieldValue(t.name,d);return}r("update:modelValue",d)}};function u(d){c.update(d)}return ir("select",c),e(c),(d,f)=>(V(),ce(I(hF),{"model-value":o.value,by:d.compareOptions,"onUpdate:modelValue":f[0]||(f[0]=h=>u(h))},{default:te(({open:h})=>[(V(),ce(ps(d.as),Rn(qn(d.$attrs)),{default:te(()=>[Se(d.$slots,"default",{modelValue:d.modelValue,open:h},()=>[oe(DA),oe($A)])]),_:2},1040))]),_:3},8,["model-value","by"]))}}),Ow=me({__name:"HeadlessSelectLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Cn("select","<HeadlessSelectLabel> must be a child of a <HeadlessSelect>"),n=sd(),r=ne(()=>!!(e.label||n.default));return(s,i)=>r.value?(V(),ce(I(aF),Be({key:0,for:I(e).id},s.$props),{default:te(()=>[Se(s.$slots,"default",{},()=>[nt(Ne(I(e).label),1)])]),_:3},16,["for"])):ze("",!0)}}),NA=me({__name:"SelectLabel",props:{class:{}},setup(t){const e=Cn("select","<SelectLabel> must be a child of a <Select>"),n=ne(()=>Ht("block text-sm leading-6 font-medium text-gray-900",e.labelClass,t.class));return(r,s)=>r.$slots.default?(V(),ce(Ow,{key:0,class:Ge(n.value)},{default:te(()=>[Se(r.$slots,"default")]),_:3},8,["class"])):(V(),ce(Ow,{key:1,class:Ge(n.value)},null,8,["class"]))}}),Dw=me({__name:"SelectOption",props:{value:{},class:{},innerClass:{}},setup(t){const e=ne(()=>Ht("group p-1 outline-none",t.class)),n=ne(()=>Ht("relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center truncate rounded-md gap-2 px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50",t.innerClass));return(r,s)=>(V(),ce(PA,{class:Ge(e.value),value:r.value},{default:te(()=>[Ee("div",{class:Ge(n.value)},[Se(r.$slots,"default")],2)]),_:3},8,["class","value"]))}}),LA=me({__name:"SelectOptions",props:{class:{}},setup(t){const e=Cn("select","<SelectOptions> must be a child of a <Select>"),n=ne(()=>Ht("z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden",e.optionsClass,t.class));return(r,s)=>(V(),ce($A,{class:Ge(n.value)},{default:te(()=>{var i;return[(i=I(e).options)!=null&&i.length?Se(r.$slots,"default",{key:0},()=>{var o;return[(V(!0),Te(Ze,null,er(((o=I(e))==null?void 0:o.options)??[],a=>(V(),ce(Dw,{key:a.key,value:a.value},{default:te(()=>[nt(Ne(a.label),1)]),_:2},1032,["value"]))),128))]}):Se(r.$slots,"default",{key:1},()=>[oe(Dw,{disabled:"",value:null},{default:te(()=>[nt(Ne(r.$td("ui.selectEmpty","No options available")),1)]),_:1})])]}),_:3},8,["class"]))}}),Bj={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Hj(t,e){return V(),Te("svg",Bj,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"m9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828L5.757 6.586L4.343 8z"},null,-1)]))}const Vj=ot({name:"zondicons-cheveron-down",render:Hj}),MA=me({__name:"SelectTrigger",props:{class:{}},setup(t){const e=Cn("select","<SelectTrigger> must be a child of a <Select>"),n=ne(()=>Ht("focus:outline-primary-600 data-[state=open]:outline-primary-600 grid w-full cursor-default grid-cols-1 rounded-md bg-white py-1.5 pr-2 pl-3 text-left text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 sm:text-sm/6",{"mt-1":e.label},t.class));return(r,s)=>(V(),ce(DA,{class:Ge(n.value)},{default:te(()=>[oe(OA,{class:"col-start-1 row-start-1 truncate pr-6"}),oe(I(Vj),{class:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-500 sm:size-4"})]),_:1},8,["class"]))}}),FA=me({__name:"Select",props:{as:{},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t){const{forwardRef:e}=et();return(n,r)=>(V(),ce(Uj,Be({ref:I(e)},n.$props,{"onUpdate:modelValue":r[0]||(r[0]=s=>n.$emit("update:modelValue",s))}),{default:te(()=>[oe(NA),Se(n.$slots,"default",{},()=>[oe(MA),oe(LA)])]),_:3},16))}}),qj={class:"grow"},zj=me({__name:"Language",setup(t){const e=Ei.getBrowserLocale(),n=ne(()=>[null,...Ei.locales]);function r(s){return(s&&Mr.locales[s])??Le("settings.localeDefault","{locale} (default)",{locale:Mr.locales[e]??e})}return(s,i)=>(V(),ce(FA,{modelValue:s.$lang.locale,"onUpdate:modelValue":i[0]||(i[0]=o=>s.$lang.locale=o),class:"flex flex-col items-start md:flex-row",as:"div",options:n.value,"render-option":r},{default:te(()=>[Ee("div",qj,[oe(NA,{class:"text-base font-semibold"},{default:te(()=>[nt(Ne(s.$td("settings.locale","Language")),1)]),_:1}),oe(Ft,{"lang-key":"settings.localeDescription","lang-default":"Choose the application's language.",class:"mt-1 text-sm text-gray-500"})]),oe(wt,{variant:"ghost",as:MA,class:"grid w-auto outline-none"}),oe(LA)]),_:1},8,["modelValue","options"]))}}),Wj=[{priority:100,component:zj}],Kj={$lang:Ei},Gj={async install(t){var e;(e=t.config.globalProperties).$t??(e.$t=Ya),t.config.globalProperties.$td=Le,Wj.forEach(n=>ut.addSetting(n)),await so(t,Kj)}},Jj=me({__name:"Markdown",props:{as:{},inline:{type:Boolean},langKey:{},langParams:{},langDefault:{},text:{},actions:{}},setup(t){const e=Ym(),n=sd(),r=ne(()=>n.default?n.default().map(EA).join(""):t.text??(t.langKey&&(t.langDefault?Le(t.langKey,t.langDefault,t.langParams??{}):Ya(t.langKey,t.langParams??{})))),s=ne(()=>{if(!r.value)return null;let a=Aj(r.value);return t.inline&&(a=a.replace("<p>","<span>").replace("</p>","</span>")),a}),i=()=>jn(t.as??(t.inline?"span":"div"),{innerHTML:s.value,onClick:o,...e,class:`${e.class??""} ${t.inline?"":"prose"}`});async function o(a){var l,c;const{target:u}=a;if(mn(u,HTMLElement)&&u.dataset.markdownAction){(c=(l=t.actions)==null?void 0:l[u.dataset.markdownAction])==null||c.call(l);return}if(mn(u,HTMLAnchorElement)&&u.dataset.markdownRoute){const d=xj();d&&(a.preventDefault(),d.visit(u.dataset.markdownRoute));return}}return(a,l)=>(V(),ce(i))}}),Xj=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Ft=Xj(Jj,[["__scopeId","data-v-8b211cfb"]]),Yj={class:"flex-grow"},Qj=["id"],Zj=me({__name:"Setting",props:{title:{},titleId:{},description:{},class:{},layout:{default:"horizontal"}},setup(t){const e=ne(()=>Ht(t.class,"flex flex-col justify-center gap-1"));return(n,r)=>(V(),Te("div",{class:Ge(["mt-4 flex",{"flex-col":n.layout==="vertical"}])},[Ee("div",Yj,[Ee("h3",{id:n.titleId,class:"text-base font-semibold"},Ne(n.title),9,Qj),n.description?(V(),ce(Ft,{key:0,text:n.description,class:"mt-1 text-sm text-gray-500"},null,8,["text"])):ze("",!0)]),Ee("div",{class:Ge(e.value)},[Se(n.$slots,"default")],2)],2))}}),eU=["for"],tU=me({inheritAttrs:!1,__name:"HeadlessSwitch",props:{name:{},label:{},description:{},modelValue:{},class:{},labelClass:{},inputClass:{},thumbClass:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=Vt("form",null),i=ne(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`switch-${Un()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),value:ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:hs(i),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return e(o),$t(()=>{!t.description&&!i.value||console.warn("Errors and description not implemented in <HeadlessSwitch>")}),(a,l)=>(V(),Te("div",{class:Ge(t.class)},[a.label?(V(),Te("label",{key:0,for:o.id,class:Ge(a.labelClass)},Ne(a.label),11,eU)):ze("",!0),oe(I(PF),Be({id:o.id,name:a.name,"model-value":o.value.value},a.$attrs,{class:a.inputClass,"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:te(()=>[oe(I($F),{class:Ge(a.thumbClass)},null,8,["class"])]),_:1},16,["id","name","model-value","class"])],2))}}),nU=me({__name:"Switch",setup(t){return(e,n)=>(V(),ce(tU,{class:"flex flex-row items-center gap-1","input-class":"disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-200 relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focusdisabled:opacity-50 disabled:cursor-not-allowed :ring-2 focus:ring-primary-600 focus:ring-offset-2 focus:outline-hidden","thumb-class":"data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 pointer-events-none inline-block size-5 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"}))}}),rU=me({__name:"Debug",setup(t){return(e,n)=>(V(),ce(Zj,{"title-id":"debug-setting",title:e.$td("settings.debug","Debugging"),description:e.$td("settings.debugDescription","Enable debugging with [Eruda](https://eruda.liriliri.io/).")},{default:te(()=>[oe(nU,{modelValue:e.$errors.debug,"onUpdate:modelValue":n[0]||(n[0]=r=>e.$errors.debug=r),"aria-labelledby":"debug-setting"},null,8,["modelValue"])]),_:1},8,["title","description"]))}}),sU=[{priority:10,component:rU}],jA=[];function iU(t){jA.push(t)}function oU(t){for(const e of jA){const n=e(t);if(n)return n}return typeof t=="string"?t:t instanceof Error||t instanceof cr?t.message:yt(t)?Ct(t.message??t.description??"Unknown error object"):Le("errors.unknown","Unknown Error")}let Pw=class extends cr{};const aU={$errors:Ai},lU=t=>(Ai.report(t),!0);function cU(t,e=()=>!1){const n=r=>e(r)||lU(r);t.config.errorHandler=n,globalThis.onerror=(r,s,i,o,a)=>n(a??r),globalThis.onunhandledrejection=r=>n(r.reason)}const uU={async install(t,e){cU(t,e.handleError),sU.forEach(n=>ut.addSetting(n)),await so(t,aU)}},dU={async install(){tl()&&(globalThis.testingRuntime={on:(...t)=>qe.on(...t),service:t=>ut.service(t)})}},fU={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function hU(t,e){return V(),Te("svg",fU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M10 8.586L2.929 1.515L1.515 2.929L8.586 10l-7.071 7.071l1.414 1.414L10 11.414l7.071 7.071l1.414-1.414L11.414 10l7.071-7.071l-1.414-1.414z"},null,-1)]))}const pU=ot({name:"zondicons-close",render:hU}),mU=me({__name:"HeadlessModal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean}},setup(t,{expose:e}){const n=ve(null),{modal:r}=Cn("modal","could not obtain modal reference from <HeadlessModal>, did you render this component manually? Show it using $ui.modal() instead");e({close:o,$content:n});const{forwardRef:s}=et(),i=ve(!1);ir("$modalContentRef",n),jg("close-modal",async({id:a,result:l})=>{a===r.id&&await o(l)});async function o(a){i.value||(await qe.emit("modal-will-close",{modal:r,result:a}),i.value=!0,await qe.emit("modal-has-closed",{modal:r,result:a}))}return(a,l)=>(V(),ce(I(XM),{ref:I(s),open:"","onUpdate:open":l[0]||(l[0]=c=>a.persistent||o())},{default:te(()=>[oe(I(eF),null,{default:te(()=>[Se(a.$slots,"default",{close:o})]),_:3})]),_:3},512))}}),UA=me({__name:"ModalContext",props:{modal:{},childIndex:{}},setup(t){const e=t,n=ne(()=>{const r={};for(const s in e.modal.properties)r[s]=I(e.modal.properties[s]);return r});return ir("modal",{modal:nu(e,"modal"),childIndex:nu(e,"childIndex")}),(r,s)=>(V(),ce(ps(r.modal.component),Rn(qn(n.value)),null,16))}}),gU=me({__name:"HeadlessModalContent",setup(t){const{childIndex:e=0}=Cn("modal","could not obtain modal reference from <HeadlessModalContent>, did you render this component manually? Show it using $ui.modal() instead"),n=lj("$modalContentRef"),r=Zi("$contentRef"),s=ne(()=>Dt.modals[e]??null);return $t(()=>n.value=r.value),(i,o)=>(V(),ce(I(b2),{ref:"$contentRef"},{default:te(()=>[Se(i.$slots,"default"),s.value?(V(),ce(UA,{key:0,"child-index":I(e)+1,modal:s.value},null,8,["child-index","modal"])):ze("",!0)]),_:3},512))}}),yU=me({__name:"HeadlessModalDescription",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(V(),ce(I(v2),Rn(qn(e.$props)),{default:te(()=>[Se(e.$slots,"default")]),_:3},16))}}),bU=me({__name:"HeadlessModalOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(V(),ce(I(S2),Rn(qn(e.$props)),{default:te(()=>[Se(e.$slots,"default")]),_:3},16))}}),vU=me({__name:"HeadlessModalTitle",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(V(),ce(I(T2),Rn(qn(e.$props)),{default:te(()=>[Se(e.$slots,"default")]),_:3},16))}}),wU={key:0,class:"absolute top-0 right-0 hidden pt-3.5 pr-2.5 sm:block"},_U=["onClick"],xU={class:"sr-only"},zs=me({__name:"Modal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean},wrapperClass:{default:""},class:{default:""},closeHidden:{type:Boolean}},setup(t,{expose:e}){const n=Ti(t,["class","wrapperClass","title","titleHidden","description","persistent","closeHidden"]);e({close:async d=>{var f;return(f=i.value)==null?void 0:f.close(d)},$content:ne(()=>{var d;return(d=i.value)==null?void 0:d.$content})});const{forwardRef:r,currentRef:s}=et(),i=s,o=Cn("modal"),a=ne(()=>!o.modal.closing&&o.childIndex===Dt.openModals.length),l=ne(()=>t.description?{}:{"aria-describedby":void 0}),c=ne(()=>Ht("max-h-[90vh] overflow-auto px-4 pb-4",{"pt-4":!t.title||t.titleHidden},t.class)),u=ne(()=>Ht("isolate fixed top-1/2 left-1/2 z-50 w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2","overflow-hidden rounded-lg bg-white text-left shadow-xl sm:max-w-lg","animate-[fade-in_var(--tw-duration)_ease-in-out,grow_var(--tw-duration)_ease-in-out]","transition-[scale,opacity] will-change-[scale,opacity] duration-300",{"scale-50 opacity-0":!a.value,"scale-100 opacity-100":a.value},t.wrapperClass));return jg("modal-will-close",async({modal:{id:d}})=>{d===o.modal.id&&await wr({ms:300})}),(d,f)=>(V(),ce(mU,Be(n,{ref:h=>I(r)(h),persistent:d.persistent}),{default:te(({close:h})=>[oe(bU,{class:Ge(["fixed inset-0 animate-[fade-in_var(--tw-duration)_ease-in-out] transition-opacity duration-300 will-change-[opacity]",{"bg-black/30":I(o).childIndex===1,"opacity-0":I(o).childIndex===1&&I(o).modal.closing}])},null,8,["class"]),oe(gU,Be(l.value,{class:u.value}),{default:te(()=>[!d.persistent&&!d.closeHidden?(V(),Te("div",wU,[Ee("button",{type:"button",class:"clickable z-10 rounded-full p-2.5 text-gray-400 hover:text-gray-500",onClick:m=>h()},[Ee("span",xU,Ne(d.$td("ui.close","Close")),1),oe(I(pU),{class:"size-4"})],8,_U)])):ze("",!0),d.title?(V(),ce(vU,{key:1,class:Ge(["px-4 pt-5 text-base font-semibold text-gray-900",{"sr-only":d.titleHidden,"pb-0":d.description&&!d.descriptionHidden,"pb-2":!d.description||d.descriptionHidden}])},{default:te(()=>[oe(Ft,{text:d.title,inline:""},null,8,["text"])]),_:1},8,["class"])):ze("",!0),d.description?(V(),ce(yU,{key:2,class:Ge(["px-4 pt-1 pb-2",{"sr-only":d.descriptionHidden}])},{default:te(()=>[oe(Ft,{text:d.description,class:"text-sm leading-6 text-gray-500"},null,8,["text"])]),_:1},8,["class"])):ze("",!0),Ee("div",{class:Ge(c.value)},[Se(d.$slots,"default",{close:h})],2)]),_:2},1040,["class"])]),_:3},16,["persistent"]))}});function EU(t){const e=ne(()=>t.title??Le("ui.alert","Alert")),n=ne(()=>!t.title);return{renderedTitle:e,titleHidden:n}}const AU=me({__name:"AlertModal",props:{title:{},message:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,titleHidden:s}=EU(n);return e(),(i,o)=>(V(),ce(zs,{title:I(r),"title-hidden":I(s)},{default:te(()=>[oe(Ft,{text:i.message},null,8,["text"])]),_:1},8,["title","title-hidden"]))}}),Bg=me({__name:"Form",props:{form:{}},emits:["submit"],setup(t,{emit:e}){let n;const r=e;return $t(s=>{var i;n==null||n(),n=(i=t.form)==null?void 0:i.on("submit",()=>r("submit")),s(()=>n==null?void 0:n())}),ir("form",t.form),(s,i)=>(V(),Te("form",{onSubmit:i[0]||(i[0]=Ur(o=>s.form?s.form.submit():s.$emit("submit"),["prevent"]))},[Se(s.$slots,"default")],32))}});function SU(t){const e=Ug(Object.entries(t.checkboxes??{}).reduce((o,[a,l])=>({[a]:{type:"boolean",default:l.default,required:l.required?"required":void 0},...o}),{})),n=ne(()=>t.title??Le("ui.confirm","Confirm")),r=ne(()=>!t.title),s=ne(()=>t.acceptText??Le("ui.accept","Ok")),i=ne(()=>t.cancelText??Le("ui.cancel","Cancel"));return{form:e,renderedTitle:n,titleHidden:r,renderedAcceptText:s,renderedCancelText:i}}const TU={key:0,class:"mt-4 flex flex-col text-sm text-gray-600"},RU={class:"flex items-center"},IU=["onUpdate:modelValue","required"],CU={class:"ml-1.5"},kU={class:"mt-4 flex flex-row-reverse gap-2"},OU=me({__name:"ConfirmModal",props:{title:{},message:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"},checkboxes:{},actions:{},required:{type:Boolean}},setup(t,{expose:e}){const n=Ti(t,["cancelVariant"]),{form:r,renderedTitle:s,titleHidden:i,renderedAcceptText:o,renderedCancelText:a}=SU(n);return e(),(l,c)=>(V(),ce(zs,{title:I(s),"title-hidden":I(i),persistent:""},{default:te(({close:u})=>[oe(Bg,{form:I(r),onSubmit:d=>u([!0,I(r).data()])},{default:te(()=>[oe(Ft,{text:l.message,actions:l.actions},null,8,["text","actions"]),l.checkboxes?(V(),Te("ul",TU,[(V(!0),Te(Ze,null,er(l.checkboxes,(d,f)=>(V(),Te("li",{key:f},[Ee("label",RU,[Rl(Ee("input",{"onUpdate:modelValue":h=>I(r)[f]=h,type:"checkbox",required:d.required,class:"border-primary-600 text-primary-600 hover:bg-primary-50 hover:checked:bg-primary-500 focus:ring-primary-600 focus-visible:ring-primary-600 rounded border-2"},null,8,IU),[[ld,I(r)[f]]]),Ee("span",CU,Ne(d.label),1)])]))),128))])):ze("",!0),Ee("div",kU,[oe(wt,{variant:l.acceptVariant,submit:""},{default:te(()=>[nt(Ne(I(o)),1)]),_:1},8,["variant"]),l.required?ze("",!0):(V(),ce(wt,{key:0,variant:l.cancelVariant,onClick:d=>u(!1)},{default:te(()=>[nt(Ne(I(a)),1)]),_:2},1032,["variant","onClick"]))])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title","title-hidden"]))}}),DU={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function PU(t,e){return V(),Te("svg",DU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M7.05 9.293L6.343 10L12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"},null,-1)]))}const $U=ot({name:"zondicons-cheveron-left",render:PU}),NU={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function LU(t,e){return V(),Te("svg",NU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"m12.95 10.707l.707-.707L8 4.343L6.586 5.757L10.828 10l-4.242 4.243L8 15.657z"},null,-1)]))}const BA=ot({name:"zondicons-cheveron-right",render:LU}),MU={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function FU(t,e){return V(),Te("svg",MU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07M9 5v6h2V5zm0 8v2h2v-2z"},null,-1)]))}const HA=ot({name:"zondicons-exclamation-solid",render:FU}),jU={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function UU(t,e){return V(),Te("svg",jU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"},null,-1)]))}const BU=ot({name:"mdi-console",render:UU}),HU={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function VU(t,e){return V(),Te("svg",HU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2zm2 0h4a2 2 0 0 1 2 2v4h4V2H8zM2 8v10h10V8z"},null,-1)]))}const qU=ot({name:"zondicons-copy",render:VU}),zU={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function WU(t,e){return V(),Te("svg",zU,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const KU=ot({name:"mdi-github",render:WU}),GU={class:"flex"},JU={class:"sr-only"},XU=me({__name:"ErrorReportModalButtons",props:{report:{}},setup(t){const e=t,n=ne(()=>e.report.description?`${e.report.title}: ${e.report.description}`:e.report.title),r=ne(()=>{if(!ut.sourceUrl)return!1;const i=encodeURIComponent(n.value),o=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",hR(e.report.details??"Details missing from report",1800-i.length-ut.sourceUrl.length).trim(),"```"].join(`
`));return`${ut.sourceUrl}/issues/new?title=${i}&body=${o}`}),s=ne(()=>Fe([{id:"clipboard",description:"Copy to clipboard",iconComponent:qU,async click(){await navigator.clipboard.writeText(`${n.value}

${e.report.details}`),Dt.toast(Le("errors.copiedToClipboard","Debug information copied to clipboard"))}},{id:"console",description:"Log to console",iconComponent:BU,click(){const i=e.report.error??e.report;window.error=i,console.error(i),Dt.toast(Le("errors.addedToConsole","You can now use the **error** variable in the console"))}}],i=>{r.value&&i.push({id:"github",description:"Report in GitHub",iconComponent:KU,url:r.value})}));return(i,o)=>(V(),Te("div",GU,[(V(!0),Te(Ze,null,er(s.value,a=>Se(i.$slots,"default",Be({ref_for:!0},a),()=>[oe(wt,{size:"icon",variant:"ghost",class:"group whitespace-nowrap",href:a.url,title:i.$td(`errors.report_${a.id}`,a.description),onClick:a.click},{default:te(()=>[Ee("span",JU,Ne(i.$td(`errors.report_${a.id}`,a.description)),1),(V(),ce(ps(a.iconComponent),{class:"size-4","aria-hidden":"true"}))]),_:2},1032,["href","title","onClick"])])),256))]))}}),YU=me({__name:"ErrorReportModalTitle",props:{report:{},currentReport:{},totalReports:{}},setup(t){const e=ne(()=>!t.totalReports||t.totalReports<=1?t.report.title:`${t.report.title} (${t.currentReport}/${t.totalReports})`);return(n,r)=>(V(),ce(Ft,{text:e.value,inline:""},null,8,["text"]))}});function QU(t){const e=ve(t.reports.includes(t.report)?t.reports.indexOf(t.report):0),n=ne(()=>t.reports[e.value]),r=ne(()=>{var o;return((o=n.value.details)==null?void 0:o.trim())||Le("errors.detailsEmpty","This error is missing a stacktrace.")}),s=Le("errors.previousReport","Show previous report"),i=Le("errors.nextReport","Show next report");return{activeReportIndex:e,details:r,nextReportText:i,previousReportText:s,activeReport:n}}const ZU={class:"px-4 pt-5 pb-4"},eB={class:"flex justify-between gap-4"},tB={class:"flex items-center gap-2"},nB={key:0,class:"flex gap-0.5"},rB={class:"-mt-2 max-h-[75vh] overflow-auto bg-red-800/10"},sB=["textContent"],iB=me({__name:"ErrorReportModal",props:{report:{},reports:{}},setup(t,{expose:e}){const n=t,{activeReportIndex:r,details:s,nextReportText:i,previousReportText:o,activeReport:a}=QU(n);return e(),(l,c)=>(V(),ce(zs,{title:l.$td("errors.report","Error report"),"title-hidden":"","close-hidden":"",class:"p-0","wrapper-class":"sm:w-auto sm:min-w-lg sm:max-w-[80vw]"},{default:te(()=>[Ee("div",ZU,[Ee("h2",eB,[Ee("div",tB,[oe(I(HA),{class:"size-5 text-red-600"}),oe(YU,{class:"text-lg leading-6 font-semibold text-gray-900",report:I(a),"current-report":I(r)+1,"total-reports":l.reports.length},null,8,["report","current-report","total-reports"]),l.reports.length>1?(V(),Te("span",nB,[oe(wt,{size:"icon",variant:"ghost",disabled:I(r)===0,"aria-label":I(o),title:I(o),onClick:c[0]||(c[0]=u=>r.value--)},{default:te(()=>[oe(I($U),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"]),oe(wt,{size:"icon",variant:"ghost",disabled:I(r)===l.reports.length-1,"aria-label":I(i),title:I(i),onClick:c[1]||(c[1]=u=>r.value++)},{default:te(()=>[oe(I(BA),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"])])):ze("",!0)]),oe(XU,{report:I(a),class:"gap-0.5"},null,8,["report"])]),I(a).description?(V(),ce(Ft,{key:0,text:I(a).description,class:"text-gray-600"},null,8,["text"])):ze("",!0)]),Ee("div",rB,[Ee("pre",{class:"p-4 text-xs text-red-800",textContent:Ne(I(s))},null,8,sB)])]),_:1},8,["title"]))}}),oB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function aB(t,e){return V(),Te("svg",oB,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),Ee("path",{fill:"currentColor",d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},[Ee("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})],-1)]))}const lB=ot({name:"svg-spinners-90-ring-with-bg",render:aB}),cB={class:"mt-1 h-2 w-full overflow-hidden rounded-full bg-gray-200"},uB={class:"sr-only"},VA=me({__name:"ProgressBar",props:{filledClass:{},progress:{},job:{}},setup(t){let e;const n=ve(0),r=ne(()=>Ht("size-full transition-transform duration-500 rounded-r-full ease-linear bg-primary-600",t.filledClass)),s=ne(()=>typeof t.progress=="number"?t.progress:n.value);return st(()=>t.job,()=>{e&&e(),n.value=t.job?t.job.progress:0,e=t.job&&t.job.listeners.add({onUpdated:i=>n.value=i})},{immediate:!0}),Vn(()=>e&&e()),(i,o)=>(V(),Te("div",cB,[Ee("div",{class:Ge(r.value),style:fs(`transform:translateX(-${(1-s.value)*100}%)`)},null,6),Ee("span",uB,Ne(i.$td("ui.progress","{progress}% complete",{progress:s.value*100})),1)]))}});function dB(t){const e=ne(()=>t.title??Le("ui.loading","Loading")),n=ne(()=>t.message??Le("ui.loadingInProgress","Loading in progress...")),r=ne(()=>typeof t.progress=="number"||!!t.job),s=ne(()=>!t.title);return{renderedTitle:e,renderedMessage:n,titleHidden:s,showProgress:r}}const fB=me({__name:"LoadingModal",props:{title:{},message:{},progress:{},job:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,renderedMessage:s,titleHidden:i,showProgress:o}=dB(n);return e(),(a,l)=>(V(),ce(zs,{persistent:"",class:Ge(["flex",{"flex-col-reverse":I(o),"items-center justify-center gap-2":!I(o)}]),"wrapper-class":"w-auto",title:I(r),"title-hidden":I(i)},{default:te(()=>[I(o)?(V(),ce(VA,{key:0,progress:a.progress,job:a.job,class:"min-w-[min(400px,80vw)]"},null,8,["progress","job"])):(V(),ce(I(lB),{key:1,class:"text-primary-600 mr-1 size-6"})),oe(Ft,{text:I(s)},null,8,["text"])]),_:1},8,["title","title-hidden","class"]))}}),qA=me({__name:"HeadlessInput",props:{name:{},label:{},description:{},modelValue:{},as:{default:"div"}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=Vt("form",null),i=ne(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`input-${Un()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),value:ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:hs(i),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return ir("input",o),e(o),(a,l)=>(V(),ce(ps(a.as),null,{default:te(()=>[Se(a.$slots,"default")]),_:3}))}}),hB=["for"],jp=me({__name:"HeadlessInputLabel",setup(t){const e=Cn("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>"),n=sd(),r=ne(()=>!!(e.label||n.default));return(s,i)=>r.value?(V(),Te("label",{key:0,for:I(e).id},[Se(s.$slots,"default",{},()=>[nt(Ne(I(e).label),1)])],8,hB)):ze("",!0)}}),pB=["id","name","checked","type","required","aria-invalid","aria-describedby"],zA=me({__name:"HeadlessInputInput",props:{type:{}},setup(t){const e=Zi("$inputRef"),n=Cn("input","<HeadlessInputInput> must be a child of a <HeadlessInput>"),r=Vt("form",null),s=ne(()=>n.name??void 0),i=ne(()=>n.value),o=ne(()=>{if(t.type)return t.type;const u=(s.value&&(r==null?void 0:r.getFieldType(s.value)))??"";return["text","email","number","tel","url"].includes(u)?u:"text"}),a=ne(()=>{if(t.type==="checkbox")return!!i.value});function l(){e.value&&n.update(c())}function c(){if(!e.value)return null;switch(t.type){case"checkbox":return e.value.checked;case"date":return e.value.valueAsDate;default:return e.value.value}}return gj(n,()=>{var u;return(u=e.value)==null?void 0:u.focus()}),$t(()=>{if(e.value){if(t.type==="date"&&i.value instanceof Date){e.value.valueAsDate=i.value;return}e.value.value=i.value??null}}),(u,d)=>(V(),Te("input",{id:I(n).id,ref:"$inputRef",name:s.value,checked:a.value,type:o.value,required:I(n).required??void 0,"aria-invalid":I(n).errors?"true":"false","aria-describedby":I(n).errors?`${I(n).id}-error`:I(n).description?`${I(n).id}-description`:void 0,onInput:l},null,40,pB))}}),mB=me({inheritAttrs:!1,__name:"HeadlessInputDescription",setup(t){const e=Cn("input","<HeadlessInputDescription> must be a child of a <HeadlessInput>"),n=ne(()=>typeof e.description=="string"?e.description:""),r=ne(()=>!!e.description);return(s,i)=>Se(s.$slots,"default",{id:`${I(e).id}-description`},()=>[r.value?(V(),ce(Ft,Be({key:0},s.$attrs,{id:`${I(e).id}-description`,text:n.value}),null,16,["id","text"])):ze("",!0)])}}),gB=["id"],Up=me({__name:"HeadlessInputError",setup(t){const e=Cn("input","<HeadlessInputError> must be a child of a <HeadlessInput>"),n=ne(()=>e.errors?Le(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(V(),Te("p",{key:0,id:`${I(e).id}-error`},Ne(n.value),9,gB)):ze("",!0)}}),yB={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},WA=me({inheritAttrs:!1,__name:"Input",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=Ti(t,["label","inputClass","wrapperClass"]),n=Zi("$inputRef"),[r,s]=SA(),i=ne(()=>Ht("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=ne(()=>{var a,l,c;return Ht("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(c=n.value)==null?void 0:c.errors},t.inputClass)});return(a,l)=>(V(),ce(qA,Be({ref:"$inputRef",label:a.label,class:I(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:te(()=>{var c;return[oe(jp,{class:"block text-sm leading-6 font-medium text-gray-900"}),Ee("div",{class:Ge(i.value)},[oe(zA,Be(I(r),{class:o.value}),null,16,["class"]),(c=n.value)!=null&&c.errors?(V(),Te("div",yB,[oe(I(HA),{class:"size-5 text-red-500"})])):ze("",!0)],2),oe(mB,{class:"mt-2 text-sm text-gray-600"}),oe(Up,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});function KA(t){return{default:t,type:"string",rules:"required"}}function bB(t,e={}){return{default:t,type:"string",rules:e.rules}}function vB(t){const e=Ug({draft:KA(t.defaultValue??"")}),n=ne(()=>t.title??t.message),r=ne(()=>t.title?t.message:null),s=ne(()=>t.acceptText??Le("ui.accept","Ok")),i=ne(()=>t.cancelText??Le("ui.cancel","Cancel"));return{form:e,renderedTitle:n,renderedMessage:r,renderedAcceptText:s,renderedCancelText:i}}const wB={class:"mt-4 flex flex-row-reverse gap-2"},_B=me({__name:"PromptModal",props:{title:{},message:{},label:{},defaultValue:{},placeholder:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"}},setup(t,{expose:e}){const n=Ti(t,["cancelVariant"]),{form:r,renderedTitle:s,renderedMessage:i,renderedAcceptText:o,renderedCancelText:a}=vB(n);return e(),(l,c)=>(V(),ce(zs,{title:I(s),persistent:""},{default:te(({close:u})=>[oe(Bg,{form:I(r),onSubmit:d=>u(I(r).draft)},{default:te(()=>[I(i)?(V(),ce(Ft,{key:0,text:I(i)},null,8,["text"])):ze("",!0),oe(WA,{name:"draft",class:"mt-2",placeholder:l.placeholder,label:l.label},null,8,["placeholder","label"]),Ee("div",wB,[oe(wt,{variant:l.acceptVariant,submit:""},{default:te(()=>[nt(Ne(I(o)),1)]),_:1},8,["variant"]),oe(wt,{variant:l.cancelVariant,onClick:d=>u()},{default:te(()=>[nt(Ne(I(a)),1)]),_:2},1032,["variant","onClick"])])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title"]))}}),xB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function EB(t,e){return V(),Te("svg",xB,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M12 21q-1.625 0-3.012-.8T6.8 18H4v-2h2.1q-.075-.5-.088-1T6 14H4v-2h2q0-.5.012-1t.088-1H4V8h2.8q.35-.575.788-1.075T8.6 6.05L7 4.4L8.4 3l2.15 2.15q.7-.225 1.425-.225t1.425.225L15.6 3L17 4.4l-1.65 1.65q.575.375 1.038.862T17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.013 1t-.087 1H20v2h-2.8q-.8 1.4-2.187 2.2T12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"},null,-1)]))}const AB=ot({name:"material-symbols-bug-report",render:EB}),SB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function TB(t,e){return V(),Te("svg",SB,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zm5-7.1l1.9 1.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7l-1.9-1.9l1.9-1.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 11.1l-1.9-1.9q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l1.9 1.9l-1.9 1.9q-.275.275-.275.7t.275.7t.7.275t.7-.275z"},null,-1)]))}const RB=ot({name:"material-symbols-delete-forever-rounded",render:TB}),IB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function CB(t,e){return V(),Te("svg",IB,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M11.25 13.5q.95 0 1.6-.65t.65-1.6t-.65-1.6t-1.6-.65t-1.6.65t-.65 1.6t.65 1.6t1.6.65m4.825 4l-2.625-2.625q-.5.325-1.062.475t-1.138.15q-1.775 0-3.012-1.237T7 11.25t1.238-3.012T11.25 7t3.013 1.238T15.5 11.25q0 .575-.162 1.138t-.488 1.062l2.65 2.65zM5 21q-.825 0-1.412-.587T3 19v-4h2v4h4v2zm10 0v-2h4v-4h2v4q0 .825-.587 1.413T19 21zM3 9V5q0-.825.588-1.412T5 3h4v2H5v4zm16 0V5h-4V3h4q.825 0 1.413.588T21 5v4z"},null,-1)]))}const kB=ot({name:"material-symbols-frame-inspect",render:CB}),OB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function DB(t,e){return V(),Te("svg",OB,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.712T19 4t.713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.712-.288T13 10t.288-.712T14 9h3.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.7 0 3.113-.862t2.187-2.313q.2-.35.563-.487t.737-.013q.4.125.575.525t-.025.75q-1.025 2-2.925 3.2T12 20"},null,-1)]))}const PB=ot({name:"material-symbols-refresh-rounded",render:DB}),$B={class:"grid grow place-items-center"},NB={class:"flex flex-col items-center p-8"},LB={class:"mt-0 mb-0 text-center text-4xl font-medium text-red-600"},MB={class:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2 [&_button]:justify-start sm:[&_button]:size-32 sm:[&_button]:flex-col sm:[&_button]:justify-center [&_svg]:size-6 sm:[&_svg]:size-8"},FB=me({__name:"StartupCrash",setup(t){async function e(){await Dt.confirm(Le("startupCrash.purgeConfirmTitle","Delete everything?"),Le("startupCrash.purgeConfirmMessage",`If the problem persists, one drastic solution may be to wipe the storage in this device to start from scratch. However, keep in mind that **all the data that you haven't synchronized will be deleted forever**.

Do you still want to proceed?`),{acceptVariant:"danger",acceptText:Le("startupCrash.purgeConfirmAccept","Purge device")})&&(await _d.purge(),await ut.reload())}return(n,r)=>{const s=Km("i-majesticons-exclamation");return V(),Te("div",$B,[Ee("div",NB,[oe(s,{class:"size-20 text-red-600"}),Ee("h1",LB,Ne(n.$td("startupCrash.title","Oops, something went wrong!")),1),oe(Ft,{text:n.$td("startupCrash.message","There was a problem starting the application, but here's some things you can do:"),class:"mt-4 text-center"},null,8,["text"]),Ee("div",MB,[oe(wt,{variant:"danger",onClick:r[0]||(r[0]=i=>n.$app.reload())},{default:te(()=>[oe(I(PB)),nt(" "+Ne(n.$td("startupCrash.reload","Try again")),1)]),_:1}),oe(wt,{variant:"danger",onClick:r[1]||(r[1]=i=>n.$errors.inspect(n.$errors.startupErrors))},{default:te(()=>[oe(I(AB)),nt(" "+Ne(n.$td("startupCrash.inspect","View error details")),1)]),_:1}),oe(wt,{variant:"danger",onClick:r[2]||(r[2]=i=>e())},{default:te(()=>[oe(I(RB)),nt(" "+Ne(n.$td("startupCrash.purge","Purge device")),1)]),_:1}),oe(wt,{variant:"danger",onClick:r[3]||(r[3]=i=>n.$errors.debug=!n.$errors.debug)},{default:te(()=>[oe(I(kB)),nt(" "+Ne(n.$td("startupCrash.debug","Toggle debugging")),1)]),_:1})])])])}}}),GA=me({__name:"HeadlessToastAction",props:{action:{}},setup(t){return(e,n)=>(V(),ce(ps(e.action.dismiss?I(KF):"button"),{type:"button",onClick:e.action.click},{default:te(()=>[nt(Ne(e.action.label),1)]),_:1},8,["onClick"]))}}),jB={key:0},UB=me({__name:"HeadlessToast",props:{message:{},actions:{},variant:{}},setup(t){return(e,n)=>(V(),ce(I(GF),null,{default:te(()=>[Se(e.$slots,"default",{},()=>[e.message?(V(),Te("span",jB,Ne(e.message),1)):ze("",!0),(V(!0),Te(Ze,null,er(e.actions,(r,s)=>(V(),ce(GA,{key:s,action:r},null,8,["action"]))),128))])]),_:3}))}}),BB=me({__name:"Toast",props:{message:{},actions:{},variant:{default:"secondary"},class:{}},setup(t,{expose:e}){const n=ne(()=>AA({baseClasses:t.class,variant:t.variant},{baseClasses:"flex items-center gap-2 rounded-md p-2 ring-1 shadow-lg border-gray-200",variants:{variant:{secondary:"bg-gray-900 text-white ring-black",danger:"bg-red-50 text-red-900 ring-red-100"}},defaultVariants:{variant:"secondary"}}));return e(),(r,s)=>(V(),ce(UB,{class:Ge(n.value)},{default:te(()=>[r.message?(V(),ce(Ft,{key:0,text:r.message,inline:""},null,8,["text"])):ze("",!0),(V(!0),Te(Ze,null,er(r.actions,(i,o)=>(V(),ce(wt,{key:o,action:i,variant:r.variant,as:GA},null,8,["action","variant"]))),128))]),_:1},8,["class"]))}}),HB={$ui:Dt},VB={async install(t,e){const n={"alert-modal":AU,"confirm-modal":OU,"error-report-modal":iB,"loading-modal":fB,"prompt-modal":_B,"startup-crash":FB,toast:BB,...e.components};for(const[r,s]of Object.entries(n))Dt.registerComponent(r,s);await so(t,HB)}};async function qB(t,e={}){var n;const r=[dU,Rj,uU,Gj,Oj,VB,...e.plugins??[]];ut.instance=t,await ij(r,t,e),await((n=e.install)==null?void 0:n.call(e,t)),await qe.emit("application-ready")}async function zB(t,e={}){var n;const r=pu(t);yi()&&(window.$aerogel=r),await qB(r,e),r.mount("#app"),(n=r._container)==null||n.classList.remove("loading"),await qe.emit("application-mounted")}const WB={key:0},KB=me({__name:"AppModals",setup(t){const e=ne(()=>Dt.modals[0]??null);return(n,r)=>e.value?(V(),Te("aside",WB,[oe(UA,{"child-index":1,modal:e.value},null,8,["modal"])])):ze("",!0)}}),GB=me({__name:"AppToasts",setup(t){return(e,n)=>(V(),ce(I(MF),null,{default:te(()=>[(V(!0),Te(Ze,null,er(e.$ui.toasts,r=>(V(),ce(ps(r.component),Be({id:r.id,key:r.id,ref_for:!0},r.properties),null,16,["id"]))),128)),oe(I(XF),{class:"fixed right-0 bottom-0 z-50 flex flex-col items-end space-y-4 px-4 py-6 sm:p-6"})]),_:1}))}}),JB=me({__name:"AppOverlays",setup(t){return(e,n)=>(V(),Te(Ze,null,[oe(KB),oe(GB)],64))}}),XB={class:"flex min-h-full flex-col text-base leading-tight font-normal text-gray-900 antialiased"},YB=me({__name:"AppLayout",setup(t){return(e,n)=>(V(),Te("div",XB,[e.$errors.hasStartupErrors?Se(e.$slots,"startup-crash",{key:0},()=>[(V(),ce(ps(e.$ui.requireComponent("startup-crash"))))]):Se(e.$slots,"default",{key:1}),oe(JB)]))}}),QB={class:"group"},ZB={class:"-ml-2 flex w-[max-content] items-center rounded-lg py-2 pr-3 pl-1 hover:bg-gray-100 focus-visible:outline focus-visible:outline-gray-700"},e3={class:"pt-2 pl-4"},t3=me({__name:"AdvancedOptions",setup(t){return(e,n)=>(V(),Te("details",QB,[Ee("summary",ZB,[oe(I(BA),{class:"size-6 transition-transform group-open:rotate-90"}),Ee("span",null,Ne(e.$td("ui.advancedOptions","Advanced options")),1)]),Ee("div",e3,[Se(e.$slots,"default")])]))}}),n3={class:"flex h-6 items-center"},dh=me({inheritAttrs:!1,__name:"Checkbox",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},labelClass:{}},emits:["update:modelValue"],setup(t){const e=Ti(t,["inputClass","labelClass"]),n=Zi("$inputRef"),[r,s]=SA(),i=ne(()=>Ht("relative flex items-start",s.value)),o=ne(()=>{var l,c;return Ht("size-4 rounded text-primary-600 not-checked:hover:bg-gray-200 checked:hover:text-primary-500 checked:border-0",{"border-gray-300 focus:ring-primary-600":!((l=n.value)!=null&&l.errors),"border-red-400 border-2 focus:ring-red-600":(c=n.value)==null?void 0:c.errors},t.inputClass)}),a=ne(()=>Ht("ml-2 text-sm leading-6",t.labelClass));return(l,c)=>(V(),ce(qA,Be({ref:"$inputRef",class:i.value},e,{"onUpdate:modelValue":c[0]||(c[0]=u=>l.$emit("update:modelValue",u))}),{default:te(()=>[Ee("div",n3,[oe(zA,Be(I(r),{type:"checkbox",class:o.value}),null,16,["class"])]),l.$slots.default?(V(),Te("div",{key:0,class:Ge(a.value)},[oe(jp,{class:"text-gray-900"},{default:te(()=>[Se(l.$slots,"default")]),_:3}),oe(Up,{class:"text-red-600"})],2)):l.label?(V(),Te("div",{key:1,class:Ge(a.value)},[oe(jp,{class:"text-gray-900"}),oe(Up,{class:"text-red-600"})],2)):ze("",!0)]),_:3},16,["class"]))}}),r3=me({__name:"DropdownMenuOption",props:{class:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t){const e=Ti(t,["class"]),n=ne(()=>Ht("flex w-full items-center gap-2 rounded-lg px-2 py-2 text-sm text-gray-900 data-[highlighted]:bg-gray-100",t.class));return(r,s)=>(V(),ce(I(sF),Be({class:n.value},e,{onSelect:s[0]||(s[0]=i=>r.$emit("select"))}),{default:te(()=>[Se(r.$slots,"default")]),_:3},16,["class"]))}}),s3=me({__name:"DropdownMenuOptions",setup(t){const e=Cn("dropdown-menu","<DropdownMenuOptions> must be a child of a <DropdownMenu>");return(n,r)=>(V(),ce(I(rF),{class:"gap-y-0.5 rounded-lg bg-white p-1.5 shadow-lg ring-1 ring-black/5",align:I(e).align,side:I(e).side},{default:te(()=>[Se(n.$slots,"default",{},()=>[(V(!0),Te(Ze,null,er(I(e).options,(s,i)=>(V(),ce(r3,Be({key:i,as:s.route||s.href?kA:void 0,class:s.class,ref_for:!0},s.route||s.href?{href:s.href,route:s.route,routeParams:s.routeParams,routeQuery:s.routeQuery}:{},{onSelect:o=>{var a;return(a=s.click)==null?void 0:a.call(s)}}),{default:te(()=>[nt(Ne(s.label),1)]),_:2},1040,["as","class","onSelect"]))),128))])]),_:3},8,["align","side"]))}}),i3=me({__name:"DropdownMenu",props:{align:{},side:{},options:{}},setup(t,{expose:e}){const n={align:t.align,side:t.side,options:ne(()=>{var r;return(r=t.options)==null?void 0:r.filter(Boolean)})};return ir("dropdown-menu",n),e(n),(r,s)=>(V(),ce(I(nF),null,{default:te(()=>[oe(I(oF),null,{default:te(()=>[Se(r.$slots,"default")]),_:3}),oe(I(iF),null,{default:te(()=>[Se(r.$slots,"options",{},()=>[oe(s3)])]),_:3})]),_:3}))}}),o3=["aria-hidden"],a3=["tabindex","aria-label","type"],l3=me({__name:"EditableContent",props:{type:{default:"text"},contentClass:{},ariaLabel:{},formAriaHidden:{type:Boolean},tabindex:{},text:{},disabled:{type:Boolean}},emits:["update","save"],setup(t,{emit:e}){const n=e,r=Zi("$inputRef"),s=ve(null),i=ve(t.text),o=ne(()=>Ht("inline whitespace-pre",t.contentClass)),a=ne(()=>Ht("invisible whitespace-pre",t.contentClass)),l=ne(()=>Ht("absolute inset-0 h-full w-full resize-none border-0 bg-transparent p-0 focus:ring-0",t.contentClass));function c(){s.value=t.text}function u(){s.value&&(t.type!=="number"&&i.value.trim().length===0&&(i.value=s.value,n("update",i.value)),s.value=null,n("save"))}return $t(()=>i.value=t.text),(d,f)=>(V(),Te("div",{class:Ge(["relative",{"pointer-events-none!":d.disabled&&!s.value}])},[s.value?(V(),Te("span",{key:1,class:Ge(a.value)},Ne(i.value),3)):(V(),Te("div",{key:0,class:Ge(o.value)},[Se(d.$slots,"default")],2)),d.type==="number"?(V(),Te("span",{key:2,class:Ge(["inline-block transition-[width]",s.value?"w-5":"w-0"])},null,2)):ze("",!0),Ee("form",{class:"w-full","aria-hidden":d.formAriaHidden,onSubmit:f[4]||(f[4]=Ur(h=>{var m;return(m=r.value)==null?void 0:m.blur()},["prevent"]))},[Rl(Ee("input",{ref:"$inputRef","onUpdate:modelValue":f[0]||(f[0]=h=>i.value=h),tabindex:d.tabindex??void 0,"aria-label":d.ariaLabel??void 0,type:d.type,class:Ge([l.value,{"opacity-0":!s.value,"appearance-textfield":!s.value&&d.type==="number"}]),onKeyup:f[1]||(f[1]=h=>d.$emit("update",i.value)),onFocus:f[2]||(f[2]=h=>c()),onBlur:f[3]||(f[3]=h=>u())},null,42,a3),[[fl,i.value]])],40,o3)],2))}}),c3={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function u3(t,e){return V(),Te("svg",c3,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const d3=ot({name:"ion-warning",render:u3}),f3={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function h3(t,e){return V(),Te("svg",f3,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const p3=ot({name:"zondicons-view-show",render:h3}),m3={class:"font-medium"},g3=["datetime"],y3=me({__name:"ErrorLogsModal",setup(t){return(e,n)=>(V(),ce(zs,{title:e.$td("errors.report","Errors ({count})",{count:e.$errors.logs.length})},{default:te(()=>[Ee("ol",null,[(V(!0),Te(Ze,null,er(e.$errors.logs,(r,s)=>(V(),Te("li",{key:s,class:"mb-2 flex max-w-prose min-w-56 justify-between py-2 last:mb-0"},[Ee("div",null,[Ee("h3",m3,Ne(r.report.title),1),Ee("time",{datetime:r.date.toISOString(),class:"text-xs text-gray-700"},Ne(r.date.toLocaleTimeString()),9,g3),oe(Ft,{class:"text-sm text-gray-500",text:r.report.description??I(oU)(r.report)},null,8,["text"])]),oe(wt,{size:"icon",variant:"ghost","aria-label":e.$td("errors.viewDetails","View details"),title:e.$td("errors.viewDetails","View details"),class:"self-center",onClick:i=>e.$errors.inspect(r.report,e.$errors.logs.map(({report:o})=>o))},{default:te(()=>[oe(I(p3),{class:"size-4","aria-hidden":"true"})]),_:2},1032,["aria-label","title","onClick"])]))),128))])]),_:1},8,["title"]))}}),b3=me({__name:"ErrorLogs",setup(t){return(e,n)=>e.$errors.logs.length>0?(V(),ce(wt,{key:0,size:"icon",variant:"ghost",title:e.$td("errors.viewLogs","View error logs"),"aria-label":e.$td("errors.viewLogs","View error logs"),onClick:n[0]||(n[0]=r=>e.$ui.modal(y3))},{default:te(()=>[oe(I(d3),{class:"size-6 text-red-500"})]),_:1},8,["title","aria-label"])):ze("",!0)}}),Xi=me({__name:"Link",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(V(),ce(wt,Be({variant:"link"},e.$props),{default:te(()=>[Se(e.$slots,"default")]),_:3},16))}}),JA=me({__name:"SettingsModal",setup(t){const e=ne(()=>ja(ut.settings,"priority","desc"));return(n,r)=>(V(),ce(zs,{title:n.$td("settings.title","Settings")},{default:te(()=>[(V(!0),Te(Ze,null,er(e.value,(s,i)=>(V(),ce(ps(s.component),{key:i}))),128))]),_:1},8,["title"]))}});class Hg{constructor(){pt(this,"status"),pt(this,"_listeners"),pt(this,"_progress"),pt(this,"_cancelled"),pt(this,"_started"),pt(this,"_completed"),this.status=this.getInitialStatus(),this._listeners=new W_,this._started=new rs,this._completed=new rs}async start(){this.beforeStart(),this._started.resolve();try{await this.updateProgress(),await this.run(),await this.updateProgress(),this._completed.resolve()}catch(e){if(e instanceof Pw)return;throw Fe(PT(e),n=>{this._completed.reject(n)})}}async cancel(){this._cancelled=new rs,await this._cancelled}serialize(){return this.serializeStatus(this.status)}get listeners(){return this._listeners}get progress(){return this._progress??0}get cancelled(){var e;return!!((e=this._cancelled)!=null&&e.isResolved())}get started(){return this._started}get completed(){return this._completed}getInitialStatus(){return{completed:!1}}beforeStart(){if(this._started.isResolved()){if(this._cancelled){delete this._progress,delete this._cancelled;return}throw new Error("Job already started!")}}assertNotCancelled(){if(this._cancelled)throw this._cancelled.resolve(),new Pw}calculateCurrentProgress(e){return e??(e=this.status),e.completed?1:e.children?t0(e.children.reduce((n,r)=>n+this.calculateCurrentProgress(r),0)/e.children.length,2):0}async updateProgress(e){await(e==null?void 0:e(this.status));const n=this.calculateCurrentProgress();n!==this._progress&&(this._progress=n,await this._listeners.emit("onUpdated",n))}serializeStatus(e){return{...e}}}async function fh(t){await t.start()}/*!
  * shared v11.1.9
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Au=typeof window<"u",Ii=(t,e=!1)=>e?Symbol.for(t):Symbol(t),v3=(t,e,n)=>w3({l:t,k:e,s:n}),w3=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Yt=t=>typeof t=="number"&&isFinite(t),_3=t=>qg(t)==="[object Date]",Su=t=>qg(t)==="[object RegExp]",xd=t=>it(t)&&Object.keys(t).length===0,fn=Object.assign,x3=Object.create,Et=(t=null)=>x3(t);let $w;const Vg=()=>$w||($w=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Et());function Nw(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const E3=Object.prototype.hasOwnProperty;function Fr(t,e){return E3.call(t,e)}const Kt=Array.isArray,jt=t=>typeof t=="function",Pe=t=>typeof t=="string",Ut=t=>typeof t=="boolean",dt=t=>t!==null&&typeof t=="object",A3=t=>dt(t)&&jt(t.then)&&jt(t.catch),XA=Object.prototype.toString,qg=t=>XA.call(t),it=t=>qg(t)==="[object Object]",S3=t=>t==null?"":Kt(t)||it(t)&&t.toString===XA?JSON.stringify(t,null,2):String(t);function zg(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function T3(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const gc=t=>!dt(t)||Kt(t);function Bc(t,e){if(gc(t)||gc(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(dt(r[i])&&!dt(s[i])&&(s[i]=Array.isArray(r[i])?[]:Et()),gc(s[i])||gc(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.1.9
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function R3(t,e,n){return{line:t,column:e,offset:n}}function Bp(t,e,n){return{start:t,end:e}}const gt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},I3=17;function Ed(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function C3(t){throw t}const xs=" ",k3="\r",Dn=`
`,O3="\u2028",D3="\u2029";function P3(t){const e=t;let n=0,r=1,s=1,i=0;const o=R=>e[R]===k3&&e[R+1]===Dn,a=R=>e[R]===Dn,l=R=>e[R]===D3,c=R=>e[R]===O3,u=R=>o(R)||a(R)||l(R)||c(R),d=()=>n,f=()=>r,h=()=>s,m=()=>i,y=R=>o(R)||l(R)||c(R)?Dn:e[R],A=()=>y(n),E=()=>y(n+i);function _(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function g(){return o(n+i)&&i++,i++,e[n+i]}function p(){n=0,r=1,s=1,i=0}function b(R=0){i=R}function x(){const R=n+i;for(;R!==n;)_();i=0}return{index:d,line:f,column:h,peekOffset:m,charAt:y,currentChar:A,currentPeek:E,next:_,peek:g,reset:p,resetPeek:b,skipToPeek:x}}const Gs=void 0,$3=".",Lw="'",N3="tokenizer";function L3(t,e={}){const n=e.location!==!1,r=P3(t),s=()=>r.index(),i=()=>R3(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(N,H,Q,...he){const ye=c();if(H.column+=Q,H.offset+=Q,u){const _e=n?Bp(ye.startLoc,H):null,G=Ed(N,_e,{domain:N3,args:he});u(G)}}function f(N,H,Q){N.endLoc=i(),N.currentType=H;const he={type:H};return n&&(he.loc=Bp(N.startLoc,N.endLoc)),Q!=null&&(he.value=Q),he}const h=N=>f(N,13);function m(N,H){return N.currentChar()===H?(N.next(),H):(d(gt.EXPECTED_TOKEN,i(),0,H),"")}function y(N){let H="";for(;N.currentPeek()===xs||N.currentPeek()===Dn;)H+=N.currentPeek(),N.peek();return H}function A(N){const H=y(N);return N.skipToPeek(),H}function E(N){if(N===Gs)return!1;const H=N.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H===95}function _(N){if(N===Gs)return!1;const H=N.charCodeAt(0);return H>=48&&H<=57}function g(N,H){const{currentType:Q}=H;if(Q!==2)return!1;y(N);const he=E(N.currentPeek());return N.resetPeek(),he}function p(N,H){const{currentType:Q}=H;if(Q!==2)return!1;y(N);const he=N.currentPeek()==="-"?N.peek():N.currentPeek(),ye=_(he);return N.resetPeek(),ye}function b(N,H){const{currentType:Q}=H;if(Q!==2)return!1;y(N);const he=N.currentPeek()===Lw;return N.resetPeek(),he}function x(N,H){const{currentType:Q}=H;if(Q!==7)return!1;y(N);const he=N.currentPeek()===".";return N.resetPeek(),he}function R(N,H){const{currentType:Q}=H;if(Q!==8)return!1;y(N);const he=E(N.currentPeek());return N.resetPeek(),he}function T(N,H){const{currentType:Q}=H;if(!(Q===7||Q===11))return!1;y(N);const he=N.currentPeek()===":";return N.resetPeek(),he}function S(N,H){const{currentType:Q}=H;if(Q!==9)return!1;const he=()=>{const _e=N.currentPeek();return _e==="{"?E(N.peek()):_e==="@"||_e==="|"||_e===":"||_e==="."||_e===xs||!_e?!1:_e===Dn?(N.peek(),he()):M(N,!1)},ye=he();return N.resetPeek(),ye}function C(N){y(N);const H=N.currentPeek()==="|";return N.resetPeek(),H}function M(N,H=!0){const Q=(ye=!1,_e="")=>{const G=N.currentPeek();return G==="{"||G==="@"||!G?ye:G==="|"?!(_e===xs||_e===Dn):G===xs?(N.peek(),Q(!0,xs)):G===Dn?(N.peek(),Q(!0,Dn)):!0},he=Q();return H&&N.resetPeek(),he}function P(N,H){const Q=N.currentChar();return Q===Gs?Gs:H(Q)?(N.next(),Q):null}function j(N){const H=N.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H>=48&&H<=57||H===95||H===36}function L(N){return P(N,j)}function Y(N){const H=N.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H>=48&&H<=57||H===95||H===36||H===45}function O(N){return P(N,Y)}function q(N){const H=N.charCodeAt(0);return H>=48&&H<=57}function B(N){return P(N,q)}function re(N){const H=N.charCodeAt(0);return H>=48&&H<=57||H>=65&&H<=70||H>=97&&H<=102}function z(N){return P(N,re)}function ae(N){let H="",Q="";for(;H=B(N);)Q+=H;return Q}function fe(N){let H="";for(;;){const Q=N.currentChar();if(Q==="{"||Q==="}"||Q==="@"||Q==="|"||!Q)break;if(Q===xs||Q===Dn)if(M(N))H+=Q,N.next();else{if(C(N))break;H+=Q,N.next()}else H+=Q,N.next()}return H}function pe(N){A(N);let H="",Q="";for(;H=O(N);)Q+=H;return N.currentChar()===Gs&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),Q}function xe(N){A(N);let H="";return N.currentChar()==="-"?(N.next(),H+=`-${ae(N)}`):H+=ae(N),N.currentChar()===Gs&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),H}function K(N){return N!==Lw&&N!==Dn}function W(N){A(N),m(N,"'");let H="",Q="";for(;H=P(N,K);)H==="\\"?Q+=$(N):Q+=H;const he=N.currentChar();return he===Dn||he===Gs?(d(gt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),he===Dn&&(N.next(),m(N,"'")),Q):(m(N,"'"),Q)}function $(N){const H=N.currentChar();switch(H){case"\\":case"'":return N.next(),`\\${H}`;case"u":return X(N,H,4);case"U":return X(N,H,6);default:return d(gt.UNKNOWN_ESCAPE_SEQUENCE,i(),0,H),""}}function X(N,H,Q){m(N,H);let he="";for(let ye=0;ye<Q;ye++){const _e=z(N);if(!_e){d(gt.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${H}${he}${N.currentChar()}`);break}he+=_e}return`\\${H}${he}`}function ie(N){return N!=="{"&&N!=="}"&&N!==xs&&N!==Dn}function ee(N){A(N);let H="",Q="";for(;H=P(N,ie);)Q+=H;return Q}function we(N){let H="",Q="";for(;H=L(N);)Q+=H;return Q}function Ae(N){const H=Q=>{const he=N.currentChar();return he==="{"||he==="@"||he==="|"||he==="("||he===")"||!he||he===xs?Q:(Q+=he,N.next(),H(Q))};return H("")}function D(N){A(N);const H=m(N,"|");return A(N),H}function F(N,H){let Q=null;switch(N.currentChar()){case"{":return H.braceNest>=1&&d(gt.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),N.next(),Q=f(H,2,"{"),A(N),H.braceNest++,Q;case"}":return H.braceNest>0&&H.currentType===2&&d(gt.EMPTY_PLACEHOLDER,i(),0),N.next(),Q=f(H,3,"}"),H.braceNest--,H.braceNest>0&&A(N),H.inLinked&&H.braceNest===0&&(H.inLinked=!1),Q;case"@":return H.braceNest>0&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),Q=se(N,H)||h(H),H.braceNest=0,Q;default:{let ye=!0,_e=!0,G=!0;if(C(N))return H.braceNest>0&&d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),Q=f(H,1,D(N)),H.braceNest=0,H.inLinked=!1,Q;if(H.braceNest>0&&(H.currentType===4||H.currentType===5||H.currentType===6))return d(gt.UNTERMINATED_CLOSING_BRACE,i(),0),H.braceNest=0,ge(N,H);if(ye=g(N,H))return Q=f(H,4,pe(N)),A(N),Q;if(_e=p(N,H))return Q=f(H,5,xe(N)),A(N),Q;if(G=b(N,H))return Q=f(H,6,W(N)),A(N),Q;if(!ye&&!_e&&!G)return Q=f(H,12,ee(N)),d(gt.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,Q.value),A(N),Q;break}}return Q}function se(N,H){const{currentType:Q}=H;let he=null;const ye=N.currentChar();switch((Q===7||Q===8||Q===11||Q===9)&&(ye===Dn||ye===xs)&&d(gt.INVALID_LINKED_FORMAT,i(),0),ye){case"@":return N.next(),he=f(H,7,"@"),H.inLinked=!0,he;case".":return A(N),N.next(),f(H,8,".");case":":return A(N),N.next(),f(H,9,":");default:return C(N)?(he=f(H,1,D(N)),H.braceNest=0,H.inLinked=!1,he):x(N,H)||T(N,H)?(A(N),se(N,H)):R(N,H)?(A(N),f(H,11,we(N))):S(N,H)?(A(N),ye==="{"?F(N,H)||he:f(H,10,Ae(N))):(Q===7&&d(gt.INVALID_LINKED_FORMAT,i(),0),H.braceNest=0,H.inLinked=!1,ge(N,H))}}function ge(N,H){let Q={type:13};if(H.braceNest>0)return F(N,H)||h(H);if(H.inLinked)return se(N,H)||h(H);switch(N.currentChar()){case"{":return F(N,H)||h(H);case"}":return d(gt.UNBALANCED_CLOSING_BRACE,i(),0),N.next(),f(H,3,"}");case"@":return se(N,H)||h(H);default:{if(C(N))return Q=f(H,1,D(N)),H.braceNest=0,H.inLinked=!1,Q;if(M(N))return f(H,0,fe(N));break}}return Q}function de(){const{currentType:N,offset:H,startLoc:Q,endLoc:he}=l;return l.lastType=N,l.lastOffset=H,l.lastStartLoc=Q,l.lastEndLoc=he,l.offset=s(),l.startLoc=i(),r.currentChar()===Gs?f(l,13):ge(r,l)}return{nextToken:de,currentOffset:s,currentPosition:i,context:c}}const M3="parser",F3=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function j3(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function U3(t={}){const e=t.location!==!1,{onError:n}=t;function r(E,_,g,p,...b){const x=E.currentPosition();if(x.offset+=p,x.column+=p,n){const R=e?Bp(g,x):null,T=Ed(_,R,{domain:M3,args:b});n(T)}}function s(E,_,g){const p={type:E};return e&&(p.start=_,p.end=_,p.loc={start:g,end:g}),p}function i(E,_,g,p){e&&(E.end=_,E.loc&&(E.loc.end=g))}function o(E,_){const g=E.context(),p=s(3,g.offset,g.startLoc);return p.value=_,i(p,E.currentOffset(),E.currentPosition()),p}function a(E,_){const g=E.context(),{lastOffset:p,lastStartLoc:b}=g,x=s(5,p,b);return x.index=parseInt(_,10),E.nextToken(),i(x,E.currentOffset(),E.currentPosition()),x}function l(E,_){const g=E.context(),{lastOffset:p,lastStartLoc:b}=g,x=s(4,p,b);return x.key=_,E.nextToken(),i(x,E.currentOffset(),E.currentPosition()),x}function c(E,_){const g=E.context(),{lastOffset:p,lastStartLoc:b}=g,x=s(9,p,b);return x.value=_.replace(F3,j3),E.nextToken(),i(x,E.currentOffset(),E.currentPosition()),x}function u(E){const _=E.nextToken(),g=E.context(),{lastOffset:p,lastStartLoc:b}=g,x=s(8,p,b);return _.type!==11?(r(E,gt.UNEXPECTED_EMPTY_LINKED_MODIFIER,g.lastStartLoc,0),x.value="",i(x,p,b),{nextConsumeToken:_,node:x}):(_.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,Xr(_)),x.value=_.value||"",i(x,E.currentOffset(),E.currentPosition()),{node:x})}function d(E,_){const g=E.context(),p=s(7,g.offset,g.startLoc);return p.value=_,i(p,E.currentOffset(),E.currentPosition()),p}function f(E){const _=E.context(),g=s(6,_.offset,_.startLoc);let p=E.nextToken();if(p.type===8){const b=u(E);g.modifier=b.node,p=b.nextConsumeToken||E.nextToken()}switch(p.type!==9&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(p)),p=E.nextToken(),p.type===2&&(p=E.nextToken()),p.type){case 10:p.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(p)),g.key=d(E,p.value||"");break;case 4:p.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(p)),g.key=l(E,p.value||"");break;case 5:p.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(p)),g.key=a(E,p.value||"");break;case 6:p.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(p)),g.key=c(E,p.value||"");break;default:{r(E,gt.UNEXPECTED_EMPTY_LINKED_KEY,_.lastStartLoc,0);const b=E.context(),x=s(7,b.offset,b.startLoc);return x.value="",i(x,b.offset,b.startLoc),g.key=x,i(g,b.offset,b.startLoc),{nextConsumeToken:p,node:g}}}return i(g,E.currentOffset(),E.currentPosition()),{node:g}}function h(E){const _=E.context(),g=_.currentType===1?E.currentOffset():_.offset,p=_.currentType===1?_.endLoc:_.startLoc,b=s(2,g,p);b.items=[];let x=null;do{const S=x||E.nextToken();switch(x=null,S.type){case 0:S.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(S)),b.items.push(o(E,S.value||""));break;case 5:S.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(S)),b.items.push(a(E,S.value||""));break;case 4:S.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(S)),b.items.push(l(E,S.value||""));break;case 6:S.value==null&&r(E,gt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Xr(S)),b.items.push(c(E,S.value||""));break;case 7:{const C=f(E);b.items.push(C.node),x=C.nextConsumeToken||null;break}}}while(_.currentType!==13&&_.currentType!==1);const R=_.currentType===1?_.lastOffset:E.currentOffset(),T=_.currentType===1?_.lastEndLoc:E.currentPosition();return i(b,R,T),b}function m(E,_,g,p){const b=E.context();let x=p.items.length===0;const R=s(1,_,g);R.cases=[],R.cases.push(p);do{const T=h(E);x||(x=T.items.length===0),R.cases.push(T)}while(b.currentType!==13);return x&&r(E,gt.MUST_HAVE_MESSAGES_IN_PLURAL,g,0),i(R,E.currentOffset(),E.currentPosition()),R}function y(E){const _=E.context(),{offset:g,startLoc:p}=_,b=h(E);return _.currentType===13?b:m(E,g,p,b)}function A(E){const _=L3(E,fn({},t)),g=_.context(),p=s(0,g.offset,g.startLoc);return e&&p.loc&&(p.loc.source=E),p.body=y(_),t.onCacheKey&&(p.cacheKey=t.onCacheKey(E)),g.currentType!==13&&r(_,gt.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,E[g.offset]||""),i(p,_.currentOffset(),_.currentPosition()),p}return{parse:A}}function Xr(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function B3(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function Mw(t,e){for(let n=0;n<t.length;n++)Wg(t[n],e)}function Wg(t,e){switch(t.type){case 1:Mw(t.cases,e),e.helper("plural");break;case 2:Mw(t.items,e);break;case 6:{Wg(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function H3(t,e={}){const n=B3(t);n.helper("normalize"),t.body&&Wg(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function V3(t){const e=t.body;return e.type===2?Fw(e):e.cases.forEach(n=>Fw(n)),t}function Fw(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=zg(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function _o(t){switch(t.t=t.type,t.type){case 0:{const e=t;_o(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)_o(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)_o(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;_o(e.key),e.k=e.key,delete e.key,e.modifier&&(_o(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function q3(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(y,A){o.code+=y}function c(y,A=!0){const E=A?r:"";l(s?E+"  ".repeat(y):E)}function u(y=!0){const A=++o.indentLevel;y&&c(A)}function d(y=!0){const A=--o.indentLevel;y&&c(A)}function f(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:f,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function z3(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Qo(t,e.key),e.modifier?(t.push(", "),Qo(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function W3(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Qo(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function K3(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Qo(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function G3(t,e){e.body?Qo(t,e.body):t.push("null")}function Qo(t,e){const{helper:n}=t;switch(e.type){case 0:G3(t,e);break;case 1:K3(t,e);break;case 2:W3(t,e);break;case 6:z3(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const J3=(t,e={})=>{const n=Pe(e.mode)?e.mode:"normal",r=Pe(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=q3(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${zg(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),Qo(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:c}=a.context();return{ast:t,code:l,map:c?c.toJSON():void 0}};function X3(t,e={}){const n=fn({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=U3(n).parse(t);return r?(i&&V3(a),s&&_o(a),{ast:a,code:""}):(H3(a,n),J3(a,n))}/*!
  * core-base v11.1.9
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Y3(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Vg().__INTLIFY_PROD_DEVTOOLS__=!1)}function as(t){return dt(t)&&Kg(t)===0&&(Fr(t,"b")||Fr(t,"body"))}const YA=["b","body"];function Q3(t){return Ci(t,YA)}const QA=["c","cases"];function Z3(t){return Ci(t,QA,[])}const ZA=["s","static"];function e4(t){return Ci(t,ZA)}const eS=["i","items"];function t4(t){return Ci(t,eS,[])}const tS=["t","type"];function Kg(t){return Ci(t,tS)}const nS=["v","value"];function yc(t,e){const n=Ci(t,nS);if(n!=null)return n;throw ml(e)}const rS=["m","modifier"];function n4(t){return Ci(t,rS)}const sS=["k","key"];function r4(t){const e=Ci(t,sS);if(e)return e;throw ml(6)}function Ci(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(Fr(t,s)&&t[s]!=null)return t[s]}return n}const iS=[...YA,...QA,...ZA,...eS,...sS,...rS,...nS,...tS];function ml(t){return new Error(`unhandled node type: ${t}`)}function hh(t){return n=>s4(n,t)}function s4(t,e){const n=Q3(e);if(n==null)throw ml(0);if(Kg(n)===1){const i=Z3(n);return t.plural(i.reduce((o,a)=>[...o,jw(t,a)],[]))}else return jw(t,n)}function jw(t,e){const n=e4(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=t4(e).reduce((s,i)=>[...s,Hp(t,i)],[]);return t.normalize(r)}}function Hp(t,e){const n=Kg(e);switch(n){case 3:return yc(e,n);case 9:return yc(e,n);case 4:{const r=e;if(Fr(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Fr(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw ml(n)}case 5:{const r=e;if(Fr(r,"i")&&Yt(r.i))return t.interpolate(t.list(r.i));if(Fr(r,"index")&&Yt(r.index))return t.interpolate(t.list(r.index));throw ml(n)}case 6:{const r=e,s=n4(r),i=r4(r);return t.linked(Hp(t,i),s?Hp(t,s):void 0,t.type)}case 7:return yc(e,n);case 8:return yc(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const i4=t=>t;let bc=Et();function o4(t,e={}){let n=!1;const r=e.onError||C3;return e.onError=s=>{n=!0,r(s)},{...X3(t,e),detectError:n}}function a4(t,e){if(Pe(t)){Ut(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||i4)(t),s=bc[r];if(s)return s;const{ast:i,detectError:o}=o4(t,{...e,location:!1,jit:!0}),a=hh(i);return o?a:bc[r]=a}else{const n=t.cacheKey;if(n){const r=bc[n];return r||(bc[n]=hh(t))}else return hh(t)}}let gl=null;function l4(t){gl=t}function c4(t,e,n){gl&&gl.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const u4=d4("function:translate");function d4(t){return e=>gl&&gl.emit(t,e)}const Ds={INVALID_ARGUMENT:I3,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},f4=24;function Ps(t){return Ed(t,null,void 0)}function Gg(t,e){return e.locale!=null?Uw(e.locale):Uw(t.locale)}let ph;function Uw(t){if(Pe(t))return t;if(jt(t)){if(t.resolvedOnce&&ph!=null)return ph;if(t.constructor.name==="Function"){const e=t();if(A3(e))throw Ps(Ds.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ph=e}else throw Ps(Ds.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Ps(Ds.NOT_SUPPORT_LOCALE_TYPE)}function h4(t,e,n){return[...new Set([n,...Kt(e)?e:dt(e)?Object.keys(e):Pe(e)?[e]:[n]])]}function oS(t,e,n){const r=Pe(n)?n:Tu,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;Kt(o);)o=Bw(i,o,e);const a=Kt(e)||!it(e)?e:e.default?e.default:null;o=Pe(a)?[a]:a,Kt(o)&&Bw(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Bw(t,e,n){let r=!0;for(let s=0;s<e.length&&Ut(r);s++){const i=e[s];Pe(i)&&(r=p4(t,e[s],n))}return r}function p4(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=m4(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function m4(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Kt(n)||it(n))&&n[s]&&(r=n[s])}return r}const ki=[];ki[0]={w:[0],i:[3,0],"[":[4],o:[7]};ki[1]={w:[1],".":[2],"[":[4],o:[7]};ki[2]={w:[2],i:[3,0],0:[3,0]};ki[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ki[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ki[5]={"'":[4,0],o:8,l:[5,0]};ki[6]={'"':[4,0],o:8,l:[6,0]};const g4=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function y4(t){return g4.test(t)}function b4(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function v4(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function w4(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:y4(e)?b4(e):"*"+e}function _4(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=w4(o),o===!1))return!1;f[1]()}};function h(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&h())){if(l=v4(i),d=ki[r],c=d[l]||d.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const Hw=new Map;function x4(t,e){return dt(t)?t[e]:null}function E4(t,e){if(!dt(t))return null;let n=Hw.get(e);if(n||(n=_4(e),n&&Hw.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(iS.includes(o)&&as(s))return null;const a=s[o];if(a===void 0||jt(s))return null;s=a,i++}return s}const A4="11.1.9",Ad=-1,Tu="en-US",Vw="",qw=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function S4(){return{upper:(t,e)=>e==="text"&&Pe(t)?t.toUpperCase():e==="vnode"&&dt(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Pe(t)?t.toLowerCase():e==="vnode"&&dt(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Pe(t)?qw(t):e==="vnode"&&dt(t)&&"__v_isVNode"in t?qw(t.children):t}}let aS;function T4(t){aS=t}let lS;function R4(t){lS=t}let cS;function I4(t){cS=t}let uS=null;const C4=t=>{uS=t},k4=()=>uS;let dS=null;const zw=t=>{dS=t},O4=()=>dS;let Ww=0;function D4(t={}){const e=jt(t.onWarn)?t.onWarn:T3,n=Pe(t.version)?t.version:A4,r=Pe(t.locale)||jt(t.locale)?t.locale:Tu,s=jt(r)?Tu:r,i=Kt(t.fallbackLocale)||it(t.fallbackLocale)||Pe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=it(t.messages)?t.messages:mh(s),a=it(t.datetimeFormats)?t.datetimeFormats:mh(s),l=it(t.numberFormats)?t.numberFormats:mh(s),c=fn(Et(),t.modifiers,S4()),u=t.pluralRules||Et(),d=jt(t.missing)?t.missing:null,f=Ut(t.missingWarn)||Su(t.missingWarn)?t.missingWarn:!0,h=Ut(t.fallbackWarn)||Su(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,y=!!t.unresolving,A=jt(t.postTranslation)?t.postTranslation:null,E=it(t.processor)?t.processor:null,_=Ut(t.warnHtmlMessage)?t.warnHtmlMessage:!0,g=!!t.escapeParameter,p=jt(t.messageCompiler)?t.messageCompiler:aS,b=jt(t.messageResolver)?t.messageResolver:lS||x4,x=jt(t.localeFallbacker)?t.localeFallbacker:cS||h4,R=dt(t.fallbackContext)?t.fallbackContext:void 0,T=t,S=dt(T.__datetimeFormatters)?T.__datetimeFormatters:new Map,C=dt(T.__numberFormatters)?T.__numberFormatters:new Map,M=dt(T.__meta)?T.__meta:{};Ww++;const P={version:n,cid:Ww,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:m,unresolving:y,postTranslation:A,processor:E,warnHtmlMessage:_,escapeParameter:g,messageCompiler:p,messageResolver:b,localeFallbacker:x,fallbackContext:R,onWarn:e,__meta:M};return P.datetimeFormats=a,P.numberFormats=l,P.__datetimeFormatters=S,P.__numberFormatters=C,__INTLIFY_PROD_DEVTOOLS__&&c4(P,n,M),P}const mh=t=>({[t]:Et()});function Jg(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return Pe(a)?a:e}else return e}function Oa(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function P4(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function $4(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(P4(t,e[r]))return!0;return!1}function Kw(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=Vp(...e),f=Ut(u.missingWarn)?u.missingWarn:t.missingWarn;Ut(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=Gg(t,u),y=o(t,s,m);if(!Pe(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let A={},E,_=null;const g="datetime format";for(let x=0;x<y.length&&(E=y[x],A=n[E]||{},_=A[l],!it(_));x++)Jg(t,l,E,f,g);if(!it(_)||!Pe(E))return r?Ad:l;let p=`${E}__${l}`;xd(d)||(p=`${p}__${JSON.stringify(d)}`);let b=a.get(p);return b||(b=new Intl.DateTimeFormat(E,fn({},_,d)),a.set(p,b)),h?b.formatToParts(c):b.format(c)}const fS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Vp(...t){const[e,n,r,s]=t,i=Et();let o=Et(),a;if(Pe(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Ps(Ds.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw Ps(Ds.INVALID_ISO_DATE_ARGUMENT)}}else if(_3(e)){if(isNaN(e.getTime()))throw Ps(Ds.INVALID_DATE_ARGUMENT);a=e}else if(Yt(e))a=e;else throw Ps(Ds.INVALID_ARGUMENT);return Pe(n)?i.key=n:it(n)&&Object.keys(n).forEach(l=>{fS.includes(l)?o[l]=n[l]:i[l]=n[l]}),Pe(r)?i.locale=r:it(r)&&(o=r),it(s)&&(o=s),[i.key||"",a,i,o]}function Gw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Jw(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,d]=qp(...e),f=Ut(u.missingWarn)?u.missingWarn:t.missingWarn;Ut(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=Gg(t,u),y=o(t,s,m);if(!Pe(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let A={},E,_=null;const g="number format";for(let x=0;x<y.length&&(E=y[x],A=n[E]||{},_=A[l],!it(_));x++)Jg(t,l,E,f,g);if(!it(_)||!Pe(E))return r?Ad:l;let p=`${E}__${l}`;xd(d)||(p=`${p}__${JSON.stringify(d)}`);let b=a.get(p);return b||(b=new Intl.NumberFormat(E,fn({},_,d)),a.set(p,b)),h?b.formatToParts(c):b.format(c)}const hS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function qp(...t){const[e,n,r,s]=t,i=Et();let o=Et();if(!Yt(e))throw Ps(Ds.INVALID_ARGUMENT);const a=e;return Pe(n)?i.key=n:it(n)&&Object.keys(n).forEach(l=>{hS.includes(l)?o[l]=n[l]:i[l]=n[l]}),Pe(r)?i.locale=r:it(r)&&(o=r),it(s)&&(o=s),[i.key||"",a,i,o]}function Xw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const N4=t=>t,L4=t=>"",M4="text",F4=t=>t.length===0?"":zg(t),j4=S3;function Yw(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function U4(t){const e=Yt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Yt(t.named.count)||Yt(t.named.n))?Yt(t.named.count)?t.named.count:Yt(t.named.n)?t.named.n:e:e}function B4(t,e){e.count||(e.count=t),e.n||(e.n=t)}function H4(t={}){const e=t.locale,n=U4(t),r=dt(t.pluralRules)&&Pe(e)&&jt(t.pluralRules[e])?t.pluralRules[e]:Yw,s=dt(t.pluralRules)&&Pe(e)&&jt(t.pluralRules[e])?Yw:void 0,i=E=>E[r(n,E.length,s)],o=t.list||[],a=E=>o[E],l=t.named||Et();Yt(t.pluralIndex)&&B4(n,l);const c=E=>l[E];function u(E,_){const g=jt(t.messages)?t.messages(E,!!_):dt(t.messages)?t.messages[E]:!1;return g||(t.parent?t.parent.message(E):L4)}const d=E=>t.modifiers?t.modifiers[E]:N4,f=it(t.processor)&&jt(t.processor.normalize)?t.processor.normalize:F4,h=it(t.processor)&&jt(t.processor.interpolate)?t.processor.interpolate:j4,m=it(t.processor)&&Pe(t.processor.type)?t.processor.type:M4,A={list:a,named:c,plural:i,linked:(E,..._)=>{const[g,p]=_;let b="text",x="";_.length===1?dt(g)?(x=g.modifier||x,b=g.type||b):Pe(g)&&(x=g||x):_.length===2&&(Pe(g)&&(x=g||x),Pe(p)&&(b=p||b));const R=u(E,!0)(A),T=b==="vnode"&&Kt(R)&&x?R[0]:R;return x?d(x)(T,b):T},message:u,type:m,interpolate:h,normalize:f,values:fn(Et(),o,l)};return A}const Qw=()=>"",mr=t=>jt(t);function Zw(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=zp(...e),u=Ut(c.missingWarn)?c.missingWarn:t.missingWarn,d=Ut(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,f=Ut(c.escapeParameter)?c.escapeParameter:t.escapeParameter,h=!!c.resolvedMessage,m=Pe(c.default)||Ut(c.default)?Ut(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:null,y=n||m!=null&&(Pe(m)||jt(m)),A=Gg(t,c);f&&V4(c);let[E,_,g]=h?[l,A,a[A]||Et()]:pS(t,l,A,o,d,u),p=E,b=l;if(!h&&!(Pe(p)||as(p)||mr(p))&&y&&(p=m,b=p),!h&&(!(Pe(p)||as(p)||mr(p))||!Pe(_)))return s?Ad:l;let x=!1;const R=()=>{x=!0},T=mr(p)?p:mS(t,l,_,p,b,R);if(x)return p;const S=W4(t,_,g,c),C=H4(S),M=q4(t,T,C),P=r?r(M,l):M;if(__INTLIFY_PROD_DEVTOOLS__){const j={timestamp:Date.now(),key:Pe(l)?l:mr(p)?p.key:"",locale:_||(mr(p)?p.locale:""),format:Pe(p)?p:mr(p)?p.source:"",message:P};j.meta=fn({},t.__meta,k4()||{}),u4(j)}return P}function V4(t){Kt(t.list)?t.list=t.list.map(e=>Pe(e)?Nw(e):e):dt(t.named)&&Object.keys(t.named).forEach(e=>{Pe(t.named[e])&&(t.named[e]=Nw(t.named[e]))})}function pS(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let d=Et(),f,h=null;const m="translate";for(let y=0;y<u.length&&(f=u[y],d=o[f]||Et(),(h=l(d,e))===null&&(h=d[e]),!(Pe(h)||as(h)||mr(h)));y++)if(!$4(f,u)){const A=Jg(t,e,f,i,m);A!==e&&(h=A)}return[h,f,d]}function mS(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(mr(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,z4(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function q4(t,e,n){return e(n)}function zp(...t){const[e,n,r]=t,s=Et();if(!Pe(e)&&!Yt(e)&&!mr(e)&&!as(e))throw Ps(Ds.INVALID_ARGUMENT);const i=Yt(e)?String(e):(mr(e),e);return Yt(n)?s.plural=n:Pe(n)?s.default=n:it(n)&&!xd(n)?s.named=n:Kt(n)&&(s.list=n),Yt(r)?s.plural=r:Pe(r)?s.default=r:it(r)&&fn(s,r),[i,s]}function z4(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>v3(e,n,o)}}function W4(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(h,m)=>{let y=o(n,h);if(y==null&&(u||m)){const[,,A]=pS(u||t,h,e,a,l,c);y=o(A,h)}if(Pe(y)||as(y)){let A=!1;const _=mS(t,h,e,y,h,()=>{A=!0});return A?Qw:_}else return mr(y)?y:Qw}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),Yt(r.plural)&&(f.pluralIndex=r.plural),f}Y3();/*!
  * vue-i18n v11.1.9
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const K4="11.1.9";function G4(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Vg().__INTLIFY_PROD_DEVTOOLS__=!1)}const kr={UNEXPECTED_RETURN_TYPE:f4,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Wr(t,...e){return Ed(t,null,void 0)}const Wp=Ii("__translateVNode"),Kp=Ii("__datetimeParts"),Gp=Ii("__numberParts"),J4=Ii("__setPluralRules"),X4=Ii("__injectWithOption"),Jp=Ii("__dispose");function yl(t){if(!dt(t)||as(t))return t;for(const e in t)if(Fr(t,e))if(!e.includes("."))dt(t[e])&&yl(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=Et()),!dt(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(as(s)?iS.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!as(s)){const o=s[n[r]];dt(o)&&yl(o)}}return t}function gS(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=it(n)?n:Kt(r)?Et():{[t]:Et()};if(Kt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||Et(),Bc(c,o[l])):Bc(c,o)}else Pe(a)&&Bc(JSON.parse(a),o)}),s==null&&i)for(const a in o)Fr(o,a)&&yl(o[a]);return o}function yS(t){return t.type}function Y4(t,e,n){let r=dt(e.messages)?e.messages:Et();"__i18nGlobal"in n&&(r=gS(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(dt(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(dt(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function e_(t){return oe(is,null,t,0)}const t_="__INTLIFY_META__",n_=()=>[],Q4=()=>!1;let r_=0;function s_(t){return(e,n,r,s)=>t(n,r,zt()||void 0,s)}const Z4=()=>{const t=zt();let e=null;return t&&(e=yS(t)[t_])?{[t_]:e}:null};function bS(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=Au?ve:lr;let o=Ut(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:Pe(t.locale)?t.locale:Tu),l=i(e&&o?e.fallbackLocale.value:Pe(t.fallbackLocale)||Kt(t.fallbackLocale)||it(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),c=i(gS(a.value,t)),u=i(it(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(it(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:Ut(t.missingWarn)||Su(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:Ut(t.fallbackWarn)||Su(t.fallbackWarn)?t.fallbackWarn:!0,m=e?e.fallbackRoot:Ut(t.fallbackRoot)?t.fallbackRoot:!0,y=!!t.fallbackFormat,A=jt(t.missing)?t.missing:null,E=jt(t.missing)?s_(t.missing):null,_=jt(t.postTranslation)?t.postTranslation:null,g=e?e.warnHtmlMessage:Ut(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter;const b=e?e.modifiers:it(t.modifiers)?t.modifiers:{};let x=t.pluralRules||e&&e.pluralRules,R;R=(()=>{r&&zw(null);const G={version:K4,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:b,pluralRules:x,missing:E===null?void 0:E,missingWarn:f,fallbackWarn:h,fallbackFormat:y,unresolving:!0,postTranslation:_===null?void 0:_,warnHtmlMessage:g,escapeParameter:p,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};G.datetimeFormats=u.value,G.numberFormats=d.value,G.__datetimeFormatters=it(R)?R.__datetimeFormatters:void 0,G.__numberFormatters=it(R)?R.__numberFormatters:void 0;const le=D4(G);return r&&zw(le),le})(),Oa(R,a.value,l.value);function S(){return[a.value,l.value,c.value,u.value,d.value]}const C=ne({get:()=>a.value,set:G=>{R.locale=G,a.value=G}}),M=ne({get:()=>l.value,set:G=>{R.fallbackLocale=G,l.value=G,Oa(R,a.value,G)}}),P=ne(()=>c.value),j=ne(()=>u.value),L=ne(()=>d.value);function Y(){return jt(_)?_:null}function O(G){_=G,R.postTranslation=G}function q(){return A}function B(G){G!==null&&(E=s_(G)),A=G,R.missing=E}const re=(G,le,Ce,k,v,w)=>{S();let U;try{__INTLIFY_PROD_DEVTOOLS__,r||(R.fallbackContext=e?O4():void 0),U=G(R)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(R.fallbackContext=void 0)}if(Ce!=="translate exists"&&Yt(U)&&U===Ad||Ce==="translate exists"&&!U){const[J,ue]=le();return e&&m?k(e):v(J)}else{if(w(U))return U;throw Wr(kr.UNEXPECTED_RETURN_TYPE)}};function z(...G){return re(le=>Reflect.apply(Zw,null,[le,...G]),()=>zp(...G),"translate",le=>Reflect.apply(le.t,le,[...G]),le=>le,le=>Pe(le))}function ae(...G){const[le,Ce,k]=G;if(k&&!dt(k))throw Wr(kr.INVALID_ARGUMENT);return z(le,Ce,fn({resolvedMessage:!0},k||{}))}function fe(...G){return re(le=>Reflect.apply(Kw,null,[le,...G]),()=>Vp(...G),"datetime format",le=>Reflect.apply(le.d,le,[...G]),()=>Vw,le=>Pe(le)||Kt(le))}function pe(...G){return re(le=>Reflect.apply(Jw,null,[le,...G]),()=>qp(...G),"number format",le=>Reflect.apply(le.n,le,[...G]),()=>Vw,le=>Pe(le)||Kt(le))}function xe(G){return G.map(le=>Pe(le)||Yt(le)||Ut(le)?e_(String(le)):le)}const W={normalize:xe,interpolate:G=>G,type:"vnode"};function $(...G){return re(le=>{let Ce;const k=le;try{k.processor=W,Ce=Reflect.apply(Zw,null,[k,...G])}finally{k.processor=null}return Ce},()=>zp(...G),"translate",le=>le[Wp](...G),le=>[e_(le)],le=>Kt(le))}function X(...G){return re(le=>Reflect.apply(Jw,null,[le,...G]),()=>qp(...G),"number format",le=>le[Gp](...G),n_,le=>Pe(le)||Kt(le))}function ie(...G){return re(le=>Reflect.apply(Kw,null,[le,...G]),()=>Vp(...G),"datetime format",le=>le[Kp](...G),n_,le=>Pe(le)||Kt(le))}function ee(G){x=G,R.pluralRules=x}function we(G,le){return re(()=>{if(!G)return!1;const Ce=Pe(le)?le:a.value,k=F(Ce),v=R.messageResolver(k,G);return as(v)||mr(v)||Pe(v)},()=>[G],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[G,le]),Q4,Ce=>Ut(Ce))}function Ae(G){let le=null;const Ce=oS(R,l.value,a.value);for(let k=0;k<Ce.length;k++){const v=c.value[Ce[k]]||{},w=R.messageResolver(v,G);if(w!=null){le=w;break}}return le}function D(G){const le=Ae(G);return le??(e?e.tm(G)||{}:{})}function F(G){return c.value[G]||{}}function se(G,le){if(s){const Ce={[G]:le};for(const k in Ce)Fr(Ce,k)&&yl(Ce[k]);le=Ce[G]}c.value[G]=le,R.messages=c.value}function ge(G,le){c.value[G]=c.value[G]||{};const Ce={[G]:le};if(s)for(const k in Ce)Fr(Ce,k)&&yl(Ce[k]);le=Ce[G],Bc(le,c.value[G]),R.messages=c.value}function de(G){return u.value[G]||{}}function N(G,le){u.value[G]=le,R.datetimeFormats=u.value,Gw(R,G,le)}function H(G,le){u.value[G]=fn(u.value[G]||{},le),R.datetimeFormats=u.value,Gw(R,G,le)}function Q(G){return d.value[G]||{}}function he(G,le){d.value[G]=le,R.numberFormats=d.value,Xw(R,G,le)}function ye(G,le){d.value[G]=fn(d.value[G]||{},le),R.numberFormats=d.value,Xw(R,G,le)}r_++,e&&Au&&(st(e.locale,G=>{o&&(a.value=G,R.locale=G,Oa(R,a.value,l.value))}),st(e.fallbackLocale,G=>{o&&(l.value=G,R.fallbackLocale=G,Oa(R,a.value,l.value))}));const _e={id:r_,locale:C,fallbackLocale:M,get inheritLocale(){return o},set inheritLocale(G){o=G,G&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,Oa(R,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:P,get modifiers(){return b},get pluralRules(){return x||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(G){f=G,R.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(G){h=G,R.fallbackWarn=h},get fallbackRoot(){return m},set fallbackRoot(G){m=G},get fallbackFormat(){return y},set fallbackFormat(G){y=G,R.fallbackFormat=y},get warnHtmlMessage(){return g},set warnHtmlMessage(G){g=G,R.warnHtmlMessage=G},get escapeParameter(){return p},set escapeParameter(G){p=G,R.escapeParameter=G},t:z,getLocaleMessage:F,setLocaleMessage:se,mergeLocaleMessage:ge,getPostTranslationHandler:Y,setPostTranslationHandler:O,getMissingHandler:q,setMissingHandler:B,[J4]:ee};return _e.datetimeFormats=j,_e.numberFormats=L,_e.rt=ae,_e.te=we,_e.tm=D,_e.d=fe,_e.n=pe,_e.getDateTimeFormat=de,_e.setDateTimeFormat=N,_e.mergeDateTimeFormat=H,_e.getNumberFormat=Q,_e.setNumberFormat=he,_e.mergeNumberFormat=ye,_e[X4]=n,_e[Wp]=$,_e[Kp]=ie,_e[Gp]=X,_e}const Xg={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function e8({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Ze?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},Et())}function vS(){return Ze}const t8=me({name:"i18n-t",props:fn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Yt(t)||!isNaN(t)}},Xg),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Yg({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d[0]!=="_"),o=Et();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Pe(t.plural)?+t.plural:t.plural);const a=e8(e,i),l=s[Wp](t.keypath,a,o),c=fn(Et(),r),u=Pe(t.tag)||dt(t.tag)?t.tag:vS();return jn(u,c,l)}}}),i_=t8;function n8(t){return Kt(t)&&!Pe(t[0])}function wS(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=Et();t.locale&&(o.locale=t.locale),Pe(t.format)?o.key=t.format:dt(t.format)&&(Pe(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?fn(Et(),f,{[h]:t.format[h]}):f,Et()));const l=r(t.value,o,a);let c=[o.key];Kt(l)?c=l.map((f,h)=>{const m=s[f.type],y=m?m({[f.type]:f.value,index:h,parts:l}):[f.value];return n8(y)&&(y[0].key=`${f.type}-${h}`),y}):Pe(l)&&(c=[l]);const u=fn(Et(),i),d=Pe(t.tag)||dt(t.tag)?t.tag:vS();return jn(d,u,c)}}const r8=me({name:"i18n-n",props:fn({value:{type:Number,required:!0},format:{type:[String,Object]}},Xg),setup(t,e){const n=t.i18n||Yg({useScope:t.scope,__useComponent:!0});return wS(t,e,hS,(...r)=>n[Gp](...r))}}),o_=r8;function s8(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function i8(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw Wr(kr.UNEXPECTED_ERROR);const c=s8(t,a.$),u=a_(l);return[Reflect.apply(c.t,c,[...l_(u)]),c]};return{created:(o,a)=>{const[l,c]=e(a);Au&&t.global===c&&(o.__i18nWatcher=st(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Au&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=a_(a);o.textContent=Reflect.apply(l.t,l,[...l_(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function a_(t){if(Pe(t))return{path:t};if(it(t)){if(!("path"in t))throw Wr(kr.REQUIRED_VALUE,"path");return t}else throw Wr(kr.INVALID_VALUE)}function l_(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return Pe(n)&&(o.locale=n),Yt(s)&&(o.plural=s),Yt(i)&&(o.plural=i),[e,a,o]}function o8(t,e,...n){const r=it(n[0])?n[0]:{};(Ut(r.globalInstall)?r.globalInstall:!0)&&([i_.name,"I18nT"].forEach(i=>t.component(i,i_)),[o_.name,"I18nN"].forEach(i=>t.component(i,o_)),[u_.name,"I18nD"].forEach(i=>t.component(i,u_))),t.directive("t",i8(e))}const a8=Ii("global-vue-i18n");function l8(t={}){const e=Ut(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=c8(t),i=Ii("");function o(u){return n.get(u)||null}function a(u,d){n.set(u,d)}function l(u){n.delete(u)}const c={get mode(){return"composition"},async install(u,...d){if(u.__VUE_I18N_SYMBOL__=i,u.provide(u.__VUE_I18N_SYMBOL__,c),it(d[0])){const m=d[0];c.__composerExtend=m.__composerExtend,c.__vueI18nExtend=m.__vueI18nExtend}let f=null;e&&(f=y8(u,c.global)),o8(u,c,...d);const h=u.unmount;u.unmount=()=>{f&&f(),c.dispose(),h()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:l};return c}function Yg(t={}){const e=zt();if(e==null)throw Wr(kr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Wr(kr.NOT_INSTALLED);const n=u8(e),r=f8(n),s=yS(e),i=d8(t,s);if(i==="global")return Y4(r,t,s),r;if(i==="parent"){let l=h8(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=fn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=bS(l),o.__composerExtend&&(a[Jp]=o.__composerExtend(a)),m8(o,e,a),o.__setInstance(e,a)}return a}function c8(t,e){const n=sa(),r=n.run(()=>bS(t));if(r==null)throw Wr(kr.UNEXPECTED_ERROR);return[n,r]}function u8(t){const e=Vt(t.isCE?a8:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Wr(t.isCE?kr.NOT_INSTALLED_WITH_PROVIDE:kr.UNEXPECTED_ERROR);return e}function d8(t,e){return xd(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function f8(t){return t.mode==="composition"?t.global:t.global.__composer}function h8(t,e,n=!1){let r=null;const s=e.root;let i=p8(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function p8(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function m8(t,e,n){qt(()=>{},e),Vn(()=>{const r=n;t.__deleteInstance(e);const s=r[Jp];s&&(s(),delete r[Jp])},e)}const g8=["locale","fallbackLocale","availableLocales"],c_=["t","rt","d","n","tm","te"];function y8(t,e){const n=Object.create(null);return g8.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Wr(kr.UNEXPECTED_ERROR);const o=Pt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,c_.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Wr(kr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,c_.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const b8=me({name:"i18n-d",props:fn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Xg),setup(t,e){const n=t.i18n||Yg({useScope:t.scope,__useComponent:!0});return wS(t,e,fS,(...r)=>n[Kp](...r))}}),u_=b8;G4();T4(a4);R4(E4);I4(oS);if(__INTLIFY_PROD_DEVTOOLS__){const t=Vg();t.__INTLIFY__=!0,l4(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var v8=Object.defineProperty,w8=(t,e,n)=>e in t?v8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gh=(t,e,n)=>w8(t,typeof e!="symbol"?e+"":e,n);class _8{constructor(e,n){this.i18n=e,this.messages=n,this.messages.addListener((r,s)=>this.i18n.setLocaleMessage(r,s))}getLocale(){return this.i18n.locale.value}async setLocale(e){await this.messages.loadLocale(e),this.i18n.locale.value=e}getFallbackLocale(){const e=this.i18n.fallbackLocale.value;return typeof e!="string"?"":e}async setFallbackLocale(e){await this.messages.loadLocale(e),this.i18n.fallbackLocale.value=e}getLocales(){return this.messages.getLocales()}translate(e,n){return this.i18n.t(e,n??{})}translateWithDefault(e,n,r){const s=this.i18n.t(e,r??{},{missingWarn:!1});return s===e?this.replaceParameters(n,r):s}replaceParameters(e,n={}){if(typeof n=="number"){const r=e.split("|").map(i=>i.trim()),s=r[n]??r[2]??e;return this.replaceParameters(s,{n})}return Object.entries(n).reduce((r,[s,i])=>r.replace(new RegExp(`\\{.*${s}[^}]*\\}`),Ct(i)),e)}}class x8{constructor(e){gh(this,"listeners",[]),gh(this,"messages",{}),gh(this,"loaders"),this.loaders=Object.entries(e).reduce((n,[r,s])=>{var i;const o=(i=r0(r,/.*\/lang\/(.+)\.yaml/))==null?void 0:i[1];return o&&(n[o]=()=>s().then(({default:a})=>a)),n},{})}getMessages(){return Object.assign({},this.messages)}getLocales(){return Object.keys(this.loaders)}addListener(e){this.listeners.push(e)}async loadLocale(e){if(e in this.messages)return this.messages[e];const n=await(this.loaders[e]??We(`Couldn't load messages for '${e}' locale`))();return this.messages[e]=n,this.listeners.forEach(r=>r(e,n)),n}}async function E8(t){const e=t.defaultLocale??"en",n=t.fallbackLocale??"en";return await t.messages.loadLocale(e),await t.messages.loadLocale(n),l8({warnHtmlMessage:!1,locale:e,fallbackLocale:n,messages:t.messages.getMessages()})}function A8(t){return{async install(e){const n=new x8(t.messages),r=await E8({...t,messages:n});e.use(r),Ei.setProvider(new _8(r.global,n))}}}const vc={clientID:{client_id:"https://noeldemartin.github.io/diogenes-reader/clientid.jsonld",client_name:"Diogenes Reader",redirect_uris:["https://noeldemartin.github.io/diogenes-reader/"]}};function S8(t){return Jt(t)}const T8=Object.freeze(Object.defineProperty({__proto__:null,model:S8},Symbol.toStringTag,{value:"Module"}));let Qg=new WeakMap;function R8(t){const e=lr(Xt([],"id")),n=ne(()=>e.value.getItems()),r=new Set([t.collection]),s={modelsMap:e,modelsArray:n,collectionsSet:r,async refresh(){const i=Xt([],"id");for(const o of r)(await t.withCollection(o,()=>t.all())).forEach(a=>i.add(a));e.value=i}};return Qg.set(t,s),t.on("created",i=>(e.value.add(Xe(i)),Dc(e))),t.on("deleted",i=>(e.value.delete(Xe(i)),Dc(e))),t.on("updated",i=>(e.value.add(Xe(i)),Dc(e))),qe.on("purge-storage",()=>e.value=Xt([],"id")),qe.on("cloud:migration-completed",()=>s.refresh()),qe.on("cloud:migration-cancelled",()=>s.refresh()),qe.on("cloud:backup-completed",()=>s.refresh()),qe.emit("soukai:track-models",t),s}function _S(t){return"isSoftDeleted"in t?t.isSoftDeleted():!1}function jl(){return Qg}function xS(t){return Qg.get(t)??R8(t)}function I8(t){return Tl((e,n)=>{let r;const s=[],i=a=>r instanceof ji&&a.id===r.id&&n(),o=()=>{s.forEach(a=>a()),s.splice(0,s.length)};return ia()&&Sl(o),$t(()=>{const a=t();r instanceof ji&&(!mn(a,ji)||a.static()!==r.static())&&o(),r=a,n(),r instanceof ji&&!s.length&&(s.push(qe.on("cloud:migration-completed",n)),s.push(qe.on("cloud:migration-cancelled",n)),s.push(r.static().on("modified",i)),s.push(r.static().on("updated",i)),s.push(r.static().on("relation-loaded",i)))}),{get:()=>Fe(r,()=>e()),set:()=>console.warn("Computed model ref was not set (it is immutable).")}})}function C8(t,e={}){const n=lr([]),r=xS(t);return $t(()=>n.value=r.modelsArray.value),yj(()=>t.on("updated",()=>n.value=n.value.slice(0))),ne(()=>e.includeSoftDeleted?n.value:n.value.filter(s=>!_S(s)))}function Sd(t,e={}){var n;const r=((n=jl().get(t))==null?void 0:n.modelsArray.value)??[];return e.includeSoftDeleted?r:r.filter(s=>!_S(s))}function k8(t){return jl().has(t)}function O8(t,e){Jn(jl().get(t),"Failed ignoring models collection, please track the model first using trackModels()").collectionsSet.delete(e)}async function Vi(t,e,n={}){const r=n.refresh??!0,s=Jn(jl().get(t),"Failed tracking models collection, please track the model first using trackModels()");if(!s.collectionsSet.has(e)&&(s.collectionsSet.add(e),r)){const i=s.modelsArray.value;(await t.withCollection(e,()=>t.all())).forEach(o=>i.push(o)),s.modelsMap.value=Xt(i,"id")}}async function D8(t,e){const{service:n,property:r,transform:s,...i}=e??{},o=s??(c=>c),a=jl().has(t),l=xS(t);for(const[c,u]of Object.entries(i))t.on(c,u);n&&r&&$t(()=>n.setState(r,o(l.modelsArray.value))),a||await l.refresh()}function P8(){globalThis.testingRuntime&&Object.assign(globalThis.testingRuntime,T8)}function $8(t){return{install(){const e=new PR(Mg());P8(),h0(e),BR(t.models),qe.on("purge-storage",()=>e.purgeDatabase())}}}var N8=Object.defineProperty,L8=(t,e,n)=>e in t?N8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yr=(t,e,n)=>L8(t,typeof e!="symbol"?e+"":e,n);let M8=class extends cr{};function F8(t,e){return t}class Ru extends cr{constructor(e,n,r){super(F8(e),r),yr(this,"description"),this.description=n}}let j8=class extends cr{constructor(e,n){super(`Container at ${e.url} is already in use`,n)}},ES=class{constructor(){yr(this,"name"),yr(this,"authenticatedFetch"),yr(this,"booted"),yr(this,"listeners",f0([])),yr(this,"_engine")}get engine(){return this._engine=this._engine??new Em(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){return this.authenticatedFetch??null}requireAuthenticatedFetch(){return this.authenticatedFetch??We("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new rs,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const n={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",n),n}async failSession(e,n){await this.notifyListeners("onSessionFailed",e,n)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...n){await Promise.all(this.listeners.toArray().map(async r=>{const s=r[e];await(s==null?void 0:s(...n))}))}};const yh="inrupt-authenticator";let U8=class extends ES{constructor(){super(...arguments),yr(this,"_events"),yr(this,"_fetch"),yr(this,"_login"),yr(this,"_logout"),yr(this,"_handleIncomingRedirect")}async login(e){pr.set(yh,e);const n={oidcIssuer:e};return vc.clientID&&(n.clientId=vc.clientID.client_id,n.clientName=vc.clientID.client_name,n.redirectUrl=vc.clientID.redirect_uris[0]),await this._login(n),await wr({seconds:60}),We("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{events:e,fetch:n,handleIncomingRedirect:r,login:s,logout:i}=await So(async()=>{const{events:o,fetch:a,handleIncomingRedirect:l,login:c,logout:u}=await import("./InruptAuthenticator.lazy-BvpQLGoj-CGd2zP0c.js");return{events:o,fetch:a,handleIncomingRedirect:l,login:c,logout:u}},[]);this._fetch=n,this._login=s,this._logout=i,this._events=e,this._handleIncomingRedirect=r,await this.loginFromRedirect()}async loginFromRedirect(){const e=pr.get(yh);if(!e)return;this._events().on("error",(r,s)=>{r??(r="Error using Inrupt Authenticator method"),typeof s=="object"?this.failSession(e,new Ru(r,null,{cause:s})):this.failSession(e,new Ru(r,s))});const n=await this._handleIncomingRedirect(globalThis.location.href);pr.remove(yh),n!=null&&n.isLoggedIn&&n.webId&&await this.initSession(n.webId)}async initSession(e){await this.initAuthenticatedFetch(this._fetch);try{const n=await ht.requireUserProfile(e);await this.startSession({user:n,loginUrl:e})}catch(n){await this.failSession(e,n)}}},B8=class extends ES{constructor(){super(),yr(this,"store"),this.store=bj("legacy-authenticator",{})}async login(e,n){const{SolidAuthClient:r}=await So(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-BQcMJ5DS.js");return{SolidAuthClient:s}},[]);throw this.store.webId=n==null?void 0:n.webId,this.store.loginUrl=(n==null?void 0:n.oidcIssuerUrl)??e,await r.login(this.store.loginUrl)===null?(delete this.store.webId,delete this.store.loginUrl,new Ru("Could not log in with Solid using the legacy authenticator")):(await wr({seconds:60}),new Error("Browser should have redirected, but it didn't"))}async logout(){const{SolidAuthClient:e}=await So(async()=>{const{SolidAuthClient:n}=await import("./LegacyAuthenticator.lazy-ChFFqP14-BQcMJ5DS.js");return{SolidAuthClient:n}},[]);delete this.store.webId,delete this.store.loginUrl,await e.logout(),await this.endSession()}async restoreSession(){if(!this.store.loginUrl)return;const{SolidAuthClient:e}=await So(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-BQcMJ5DS.js");return{SolidAuthClient:s}},[]),n=await e.currentSession(),r=Jn(this.store.loginUrl);await this.initAuthenticatedFetch((s,i)=>e.fetch(s,i));try{const s=await ht.requireUserProfile(Jn((n==null?void 0:n.webId)??this.store.webId));await this.startSession({user:s,loginUrl:r})}catch(s){await this.failSession(r,s)}}};const Zg={},H8={inrupt:new U8,legacy:new B8};function V8(t){Zg.default=t}function AS(t){return Zg[t]}function q8(t){Object.entries(t).forEach(([e,n])=>z8(e,n))}function z8(t,e){Zg[t]=e,e.name=e.name??t}const ey={autoReconnect:!0},W8=ro({name:"solid",persist:["autoReconnect","dismissed","previousSession","profiles","staleProfiles","collections"],initialState:{autoReconnect:ey.autoReconnect,dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,loginOngoing:!1,preferredAuthenticator:null,previousSession:null,profiles:{},session:null,loginStale:!1,staleProfiles:[],collections:{}},serialize(t){var e;return((e=t.previousSession)==null?void 0:e.error)instanceof Error&&(t.previousSession.error=t.previousSession.error.message),t},computed:{user:t=>{var e,n;return((e=t.session)==null?void 0:e.user)??((n=t.previousSession)==null?void 0:n.profile)??null},authenticator:t=>{var e;return((e=t.session)==null?void 0:e.authenticator)??null},fetch(){var t;return((t=this.authenticator)==null?void 0:t.getAuthenticatedFetch())??globalThis.fetch.bind(globalThis)},error(t){var e;return t.loginStartupError?t.loginStartupError??null:t.ignorePreviousSessionError?null:((e=t.previousSession)==null?void 0:e.error)??null}}});class K8 extends W8{isLoggedIn(){return!!this.session}wasLoggedIn(){return!!this.previousSession}hasLoggedIn(){return!!(this.session||this.previousSession)}requireAuthenticator(){return this.authenticator??We("Could not get authenticator")}requireUser(){return this.user??We("Could not get user profile (are you logged in?)")}requireUserProfile(e){return this.getUserProfile(e,{required:!0})}async getUserProfile(e,n={}){var r;let s=null;const i=n.markStale??!((r=this.authenticator)!=null&&r.getAuthenticatedFetch()),o=this.profiles[e]??await Fe(await oC(e,{fetch:this.fetch,required:n.required??!1,onLoaded(a){s=a}}),async a=>{a&&(s&&await qe.emit("solid:user-profile-loaded",[a,s]),this.rememberProfile(a))});return o&&i&&this.setState({staleProfiles:nr(this.staleProfiles.concat([o.webId]))}),o}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:$s(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,n={}){if(yi()&&e==="dev"&&(e="http://localhost:3000"),/^https?:\/\//.test(e)||(n.fallbackUrl??(n.fallbackUrl=`http://${e}`),e=`https://${e}`),this.isLoggedIn())return!0;if(this.loginOngoing)throw new Error("Authentication already in progress");return n.loading?Dt.loading(Le("solid.loginOngoing","Logging in..."),()=>this.attemptLogin(e,n)):this.attemptLogin(e,n)}async reconnect(e={}){const{force:n,...r}=e;this.isLoggedIn()||!this.previousSession||this.previousSession.error!==null&&!n||await this.login(this.previousSession.loginUrl,{authenticator:this.previousSession.authenticator,...r,loading:r.loading??!1})}async logout(e=!1){var n,r;const s=!ut.plugin("@aerogel/local-first")||!!((n=ut.service("$cloud"))!=null&&n.ready),i=!ut.plugin("@aerogel/local-first")||!!((r=ut.service("$cloud"))!=null&&r.dirty),[o,a]=e?[!0,{wipeLocalData:s}]:await Dt.confirm(s?Le("solid.logoutConfirmTitle","Log out from this device?"):Le("solid.disconnectConfirmTitle","Disconnect account?"),s?i?Le("solid.logoutConfirmMessageWithLocalChanges","There are some changes that haven't been synchronized and will be lost, but the rest of the data will remain in your Solid POD."):Le("solid.logoutConfirmMessage","Logging out will remove all the data from this device, but you'll still have it in your Solid POD."):Le("solid.disconnectConfirmMessage","You'll need to introduce your credentials again to connect to your Solid POD."),{acceptText:Le("solid.logoutConfirmAccept","Log out"),acceptVariant:"danger",cancelText:Le("solid.logoutConfirmCancel",Le("ui.cancel","Cancel")),checkboxes:s?i?{wipeLocalData:{label:Le("solid.logoutConfirmWipeNotice","I understand that changes that haven't been synchronized will be lost."),default:!1,required:!0}}:void 0:{wipeLocalData:{label:Le("solid.logoutConfirmWipe","Also remove all existing data"),default:!1}}});o&&this.previousSession&&await Dt.loading(Le("solid.logoutOngoing","Logging out..."),async()=>{this.setState({dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,previousSession:null,...ey}),this.isLoggedIn()&&await this.authenticator.logout(),(a.wipeLocalData??!0)&&await _d.purge(),await qe.emit("auth:logout"),await qe.emit("auth:after-logout")})}async whenLoggedIn(e){return this.isLoggedIn()?e(this.session):new Promise(n=>{const r=s=>n(e(s));qe.once("auth:login",r)})}dismiss(){this.setState({dismissed:!0})}async findOrCreatePrivateTypeIndex(){return await this.findPrivateTypeIndex()??await this.createPrivateTypeIndex()}async findPrivateTypeIndex(e={}){const{webId:n,privateTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&Oy(`${n}-privateTypeIndex`),Iy(`${n}-privateTypeIndex`,()=>yo.withEngine(s).find(r))):null}async findOrCreatePublicTypeIndex(){return await this.findPublicTypeIndex()??await this.createPublicTypeIndex()}async findPublicTypeIndex(e={}){const{webId:n,publicTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&Oy(`${n}-publicTypeIndex`),Iy(`${n}-publicTypeIndex`,()=>yo.withEngine(s).find(r))):null}async createPrivateContainer(e){const n=this.requireAuthenticator().engine;return xr.withEngine(n,async()=>{const r=await xr.find(e.url);if(r&&!e.reuseExisting)throw new j8(r);const s=r??new xr({url:e.url,name:e.name});if(await s.save(),e.registerFor){const i=await this.findOrCreatePrivateTypeIndex();await s.register(i,e.registerFor)}return s})}async boot(){var e,n;await Ai.booted,Eo("authenticator")&&this.setState({preferredAuthenticator:Ua("authenticator")}),Eo("refreshProfile")&&this.setState({staleProfiles:nr(this.staleProfiles.concat(ln([(e=this.session)==null?void 0:e.user.webId,(n=this.previousSession)==null?void 0:n.loginUrl])))}),await this.restorePreviousSession(),await this.startupReconnect(),await this.trackSolidModels()}async createPrivateTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await yo.withEngine(n.engine).createPrivate(e);return Fe(r,()=>{e.privateTypeIndexUrl=r.url,Py(`${e.webId}-privateTypeIndex`,r),this.rememberProfile(e)})}async createPublicTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await yo.withEngine(n.engine).createPublic(e);return Fe(r,()=>{e.privateTypeIndexUrl=r.url,Py(`${e.webId}-publicTypeIndex`,r),this.rememberProfile(e)})}async attemptLogin(e,n){const r=n.authenticator??this.preferredAuthenticator??"default",s=n.onError??(a=>ut.isMounted()?Ai.report(a):this.setState({loginStartupError:a})),i=setTimeout(()=>this.loginStale=!0,1e4),o={dismissed:this.dismissed,ignorePreviousSessionError:this.ignorePreviousSessionError,previousSession:this.previousSession};this.loginOngoing=!0;try{const a=await this.getUserProfile(e,{markStale:!0}),l=(a==null?void 0:a.oidcIssuerUrl)??us((a==null?void 0:a.webId)??e),c=await this.bootAuthenticator(r),{domain:u}=bR(e);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:Fn({profile:a,loginUrl:e,authenticator:r,error:Le("solid.stuckConnecting","We didn't hear back from the identity provider at `{domain}`, maybe try reconnecting?",{domain:u})})}),await qe.emit("auth:before-login"),await c.login(l,a),!0}catch(a){return this.setState(o),a instanceof M8?!1:n.fallbackUrl?wr().then(()=>this.login(n.fallbackUrl??"",$s(n,"fallbackUrl"))):(s(a),!1)}finally{clearTimeout(i),this.setState({loginOngoing:!1,loginStale:!1})}}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect({force:this.forcingReconnect()})}reconnectOnStartup(){return Eo("autoReconnect")?zc(Ua("autoReconnect")):this.autoReconnect}forcingReconnect(){return Eo("autoReconnect")&&zc(Ua("autoReconnect"))}async bootAuthenticator(e){const n=AS(e);return n.addListener({onSessionStarted:async r=>{this.setState({session:r,previousSession:{authenticator:n.name,loginUrl:r.loginUrl,profile:r.user,error:null}}),this.staleProfiles.includes(r.user.webId)&&await this.refreshUserProfile(),ut.plugin("@aerogel/local-first")||h0(r.authenticator.engine),Cm.setEngine(r.authenticator.engine),yo.setEngine(r.authenticator.engine),Ui.setEngine(r.authenticator.engine),await qe.emit("auth:login",r)},onSessionFailed:async(r,s)=>{var i;this.setState({session:null,previousSession:{profile:(i=this.previousSession)==null?void 0:i.profile,authenticator:n.name,loginUrl:r,error:s}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:r=>qe.emit("auth:fetch-ready",r)}),await n.boot(),n}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:ar(this.staleProfiles,e.webId)})}async trackSolidModels(){qe.on("purge-storage",()=>this.collections={}),qe.on("soukai:track-models",async e=>{var n;i1(e)&&(e.on("created",async r=>{var s;const i=r.getContainerUrl();if(!i||r.static().collection===i||(s=this.collections[r.static().modelName])!=null&&s.includes(i))return;const o=this.collections[r.static().modelName]??[];o.push(i),this.collections={...this.collections,[r.static().modelName]:o},await Vi(e,i,{refresh:!1})}),await Promise.all(((n=this.collections[e.modelName])==null?void 0:n.map(r=>Vi(e,r),{refresh:!1}))??[]))});for(const[e,n]of Object.entries(this.collections)){const r=y0().get(e);if(!(!r||!k8(r)))for(const s of n)await Vi(r,s)}}}const ht=Gr(K8);function G8(){fj("container_url",t=>{if(!t.endsWith("/"))return"containerEndingSlashMissing"})}const J8={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function X8(t,e){return V(),Te("svg",J8,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M15 2H5L4 8h12zM0 10s2 1 10 1s10-1 10-1l-4-2H4zm8 4h4v1H8z"},null,-1),Ee("circle",{cx:"6",cy:"15",r:"3",fill:"currentColor"},null,-1),Ee("circle",{cx:"14",cy:"15",r:"3",fill:"currentColor"},null,-1)]))}const Y8=ot({name:"ooui-user-anonymous",render:X8}),Q8=["src"],Z8=me({__name:"SolidImage",props:{src:{}},setup(t){const e=TA(async()=>{const r=await uh.get(t.src)??await n(t.src),s=await(r==null?void 0:r.blob());return s&&URL.createObjectURL(s)});async function n(r){try{const s=await ht.fetch(r);return s.status!==200?null:(await uh.store(r,s),uh.get(r))}catch{return null}}return(r,s)=>(V(),Te("img",{src:I(e)},null,8,Q8))}}),e5={class:"relative flex items-center justify-center rounded-full bg-gray-200"},t5={key:1,class:"text-sm font-semibold tracking-wider text-gray-500","aria-hidden":"true"},SS=me({__name:"SolidAvatar",setup(t){const e=ne(()=>{var n;return(((n=ht.user)==null?void 0:n.name)??"").trim().split(" ").map(r=>{var s;return(s=r[0])==null?void 0:s.toUpperCase()}).join("").slice(0,3)});return(n,r)=>{var s,i;return V(),Te("div",e5,[(s=n.$solid.user)!=null&&s.avatarUrl?(V(),ce(Z8,{key:0,src:(i=n.$solid.user)==null?void 0:i.avatarUrl,alt:"",class:"absolute inset-0 size-full rounded-full"},null,8,["src"])):e.value?(V(),Te("span",t5,Ne(e.value),1)):(V(),ce(I(Y8),{key:2,class:"size-6 text-gray-500"}))])}}}),n5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function r5(t,e){return V(),Te("svg",n5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M9 2h9c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H9c-1.1 0-2-.9-2-2v-2h2v2h9V4H9v2H7V4c0-1.1.9-2 2-2"},null,-1),Ee("path",{fill:"currentColor",d:"M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67z"},null,-1)]))}const s5=ot({name:"ic-baseline-log-in",render:r5}),i5={key:2,class:"flex w-full justify-center gap-2"},o5=me({__name:"SolidLogin",props:{class:{default:""},buttonClass:{},layout:{default:"horizontal"},noLoading:{type:Boolean},allowLegacyAuthenticator:{type:Boolean}},setup(t){const e={inrupt:"Log in using Inrupt's authentication library",legacy:"Log in using the legacy authentication library"},n=Ug({url:KA(),authenticator:bB()}),r=Object.keys(e),s=ve(!1),i=ve(!1),o=ne(()=>!a.value||i.value),a=ne(()=>ut.development&&(!n.url||n.url==="dev"||n.url.trim().length===0)),l=ne(()=>Ht("flex flex-col items-center gap-2 w-full md:w-auto",t.class)),c=ne(()=>Ht("w-full whitespace-nowrap",{"md:w-auto":t.layout==="horizontal"&&!n.authenticator},t.buttonClass));function u(f){return Le(`solid.logIn.switchAuthenticator${f.charAt(0).toUpperCase()+f.slice(1)}`,e[f])}async function d(){if(t.noLoading){await ht.login(n.url,{authenticator:n.authenticator});return}await Dt.loading(Le("solid.loginOngoing","Logging in..."),ht.login(n.url))}return(f,h)=>{const m=Gm("measure");return V(),ce(I(Bg),{form:I(n),class:Ge(l.value),onSubmit:d},{default:te(()=>[Ee("div",{class:Ge(["flex w-full flex-col items-center gap-2",{"md:flex-row":f.layout==="horizontal"&&!I(n).authenticator}])},[o.value?(V(),ce(I(WA),{key:0,name:"url","aria-label":f.$td("solid.logIn.label","Login url"),placeholder:f.$td("solid.logIn.placeholder","https://me.solidcommunity.net"),class:"w-full md:min-w-96"},null,8,["aria-label","placeholder"])):ze("",!0),I(n).authenticator?(V(),ce(I(FA),{key:1,name:"authenticator",class:"w-full max-w-full md:min-w-96","label-class":"sr-only","options-class":"md:w-96 w-full max-w-[calc(100vw-4rem)]",label:f.$td("solid.logIn.switchAuthenticatorLabel","Authentication method"),options:I(r),"render-option":u},null,8,["label","options"])):ze("",!0),a.value&&!i.value?(V(),Te("div",i5,[oe(I(wt),{variant:"secondary",class:"group gap-0",title:f.$td("solid.logIn.manualUrl","Enter url"),onClick:h[0]||(h[0]=y=>i.value=!0)},{default:te(()=>[oe(I(s5),{class:"size-4"}),Rl((V(),Te("span",{class:Ge(["overflow-hidden pl-1 whitespace-nowrap",{"opacity-0":!s.value,"w-0 transition-[width] md:group-hover:w-(--width)":s.value}])},[nt(Ne(f.$td("solid.logIn.manualUrl","Enter url")),1)],2)),[[m,()=>s.value=!0,void 0,{css:!0}]])]),_:1},8,["title"]),oe(I(wt),{disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:"whitespace-nowrap",onClick:h[1]||(h[1]=y=>I(n).url="dev")},{default:te(()=>[nt(Ne(f.$td("solid.logIn.dev","Log in to dev server")),1)]),_:1},8,["disabled"])])):(V(),ce(I(wt),{key:3,disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:Ge(c.value)},{default:te(()=>[nt(Ne(f.$td("solid.logIn.submit","Log in")),1)]),_:1},8,["disabled","class"]))],2),f.allowLegacyAuthenticator&&o.value&&!I(n).authenticator?(V(),ce(I(Xi),{key:0,class:"text-sm font-normal text-gray-700",onClick:h[2]||(h[2]=y=>I(n).authenticator="inrupt")},{default:te(()=>[nt(Ne(f.$td("solid.logIn.switchAuthenticator","Can't log in? Try using a different authentication method")),1)]),_:1})):ze("",!0)]),_:1},8,["form","class"])}}}),a5={$solid:ht};function l5(t={}){return{async install(e){Ok(),q8({...H8,...t.authenticators??{}}),G8(),V8(AS(t.defaultAuthenticator??"inrupt")),iU(n=>{if(n instanceof Ru)return n.description?`${n.message} (${n.description})`:n.message}),typeof t.autoReconnect=="boolean"&&(ey.autoReconnect=t.autoReconnect,ht.hasPersistedState()||(ht.autoReconnect=t.autoReconnect)),t.onUserProfileLoaded&&qe.on("solid:user-profile-loaded",([n,r])=>{var s;(s=t.onUserProfileLoaded)==null||s.call(t,n,r)}),await so(e,a5)}}}var c5=Object.defineProperty,u5=(t,e,n)=>e in t?c5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e,n)=>u5(t,typeof e!="symbol"?e+"":e,n);const bh=new WeakMap;function Xp(t){return ln(cs(t).map(e=>{const n=t.instance().requireRelation(e).relatedClass;return qo(n)?!1:n}))}function cs(t){return bh.has(t)||bh.set(t,t.relations.filter(e=>Lt.reservedRelations.includes(e)?!1:t.instance().requireRelation(e)instanceof s1)),bh.get(t)??[]}function TS(t){return cs(t.static()).reduce((e,n)=>e.concat(t.getRelationModels(n)??[]),[])}function d_(t){const e=new Set,n=t.instance();e.add(t);for(const r of t.relations)t.reservedRelations.includes(r)||e.add(n.requireRelation(r).relatedClass);return[...e.values()]}function qi(t){return t.getRelatedModels().filter(e=>!mn(e,Cm)&&!mn(e,Ui)&&!mn(e,Im)&&!mn(e,Bu)&&e.static()!==xr)}function RS(t){if(t.isDirty())return!0;if(!(t instanceof xr))return!1;const e=n=>{var r;return(r=t.getRelationModels(n))==null?void 0:r.some(s=>RS(s))};return cs(t.static()).some(e)}async function d5(t,e){const n=["authorizations","metadata","operations","tombstone"];let r;do{r=!1;const s=qi(t);for(const i of s)for(const o of i.static("relations"))if(!(n.includes(o)||i.isRelationLoaded(o)||i.getRelation(o)instanceof t1))try{await i.loadRelation(o),r=!0}catch(a){e(a)}}while(r)}const f5=Jn(()=>ut.service("$cloud"));class h5{constructor(){Gt(this,"models",new Set),Gt(this,"promises",[])}push(e){this.models.add(e),this.syncAfter(wr({seconds:1}))}clear(e){if(!e){this.models=new Set;return}for(const n of e)this.models.delete(n)}async syncAfter(e){const n=typeof e=="function"?e():e;return this.promises.push(n),n.then(()=>Yn(this.promises,n)),this.promises.length===1&&this.schedule(),n}schedule(){Promise.all(this.promises).then(()=>wr()).then(()=>{if(this.promises.length!==0){this.schedule();return}const e=this.consume();e.length!==0&&f5.syncIfOnline(e)})}consume(){const e=[],n=new Set;for(const r of this.models)Ts(r)&&(this.models.delete(r),TS(r).forEach(s=>n.add(s)),e.push(r));for(const r of this.models)this.models.delete(r),!n.has(r)&&e.push(r);return e}}const Iu=Gr(h5),bt=Jn(()=>ut.service("$cloud")),IS=new WeakMap,ty=new WeakMap;function p5(t){const e=t.getRelatedModels().concat([t]);for(const n of e)n.cleanDirty(!0)}function m5(t){const e=qi(t).concat([t]);for(const n of e){if(!n.operations||n.operations.length===0)continue;const r=(n.operations??[]).filter(s=>!(s instanceof Ns)||!n.ignoreRdfPropertyHistory(s.property,!0));if(!r.some(s=>!s.isInception(n))){n.setRelationModels("operations",[]);continue}n.setRelationModels("operations",r)}}async function f_(t){bt.setState({localModelUpdates:{...bt.localModelUpdates,[t.url]:1}}),E5(t.static())&&await Yp(t.static(),Qt(t.url)),bt.autoPush&&bt.ready&&!bt.syncing&&Iu.push(t)}function g5(t,e){var n;const r=Br(xr),s=(n=bt.registeredModels.find(({modelClass:i})=>i===t.static()))==null?void 0:n.path;return new r({url:Hc(OS(t,e).static(),s)})}async function Yp(t,e){var n,r;(n=bt.modelCollections[t.modelName])!=null&&n.includes(e)||(bt.setState("modelCollections",{...bt.modelCollections,[t.modelName]:(bt.modelCollections[t.modelName]??[]).concat(e)}),(r=bt.modelCollections[t.modelName])!=null&&r.includes(t.collection)||(t.collection=e),await Vi(t,e))}async function h_(t){if(y5(t))return;const e=bt.localModelUpdates[t.url]??0;bt.setState({localModelUpdates:t.isSoftDeleted()?$s(bt.localModelUpdates,t.url):{...bt.localModelUpdates,[t.url]:e+1}}),await bt.getDocumentsCache().forget(Qt(t.requireDocumentUrl()),t.requireDocumentUrl()),bt.autoPush&&bt.ready&&!bt.syncing&&Iu.push(t)}function Qp(t,e){const n={},r=Array.from(t);for(const[s,i]of Object.entries(bt.localModelUpdates)){const o=vr(s);(t.has(s)||r.some(a=>a.endsWith("/")&&s.startsWith(a)))&&!(e!=null&&e.has(o))||(n[s]=i)}bt.setState({localModelUpdates:n})}function CS(t,e={}){const n=Array.from(new Set(qi(t).map(r=>r.static()))).map(r=>[r,Br(r)]);return Fe(t.clone({constructors:n}),r=>{m5(r),e.clean&&p5(r)})}function kS(t){const e=new Set;e.add(t.static());for(const r of t.static().relations)e.add(t.requireRelation(r).relatedClass);const n=[...e.values()].map(r=>[r,S5(r)]);return t.clone({constructors:n})}async function p_(t,e,n){const r=Br(pi),s=e.map(a=>a.url),i=t.filter(a=>!s.includes(a.url)).map(a=>a.requireDocumentUrl()).filter(a=>!n.has(a)),o=await r.all({$in:i});return e.concat(o)}function y5(t){return!t.getDocumentModels().flatMap(e=>{var n;return((n=e.operations)==null?void 0:n.map(r=>[e,r]))??[]}).some(([e,n])=>{var r,s;return n.date.getTime()!==((s=(r=e.metadata)==null?void 0:r.updatedAt)==null?void 0:s.getTime())?!1:n instanceof Ns?!e.ignoreRdfPropertyHistory(n.property,!0):!0})}function OS(t,e){return e.get(t.url)??kS(t)}function Zp(){return[...bt.registeredModels].map(({modelClass:t})=>Sd(t,{includeSoftDeleted:!0})).flat()}function b5(){return bt.schemaMigrations}function v5(){bt.schemaMigrations.clear()}function m_(t){return bt.schemaMigrations.get(t)}function Br(t){return IS.get(t)??A5(t)}function Hc(t,e){const n=ht.requireUser().storageUrls[0],r=qo(t)&&cs(t).map(s=>{const i=t.instance().requireRelation(s).relatedClass;return qo(i)?null:i}).filter(Boolean)[0];return e??(e=`/${(r||t).modelName.toLowerCase()}s/`),Ph((e.startsWith("/")?n.slice(0,-1):n)+e)}function w5(t,e){return e.get(t.url)??CS(t)}function _5(t){for(const{modelClass:e}of bt.registeredModels)if(Sd(e).some(n=>n.url===t.url))return!0;return!1}function Qa(t){return ty.has(t.static())}function x5(t){return!Qa(t)}function E5(t){return bt.registeredModels.some(({modelClass:e})=>e===t)}function A5(t){var e;const n=t,r=(i,o)=>{i.timestamps=n.timestamps,i.history=n.history,o(),i.timestamps=[],i.history=!1},s=(e=class extends n{initialize(i,o){r(this._proxy.static(),()=>super.initialize(i,o))}initializeRelations(){super.initializeRelations();for(const i of Object.values(this._relations))i.relatedClass=Br(i.relatedClass)}fixMalformedAttributes(){r(this.static(),()=>super.fixMalformedAttributes())}},Gt(e,"timestamps",!1),Gt(e,"history",!1),e);return n.on("schema-updated",async i=>{await s.updateSchema({...i,timestamps:!1,history:!1})}),t.ensureBooted(),fm({[`Remote${t.modelName}`]:s}),ut.service("$cloud")&&bt.getEngine()&&s.setEngine(bt.requireEngine()),IS.set(n,s),ty.set(s,n),s}function S5(t){return ty.get(t)??We(`Couldn't find local class for ${t.modelName}`)}class T5 extends Hg{constructor(){super(...arguments),Gt(this,"urlMigrations",[]),Gt(this,"collectionMigrations",[])}migrateUrl(e,n,r){this.urlMigrations.push({modelClass:e,local:n,remote:r})}migrateCollection(e,n,r){this.collectionMigrations.push({modelClass:e,local:n,remote:r})}async run(){const e=um(),n=await e.getCollections(),r=new Set;for(const s of n){const i=await e.readMany(s);for(const[o,a]of Object.entries(i)){const l=this.replaceUrl(o);await e.create(Qt(l),this.replaceDocumentUrls(a),l),await e.delete(s,o)}}for(const{modelClass:s,remote:i}of this.urlMigrations)Vi(s,Qt(i),{refresh:!1});for(const{modelClass:s,local:i,remote:o}of this.collectionMigrations){const a=Object.assign({},ht.collections),l=(ht.collections[s.modelName]??[]).filter(c=>!i.startsWith(c));O8(s,i),Vi(s,o,{refresh:!1}),ht.collections=a,n.filter(c=>i.startsWith(c)).forEach(c=>r.add(c)),l.length>0?a[s.modelName]=l:delete a[s.modelName]}await e.dropCollections(Array.from(r))}replaceDocumentUrls(e){for(const[n,r]of Object.entries(e)){if(n==="@id"&&typeof r=="string"){e[n]=this.replaceUrl(r);continue}typeof r!="object"||r===null||(e[n]=this.replaceDocumentUrls(r))}return e}replaceUrl(e){for(const{local:n,remote:r}of this.urlMigrations)if(e.startsWith(n))return e.replace(n,r);for(const{local:n,remote:r}of this.collectionMigrations)if(e.startsWith(n))return e.replace(n,r);return e}}function R5(t){const e={};return async()=>("value"in e||(e.value=await t()),e.value)}class DS{async loadContainedModels(e,n={}){if(x5(e)){const u=[];for(const d of cs(e.static())){const f=await e.loadRelationIfUnloaded(d)??[];u.push(...gn(f))}return u}const r={},s=[],i=Xt(e.documents,"url"),o=NT(e.resourceUrls,10),a=o.flat().map(u=>({documentUrl:u,completed:!1})),l=Xt(a,"documentUrl");n.status&&(n.status.children=a);for(const u of o)await Promise.all(u.map(async d=>{var f;const{children:h,tombstones:m}=await this.loadDocumentChildren(e,d,i,n.onDocumentError,n.onDocumentRead);s.push(...m);for(const[y,A]of Object.entries(h))(r[y]??(r[y]=[])).push(...A);d.endsWith("/")||(Jn(l.get(d)).completed=!0,await((f=n.onDocumentLoaded)==null?void 0:f.call(n)))}));for(const[u,d]of Object.entries(r))e.setRelationModels(u,d);const c=n.ignoreTombstones?Object.values(r).flat():Object.values(r).flat().concat(s);return n.status&&(n.status.children=c.map(u=>Jn(l.get(u.requireDocumentUrl())))),c}async loadContainedDocuments(e,n={}){var r,s,i;if(!Qa(e))throw Error("Cannot get contained models from local model");const o={},a=e.requireEngine();for(let l=0;l<e.resourceUrls.length;l++){const c=e.resourceUrls[l];if(!c||c.endsWith("/"))continue;o[c]=await a.readOne(e.url,c);const u=(s=(r=n.status)==null?void 0:r.children)==null?void 0:s[l];u&&(u.completed=!0),await((i=n.onDocumentLoaded)==null?void 0:i.call(n))}return o}async loadDocumentChildren(e,n,r,s,i){return this.loadDocumentChildrenFromRemote(e,n,s,i)}async loadDocumentChildrenFromRemote(e,n,r,s){const i={},o=[],a=R5(async()=>{try{const l=e.documents.find(d=>d.url===n),c=await e.requireEngine().readOne(Qt(n),n),u=await pi.createManyFromEngineDocuments({[n]:c});return o.push(...u),l&&(s==null||s(l)),c}catch(l){if(mn(l,ts))return null;if(!r)throw l;return r(l),null}});for(const l of cs(e.static())){const c=e.requireRelation(l);if(c.loaded){i[l]=c.getLoadedModels();continue}const u=await a();if(u)try{const d=await c.relatedClass.createManyFromEngineDocuments({[n]:u});i[l]=d}catch(d){if(!r)throw d;r(d)}}return{children:i,tombstones:o}}}const Da=new WeakMap;class PS{async loadTypeIndex(e={}){const n=ht.requireUser();return(e.fresh||!Da.has(n))&&Da.set(n,await ht.findPrivateTypeIndex({fresh:e.fresh})),e.create&&!Da.get(n)&&Da.set(n,await ht.findOrCreatePrivateTypeIndex()),Da.get(n)??null}}class $S{async indexLocalModels(e){for(const n of e)await this.addLocalModel(n)}async addLocalModel(e){if(!this.localModels.hasKey(e.url)){this.localModels.add(e);for(const n of cs(e.static()))await e.loadRelationIfUnloaded(n);for(const n of qi(e))await this.addLocalModel(n)}}}const I5=Hg;class Td extends Du(I5,[DS,PS,$S]){constructor(){super(),Gt(this,"_models"),this.localModels=Xt([],"url")}static restore(e){return Fe(new Td,n=>{n.status=e})}get models(){return this._models}set models(e){if(!e){delete this._models,this.localModels=Xt([],"url");return}const n=V_(this.status.children??[],"modelUrl");this._models=e,this.localModels=Xt([],"url"),this.status.children=e.map(r=>n[r.url]??{modelUrl:r.url,completed:!1})}async run(){if(!this.models)throw new Error("Cant start migration without models");await this.indexLocalModels(this.models);const e=this.status.children??[],n=await this.loadTypeIndex();for(const r of e){const s=this.models.find(({url:i})=>r.modelUrl===i);!s||r.completed||(await this.migrateRegisteredModel(s,r,n),await this.updateProgress(()=>r.completed=!0))}for(const[r,s]of b5())await r.updateSchema(s);v5()}async migrateRegisteredModel(e,n,r){if(await this.migrate(e,n),!Ts(e))return;const s=Xp(e.static()),i=r==null?void 0:r.registrations.find(({instanceContainer:o})=>o===e.url);!r||!i||s.length===0||(i.setAttribute("forClass",s.map(o=>{var a;return((a=m_(o))==null?void 0:a.rdfsClasses)??o.rdfsClass}).flat()),await r.save())}async migrate(e,n){this.assertNotCancelled(),await this.migrateChildren(e,n);const r=m_(e.static());if(!r)return;const s=await Br(e.static()).find(e.url),i=await(s==null?void 0:s.migrateSchema(r));await e.migrateSchema(r,{mintOperationUrl:o=>{var a,l;return(l=(a=i==null?void 0:i.operations)==null?void 0:a.find(c=>!mn(o,Ns)||!mn(c,Ns)?!1:o.property===c.property&&o.date.getTime()===c.date.getTime()))==null?void 0:l.url}})}async migrateChildren(e,n){if(!Ts(e))return;const r=await this.loadContainedModels(e,{ignoreTombstones:!0});n.children??(n.children=r.map(s=>({modelUrl:s.url,completed:!1})));for(const s of n.children){const i=r.find(({url:o})=>s.modelUrl===o);!i||s.completed||(await this.migrate(i,s),await this.updateProgress(()=>s.completed=!0))}}}const Pa=Jn(()=>ut.service("$cloud")),C5=Hg;function k5(t){return!!t&&"root"in t}class O5 extends Du(C5,[DS,PS,$S]){constructor(e){super(),Gt(this,"documentsWithErrors"),Gt(this,"models"),Gt(this,"dirtyRemoteModels"),Gt(this,"rootLocalModels"),Gt(this,"tombstones"),Gt(this,"syncedModelUrls"),Gt(this,"documentsModifiedAt"),Gt(this,"screenLock",null),Gt(this,"localModels"),this.documentsWithErrors=new Set,this.models=e,this.rootLocalModels=[],this.localModels=Xt([],"url"),this.tombstones=Xt([],"resourceUrl"),this.syncedModelUrls=new Set,this.documentsModifiedAt={}}async run(){const e=ht.requireAuthenticator().engine,n=(s,{headers:i},o)=>{const a=(i==null?void 0:i.get("last-modified"))??o;!a||s.endsWith("/")||(this.documentsModifiedAt[s]=new Date(a))},r=e.listeners.add({onDocumentRead:(s,i)=>n(s,i),onDocumentUpdated:(s,i)=>n(s,i,new Date)});try{this.lockScreen(),this.rootLocalModels=this.models??Zp(),e.setConfig({cachesDocuments:!0,persistentCache:Pa.getDocumentsCache()}),await this.indexLocalModels(this.rootLocalModels),await this.pullChanges(),await this.pushChanges(),e.clearCache(),e.setConfig({cachesDocuments:!1,persistentCache:void 0})}finally{this.releaseScreen(),r()}}lockScreen(){const e=navigator;if(e.wakeLock)try{this.screenLock=e.wakeLock.request("screen").catch(n=>{Ai.reportDevelopmentError(n,"Could not request screen wake lock")})}catch(n){Ai.reportDevelopmentError(n,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then(e=>e==null?void 0:e.release()),this.screenLock=null)}getInitialStatus(){return{root:!0,completed:!1,children:[{completed:!1},{completed:!1}]}}calculateCurrentProgress(e){return e??(e=this.status),k5(e)?t0(this.calculateCurrentProgress(e.children[0])*.9+this.calculateCurrentProgress(e.children[1])*.1,2):super.calculateCurrentProgress(e)}async pullChanges(){const e=this.models?await this.fetchRemoteModelsForLocal(this.models):await this.fetchRemoteModels(),n=Xt(e,r=>r instanceof pi?r.resourceUrl:r.url);this.dirtyRemoteModels=await this.synchronizeModels(n),await this.updateProgress(r=>r.children[0].completed=!0)}async pushChanges(){const e=this.dirtyRemoteModels??[],n=this.status.children[1].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++){const i=e[s],o=n[s];if(i.isSoftDeleted()){i.enableHistory(),i.enableTombstone(),await i.forceDelete(),await this.updateProgress(()=>o.completed=!0);return}await this.saveModelAndRelated(i,o),await this.updateTypeRegistrations(i),await this.updateProgress(()=>o.completed=!0)}const r=Pa.getDocumentsCache();for(const[s,i]of Object.entries(this.documentsModifiedAt))await r.remember(Qt(s),s,i);Qp(this.syncedModelUrls,this.documentsWithErrors),await this.updateProgress(s=>s.children[1].completed=!0)}async fetchRemoteModels(){const e=this.status.children[0],n=await this.loadTypeIndex({fresh:!0});if(!n)return[];const r=[],s=this.getTypeRegistrations(n);e.children=s.map(()=>({completed:!1}));for(let i=0;i<s.length;i++)await this.ignoringDocumentErrors(async()=>{var o;const a=Jn((o=e.children)==null?void 0:o[i]),{registration:l,registeredModel:c}=Jn(s[i]),u=Br(c.modelClass);if(!l.instanceContainer)return;if(qo(u)){await Yp(c.modelClass,Qt(l.instanceContainer));const f=await u.find(l.instanceContainer);f&&(await this.loadChildren(f,a),r.push(f)),await this.updateProgress(()=>a.completed=!0);return}const d=await this.fetchRemoteModelsFromContainer(a,c.modelClass,u,l.instanceContainer);r.push(...d),await this.updateProgress(()=>a.completed=!0)});for(const i of r)await d5(i,o=>this.handleDocumentError(o));return p_(this.rootLocalModels,r,this.documentsWithErrors)}async fetchRemoteModelsFromContainer(e,n,r,s){var i;const o=await Br(xr).find(s);if(!o)return[];e.children=o.resourceUrls.map(()=>({completed:!1}));const a=await this.loadContainedDocuments(o,{status:e,onDocumentError:c=>this.handleDocumentError(c),onDocumentRead:c=>{c.url.endsWith("/")||!c.updatedAt||c.url in this.documentsModifiedAt||(this.documentsModifiedAt[c.url]=c.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}}),l=await r.createManyFromEngineDocuments(a);l.length>0&&await Yp(n,s);for(let c=0;c<o.resourceUrls.length;c++){const u=o.resourceUrls[c];if(!(u!=null&&u.endsWith("/")))break;const d=await this.fetchRemoteModelsFromContainer(Jn((i=e.children)==null?void 0:i[c]),n,r,u);l.push(...d),await this.updateProgress(()=>e.completed=!0)}return l}async fetchRemoteModelsForLocal(e){const n=[],r=this.status.children[0].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++)await this.ignoringDocumentErrors(async()=>{const i=e[s],o=r[s],a=await Br(i.static()).find(i.url);if(!a){await this.updateProgress(()=>o.completed=!0);return}Ts(a)&&await this.loadChildren(a,o),n.push(a),await this.updateProgress(()=>o.completed=!0)});return p_(e,n,this.documentsWithErrors)}getTypeRegistrations(e){const n=new Set,r=[...Pa.registeredModels].map(({modelClass:o})=>{const a=qo(o)?Xp(o):[];return{modelClass:o,rdfsClasses:a.length>0?a.map(l=>l.rdfsClasses).flat():o.rdfsClasses}}),s=e.registrations.map(o=>{const a=r.find(({rdfsClasses:l})=>!!o.instanceContainer&&l.some(c=>o.forClass.includes(c)));return!a||!o.instanceContainer||n.has(o.instanceContainer)?null:(n.add(o.instanceContainer),{registration:o,registeredModel:a})}).filter(o=>!!o),i=s.map(({registration:o})=>o.instanceContainer);return s.filter(({registration:o})=>!i.some(a=>{var l;return a&&a!==o.instanceContainer&&((l=o.instanceContainer)==null?void 0:l.startsWith(a))}))}async updateTypeRegistrations(e){if(!_5(e))return;const n=Ts(e)?e:g5(e,this.localModels),r=Ts(e)?Xp(e.static()):[e.static()];if(r.length===0)return;const s=await this.loadTypeIndex({create:!0});s.registrations.some(i=>i.instanceContainer&&e.url.startsWith(i.instanceContainer))||await n.register(s,r)}async loadChildren(e,n){var r,s;if(this.assertNotCancelled(),!Ts(e))return;const i=await this.loadContainedModels(e,{status:n,onDocumentError:o=>this.handleDocumentError(o),onDocumentRead:o=>{o.url.endsWith("/")||!o.updatedAt||o.url in this.documentsModifiedAt||(this.documentsModifiedAt[o.url]=o.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}});for(let o=0;o<i.length;o++){const a=i[o];if(a instanceof pi){this.tombstones.add(a);continue}if(this.tombstones.hasKey(a.url)){await this.deleteChild(e,a);continue}await this.loadChildren(a,(r=n==null?void 0:n.children)==null?void 0:r[o]),(s=n==null?void 0:n.children)!=null&&s[o]&&await this.updateProgress(()=>{var l;return Jn((l=n.children)==null?void 0:l[o]).completed=!0})}}async deleteChild(e,n){for(const r of e.static("relations")){const s=e.requireRelation(r);if(s.related){if(Array.isArray(s.related)){s.related=s.related.filter(i=>i!==n);continue}if(s.related===n){s.related=null;continue}}}await n.forceDelete()}async saveModelAndRelated(e,n,r){if(this.assertNotCancelled(),r??(r=new Set),r.has(e))return;if(r.add(e),Qa(e)&&e.isSoftDeleted()){e.enableHistory(),e.enableTombstone(),await e.forceDelete();return}if(e.getDocumentUrl()&&this.documentsWithErrors.has(e.requireDocumentUrl()))return;const s=e.isDirty();if(await e.save(),(s||Qa(e))&&this.syncedModelUrls.add(e.url),Qa(e)){const a=e.requireDocumentUrl(),l=this.documentsModifiedAt[a];l&&(await Pa.getDocumentsCache().remember(Qt(a),a,l),delete this.documentsModifiedAt[a])}const i=ar(qi(e),e),o=n?i.map(()=>({completed:!1})):[];n&&(n.children=o);for(let a=0;a<i.length;a++){const l=i[a],c=o[a];await this.saveModelAndRelated(l,c,r),c&&await this.updateProgress(()=>c.completed=!0)}}async synchronizeModels(e){const n=new Set,r=new Set;for(const i of e.items()){if(i instanceof pi){const a=this.localModels.get(i.resourceUrl);a&&(await a.forceDelete(),r.add(a));continue}const o=OS(i,this.localModels);o.exists()||this.syncedModelUrls.add(o.url),await this.loadChildren(o),await Lt.synchronize(o,i),await this.reconcileInconsistencies(o,i),await this.saveModelAndRelated(o),await this.addLocalModel(o),this.rootLocalModels.push(o),n.add(o.url)}for(const i of this.rootLocalModels){if(r.has(i)||n.has(i.url))continue;await this.loadChildren(i);const o=w5(i,e);await Lt.synchronize(i,o),e.add(o)}const s=[];for(const i of e.getItems()){if(RS(i)){s.push(i);continue}await this.rememberModelDocuments(i)}return s}async reconcileInconsistencies(e,n,r){e.rebuildAttributesFromHistory(),e.setAttributes(n.getAttributes(!0)),r??(r=new Set),r.add(e);for(const i of cs(e.static()))await this.synchronizeContainerDocuments(e.requireRelation(i),n.requireRelation(i));const s=Xt(qi(n),"url");for(const i of qi(e))r.has(i)||!i.isRelationLoaded("operations")||!s.hasKey(i.url)||await this.reconcileInconsistencies(i,s.require(i.url),r);e.isDirty()&&await Lt.synchronize(e,n)}async synchronizeContainerDocuments(e,n){const r=Xt(e.related??[],"url"),s=Xt(n.related??[],"url"),i=r.getKeys().filter(a=>!s.hasKey(a)&&!s.hasKey(encodeURI(a))),o=s.getKeys().filter(a=>!r.hasKey(a)&&!r.hasKey(encodeURI(a)));for(const a of i){const l=r.require(a),c=CS(l);n.addRelated(c),s.add(c)}for(const a of o){const l=s.require(a),c=kS(l);e.addRelated(c),r.add(c),this.syncedModelUrls.add(c.url)}for(const a of r.items()){const l=s.require(a.url);await Lt.synchronize(a,l),await this.saveModelAndRelated(a)}}async rememberModelDocuments(e){if(!Ts(e)){const r=e.requireDocumentUrl(),s=this.documentsModifiedAt[r];s&&(await Pa.getDocumentsCache().remember(Qt(r),r,s),delete this.documentsModifiedAt[r]);return}const n=cs(e.static()).map(r=>e.getRelationModels(r)??[]).flat();for(const r of n)await this.rememberModelDocuments(r)}async ignoringDocumentErrors(e){try{await e()}catch(n){this.handleDocumentError(n)}}handleDocumentError(e){if(mn(e,N0)){console.warn(e.message),e.documentUrl&&this.documentsWithErrors.add(e.documentUrl);return}if(mn(e,p0)){console.warn(e.message);const n=e.attributes[Jt(e.modelName).primaryKey],r=n&&vr(Ct(n));r&&this.documentsWithErrors.add(r);return}throw e}}const Mt={Disconnected:"disconnected",Offline:"offline",Online:"online",Syncing:"syncing",Migrating:"migrating"},NS={manualSetup:!1},D5=ro({name:"cloud",persist:["localModelUpdates","migrationDismissed","migrationJob","modelCollections","pollingEnabled","pollingMinutes","ready","startupSync"],initialState:()=>({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,manualSetup:NS.manualSetup,registeredModels:[],schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Mt.Disconnected,syncError:null,syncJob:null}),serialize:t=>{var e;return kw(t,{migrationJob:(e=t.migrationJob)==null?void 0:e.serialize()})},restore:t=>kw(t,{migrationJob:t.migrationJob&&Td.restore(t.migrationJob)}),watch:{migrationJob(t){t==null||t.listeners.add({onUpdated:()=>this.updatePersistedState("migrationJob")})}},computed:{disconnected:({status:t})=>t===Mt.Disconnected,online:({status:t})=>t===Mt.Online,offline:({status:t})=>t===Mt.Offline,syncing:({status:t})=>t===Mt.Syncing,migrating:({status:t})=>t===Mt.Migrating,localChanges({localModelUpdates:t}){return Object.values(t).reduce((e,n)=>e+n,0)},dirty(){return this.localChanges>0},migrationStarted({migrationJob:t}){return!!t},migrationDisabledReason({status:t,ready:e}){return ht.isLoggedIn()?e?t===Mt.Syncing||t===Mt.Migrating?Le("cloud.migrationNotSyncing","Wait for syncing to finish before starting the migration"):this.online?null:Le("cloud.migrationNotOnline","You need to be online in order to start the migration"):Le("cloud.migrationNotReady","You need to backup your data before starting the migration"):Le("cloud.migrationNotLoggedIn","You need to reconnect before starting the migration")}}});class P5 extends D5{constructor(){super(...arguments),Gt(this,"asyncLock",new im),Gt(this,"engine",null),Gt(this,"pollingInterval",null),Gt(this,"documentsCache",null)}async whenReady(e){return this.ready?e():new Promise(n=>{const r=()=>n(e());qe.once("cloud:ready",r)})}async setup(e){this.setupOngoing=!0;try{await this.backup(e),await this.setReady(!0),await this.sync()}finally{this.setupOngoing=!1}}getEngine(){return this.engine}requireEngine(){return this.engine??We("Could not get required Engine")}dismissSetup(){this.setupDismissed=!0}dismissMigration(){this.migrationDismissed=!0}postponeMigration(){this.migrationPostponed=!0}async syncIfOnline(e={}){this.online&&await this.sync(e)}async sync(e={}){const n=H_(e)?{models:e}:e instanceof Lt?{model:e}:e;!ht.isLoggedIn()||!this.ready||!this.online||await this.asyncLock.run(async()=>{let r=n.model?[n.model]:n.models;const s=Date.now();this.syncError=null,this.status=Mt.Syncing,Iu.clear(r);try{await qe.emit("cloud:sync-started",r),n.refreshUserProfile&&await ht.refreshUserProfile();const i=n.syncDirty??!0;let o=0;do{if(this.syncJob=new O5(r),this.syncJob.listeners.add(n),await fh(this.syncJob),this.syncJob.cancelled)return;o++,r=this.getDirtyLocalModels().filter(a=>{var l;return!((l=this.syncJob)!=null&&l.documentsWithErrors.has(a.requireDocumentUrl()))})}while(i&&r.length>0&&o<3);tl("unit")||await wr({milliseconds:Math.max(500,1e3-(Date.now()-s))}),this.syncJob=null}catch(i){if(tl())throw i;this.syncJob=null,this.syncError=i,await Ai.report(i,Le("cloud.syncFailed","Sync failed"))}finally{this.status=Mt.Online,await qe.emit("cloud:sync-completed",r)}})}shouldMigrate(){return this.schemaMigrations.size>0}async migrate(e){if(!this.online||!ht.isLoggedIn()||!this.ready)throw new Error("Data cannot be migrated at the moment");this.shouldMigrate()&&await this.asyncLock.run(async()=>{var n;this.status=Mt.Migrating,this.migrationJob??(this.migrationJob=new Td);const r=Date.now(),s=[],i=(n=this.migrationJob).models??(n.models=Zp());Iu.clear(i);try{if(e&&s.push(this.migrationJob.listeners.add(e)),await qe.emit("cloud:migration-started",i),await fh(this.migrationJob),this.migrationJob.cancelled){await qe.emit("cloud:migration-cancelled",i);return}this.migrationJob=null,this.migrationDismissed=!1,this.migrationPostponed=!1,await wr({milliseconds:Math.max(0,1e3-(Date.now()-r))}),await qe.emit("cloud:migration-completed",i)}catch(o){await Ai.report(o,Le("cloud.migrationFailed","Migration failed"))}finally{this.status=Mt.Online,s.forEach(o=>o==null?void 0:o())}})}async register(e,n={}){if(this.registeredModels.find(s=>e===s.modelClass))return;const r=this.engine;r&&d_(e).forEach(s=>Br(s).setEngine(r)),this.whenReady(()=>{const[s]=this.modelCollections[e.modelName]??[];e.useSoftDeletes(!0),e.collection=s??Hc(e,n.path)}),await D8(e,{created:s=>this.ready&&f_(s),updated:s=>this.ready&&h_(s),deleted:s=>this.ready&&Qp(new Set([s.url??s.getDeletedPrimaryKey()]))}),qo(e)&&cs(e).forEach(s=>{const i=e.instance().requireRelation(s).relatedClass;i.on("created",o=>this.ready&&f_(o)),i.on("updated",o=>this.ready&&h_(o)),i.on("deleted",o=>this.ready&&Qp(new Set([o.url??o.getDeletedPrimaryKey()])))}),this.registeredModels.push({modelClass:e,path:n.path});for(const s of this.modelCollections[e.modelName]??[])await Vi(e,s)}registerSchemaMigration(e,n){this.schemaMigrations.set(e,n)}requireRemoteCollection(e){for(const n of this.registeredModels)if(e===n.modelClass)return Hc(n.modelClass,n.path);throw new Error(`Failed resolving remote collection for '${e.modelName}' model`)}getDocumentsCache(){return this.documentsCache||(this.documentsCache=new Dk(Mg(),um())),this.documentsCache}async boot(){await ht.booted,ht.isLoggedIn()&&this.login(ht.authenticator),qe.on("auth:login",({authenticator:e})=>this.login(e)),qe.on("auth:logout",()=>this.logout()),qe.once("application-ready",()=>this.onApplicationReady()),qe.once("application-mounted",()=>this.onApplicationMounted()),$t(()=>{if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.pollingEnabled||this.migrationJob){this.pollingInterval=null;return}this.pollingInterval=setInterval(()=>this.sync(),this.pollingMinutes*60*1e3)}),this.watchNetworkStatus(),await this.bustDocumentsCache(),await this.registerModels()}getDirtyLocalModels(){const e=Object.keys(this.localModelUpdates),n=[];for(const{modelClass:r}of this.registeredModels)for(const s of Sd(r,{includeSoftDeleted:!0}))n.push(...this.getModelsIn(e,s));return n}getModelsIn(e,n){const r=[];return e.includes(n.url)&&r.push(n),Ts(n)&&r.push(...TS(n).map(s=>this.getModelsIn(e,s)).flat()),r}async setReady(e){this.ready||!e||(await qe.emit("cloud:ready"),this.ready=!0)}async backup(e){await qe.emit("cloud:backup-started"),e??(e=new WeakMap);const n=new T5;for(const{modelClass:r,path:s}of this.registeredModels){for(const[a,l]of Object.entries(e.get(r)??{}))n.migrateUrl(r,a,l);const i=r.collection,o=Hc(r,s);r.collection=o,n.migrateCollection(r,i,o)}await fh(n),await qe.emit("cloud:backup-completed")}async onApplicationReady(){this.ready||!ht.isLoggedIn()||await this.setReady(!Zp().some(e=>e.url.startsWith("solid://")))}async onApplicationMounted(){if(ht.isLoggedIn()&&!this.ready&&!this.manualSetup){await this.setup();return}this.syncOnStartup()&&await this.sync()}login(e){const n=[...this.registeredModels].map(({modelClass:r})=>d_(r)).flat().concat([pi]);this.status=Mt.Online,this.engine=e.engine,Br(xr).setEngine(this.engine);for(const r of n)Br(r).setEngine(this.engine)}async logout(){this.setState({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Mt.Disconnected,syncError:null,syncJob:null}),await this.getDocumentsCache().clear()}watchNetworkStatus(){globalThis.addEventListener("online",()=>{this.status===Mt.Offline&&(this.status=Mt.Online)}),globalThis.addEventListener("offline",()=>{this.status===Mt.Online&&(this.status=Mt.Offline)})}syncOnStartup(){return Eo("startupSync")?zc(Ua("startupSync")):this.migrationJob?!1:this.startupSync}async bustDocumentsCache(){!Eo("bustDocumentsCache")||!zc(Ua("bustDocumentsCache"))||await this.getDocumentsCache().clear()}async registerModels(){const e=y0();for(const n of e.values())!i1(n)||!n.cloud||await this.register(n,typeof n.cloud=="boolean"?{}:n.cloud)}}const gr=Gr(P5),$5={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function N5(t,e){return V(),Te("svg",$5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"m6 2l2-2h4l2 2h4v2H2V2zM3 6h14l-1 14H4zm5 2v10h1V8zm3 0v10h1V8z"},null,-1)]))}const L5=ot({name:"zondicons-trash",render:N5}),LS=me({__name:"AccountLoginModal",setup(t){return(e,n)=>(V(),ce(I(zs),{title:e.$td("cloud.logIn.title","Connect account")},{default:te(()=>[oe(I(Ft),{"lang-key":"cloud.logIn.info","lang-default":"Log in to your [Solid account](https://solidproject.org) to keep data safe across devices."}),oe(I(Xi),{class:"text-sm",onClick:n[0]||(n[0]=r=>e.$ui.alert(e.$td("cloud.logIn.learnMore","What is Solid?"),e.$td("cloud.logIn.learnMoreMessage",`Solid is a decentralized storage protocol built on top of web standards. If you want to use this app across devices, you can use Solid to keep changes in sync. Even if you use it in a single device, this will also keep your data secure in case your device is lost.

In any case, Focus works 100% offline and you can connect your Solid POD later on. If you've never heard of Solid and you're just trying things out, you can keep using it without an account.

[Learn more](https://solidproject.org)`)))},{default:te(()=>[nt(Ne(e.$td("cloud.logIn.learnMore","What is Solid?")),1)]),_:1}),oe(I(o5),{"no-loading":"",class:"mt-4"})]),_:1},8,["title"]))}}),M5={key:0,class:"mt-4"},F5={class:"text-base font-semibold"},j5={class:"ml-1"},U5=me({__name:"PurgeData",setup(t){async function e(){await Dt.confirm(Le("settings.purgeConfirmTitle","Delete everything?"),Le("settings.purgeConfirmMessage","If you proceed, all your data will be deleted forever. If you want to save it before wiping this device, you can [connect to your Solid account](#action:connect) first."),{acceptVariant:"danger",acceptText:Le("settings.purgeConfirmAccept","Purge data"),actions:{connect:()=>Dt.modal(LS)}})&&(await Dt.closeAllModals(),await _d.purge())}return(n,r)=>n.$solid.hasLoggedIn()?ze("",!0):(V(),Te("details",M5,[Ee("summary",null,[Ee("span",F5,Ne(n.$td("settings.dangerZone","Danger zone")),1)]),oe(I(wt),{variant:"danger",class:"mt-4",onClick:r[0]||(r[0]=s=>e())},{default:te(()=>[oe(I(L5),{class:"size-4"}),Ee("span",j5,Ne(n.$td("settings.purge","Purge data")),1)]),_:1})]))}}),B5=[{priority:0,component:U5}],H5={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function V5(t,e){return V(),Te("svg",H5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M6.7 9.29L9 11.6l4.3-4.3l1.4 1.42L9 14.4l-3.7-3.7l1.4-1.42z"},null,-1)]))}const q5=ot({name:"zondicons-checkmark-outline",render:V5}),z5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function W5(t,e){return V(),Te("svg",z5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5l5 5z"},null,-1)]))}const K5=ot({name:"ic-sharp-cloud-upload",render:W5}),G5={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function J5(t,e){return V(),Te("svg",G5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72l1.42 1.42l-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86l-1.42 1.42l-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72l-1.42-1.42l1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6"},null,-1)]))}const MS=ot({name:"zondicons-cog",render:J5}),X5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Y5(t,e){return V(),Te("svg",X5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z"},null,-1)]))}const Q5=ot({name:"material-symbols-logout-rounded",render:Y5}),Z5={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function eH(t,e){return V(),Te("svg",Z5,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3m4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54zM10 20l-4-4l4-4zm0-12V0l4 4z"},null,-1)]))}const wc=ot({name:"zondicons-refresh",render:eH}),tH={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function nH(t,e){return V(),Te("svg",tH,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1)]))}const rH=ot({name:"ic-baseline-stop",render:nH}),sH={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function iH(t,e){return V(),Te("svg",sH,e[0]||(e[0]=[Ee("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const _c=ot({name:"ion-warning",render:iH}),oH={class:"relative flex items-center rounded-md bg-gray-100 p-4 pr-12"},aH={class:"flex flex-col overflow-hidden"},lH={class:"font-semibold"},cH={class:"px-2"},uH={key:0,class:"mt-4 flex items-center gap-2"},dH={class:"flex w-full flex-col"},fH={key:1,class:"mt-4 flex items-center gap-2"},hH={key:2,class:"mt-4 flex items-center gap-2"},pH={key:3,class:"mt-4 flex items-center gap-2"},mH={key:4,class:"mt-4 flex items-center gap-2"},gH={key:5,class:"mt-4 flex items-center gap-2"},yH={key:6,class:"mt-4 flex items-center gap-2"},bH={class:"flex flex-col gap-2"},vH={class:"flex items-center"},wH={"aria-hidden":"true"},_H={key:0,"aria-hidden":"true"},xH={key:0,class:"mt-4 flex flex-row-reverse justify-start gap-2"},EH=me({__name:"AccountModal",setup(t){const e=Zi("$modalRef"),n=ve(!1),r=Le("cloud.advanced.polling","Synchronize every {minutes} minutes",{minutes:"%%separator%%"}).split("%%separator%%"),s=ne(()=>ht.error??gr.syncError),i=ne(()=>{if(s.value)return typeof s.value=="string"?s.value:Le("cloud.info.error","There has been an error connecting.")}),o=ne(()=>s.value&&typeof s.value!="string");async function a(){gr.syncJob&&(n.value=!0,await Promise.race([gr.syncJob.cancel(),gr.syncJob.completed]),n.value=!1)}return jg("auth:logout",()=>{var l;return(l=e.value)==null?void 0:l.close()}),(l,c)=>(V(),ce(I(zs),{ref:"$modalRef","title-hidden":"","close-hidden":"",title:l.$td("account.title","Account")},{default:te(()=>{var u,d;return[Ee("div",oH,[oe(I(SS),{class:"mr-2 size-16 shrink-0"}),Ee("div",aH,[Ee("span",lH,Ne(((u=l.$solid.user)==null?void 0:u.name)??l.$td("user.anonymous","Anonymous")),1),oe(I(Xi),{href:(d=l.$solid.user)==null?void 0:d.webId,class:"mt-0.5 truncate text-sm font-light text-gray-500"},{default:te(()=>{var f;return[nt(Ne((f=l.$solid.user)==null?void 0:f.webId),1)]}),_:1},8,["href"])]),oe(I(wt),{size:"icon",variant:"ghost",class:"absolute top-1 right-1 hover:bg-gray-200","aria-label":l.$td("user.settings","Settings"),title:l.$td("user.settings","Settings"),onClick:c[0]||(c[0]=f=>l.$ui.modal(I(JA)))},{default:te(()=>[oe(I(MS),{class:"size-5"})]),_:1},8,["aria-label","title"])]),Ee("div",cH,[l.$cloud.syncing?(V(),Te("div",uH,[oe(I(wc),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),Ee("div",dH,[oe(I(Ft),{"lang-key":"cloud.info.syncing","lang-default":"Synchronizing..."}),l.$cloud.syncJob?(V(),ce(I(VA),{key:0,job:l.$cloud.syncJob,"filled-class":"bg-green-500"},null,8,["job"])):ze("",!0)])])):l.$solid.loginOngoing?(V(),Te("div",fH,[oe(I(wc),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),oe(I(Ft),{"lang-key":"cloud.info.reconnecting","lang-default":"Reconnecting..."})])):s.value?(V(),Te("div",hH,[oe(I(_c),{class:"mt-0.5 size-6 shrink-0 self-start text-red-500"}),Ee("div",null,[oe(I(Ft),{text:i.value},null,8,["text"]),o.value?(V(),ce(I(Xi),{key:0,class:"text-sm text-red-700 opacity-50 hover:opacity-75 focus-visible:opacity-75",onClick:c[1]||(c[1]=f=>l.$errors.inspect(s.value))},{default:te(()=>[nt(Ne(l.$td("errors.viewDetails","View details")),1)]),_:1})):ze("",!0)])])):l.$cloud.ready?l.$cloud.dirty?(V(),Te("div",mH,[oe(I(_c),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(I(Ft),{"lang-key":"cloud.info.changes","lang-default":"Everything is up to date. | There is one local change. | There are {n} local changes.","lang-params":l.$cloud.localChanges},null,8,["lang-params"])])):l.$cloud.online||l.$cloud.offline?(V(),Te("div",gH,[oe(I(q5),{class:Ge(["mt-0.5 size-6 shrink-0 self-start",{"text-green-500":l.$cloud.online,"text-gray-700":l.$cloud.offline}])},null,8,["class"]),l.$cloud.online?(V(),ce(I(Ft),{key:0,"lang-key":"cloud.info.changes","lang-default":"Everything is up to date.","lang-params":0})):(V(),ce(I(Ft),{key:1,"lang-key":"cloud.info.offline","lang-default":"Everything is up to date, but you're currently offline."}))])):(V(),Te("div",yH,[oe(I(_c),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(I(Ft),{"lang-key":"cloud.info.disconnected","lang-default":"You are disconnected from your Solid account, all the changes you make will remain in your device."})])):(V(),Te("div",pH,[oe(I(_c),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),oe(I(Ft),{"lang-key":"cloud.info.setup","lang-default":"Your data is not backed up yet."})])),oe(I(t3),{class:"mt-2"},{default:te(()=>[Ee("ul",bH,[Ee("li",null,[oe(I(dh),{modelValue:l.$solid.autoReconnect,"onUpdate:modelValue":c[2]||(c[2]=f=>l.$solid.autoReconnect=f),"label-class":"text-base",label:l.$td("cloud.advanced.reconnect","Reconnect on startup")},null,8,["modelValue","label"])]),Ee("li",null,[oe(I(dh),{modelValue:l.$cloud.startupSync,"onUpdate:modelValue":c[3]||(c[3]=f=>l.$cloud.startupSync=f),"label-class":"text-base",label:l.$td("cloud.advanced.startupSync","Synchronize on startup")},null,8,["modelValue","label"])]),Ee("li",null,[oe(I(dh),{modelValue:l.$cloud.pollingEnabled,"onUpdate:modelValue":c[5]||(c[5]=f=>l.$cloud.pollingEnabled=f),"label-class":"text-base"},{default:te(()=>[Ee("div",vH,[Ee("span",wH,Ne(I(r)[0]),1),oe(I(l3),{type:"number",text:`${l.$cloud.pollingMinutes}`,"aria-label":l.$td("cloud.advanced.pollingMinutes","Synchronization interval (in minutes)"),class:"focus-within:border-primary-600 mx-1 -mb-px border-b",onUpdate:c[4]||(c[4]=f=>l.$cloud.pollingMinutes=f)},{default:te(()=>[nt(Ne(l.$cloud.pollingMinutes),1)]),_:1},8,["text","aria-label"]),I(r).length>1?(V(),Te("span",_H,Ne(I(r)[1]),1)):ze("",!0)])]),_:1},8,["modelValue"])])])]),_:1})]),l.$solid.loginOngoing?ze("",!0):(V(),Te("div",xH,[l.$cloud.syncing?(V(),ce(I(wt),{key:0,variant:"secondary",disabled:n.value,onClick:c[6]||(c[6]=f=>a())},{default:te(()=>[oe(I(rH),{class:"size-5"}),Ee("span",null,Ne(n.value?l.$td("cloud.stopping","Stopping..."):l.$td("cloud.stop","Stop synchronization")),1)]),_:1},8,["disabled"])):l.$solid.isLoggedIn()?l.$cloud.ready?(V(),ce(I(wt),{key:2,disabled:l.$cloud.offline,onClick:c[8]||(c[8]=f=>l.$cloud.sync({refreshUserProfile:!0}))},{default:te(()=>[oe(I(wc),{class:"size-5"}),Ee("span",null,Ne(l.$td("cloud.sync","Synchronize")),1)]),_:1},8,["disabled"])):(V(),ce(I(wt),{key:3,onClick:c[9]||(c[9]=f=>{var h;return l.$cloud.setupDismissed=!1,(h=e.value)==null||h.close(),l.$cloud.manualSetup||l.$cloud.setup()})},{default:te(()=>[oe(I(K5),{class:"size-5"}),Ee("span",null,Ne(l.$td("cloud.setup.submit","Back up now")),1)]),_:1})):(V(),ce(I(wt),{key:1,onClick:c[7]||(c[7]=f=>l.$solid.reconnect({force:!0}))},{default:te(()=>[oe(I(wc),{class:"size-5"}),Ee("span",null,Ne(l.$td("cloud.reconnect","Reconnect")),1)]),_:1})),l.$cloud.syncing?ze("",!0):(V(),ce(I(wt),{key:4,variant:"secondary",onClick:c[10]||(c[10]=f=>l.$solid.logout())},{default:te(()=>[oe(I(Q5),{class:"size-5"}),Ee("span",null,Ne(l.$cloud.ready?l.$td("cloud.logOut","Log out"):l.$td("cloud.disconnect","Disconnect")),1)]),_:1}))]))]}),_:1},8,["title"]))}}),AH={class:"relative size-12"},SH=["aria-label","title"],TH={key:0,class:"absolute -inset-1 animate-spin rounded-full border-2 border-[currentColor_transparent] text-green-500"},RH={class:"sr-only"},IH=me({__name:"AccountLoggedIn",setup(t){const e=ne(()=>gr.syncing||ht.loginOngoing?{loading:!0,classes:"bg-green-500 sr-only",message:n()??""}:ht.error||gr.syncError?{classes:"bg-red-500",message:Le("account.error","There has been an error connecting with your account.")}:!ht.isLoggedIn()||gr.dirty||!gr.ready?{classes:"bg-yellow-500",message:Le("account.dirty","There are local changes that haven't been synchronized yet.")}:{classes:gr.status===Mt.Online?"bg-green-500":"bg-gray-500",message:n()??""});function n(){switch(gr.status){case Mt.Syncing:return Le("cloud.status.syncing","Synchronization in progress");case Mt.Migrating:return Le("cloud.status.migrating","Migration in progress");case Mt.Online:return Le("cloud.status.online","Online");case Mt.Offline:return Le("cloud.status.offline","Offline");case Mt.Disconnected:return Le("cloud.status.disconnected","Disconnected")}}return(r,s)=>(V(),Te("div",AH,[Ee("button",{class:"clickable focus-visible:outline-primary-600 flex size-full rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",type:"button","aria-label":r.$td("account.open","Open account"),title:r.$td("account.open","Open account"),onClick:s[0]||(s[0]=i=>r.$ui.modal(EH))},[oe(I(SS),{class:"size-full"}),e.value.loading?(V(),Te("div",TH)):ze("",!0)],8,SH),Ee("div",{class:Ge(["pointer-events-none absolute right-0 bottom-0 size-3 rounded-full border-2 border-white",e.value.classes])},[Ee("span",RH,Ne(e.value.message),1)],2)]))}}),CH=me({__name:"AccountLoggedOut",setup(t){return(e,n)=>(V(),ce(I(i3),{align:"start",options:[{label:e.$td("user.logIn","Connect account"),click:()=>e.$ui.modal(LS)},{label:e.$td("user.settings","Settings"),click:()=>e.$ui.modal(I(JA))}]},{default:te(()=>[oe(I(wt),{size:"icon",variant:"ghost","aria-label":e.$td("user.menu","Configuration"),title:e.$td("user.menu","Configuration")},{default:te(()=>[oe(I(MS),{class:"size-5"})]),_:1},8,["aria-label","title"])]),_:1},8,["options"]))}}),kH=me({__name:"Account",setup(t){return(e,n)=>e.$solid.hasLoggedIn()?(V(),ce(IH,{key:0})):(V(),ce(CH,{key:1}))}}),OH={$cloud:gr};function DH(t={}){return{name:"@aerogel/local-first",async install(e){B5.forEach(n=>ut.addSetting(n)),typeof t.manualSetup=="boolean"&&(NS.manualSetup=t.manualSetup,gr.manualSetup=t.manualSetup),await so(e,OH)}}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const xo=typeof document<"u";function FS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function PH(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&FS(t.default)}const ft=Object.assign;function vh(t,e){const n={};for(const r in e){const s=e[r];n[r]=Kr(s)?s.map(t):t(s)}return n}const Za=()=>{},Kr=Array.isArray,jS=/#/g,$H=/&/g,NH=/\//g,LH=/=/g,MH=/\?/g,US=/\+/g,FH=/%5B/g,jH=/%5D/g,BS=/%5E/g,UH=/%60/g,HS=/%7B/g,BH=/%7C/g,VS=/%7D/g,HH=/%20/g;function ny(t){return encodeURI(""+t).replace(BH,"|").replace(FH,"[").replace(jH,"]")}function VH(t){return ny(t).replace(HS,"{").replace(VS,"}").replace(BS,"^")}function em(t){return ny(t).replace(US,"%2B").replace(HH,"+").replace(jS,"%23").replace($H,"%26").replace(UH,"`").replace(HS,"{").replace(VS,"}").replace(BS,"^")}function qH(t){return em(t).replace(LH,"%3D")}function zH(t){return ny(t).replace(jS,"%23").replace(MH,"%3F")}function WH(t){return t==null?"":zH(t).replace(NH,"%2F")}function bl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const KH=/\/$/,GH=t=>t.replace(KH,"");function wh(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=QH(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:bl(o)}}function JH(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function XH(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Zo(e.matched[r],n.matched[s])&&qS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Zo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function qS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!YH(t[n],e[n]))return!1;return!0}function YH(t,e){return Kr(t)?y_(t,e):Kr(e)?y_(e,t):t===e}function y_(t,e){return Kr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function QH(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Js={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vl;(function(t){t.pop="pop",t.push="push"})(vl||(vl={}));var el;(function(t){t.back="back",t.forward="forward",t.unknown=""})(el||(el={}));function ZH(t){if(!t)if(xo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),GH(t)}const e6=/^[^#]+#/;function t6(t,e){return t.replace(e6,"#")+e}function n6(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Rd=()=>({left:window.scrollX,top:window.scrollY});function r6(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=n6(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function b_(t,e){return(history.state?history.state.position-e:-1)+t}const tm=new Map;function s6(t,e){tm.set(t,e)}function i6(t){const e=tm.get(t);return tm.delete(t),e}let o6=()=>location.protocol+"//"+location.host;function zS(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),g_(l,"")}return g_(n,t)+r+s}function a6(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=zS(t,location),m=n.value,y=e.value;let A=0;if(f){if(n.value=h,e.value=f,o&&o===m){o=null;return}A=y?f.position-y.position:0}else r(h);s.forEach(E=>{E(n.value,m,{delta:A,type:vl.pop,direction:A?A>0?el.forward:el.back:el.unknown})})};function l(){o=n.value}function c(f){s.push(f);const h=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(ft({},f.state,{scroll:Rd()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function v_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Rd():null}}function l6(t){const{history:e,location:n}=window,r={value:zS(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:o6()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=ft({},e.state,v_(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=ft({},s.value,e.state,{forward:l,scroll:Rd()});i(u.current,u,!0);const d=ft({},v_(r.value,l,null),{position:u.position+1},c);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function c6(t){t=ZH(t);const e=l6(t),n=a6(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ft({location:"",base:t,go:r,createHref:t6.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function u6(t){return typeof t=="string"||t&&typeof t=="object"}function WS(t){return typeof t=="string"||typeof t=="symbol"}const KS=Symbol("");var w_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(w_||(w_={}));function ea(t,e){return ft(new Error,{type:t,[KS]:!0},e)}function Es(t,e){return t instanceof Error&&KS in t&&(e==null||!!(t.type&e))}const __="[^/]+?",d6={sensitive:!1,strict:!1,start:!0,end:!0},f6=/[.+*?^${}()[\]/\\]/g;function h6(t,e){const n=ft({},d6,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(f6,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:y,optional:A,regexp:E}=f;i.push({name:m,repeatable:y,optional:A});const _=E||__;if(_!==__){h+=10;try{new RegExp(`(${_})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+p.message)}}let g=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(g=A&&c.length<2?`(?:/${g})`:"/"+g),A&&(g+="?"),s+=g,h+=20,A&&(h+=-8),y&&(h+=-20),_===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",m=i[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:m,repeatable:y,optional:A}=h,E=m in c?c[m]:"";if(Kr(E)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=Kr(E)?E.join("/"):E;if(!_)if(A)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function p6(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function GS(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=p6(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(x_(r))return 1;if(x_(s))return-1}return s.length-r.length}function x_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const m6={type:0,value:""},g6=/[a-zA-Z0-9_]/;function y6(t){if(!t)return[[]];if(t==="/")return[[m6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:g6.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function b6(t,e,n){const r=h6(y6(t.path),n),s=ft(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function v6(t,e){const n=[],r=new Map;e=T_({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,h){const m=!h,y=A_(d);y.aliasOf=h&&h.record;const A=T_(e,d),E=[y];if("alias"in d){const p=typeof d.alias=="string"?[d.alias]:d.alias;for(const b of p)E.push(A_(ft({},y,{components:h?h.record.components:y.components,path:b,aliasOf:h?h.record:y})))}let _,g;for(const p of E){const{path:b}=p;if(f&&b[0]!=="/"){const x=f.record.path,R=x[x.length-1]==="/"?"":"/";p.path=f.record.path+(b&&R+b)}if(_=b6(p,f,A),h?h.alias.push(_):(g=g||_,g!==_&&g.alias.push(_),m&&d.name&&!S_(_)&&o(d.name)),JS(_)&&l(_),y.children){const x=y.children;for(let R=0;R<x.length;R++)i(x[R],_,h&&h.children[R])}h=h||_}return g?()=>{o(g)}:Za}function o(d){if(WS(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=x6(d,n);n.splice(f,0,d),d.record.name&&!S_(d)&&r.set(d.record.name,d)}function c(d,f){let h,m={},y,A;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw ea(1,{location:d});A=h.record.name,m=ft(E_(f.params,h.keys.filter(g=>!g.optional).concat(h.parent?h.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),d.params&&E_(d.params,h.keys.map(g=>g.name))),y=h.stringify(m)}else if(d.path!=null)y=d.path,h=n.find(g=>g.re.test(y)),h&&(m=h.parse(y),A=h.record.name);else{if(h=f.name?r.get(f.name):n.find(g=>g.re.test(f.path)),!h)throw ea(1,{location:d,currentLocation:f});A=h.record.name,m=ft({},f.params,d.params),y=h.stringify(m)}const E=[];let _=h;for(;_;)E.unshift(_.record),_=_.parent;return{name:A,path:y,params:m,matched:E,meta:_6(E)}}t.forEach(d=>i(d));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function E_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function A_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:w6(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function w6(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function S_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _6(t){return t.reduce((e,n)=>ft(e,n.meta),{})}function T_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function x6(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;GS(t,e[i])<0?r=i:n=i+1}const s=E6(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function E6(t){let e=t;for(;e=e.parent;)if(JS(e)&&GS(t,e)===0)return e}function JS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function A6(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(US," "),o=i.indexOf("="),a=bl(o<0?i:i.slice(0,o)),l=o<0?null:bl(i.slice(o+1));if(a in e){let c=e[a];Kr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function R_(t){let e="";for(let n in t){const r=t[n];if(n=qH(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kr(r)?r.map(i=>i&&em(i)):[r&&em(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function S6(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Kr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const T6=Symbol(""),I_=Symbol(""),ry=Symbol(""),sy=Symbol(""),nm=Symbol("");function $a(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ri(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(ea(4,{from:n,to:e})):f instanceof Error?l(f):u6(f)?l(ea(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function _h(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(FS(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ri(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=PH(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&ri(h,n,r,o,a,s)()}))}}return i}function C_(t){const e=Vt(ry),n=Vt(sy),r=ne(()=>{const l=I(t.to);return e.resolve(l)}),s=ne(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Zo.bind(null,u));if(f>-1)return f;const h=k_(l[c-2]);return c>1&&k_(u)===h&&d[d.length-1].path!==h?d.findIndex(Zo.bind(null,l[c-2])):f}),i=ne(()=>s.value>-1&&k6(n.params,r.value.params)),o=ne(()=>s.value>-1&&s.value===n.matched.length-1&&qS(n.params,r.value.params));function a(l={}){if(C6(l)){const c=e[I(t.replace)?"replace":"push"](I(t.to)).catch(Za);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:ne(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function R6(t){return t.length===1?t[0]:t}const I6=me({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:C_,setup(t,{slots:e}){const n=Tr(C_(t)),{options:r}=Vt(ry),s=ne(()=>({[O_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[O_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&R6(e.default(n));return t.custom?i:jn("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),XS=I6;function C6(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function k6(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Kr(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function k_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const O_=(t,e,n)=>t??e??n,O6=me({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Vt(nm),s=ne(()=>t.route||r.value),i=Vt(I_,0),o=ne(()=>{let c=I(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=ne(()=>s.value.matched[o.value]);ir(I_,ne(()=>o.value+1)),ir(T6,a),ir(nm,s);const l=ve();return st(()=>[l.value,a.value,t.name],([c,u,d],[f,h,m])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Zo(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return D_(n.default,{Component:f,route:c});const h=d.props[u],m=h?h===!0?c.params:typeof h=="function"?h(c):h:null,A=jn(f,ft({},m,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return D_(n.default,{Component:A,route:c})||A}}});function D_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const D6=O6;function P6(t){const e=v6(t.routes,t),n=t.parseQuery||A6,r=t.stringifyQuery||R_,s=t.history,i=$a(),o=$a(),a=$a(),l=lr(Js);let c=Js;xo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=vh.bind(null,$=>""+$),d=vh.bind(null,WH),f=vh.bind(null,bl);function h($,X){let ie,ee;return WS($)?(ie=e.getRecordMatcher($),ee=X):ee=$,e.addRoute(ee,ie)}function m($){const X=e.getRecordMatcher($);X&&e.removeRoute(X)}function y(){return e.getRoutes().map($=>$.record)}function A($){return!!e.getRecordMatcher($)}function E($,X){if(X=ft({},X||l.value),typeof $=="string"){const F=wh(n,$,X.path),se=e.resolve({path:F.path},X),ge=s.createHref(F.fullPath);return ft(F,se,{params:f(se.params),hash:bl(F.hash),redirectedFrom:void 0,href:ge})}let ie;if($.path!=null)ie=ft({},$,{path:wh(n,$.path,X.path).path});else{const F=ft({},$.params);for(const se in F)F[se]==null&&delete F[se];ie=ft({},$,{params:d(F)}),X.params=d(X.params)}const ee=e.resolve(ie,X),we=$.hash||"";ee.params=u(f(ee.params));const Ae=JH(r,ft({},$,{hash:VH(we),path:ee.path})),D=s.createHref(Ae);return ft({fullPath:Ae,hash:we,query:r===R_?S6($.query):$.query||{}},ee,{redirectedFrom:void 0,href:D})}function _($){return typeof $=="string"?wh(n,$,l.value.path):ft({},$)}function g($,X){if(c!==$)return ea(8,{from:X,to:$})}function p($){return R($)}function b($){return p(ft(_($),{replace:!0}))}function x($){const X=$.matched[$.matched.length-1];if(X&&X.redirect){const{redirect:ie}=X;let ee=typeof ie=="function"?ie($):ie;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=_(ee):{path:ee},ee.params={}),ft({query:$.query,hash:$.hash,params:ee.path!=null?{}:$.params},ee)}}function R($,X){const ie=c=E($),ee=l.value,we=$.state,Ae=$.force,D=$.replace===!0,F=x(ie);if(F)return R(ft(_(F),{state:typeof F=="object"?ft({},we,F.state):we,force:Ae,replace:D}),X||ie);const se=ie;se.redirectedFrom=X;let ge;return!Ae&&XH(r,ee,ie)&&(ge=ea(16,{to:se,from:ee}),ae(ee,ee,!0,!1)),(ge?Promise.resolve(ge):C(se,ee)).catch(de=>Es(de)?Es(de,2)?de:z(de):B(de,se,ee)).then(de=>{if(de){if(Es(de,2))return R(ft({replace:D},_(de.to),{state:typeof de.to=="object"?ft({},we,de.to.state):we,force:Ae}),X||se)}else de=P(se,ee,!0,D,we);return M(se,ee,de),de})}function T($,X){const ie=g($,X);return ie?Promise.reject(ie):Promise.resolve()}function S($){const X=xe.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext($):$()}function C($,X){let ie;const[ee,we,Ae]=$6($,X);ie=_h(ee.reverse(),"beforeRouteLeave",$,X);for(const F of ee)F.leaveGuards.forEach(se=>{ie.push(ri(se,$,X))});const D=T.bind(null,$,X);return ie.push(D),W(ie).then(()=>{ie=[];for(const F of i.list())ie.push(ri(F,$,X));return ie.push(D),W(ie)}).then(()=>{ie=_h(we,"beforeRouteUpdate",$,X);for(const F of we)F.updateGuards.forEach(se=>{ie.push(ri(se,$,X))});return ie.push(D),W(ie)}).then(()=>{ie=[];for(const F of Ae)if(F.beforeEnter)if(Kr(F.beforeEnter))for(const se of F.beforeEnter)ie.push(ri(se,$,X));else ie.push(ri(F.beforeEnter,$,X));return ie.push(D),W(ie)}).then(()=>($.matched.forEach(F=>F.enterCallbacks={}),ie=_h(Ae,"beforeRouteEnter",$,X,S),ie.push(D),W(ie))).then(()=>{ie=[];for(const F of o.list())ie.push(ri(F,$,X));return ie.push(D),W(ie)}).catch(F=>Es(F,8)?F:Promise.reject(F))}function M($,X,ie){a.list().forEach(ee=>S(()=>ee($,X,ie)))}function P($,X,ie,ee,we){const Ae=g($,X);if(Ae)return Ae;const D=X===Js,F=xo?history.state:{};ie&&(ee||D?s.replace($.fullPath,ft({scroll:D&&F&&F.scroll},we)):s.push($.fullPath,we)),l.value=$,ae($,X,ie,D),z()}let j;function L(){j||(j=s.listen(($,X,ie)=>{if(!K.listening)return;const ee=E($),we=x(ee);if(we){R(ft(we,{replace:!0,force:!0}),ee).catch(Za);return}c=ee;const Ae=l.value;xo&&s6(b_(Ae.fullPath,ie.delta),Rd()),C(ee,Ae).catch(D=>Es(D,12)?D:Es(D,2)?(R(ft(_(D.to),{force:!0}),ee).then(F=>{Es(F,20)&&!ie.delta&&ie.type===vl.pop&&s.go(-1,!1)}).catch(Za),Promise.reject()):(ie.delta&&s.go(-ie.delta,!1),B(D,ee,Ae))).then(D=>{D=D||P(ee,Ae,!1),D&&(ie.delta&&!Es(D,8)?s.go(-ie.delta,!1):ie.type===vl.pop&&Es(D,20)&&s.go(-1,!1)),M(ee,Ae,D)}).catch(Za)}))}let Y=$a(),O=$a(),q;function B($,X,ie){z($);const ee=O.list();return ee.length?ee.forEach(we=>we($,X,ie)):console.error($),Promise.reject($)}function re(){return q&&l.value!==Js?Promise.resolve():new Promise(($,X)=>{Y.add([$,X])})}function z($){return q||(q=!$,L(),Y.list().forEach(([X,ie])=>$?ie($):X()),Y.reset()),$}function ae($,X,ie,ee){const{scrollBehavior:we}=t;if(!xo||!we)return Promise.resolve();const Ae=!ie&&i6(b_($.fullPath,0))||(ee||!ie)&&history.state&&history.state.scroll||null;return kt().then(()=>we($,X,Ae)).then(D=>D&&r6(D)).catch(D=>B(D,$,X))}const fe=$=>s.go($);let pe;const xe=new Set,K={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:y,resolve:E,options:t,push:p,replace:b,go:fe,back:()=>fe(-1),forward:()=>fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:O.add,isReady:re,install($){const X=this;$.component("RouterLink",XS),$.component("RouterView",D6),$.config.globalProperties.$router=X,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>I(l)}),xo&&!pe&&l.value===Js&&(pe=!0,p(s.location).catch(we=>{}));const ie={};for(const we in Js)Object.defineProperty(ie,we,{get:()=>l.value[we],enumerable:!0});$.provide(ry,X),$.provide(sy,jm(ie)),$.provide(nm,l);const ee=$.unmount;xe.add($),$.unmount=function(){xe.delete($),xe.size<1&&(c=Js,j&&j(),j=null,l.value=Js,pe=!1,q=!1),ee()}}};function W($){return $.reduce((X,ie)=>X.then(()=>S(ie)),Promise.resolve())}return K}function $6(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Zo(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Zo(c,l))||s.push(l))}return[n,r,s]}function N6(t){return Vt(sy)}var L6=Object.defineProperty,M6=(t,e,n)=>e in t?L6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mo=(t,e,n)=>M6(t,typeof e!="symbol"?e+"":e,n);function F6(t,e){return Tl((n,r)=>{let s=$s(Uo.routesParams.value[t]??{},e);return st(Uo.routesParams,()=>{const i=$s(Uo.routesParams.value[t]??{},e);for(const[o,a]of Object.entries(i))if(a===s[o]){s=i,r();return}}),{get:()=>Fe(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}const j6=ro({name:"router",initialState:{flashRoute:null},persist:["flashRoute"]});class U6 extends j6{constructor(){super(),mo(this,"currentRoute"),mo(this,"routesParams"),mo(this,"router"),mo(this,"bindings"),mo(this,"history"),mo(this,"routesStopWatchers"),this.router=lr(null),this.bindings={},this.history=[],this.routesStopWatchers={},this.routesParams=lr({}),this.currentRoute=ne(()=>{const e=this.router.value,n=this.routesParams.value;if(!e)return null;const r=I(e.currentRoute);return{...r,params:n==null?void 0:n[r.path],rawParams:r.params}})}use(e,n={}){this.router.value=e,this.bindings=n.bindings??{},e.beforeEach(JT(()=>this.handleStatic404Redirect())),e.beforeEach(r=>this.onEnterRoute(r.path,r.params))}async boot(){qe.on("auth:before-login",()=>this.storeFlashRoute()),qe.on("auth:login",()=>this.restoreFlashRoute()),qe.on("purge-storage",()=>this.push({name:"home"}))}__get(e){return this.router.value?super.__get(e)??Reflect.get(this.router.value,e):super.__get(e)}async onEnterRoute(e,n){var r;if(e in this.routesParams.value)return;const s={...n};for(const[o,a]of Object.entries(n)){const l=await this.resolveBinding(e,o,a);st(l,c=>{this.routesParams.value={...this.routesParams.value,[e]:{...this.routesParams.value[e],[o]:c}}}),s[o]=l.value}this.history=this.history.slice(0,3),this.history.unshift(e);const i={...this.routesParams.value,[e]:{...s,...this.routesParams.value[e]??{}}};for(const o in i)this.history.includes(o)||(r=this.routesStopWatchers[o])==null||r.forEach(a=>a());this.routesParams.value=ii(i,this.history),this.routesStopWatchers=ii(this.routesStopWatchers,this.history)}handleStatic404Redirect(){const e=pr.pull("static-404-redirect");e&&this.replace(e)}storeFlashRoute(){this.flashRoute=ii(this.currentRoute.value,["path","query","hash"])}async restoreFlashRoute(){if(!this.flashRoute)return;const e=this.flashRoute;ut.whenReady(()=>this.replace(e)),this.flashRoute=null}async resolveBinding(e,n,r){const s=this.bindings[n];if(Array.isArray(r)||!s)return ve(r);await ut.ready;const i=F6(e,n),o=TA(()=>Promise.resolve(s(r,i.value)));return I8(()=>o.value)}}const Uo=Gr(U6);class B6{constructor(e){this.value=e}}const iy=me({__name:"Page",props:{class:{}},setup(t){const e=ne(()=>Ht("mx-auto flex w-full max-w-screen-content grow flex-col px-edge py-8",t.class));return(n,r)=>(V(),Te("main",{class:Ge(e.value)},[Se(n.$slots,"default")],2))}}),H6={class:"text-2xl font-bold"},YS=me({__name:"NotFound",setup(t){return(e,n)=>(V(),ce(iy,{class:"items-center justify-center"},{default:te(()=>[Ee("h2",H6,Ne(e.$td("notFound.title","404: Not Found")),1),oe(I(Xi),{route:"home"},{default:te(()=>[nt(Ne(e.$td("notFound.home","Go home")),1)]),_:1})]),_:1}))}});function V6(t,e){const n=N6(),r=ne(()=>{var i;return(i=Uo.routesParams)==null?void 0:i.value[n.path]}),s=ne(()=>!(e!=null&&e.title)||!r.value?null:typeof e.title=="string"?e.title:e.title(r.value));return $t(()=>W6(s.value)),()=>Object.values(r.value??{}).some(i=>i instanceof B6)?jn(YS):jn(t,r.value)}function P_(t,e){return me({setup:()=>V6(t,e)})}function q6(t){if(t.component){if(typeof t.component=="function"){const e=t.component;t.component=async()=>{const{default:n}=await e();return P_(n,t)};return}t.component=P_(t.component,t)}}function $_(t){return async function(...e){return await ut.ready,t.call(this,...e)}}function z6(t){if(t.beforeEnter){if(Array.isArray(t.beforeEnter)){t.beforeEnter=t.beforeEnter.map($_);return}t.beforeEnter=$_(t.beforeEnter)}}function W6(t){if(globalThis.document){if(!t){globalThis.document.title=ut.name;return}globalThis.document.title=`${t} | ${ut.name}`}}function N_(t){return q6(t),z6(t),t}function K6(t){const e=t.map(N_);return e.some(n=>n.name==="not-found"||n.name==="404")||e.push(N_({name:"not-found",path:"/:path(.*)*",component:YS})),e}const G6={$router:Uo};function J6(t){return{async install(e){const n=P6({routes:t.routes,history:c6(t.basePath??Mr.basePath)});Dt.registerComponent("router-link",XS),Uo.use(n,t),e.use(n),Ej({resolve:r=>n.resolve({name:r}).href,visit:async r=>void await n.push({name:r})}),await so(e,G6)}}}const QS=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},X6={},Y6={class:"max-w-screen-content px-edge mx-auto flex w-full items-center justify-between gap-2 pt-8"};function Q6(t,e){const n=Xi,r=b3,s=kH;return V(),Te("header",Y6,[Ee("h1",null,[oe(n,{route:"home",class:"text-2xl font-semibold tracking-tight"},{default:te(()=>[nt(Ne(t.$t("app.title")),1)]),_:1})]),e[0]||(e[0]=Ee("div",{class:"grow"},null,-1)),oe(r),oe(s)])}const Z6=QS(X6,[["render",Q6]]),eV={};function tV(t,e){const n=Z6,r=Km("router-view"),s=YB;return V(),ce(s,null,{default:te(()=>[oe(n),oe(r)]),_:1})}const nV=QS(eV,[["render",tV]]);var xh={exports:{}},L_;function rV(){return L_||(L_=1,function(t){function e(n,r){if(r&&r.documentElement)n=r,r=arguments[2];else if(!n||!n.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(r=r||{},this._doc=n,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._metadata={},this._debug=!!r.debug,this._maxElemsToParse=r.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=r.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=r.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(r.classesToPreserve||[]),this._keepClasses=!!r.keepClasses,this._serializer=r.serializer||function(s){return s.innerHTML},this._disableJSONLD=!!r.disableJSONLD,this._allowedVideoRegex=r.allowedVideoRegex||this.REGEXPS.videos,this._linkDensityModifier=r.linkDensityModifier||0,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let s=function(i){if(i.nodeType==i.TEXT_NODE)return`${i.nodeName} ("${i.textContent}")`;let o=Array.from(i.attributes||[],function(a){return`${a.name}="${a.value}"`}).join(" ");return`<${i.localName} ${o}>`};this.log=function(){if(typeof console<"u"){let o=Array.from(arguments,a=>a&&a.nodeType==this.ELEMENT_NODE?s(a):a);o.unshift("Reader: (Readability)"),console.log(...o)}else if(typeof dump<"u"){var i=Array.prototype.map.call(arguments,function(o){return o&&o.nodeName?s(o):o}).join(" ");dump("Reader: (Readability) "+i+`
`)}}}else this.log=function(){}}e.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|footer|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/,adWords:/^(ad(vertising|vertisement)?|pub(licité)?|werb(ung)?|广告|Реклама|Anuncio)$/iu,loadingWords:/^((loading|正在加载|Загрузка|chargement|cargando)(…|\.\.\.)?)$/iu},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P","OL","UL"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent(n){this._fixRelativeUris(n),this._simplifyNestedElements(n),this._keepClasses||this._cleanClasses(n)},_removeNodes(n,r){if(this._docJSDOMParser&&n._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var s=n.length-1;s>=0;s--){var i=n[s],o=i.parentNode;o&&(!r||r.call(this,i,s,n))&&o.removeChild(i)}},_replaceNodeTags(n,r){if(this._docJSDOMParser&&n._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const s of n)this._setNodeTag(s,r)},_forEachNode(n,r){Array.prototype.forEach.call(n,r,this)},_findNode(n,r){return Array.prototype.find.call(n,r,this)},_someNode(n,r){return Array.prototype.some.call(n,r,this)},_everyNode(n,r){return Array.prototype.every.call(n,r,this)},_getAllNodesWithTag(n,r){return n.querySelectorAll?n.querySelectorAll(r.join(",")):[].concat.apply([],r.map(function(s){var i=n.getElementsByTagName(s);return Array.isArray(i)?i:Array.from(i)}))},_cleanClasses(n){var r=this._classesToPreserve,s=(n.getAttribute("class")||"").split(/\s+/).filter(i=>r.includes(i)).join(" ");for(s?n.setAttribute("class",s):n.removeAttribute("class"),n=n.firstElementChild;n;n=n.nextElementSibling)this._cleanClasses(n)},_isUrl(n){try{return new URL(n),!0}catch{return!1}},_fixRelativeUris(n){var r=this._doc.baseURI,s=this._doc.documentURI;function i(l){if(r==s&&l.charAt(0)=="#")return l;try{return new URL(l,r).href}catch{}return l}var o=this._getAllNodesWithTag(n,["a"]);this._forEachNode(o,function(l){var c=l.getAttribute("href");if(c)if(c.indexOf("javascript:")===0)if(l.childNodes.length===1&&l.childNodes[0].nodeType===this.TEXT_NODE){var u=this._doc.createTextNode(l.textContent);l.parentNode.replaceChild(u,l)}else{for(var d=this._doc.createElement("span");l.firstChild;)d.appendChild(l.firstChild);l.parentNode.replaceChild(d,l)}else l.setAttribute("href",i(c))});var a=this._getAllNodesWithTag(n,["img","picture","figure","video","audio","source"]);this._forEachNode(a,function(l){var c=l.getAttribute("src"),u=l.getAttribute("poster"),d=l.getAttribute("srcset");if(c&&l.setAttribute("src",i(c)),u&&l.setAttribute("poster",i(u)),d){var f=d.replace(this.REGEXPS.srcsetUrl,function(h,m,y,A){return i(m)+(y||"")+A});l.setAttribute("srcset",f)}})},_simplifyNestedElements(n){for(var r=n;r;){if(r.parentNode&&["DIV","SECTION"].includes(r.tagName)&&!(r.id&&r.id.startsWith("readability"))){if(this._isElementWithoutContent(r)){r=this._removeAndGetNext(r);continue}else if(this._hasSingleTagInsideElement(r,"DIV")||this._hasSingleTagInsideElement(r,"SECTION")){for(var s=r.children[0],i=0;i<r.attributes.length;i++)s.setAttributeNode(r.attributes[i].cloneNode());r.parentNode.replaceChild(s,r),r=s;continue}}r=this._getNextNode(r)}},_getArticleTitle(){var n=this._doc,r="",s="";try{r=s=n.title.trim(),typeof r!="string"&&(r=s=this._getInnerText(n.getElementsByTagName("title")[0]))}catch{}var i=!1;function o(f){return f.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(r)){i=/ [\\\/>»] /.test(r);let f=Array.from(s.matchAll(/ [\|\-\\\/>»] /gi));r=s.substring(0,f.pop().index),o(r)<3&&(r=s.replace(/^[^\|\-\\\/>»]*[\|\-\\\/>»]/gi,""))}else if(r.includes(": ")){var a=this._getAllNodesWithTag(n,["h1","h2"]),l=r.trim(),c=this._someNode(a,function(f){return f.textContent.trim()===l});c||(r=s.substring(s.lastIndexOf(":")+1),o(r)<3?r=s.substring(s.indexOf(":")+1):o(s.substr(0,s.indexOf(":")))>5&&(r=s))}else if(r.length>150||r.length<15){var u=n.getElementsByTagName("h1");u.length===1&&(r=this._getInnerText(u[0]))}r=r.trim().replace(this.REGEXPS.normalize," ");var d=o(r);return d<=4&&(!i||d!=o(s.replace(/[\|\-\\\/>»]+/g,""))-1)&&(r=s),r},_prepDocument(){var n=this._doc;this._removeNodes(this._getAllNodesWithTag(n,["style"])),n.body&&this._replaceBrs(n.body),this._replaceNodeTags(this._getAllNodesWithTag(n,["font"]),"SPAN")},_nextNode(n){for(var r=n;r&&r.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(r.textContent);)r=r.nextSibling;return r},_replaceBrs(n){this._forEachNode(this._getAllNodesWithTag(n,["br"]),function(r){for(var s=r.nextSibling,i=!1;(s=this._nextNode(s))&&s.tagName=="BR";){i=!0;var o=s.nextSibling;s.remove(),s=o}if(i){var a=this._doc.createElement("p");for(r.parentNode.replaceChild(a,r),s=a.nextSibling;s;){if(s.tagName=="BR"){var l=this._nextNode(s.nextSibling);if(l&&l.tagName=="BR")break}if(!this._isPhrasingContent(s))break;var c=s.nextSibling;a.appendChild(s),s=c}for(;a.lastChild&&this._isWhitespace(a.lastChild);)a.lastChild.remove();a.parentNode.tagName==="P"&&this._setNodeTag(a.parentNode,"DIV")}})},_setNodeTag(n,r){if(this.log("_setNodeTag",n,r),this._docJSDOMParser)return n.localName=r.toLowerCase(),n.tagName=r.toUpperCase(),n;for(var s=n.ownerDocument.createElement(r);n.firstChild;)s.appendChild(n.firstChild);n.parentNode.replaceChild(s,n),n.readability&&(s.readability=n.readability);for(var i=0;i<n.attributes.length;i++)s.setAttributeNode(n.attributes[i].cloneNode());return s},_prepArticle(n){this._cleanStyles(n),this._markDataTables(n),this._fixLazyImages(n),this._cleanConditionally(n,"form"),this._cleanConditionally(n,"fieldset"),this._clean(n,"object"),this._clean(n,"embed"),this._clean(n,"footer"),this._clean(n,"link"),this._clean(n,"aside");var r=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(n.children,function(s){this._cleanMatchedNodes(s,function(i,o){return this.REGEXPS.shareElements.test(o)&&i.textContent.length<r})}),this._clean(n,"iframe"),this._clean(n,"input"),this._clean(n,"textarea"),this._clean(n,"select"),this._clean(n,"button"),this._cleanHeaders(n),this._cleanConditionally(n,"table"),this._cleanConditionally(n,"ul"),this._cleanConditionally(n,"div"),this._replaceNodeTags(this._getAllNodesWithTag(n,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(n,["p"]),function(s){var i=this._getAllNodesWithTag(s,["img","embed","object","iframe"]).length;return i===0&&!this._getInnerText(s,!1)}),this._forEachNode(this._getAllNodesWithTag(n,["br"]),function(s){var i=this._nextNode(s.nextSibling);i&&i.tagName=="P"&&s.remove()}),this._forEachNode(this._getAllNodesWithTag(n,["table"]),function(s){var i=this._hasSingleTagInsideElement(s,"TBODY")?s.firstElementChild:s;if(this._hasSingleTagInsideElement(i,"TR")){var o=i.firstElementChild;if(this._hasSingleTagInsideElement(o,"TD")){var a=o.firstElementChild;a=this._setNodeTag(a,this._everyNode(a.childNodes,this._isPhrasingContent)?"P":"DIV"),s.parentNode.replaceChild(a,s)}}})},_initializeNode(n){switch(n.readability={contentScore:0},n.tagName){case"DIV":n.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":n.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":n.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":n.readability.contentScore-=5;break}n.readability.contentScore+=this._getClassWeight(n)},_removeAndGetNext(n){var r=this._getNextNode(n,!0);return n.remove(),r},_getNextNode(n,r){if(!r&&n.firstElementChild)return n.firstElementChild;if(n.nextElementSibling)return n.nextElementSibling;do n=n.parentNode;while(n&&!n.nextElementSibling);return n&&n.nextElementSibling},_textSimilarity(n,r){var s=n.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),i=r.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!s.length||!i.length)return 0;var o=i.filter(l=>!s.includes(l)),a=o.join(" ").length/i.join(" ").length;return 1-a},_isValidByline(n,r){var s=n.getAttribute("rel"),i=n.getAttribute("itemprop"),o=n.textContent.trim().length;return(s==="author"||i&&i.includes("author")||this.REGEXPS.byline.test(r))&&!!o&&o<100},_getNodeAncestors(n,r){r=r||0;for(var s=0,i=[];n.parentNode&&(i.push(n.parentNode),!(r&&++s===r));)n=n.parentNode;return i},_grabArticle(n){this.log("**** grabArticle ****");var r=this._doc,s=n!==null;if(n=n||this._doc.body,!n)return this.log("No body found in document. Abort."),null;for(var i=n.innerHTML;;){this.log("Starting grabArticle loop");var o=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],l=this._doc.documentElement;let ge=!0;for(;l;){l.tagName==="HTML"&&(this._articleLang=l.getAttribute("lang"));var c=l.className+" "+l.id;if(!this._isProbablyVisible(l)){this.log("Removing hidden node - "+c),l=this._removeAndGetNext(l);continue}if(l.getAttribute("aria-modal")=="true"&&l.getAttribute("role")=="dialog"){l=this._removeAndGetNext(l);continue}if(!this._articleByline&&!this._metadata.byline&&this._isValidByline(l,c)){for(var u=this._getNextNode(l,!0),d=this._getNextNode(l),f=null;d&&d!=u;){var h=d.getAttribute("itemprop");if(h&&h.includes("name")){f=d;break}else d=this._getNextNode(d)}this._articleByline=(f??l).textContent.trim(),l=this._removeAndGetNext(l);continue}if(ge&&this._headerDuplicatesTitle(l)){this.log("Removing header: ",l.textContent.trim(),this._articleTitle.trim()),ge=!1,l=this._removeAndGetNext(l);continue}if(o){if(this.REGEXPS.unlikelyCandidates.test(c)&&!this.REGEXPS.okMaybeItsACandidate.test(c)&&!this._hasAncestorTag(l,"table")&&!this._hasAncestorTag(l,"code")&&l.tagName!=="BODY"&&l.tagName!=="A"){this.log("Removing unlikely candidate - "+c),l=this._removeAndGetNext(l);continue}if(this.UNLIKELY_ROLES.includes(l.getAttribute("role"))){this.log("Removing content with role "+l.getAttribute("role")+" - "+c),l=this._removeAndGetNext(l);continue}}if((l.tagName==="DIV"||l.tagName==="SECTION"||l.tagName==="HEADER"||l.tagName==="H1"||l.tagName==="H2"||l.tagName==="H3"||l.tagName==="H4"||l.tagName==="H5"||l.tagName==="H6")&&this._isElementWithoutContent(l)){l=this._removeAndGetNext(l);continue}if(this.DEFAULT_TAGS_TO_SCORE.includes(l.tagName)&&a.push(l),l.tagName==="DIV"){for(var m=null,y=l.firstChild;y;){var A=y.nextSibling;if(this._isPhrasingContent(y))m!==null?m.appendChild(y):this._isWhitespace(y)||(m=r.createElement("p"),l.replaceChild(m,y),m.appendChild(y));else if(m!==null){for(;m.lastChild&&this._isWhitespace(m.lastChild);)m.lastChild.remove();m=null}y=A}if(this._hasSingleTagInsideElement(l,"P")&&this._getLinkDensity(l)<.25){var E=l.children[0];l.parentNode.replaceChild(E,l),l=E,a.push(l)}else this._hasChildBlockElement(l)||(l=this._setNodeTag(l,"P"),a.push(l))}l=this._getNextNode(l)}var _=[];this._forEachNode(a,function(de){if(!(!de.parentNode||typeof de.parentNode.tagName>"u")){var N=this._getInnerText(de);if(!(N.length<25)){var H=this._getNodeAncestors(de,5);if(H.length!==0){var Q=0;Q+=1,Q+=N.split(this.REGEXPS.commas).length,Q+=Math.min(Math.floor(N.length/100),3),this._forEachNode(H,function(he,ye){if(!(!he.tagName||!he.parentNode||typeof he.parentNode.tagName>"u")){if(typeof he.readability>"u"&&(this._initializeNode(he),_.push(he)),ye===0)var _e=1;else ye===1?_e=2:_e=ye*3;he.readability.contentScore+=Q/_e}})}}}});for(var g=[],p=0,b=_.length;p<b;p+=1){var x=_[p],R=x.readability.contentScore*(1-this._getLinkDensity(x));x.readability.contentScore=R,this.log("Candidate:",x,"with score "+R);for(var T=0;T<this._nbTopCandidates;T++){var S=g[T];if(!S||R>S.readability.contentScore){g.splice(T,0,x),g.length>this._nbTopCandidates&&g.pop();break}}}var C=g[0]||null,M=!1,P;if(C===null||C.tagName==="BODY"){for(C=r.createElement("DIV"),M=!0;n.firstChild;)this.log("Moving child out:",n.firstChild),C.appendChild(n.firstChild);n.appendChild(C),this._initializeNode(C)}else if(C){for(var j=[],L=1;L<g.length;L++)g[L].readability.contentScore/C.readability.contentScore>=.75&&j.push(this._getNodeAncestors(g[L]));var Y=3;if(j.length>=Y)for(P=C.parentNode;P.tagName!=="BODY";){for(var O=0,q=0;q<j.length&&O<Y;q++)O+=Number(j[q].includes(P));if(O>=Y){C=P;break}P=P.parentNode}C.readability||this._initializeNode(C),P=C.parentNode;for(var B=C.readability.contentScore,re=B/3;P.tagName!=="BODY";){if(!P.readability){P=P.parentNode;continue}var z=P.readability.contentScore;if(z<re)break;if(z>B){C=P;break}B=P.readability.contentScore,P=P.parentNode}for(P=C.parentNode;P.tagName!="BODY"&&P.children.length==1;)C=P,P=C.parentNode;C.readability||this._initializeNode(C)}var ae=r.createElement("DIV");s&&(ae.id="readability-content");var fe=Math.max(10,C.readability.contentScore*.2);P=C.parentNode;for(var pe=P.children,xe=0,K=pe.length;xe<K;xe++){var W=pe[xe],$=!1;if(this.log("Looking at sibling node:",W,W.readability?"with score "+W.readability.contentScore:""),this.log("Sibling has score",W.readability?W.readability.contentScore:"Unknown"),W===C)$=!0;else{var X=0;if(W.className===C.className&&C.className!==""&&(X+=C.readability.contentScore*.2),W.readability&&W.readability.contentScore+X>=fe)$=!0;else if(W.nodeName==="P"){var ie=this._getLinkDensity(W),ee=this._getInnerText(W),we=ee.length;(we>80&&ie<.25||we<80&&we>0&&ie===0&&ee.search(/\.( |$)/)!==-1)&&($=!0)}}$&&(this.log("Appending node:",W),this.ALTER_TO_DIV_EXCEPTIONS.includes(W.nodeName)||(this.log("Altering sibling:",W,"to div."),W=this._setNodeTag(W,"DIV")),ae.appendChild(W),pe=P.children,xe-=1,K-=1)}if(this._debug&&this.log("Article content pre-prep: "+ae.innerHTML),this._prepArticle(ae),this._debug&&this.log("Article content post-prep: "+ae.innerHTML),M)C.id="readability-page-1",C.className="page";else{var Ae=r.createElement("DIV");for(Ae.id="readability-page-1",Ae.className="page";ae.firstChild;)Ae.appendChild(ae.firstChild);ae.appendChild(Ae)}this._debug&&this.log("Article content after paging: "+ae.innerHTML);var D=!0,F=this._getInnerText(ae,!0).length;if(F<this._charThreshold)if(D=!1,n.innerHTML=i,this._attempts.push({articleContent:ae,textLength:F}),this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS);else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES);else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY);else{if(this._attempts.sort(function(de,N){return N.textLength-de.textLength}),!this._attempts[0].textLength)return null;ae=this._attempts[0].articleContent,D=!0}if(D){var se=[P,C].concat(this._getNodeAncestors(P));return this._someNode(se,function(de){if(!de.tagName)return!1;var N=de.getAttribute("dir");return N?(this._articleDir=N,!0):!1}),ae}}},_unescapeHtmlEntities(n){if(!n)return n;var r=this.HTML_ESCAPE_MAP;return n.replace(/&(quot|amp|apos|lt|gt);/g,function(s,i){return r[i]}).replace(/&#(?:x([0-9a-f]+)|([0-9]+));/gi,function(s,i,o){var a=parseInt(i||o,i?16:10);return(a==0||a>1114111||a>=55296&&a<=57343)&&(a=65533),String.fromCodePoint(a)})},_getJSONLD(n){var r=this._getAllNodesWithTag(n,["script"]),s;return this._forEachNode(r,function(i){if(!s&&i.getAttribute("type")==="application/ld+json")try{var o=i.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),a=JSON.parse(o);if(Array.isArray(a)&&(a=a.find(h=>h["@type"]&&h["@type"].match(this.REGEXPS.jsonLdArticleTypes)),!a))return;var l=/^https?\:\/\/schema\.org\/?$/,c=typeof a["@context"]=="string"&&a["@context"].match(l)||typeof a["@context"]=="object"&&typeof a["@context"]["@vocab"]=="string"&&a["@context"]["@vocab"].match(l);if(!c||(!a["@type"]&&Array.isArray(a["@graph"])&&(a=a["@graph"].find(h=>(h["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes))),!a||!a["@type"]||!a["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(s={},typeof a.name=="string"&&typeof a.headline=="string"&&a.name!==a.headline){var u=this._getArticleTitle(),d=this._textSimilarity(a.name,u)>.75,f=this._textSimilarity(a.headline,u)>.75;f&&!d?s.title=a.headline:s.title=a.name}else typeof a.name=="string"?s.title=a.name.trim():typeof a.headline=="string"&&(s.title=a.headline.trim());a.author&&(typeof a.author.name=="string"?s.byline=a.author.name.trim():Array.isArray(a.author)&&a.author[0]&&typeof a.author[0].name=="string"&&(s.byline=a.author.filter(function(h){return h&&typeof h.name=="string"}).map(function(h){return h.name.trim()}).join(", "))),typeof a.description=="string"&&(s.excerpt=a.description.trim()),a.publisher&&typeof a.publisher.name=="string"&&(s.siteName=a.publisher.name.trim()),typeof a.datePublished=="string"&&(s.datePublished=a.datePublished.trim())}catch(h){this.log(h.message)}}),s||{}},_getArticleMetadata(n){var r={},s={},i=this._doc.getElementsByTagName("meta"),o=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,a=/^\s*(?:(dc|dcterm|og|twitter|parsely|weibo:(article|webpage))\s*[-\.:]\s*)?(author|creator|pub-date|description|title|site_name)\s*$/i;this._forEachNode(i,function(c){var u=c.getAttribute("name"),d=c.getAttribute("property"),f=c.getAttribute("content");if(f){var h=null,m=null;d&&(h=d.match(o),h&&(m=h[0].toLowerCase().replace(/\s/g,""),s[m]=f.trim())),!h&&u&&a.test(u)&&(m=u,f&&(m=m.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),s[m]=f.trim()))}}),r.title=n.title||s["dc:title"]||s["dcterm:title"]||s["og:title"]||s["weibo:article:title"]||s["weibo:webpage:title"]||s.title||s["twitter:title"]||s["parsely-title"],r.title||(r.title=this._getArticleTitle());const l=typeof s["article:author"]=="string"&&!this._isUrl(s["article:author"])?s["article:author"]:void 0;return r.byline=n.byline||s["dc:creator"]||s["dcterm:creator"]||s.author||s["parsely-author"]||l,r.excerpt=n.excerpt||s["dc:description"]||s["dcterm:description"]||s["og:description"]||s["weibo:article:description"]||s["weibo:webpage:description"]||s.description||s["twitter:description"],r.siteName=n.siteName||s["og:site_name"],r.publishedTime=n.datePublished||s["article:published_time"]||s["parsely-pub-date"]||null,r.title=this._unescapeHtmlEntities(r.title),r.byline=this._unescapeHtmlEntities(r.byline),r.excerpt=this._unescapeHtmlEntities(r.excerpt),r.siteName=this._unescapeHtmlEntities(r.siteName),r.publishedTime=this._unescapeHtmlEntities(r.publishedTime),r},_isSingleImage(n){for(;n;){if(n.tagName==="IMG")return!0;if(n.children.length!==1||n.textContent.trim()!=="")return!1;n=n.children[0]}return!1},_unwrapNoscriptImages(n){var r=Array.from(n.getElementsByTagName("img"));this._forEachNode(r,function(i){for(var o=0;o<i.attributes.length;o++){var a=i.attributes[o];switch(a.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(a.value))return}i.remove()});var s=Array.from(n.getElementsByTagName("noscript"));this._forEachNode(s,function(i){if(this._isSingleImage(i)){var o=n.createElement("div");o.innerHTML=i.innerHTML;var a=i.previousElementSibling;if(a&&this._isSingleImage(a)){var l=a;l.tagName!=="IMG"&&(l=a.getElementsByTagName("img")[0]);for(var c=o.getElementsByTagName("img")[0],u=0;u<l.attributes.length;u++){var d=l.attributes[u];if(d.value!==""&&(d.name==="src"||d.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(d.value))){if(c.getAttribute(d.name)===d.value)continue;var f=d.name;c.hasAttribute(f)&&(f="data-old-"+f),c.setAttribute(f,d.value)}}i.parentNode.replaceChild(o.firstElementChild,a)}}})},_removeScripts(n){this._removeNodes(this._getAllNodesWithTag(n,["script","noscript"]))},_hasSingleTagInsideElement(n,r){return n.children.length!=1||n.children[0].tagName!==r?!1:!this._someNode(n.childNodes,function(s){return s.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(s.textContent)})},_isElementWithoutContent(n){return n.nodeType===this.ELEMENT_NODE&&!n.textContent.trim().length&&(!n.children.length||n.children.length==n.getElementsByTagName("br").length+n.getElementsByTagName("hr").length)},_hasChildBlockElement(n){return this._someNode(n.childNodes,function(r){return this.DIV_TO_P_ELEMS.has(r.tagName)||this._hasChildBlockElement(r)})},_isPhrasingContent(n){return n.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.includes(n.tagName)||(n.tagName==="A"||n.tagName==="DEL"||n.tagName==="INS")&&this._everyNode(n.childNodes,this._isPhrasingContent)},_isWhitespace(n){return n.nodeType===this.TEXT_NODE&&n.textContent.trim().length===0||n.nodeType===this.ELEMENT_NODE&&n.tagName==="BR"},_getInnerText(n,r){r=typeof r>"u"?!0:r;var s=n.textContent.trim();return r?s.replace(this.REGEXPS.normalize," "):s},_getCharCount(n,r){return r=r||",",this._getInnerText(n).split(r).length-1},_cleanStyles(n){if(!(!n||n.tagName.toLowerCase()==="svg")){for(var r=0;r<this.PRESENTATIONAL_ATTRIBUTES.length;r++)n.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[r]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.includes(n.tagName)&&(n.removeAttribute("width"),n.removeAttribute("height"));for(var s=n.firstElementChild;s!==null;)this._cleanStyles(s),s=s.nextElementSibling}},_getLinkDensity(n){var r=this._getInnerText(n).length;if(r===0)return 0;var s=0;return this._forEachNode(n.getElementsByTagName("a"),function(i){var o=i.getAttribute("href"),a=o&&this.REGEXPS.hashUrl.test(o)?.3:1;s+=this._getInnerText(i).length*a}),s/r},_getClassWeight(n){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var r=0;return typeof n.className=="string"&&n.className!==""&&(this.REGEXPS.negative.test(n.className)&&(r-=25),this.REGEXPS.positive.test(n.className)&&(r+=25)),typeof n.id=="string"&&n.id!==""&&(this.REGEXPS.negative.test(n.id)&&(r-=25),this.REGEXPS.positive.test(n.id)&&(r+=25)),r},_clean(n,r){var s=["object","embed","iframe"].includes(r);this._removeNodes(this._getAllNodesWithTag(n,[r]),function(i){if(s){for(var o=0;o<i.attributes.length;o++)if(this._allowedVideoRegex.test(i.attributes[o].value))return!1;if(i.tagName==="object"&&this._allowedVideoRegex.test(i.innerHTML))return!1}return!0})},_hasAncestorTag(n,r,s,i){s=s||3,r=r.toUpperCase();for(var o=0;n.parentNode;){if(s>0&&o>s)return!1;if(n.parentNode.tagName===r&&(!i||i(n.parentNode)))return!0;n=n.parentNode,o++}return!1},_getRowAndColumnCount(n){for(var r=0,s=0,i=n.getElementsByTagName("tr"),o=0;o<i.length;o++){var a=i[o].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),r+=a||1;for(var l=0,c=i[o].getElementsByTagName("td"),u=0;u<c.length;u++){var d=c[u].getAttribute("colspan")||0;d&&(d=parseInt(d,10)),l+=d||1}s=Math.max(s,l)}return{rows:r,columns:s}},_markDataTables(n){for(var r=n.getElementsByTagName("table"),s=0;s<r.length;s++){var i=r[s],o=i.getAttribute("role");if(o=="presentation"){i._readabilityDataTable=!1;continue}var a=i.getAttribute("datatable");if(a=="0"){i._readabilityDataTable=!1;continue}var l=i.getAttribute("summary");if(l){i._readabilityDataTable=!0;continue}var c=i.getElementsByTagName("caption")[0];if(c&&c.childNodes.length){i._readabilityDataTable=!0;continue}var u=["col","colgroup","tfoot","thead","th"],d=function(h){return!!i.getElementsByTagName(h)[0]};if(u.some(d)){this.log("Data table because found data-y descendant"),i._readabilityDataTable=!0;continue}if(i.getElementsByTagName("table")[0]){i._readabilityDataTable=!1;continue}var f=this._getRowAndColumnCount(i);if(f.columns==1||f.rows==1){i._readabilityDataTable=!1;continue}if(f.rows>=10||f.columns>4){i._readabilityDataTable=!0;continue}i._readabilityDataTable=f.rows*f.columns>10}},_fixLazyImages(n){this._forEachNode(this._getAllNodesWithTag(n,["img","picture","figure"]),function(r){if(r.src&&this.REGEXPS.b64DataUrl.test(r.src)){var s=this.REGEXPS.b64DataUrl.exec(r.src);if(s[1]==="image/svg+xml")return;for(var i=!1,o=0;o<r.attributes.length;o++){var a=r.attributes[o];if(a.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(a.value)){i=!0;break}}if(i){var l=s[0].length,c=r.src.length-l;c<133&&r.removeAttribute("src")}}if(!((r.src||r.srcset&&r.srcset!="null")&&!r.className.toLowerCase().includes("lazy"))){for(var u=0;u<r.attributes.length;u++)if(a=r.attributes[u],!(a.name==="src"||a.name==="srcset"||a.name==="alt")){var d=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(a.value)?d="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(a.value)&&(d="src"),d){if(r.tagName==="IMG"||r.tagName==="PICTURE")r.setAttribute(d,a.value);else if(r.tagName==="FIGURE"&&!this._getAllNodesWithTag(r,["img","picture"]).length){var f=this._doc.createElement("img");f.setAttribute(d,a.value),r.appendChild(f)}}}}})},_getTextDensity(n,r){var s=this._getInnerText(n,!0).length;if(s===0)return 0;var i=0,o=this._getAllNodesWithTag(n,r);return this._forEachNode(o,a=>i+=this._getInnerText(a,!0).length),i/s},_cleanConditionally(n,r){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(n,[r]),function(s){var i=function(P){return P._readabilityDataTable},o=r==="ul"||r==="ol";if(!o){var a=0,l=this._getAllNodesWithTag(s,["ul","ol"]);this._forEachNode(l,P=>a+=this._getInnerText(P).length),o=a/this._getInnerText(s).length>.9}if(r==="table"&&i(s)||this._hasAncestorTag(s,"table",-1,i)||this._hasAncestorTag(s,"code")||[...s.getElementsByTagName("table")].some(P=>P._readabilityDataTable))return!1;var c=this._getClassWeight(s);this.log("Cleaning Conditionally",s);var u=0;if(c+u<0)return!0;if(this._getCharCount(s,",")<10){for(var d=s.getElementsByTagName("p").length,f=s.getElementsByTagName("img").length,h=s.getElementsByTagName("li").length-100,m=s.getElementsByTagName("input").length,y=this._getTextDensity(s,["h1","h2","h3","h4","h5","h6"]),A=0,E=this._getAllNodesWithTag(s,["object","embed","iframe"]),_=0;_<E.length;_++){for(var g=0;g<E[_].attributes.length;g++)if(this._allowedVideoRegex.test(E[_].attributes[g].value))return!1;if(E[_].tagName==="object"&&this._allowedVideoRegex.test(E[_].innerHTML))return!1;A++}var p=this._getInnerText(s);if(this.REGEXPS.adWords.test(p)||this.REGEXPS.loadingWords.test(p))return!0;var b=p.length,x=this._getLinkDensity(s),R=["SPAN","LI","TD"].concat(Array.from(this.DIV_TO_P_ELEMS)),T=this._getTextDensity(s,R),S=this._hasAncestorTag(s,"figure"),C=(()=>{const j=[];return!S&&f>1&&d/f<.5&&j.push(`Bad p to img ratio (img=${f}, p=${d})`),!o&&h>d&&j.push(`Too many li's outside of a list. (li=${h} > p=${d})`),m>Math.floor(d/3)&&j.push(`Too many inputs per p. (input=${m}, p=${d})`),!o&&!S&&y<.9&&b<25&&(f===0||f>2)&&x>0&&j.push(`Suspiciously short. (headingDensity=${y}, img=${f}, linkDensity=${x})`),!o&&c<25&&x>.2+this._linkDensityModifier&&j.push(`Low weight and a little linky. (linkDensity=${x})`),c>=25&&x>.5+this._linkDensityModifier&&j.push(`High weight and mostly links. (linkDensity=${x})`),(A===1&&b<75||A>1)&&j.push(`Suspicious embed. (embedCount=${A}, contentLength=${b})`),f===0&&T===0&&j.push(`No useful content. (img=${f}, textDensity=${T})`),j.length?(this.log("Checks failed",j),!0):!1})();if(o&&C){for(var M=0;M<s.children.length;M++)if(s.children[M].children.length>1)return C;let j=s.getElementsByTagName("li").length;if(f==j)return!1}return C}return!1})},_cleanMatchedNodes(n,r){for(var s=this._getNextNode(n,!0),i=this._getNextNode(n);i&&i!=s;)r.call(this,i,i.className+" "+i.id)?i=this._removeAndGetNext(i):i=this._getNextNode(i)},_cleanHeaders(n){let r=this._getAllNodesWithTag(n,["h1","h2"]);this._removeNodes(r,function(s){let i=this._getClassWeight(s)<0;return i&&this.log("Removing header with low class weight:",s),i})},_headerDuplicatesTitle(n){if(n.tagName!="H1"&&n.tagName!="H2")return!1;var r=this._getInnerText(n,!1);return this.log("Evaluating similarity of header:",r,this._articleTitle),this._textSimilarity(this._articleTitle,r)>.75},_flagIsActive(n){return(this._flags&n)>0},_removeFlag(n){this._flags=this._flags&~n},_isProbablyVisible(n){return(!n.style||n.style.display!="none")&&(!n.style||n.style.visibility!="hidden")&&!n.hasAttribute("hidden")&&(!n.hasAttribute("aria-hidden")||n.getAttribute("aria-hidden")!="true"||n.className&&n.className.includes&&n.className.includes("fallback-image"))},parse(){if(this._maxElemsToParse>0){var n=this._doc.getElementsByTagName("*").length;if(n>this._maxElemsToParse)throw new Error("Aborting parsing document; "+n+" elements found")}this._unwrapNoscriptImages(this._doc);var r=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var s=this._getArticleMetadata(r);this._metadata=s,this._articleTitle=s.title;var i=this._grabArticle();if(!i)return null;if(this.log("Grabbed: "+i.innerHTML),this._postProcessContent(i),!s.excerpt){var o=i.getElementsByTagName("p");o.length&&(s.excerpt=o[0].textContent.trim())}var a=i.textContent;return{title:this._articleTitle,byline:s.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(i),textContent:a,length:a.length,excerpt:s.excerpt,siteName:s.siteName||this._articleSiteName,publishedTime:s.publishedTime}}},t.exports=e}(xh)),xh.exports}var Eh={exports:{}},M_;function sV(){return M_||(M_=1,function(t){var e={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function n(s){return(!s.style||s.style.display!="none")&&!s.hasAttribute("hidden")&&(!s.hasAttribute("aria-hidden")||s.getAttribute("aria-hidden")!="true"||s.className&&s.className.includes&&s.className.includes("fallback-image"))}function r(s,i={}){typeof i=="function"&&(i={visibilityChecker:i});var o={minScore:20,minContentLength:140,visibilityChecker:n};i=Object.assign(o,i);var a=s.querySelectorAll("p, pre, article"),l=s.querySelectorAll("div > br");if(l.length){var c=new Set(a);[].forEach.call(l,function(d){c.add(d.parentNode)}),a=Array.from(c)}var u=0;return[].some.call(a,function(d){if(!i.visibilityChecker(d))return!1;var f=d.className+" "+d.id;if(e.unlikelyCandidates.test(f)&&!e.okMaybeItsACandidate.test(f)||d.matches("li p"))return!1;var h=d.textContent.trim().length;return h<i.minContentLength?!1:(u+=Math.sqrt(h-i.minContentLength),u>i.minScore)})}t.exports=r}(Eh)),Eh.exports}var Ah,F_;function iV(){if(F_)return Ah;F_=1;var t=rV(),e=sV();return Ah={Readability:t,isProbablyReaderable:e},Ah}var oV=iV();const aV={class:"prose"},lV=me({__name:"Home",setup(t){const e=C8(rl);async function n(){const r=await Dt.prompt(Ya("articles.prompt"),{label:Ya("articles.url")});r&&await Dt.loading(Ya("articles.adding"),async()=>{const i=await(await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`)).json(),o=new DOMParser,a=new oV.Readability(o.parseFromString(i.contents,"text/html")).parse();a&&await rl.create({title:a.title??r,description:a.excerpt,body:a.content,externalUrl:r})})}return(r,s)=>{const i=Xi,o=wt,a=iy;return V(),ce(a,null,{default:te(()=>[Ee("div",aV,[Ee("ol",null,[(V(!0),Te(Ze,null,er(I(e),l=>(V(),Te("li",{key:l.url},[oe(i,{route:"read","route-params":{article:l.slug}},{default:te(()=>[nt(Ne(l.title),1)]),_:2},1032,["route-params"])]))),128))])]),oe(o,{onClick:s[0]||(s[0]=l=>n())},{default:te(()=>[nt(Ne(r.$t("articles.add")),1)]),_:1})]),_:1})}}}),cV={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function uV(t,e){return V(),Te("svg",cV,e[0]||(e[0]=[Ee("g",{fill:"currentColor"},[Ee("path",{d:"M5 6a1 1 0 0 1 1-1h4a1 1 0 1 0 0-2H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-4a1 1 0 1 0-2 0v4a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6zm10-3a1 1 0 1 0 0 2h2.586l-6.293 6.293a1 1 0 0 0 1.414 1.414L19 6.414V9a1 1 0 1 0 2 0V4a1 1 0 0 0-1-1h-5z"})],-1)]))}const dV=ot({name:"majesticons-external-link-line",render:uV}),fV={class:"prose"},hV={class:"not-prose flex flex-row items-center gap-2"},pV={class:"text-2xl font-semibold"},mV={key:0},gV={key:1},yV=me({__name:"Reader",props:{article:{}},setup(t){return(e,n)=>{const r=dV,s=wt,i=iy,o=Gm("safe-html");return V(),ce(i,null,{default:te(()=>[Ee("article",fV,[Ee("div",hV,[Ee("h2",pV,Ne(e.article.title),1),e.article.externalUrl?(V(),ce(s,{key:0,variant:"ghost",size:"icon",href:e.article.externalUrl},{default:te(()=>[oe(r,{class:"size-5"})]),_:1},8,["href"])):ze("",!0)]),e.article.body?Rl((V(),Te("div",mV,null,512)),[[o,e.article.body]]):(V(),Te("p",gV,Ne(e.$t("articles.empty")),1))])]),_:1})}}}),bV={article(t){return Sd(rl).find(n=>n.slug===t)}},vV=K6([{name:"home",path:"/",component:lV},{name:"read",path:"/read/:article",component:yV}]);zB(nV,{plugins:[A8({messages:Object.assign({"/src/lang/en.yaml":()=>So(()=>import("./en-C0ayr00U.js"),[])})}),J6({routes:vV,bindings:bV}),$8({models:Object.assign({"/src/models/Article.schema.ts":Pk,"/src/models/Article.ts":dO})}),l5(),DH()]});export{HR as g};
//# sourceMappingURL=index-DqYo7dQ8.js.map
